!function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(f&&f(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={3:0},o={3:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{0:1,8:1,9:1,10:1}[e]&&t.push(a[e]=new Promise((function(t,n){for(var r=e+".423ea8326b4857e83bd4.css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var l=(f=i[c]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(l===r||l===o))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var f;if((l=(f=u[c]).getAttribute("data-href"))===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({}[e]||e)+".bundle."+{0:"7dd0ac998e86b8f2fb1b",1:"57197f3fce3b4e7e87be",2:"bd136a0554054e34dbeb",5:"f96338662082ffac379c",6:"19168320fc5b0a3adc21",7:"8004d119a9fc661e6821",8:"3054c8efd6a282273f51",9:"19c1dc7000afbfbb7606",10:"0f558d36f10d14d443d4",11:"565d8ad244ec623c48d2",12:"8cc1777e285ec44524b8",13:"d21fab79c2ee634817b5",14:"8fcf41a48d2df80d0e43",15:"fb50134fb4522a380baf",16:"2d9a9e50137e2d9bd79e",17:"68b1d9b1d8e8a11efe5e",18:"b8528c5be49244b59d08"}[e]+".js"}(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=l;i.push([1374,4]),n()}({11:function(e,t,n){"use strict";n(424);var r=n(313),a=n(0),o=n.n(a),i=n(1),s=n.n(i);n(878);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=u(t).call(this,e),n=!a||"object"!==c(a)&&"function"!=typeof a?f(r):a,m(f(n),"isRange",(function(e,t){return e.row<=t.row&&e.col<=t.col})),m(f(n),"highlightCells",(function(e){for(var t=[],r=0;r<n.props.Rows;r++){for(var a=[],o=0;o<n.props.Columns;o++){var i={row:r,col:o};n.isRange(i,e)?i.className="hover":n.isRange(e,n.emptyCell)&&n.isRange(i,n.state.selectedCell)&&(i.className="selectedBefore"),a.push(i)}t.push(a)}n.setState({table:t})})),n.emptyCell={row:-1,column:-1},n.state={table:[[]],selectedCell:n.props.selectedCell},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.highlightCells(this.emptyCell)}},{key:"onClick",value:function(e){this.setState({selectedCell:e}),this.highlightCells(e),this.props.onClick&&this.props.onClick(e),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.Columns,n={display:this.props.visible?"block":"none",minWidth:t*this.props.boxSize+(t+5)*this.props.cellBorder};return o.a.createElement("div",{className:"layoutChooser layoutChooser-dropdown-menu",role:"menu",style:n},o.a.createElement("table",null,o.a.createElement("tbody",null,this.state.table.map((function(t,n){return o.a.createElement("tr",{key:n},t.map((function(t,n){return o.a.createElement("td",{className:t.className,style:{width:e.props.boxSize,height:e.props.boxSize,border:"solid 1px black"},key:n,onMouseEnter:function(){return e.highlightCells(t)},onMouseLeave:function(){return e.highlightCells(e.emptyCell)},onClick:function(){return e.onClick(t)}})})))})))))}}])&&l(n.prototype,r),a&&l(n,a),t}(a.PureComponent);m(d,"propTypes",{Rows:s.a.number.isRequired,Columns:s.a.number.isRequired,visible:s.a.bool.isRequired,selectedCell:s.a.object,boxSize:s.a.number.isRequired,cellBorder:s.a.number.isRequired,onClick:s.a.func,onChange:s.a.func}),m(d,"defaultProps",{Rows:3,Columns:3,visible:!0,boxSize:20,cellBorder:1,selectedCell:{row:-1,col:-1}});n(879);var h=n(34),g=n(28),v=n.n(g);function y(e){var t=e.isActive,n=e.icon,r=e.labelWhenActive,a=e.onClick,i=v()(e.className,{active:t}),s="string"==typeof n?{name:n}:n,c=t&&r?r:e.label,l=e.isExpanded?"caret-up":"caret-down",u=e.isExpandable&&o.a.createElement(h.a,{name:l,className:"expand-caret"}),f=e.label.toLowerCase();return o.a.createElement("div",{className:i,onClick:function(t){a&&a(t,e)},"data-cy":f},s&&o.a.createElement(h.a,s),o.a.createElement("div",{className:"toolbar-button-label"},c,u))}y.propTypes={id:s.a.string,isActive:s.a.bool,label:s.a.string.isRequired,labelWhenActive:s.a.string,className:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),onClick:s.a.func,isExpandable:s.a.bool,isExpanded:s.a.bool},y.defaultProps={isActive:!1,className:"toolbar-button"};var b=y;function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=S(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==w(a)&&"function"!=typeof a?O(r):a,P(O(n),"state",{dropdownVisible:n.props.dropdownVisible}),P(O(n),"onClick",(function(){n.setState({dropdownVisible:!n.state.dropdownVisible})})),P(O(n),"onChange",(function(e){n.props.onChange&&n.props.onChange(e)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.dropdownVisible!==e.dropdownVisible&&this.setState({dropdownVisible:this.props.dropdownVisible})}},{key:"render",value:function(){return o.a.createElement("div",{className:"btn-group"},o.a.createElement(b,{isActive:this.state.dropdownVisible,label:"Layout",icon:"th",onClick:this.onClick}),o.a.createElement(d,{visible:this.state.dropdownVisible,onChange:this.onChange,onClick:this.onClick,selectedCell:this.props.selectedCell}))}}])&&E(n.prototype,r),a&&E(n,a),t}(a.PureComponent);P(C,"defaultProps",{dropdownVisible:!1}),P(C,"propTypes",{dropdownVisible:s.a.bool.isRequired,onChange:s.a.func,selectedCell:s.a.object});var k=n(168);n(880);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return r=this,a=(e=D(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==j(a)&&"function"!=typeof a?T(r):a,_(T(n),"getHeader",(function(){return n.props.customHeader?n.props.customHeader:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tableListHeaderTitle"},n.props.headerTitle),o.a.createElement("div",{className:"numberOfItems"},n.props.children.length))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"tableList"},!this.props.headless&&o.a.createElement("div",{className:"tableListHeader",onClick:this.onHeaderClick},this.getHeader()),o.a.createElement("div",{className:"tableListContent"},this.props.children))}}])&&x(n.prototype,r),a&&x(n,a),t}(a.Component);_(A,"propTypes",{customHeader:s.a.node,defaultItems:s.a.object,children:s.a.node.isRequired,headerTitle:s.a.string,headless:s.a.bool}),_(A,"defaultProps",{headless:!1});n(881);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=L(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==R(a)&&"function"!=typeof a?U(r):a,V(U(n),"onItemClick",(function(e){n.props.onItemClick&&(e.preventDefault(),e.stopPropagation(),n.props.onItemClick(e,n.props.itemKey))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"tableListItem ".concat(this.props.itemClass),onClick:this.onItemClick},o.a.createElement("div",{className:"itemIndex ".concat(this.props.itemMetaClass)},this.props.itemIndex,this.props.itemMeta,o.a.createElement("span",{className:"warning-icon"},o.a.createElement(h.a,{name:"exclamation-triangle"}))),o.a.createElement("div",{className:"itemContent"},this.props.children))}}])&&M(n.prototype,r),a&&M(n,a),t}(a.Component);V(B,"propTypes",{children:s.a.node,itemClass:s.a.string,itemIndex:s.a.number,itemMeta:s.a.node,itemMetaClass:s.a.string,itemKey:s.a.oneOfType([s.a.string,s.a.number]),onItemClick:s.a.func.isRequired}),V(B,"defaultProps",{itemMeta:null,itemMetaClass:""});n(763);var z=n(102);n(882),n(883);s.a.arrayOf(s.a.shape({name:s.a.string,Component:s.a.any,customProps:s.a.object,hidden:s.a.bool})),s.a.object;n(884);var H=function(e){return e};function q(e){var t=e.onResetPreferences,n=e.onSave,r=e.onCancel,a=e.hasErrors,i=e.t,s=void 0===i?H:i;return o.a.createElement("div",{className:"footer"},o.a.createElement("button",{className:"btn btn-danger pull-left","data-cy":"reset-default-btn",onClick:t},s("Reset to Defaults")),o.a.createElement("div",null,o.a.createElement("div",{onClick:r,"data-cy":"cancel-btn",className:"btn btn-default"},s("Cancel")),o.a.createElement("button",{className:"btn btn-primary","data-cy":"save-btn",disabled:a,onClick:n},s("Save"))))}q.propTypes={onResetPreferences:s.a.func,onSave:s.a.func,onCancel:s.a.func,hasErrors:s.a.bool,t:s.a.func};n(119);s.a.array.isRequired,s.a.func.isRequired,s.a.string,s.a.array,s.a.array;n(885);s.a.string.isRequired,s.a.array.isRequired,s.a.func.isRequired;n(886);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X,Q,Z,$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,J(t).call(this,e))).state={checked:!!e.checked,label:e.label},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),n=t,(r=[{key:"handleChange",value:function(e){var t=e.target.checked;this.setState({checked:t}),this.props.onChange&&this.props.onChange(t)}},{key:"componentDidUpdate",value:function(e){var t=e.checked,n=void 0!==t&&t,r=e.label;this.state.checked===n&&this.state.label===r||this.setState({checked:n,label:r})}},{key:"render",value:function(){var e;return e=this.state.checked?o.a.createElement("span",{className:"ohif-checkbox ohif-checked"}):o.a.createElement("span",{className:"ohif-checkbox"}),o.a.createElement("div",{className:"ohif-check-container"},o.a.createElement("form",null,o.a.createElement("label",{className:"ohif-check-label"},o.a.createElement("input",{type:"checkbox",checked:this.state.checked,onChange:this.handleChange.bind(this)}),e,this.state.label)))}}])&&W(n.prototype,r),a&&W(n,a),t}(a.Component);X=$,Q="propTypes",Z={label:s.a.string.isRequired,checked:s.a.bool,onChange:s.a.func},Q in X?Object.defineProperty(X,Q,{value:Z,enumerable:!0,configurable:!0,writable:!0}):X[Q]=Z;n(887);var ee=n(65);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=re(t).call(this,e),n=!a||"object"!==te(a)&&"function"!=typeof a?ae(r):a,ie(ae(n),"handleInputChange",(function(e){var t=e.target,r=t.value;"range"===t.type&&(r=parseFloat(t.value));var a=t.name;n.setState(ie({},a,r)),"cineFrameRate"===a&&n.props.onFrameRateChanged&&n.props.onFrameRateChanged(parseFloat(r))})),ie(ae(n),"onClickPlayPause",(function(){var e=!n.state.isPlaying;n.setState({isPlaying:e}),n.props.onPlayPauseChanged&&n.props.onPlayPauseChanged(e)})),ie(ae(n),"onClickNextButton",(function(e){n.props.onClickNextButton&&n.props.onClickNextButton(e)})),ie(ae(n),"onClickBackButton",(function(e){n.props.onClickBackButton&&n.props.onClickBackButton(e)})),ie(ae(n),"onClickSkipToStart",(function(e){n.props.onClickSkipToStart&&n.props.onClickSkipToStart(e)})),ie(ae(n),"onClickSkipToEnd",(function(e){n.props.onClickSkipToEnd&&n.props.onClickSkipToEnd(e)})),n.state={cineFrameRate:e.cineFrameRate,isPlaying:e.isPlaying},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.isPlaying===e.isPlaying&&this.props.isPlaying===this.state.isPlaying||this.setState({isPlaying:this.props.isPlaying}),this.props.cineFrameRate===e.cineFrameRate&&this.props.cineFrameRate===this.state.cineFrameRate||this.setState({cineFrameRate:this.props.cineFrameRate})}},{key:"render",value:function(){var e=this.props.t;return o.a.createElement("div",{className:"CineDialog"},o.a.createElement("div",{className:"noselect double-row-style"},o.a.createElement("div",{className:"cine-controls"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{title:e("Skip to first image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickSkipToStart},o.a.createElement(h.a,{name:"fast-backward"})),o.a.createElement("button",{title:e("Previous image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickBackButton},o.a.createElement(h.a,{name:"step-backward"})),o.a.createElement("button",{title:e("Play / Stop"),className:"btn","data-toggle":"tooltip",onClick:this.onClickPlayPause},o.a.createElement(h.a,{name:this.state.isPlaying?"stop":"play"})),o.a.createElement("button",{title:e("Next image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickNextButton},o.a.createElement(h.a,{name:"step-forward"})),o.a.createElement("button",{title:e("Skip to last image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickSkipToEnd},o.a.createElement(h.a,{name:"fast-forward"})))),o.a.createElement("div",{className:"cine-options"},o.a.createElement("div",{className:"fps-section"},o.a.createElement("input",{type:"range",name:"cineFrameRate",min:this.props.cineMinFrameRate,max:this.props.cineMaxFrameRate,step:this.props.cineStepFrameRate,value:this.state.cineFrameRate,onChange:this.handleInputChange})),o.a.createElement("span",{className:"fps"},this.state.cineFrameRate.toFixed(1)," ",e("fps")))))}}])&&ne(n.prototype,r),a&&ne(n,a),t}(a.PureComponent);ie(se,"propTypes",{cineMinFrameRate:s.a.number.isRequired,cineMaxFrameRate:s.a.number.isRequired,cineStepFrameRate:s.a.number.isRequired,cineFrameRate:s.a.number.isRequired,isPlaying:s.a.bool.isRequired,onPlayPauseChanged:s.a.func,onFrameRateChanged:s.a.func,onClickNextButton:s.a.func,onClickBackButton:s.a.func,onClickSkipToStart:s.a.func,onClickSkipToEnd:s.a.func,t:s.a.func.isRequired}),ie(se,"defaultProps",{cineMinFrameRate:1,cineMaxFrameRate:90,cineStepFrameRate:1,cineFrameRate:24,isPlaying:!1});var ce=Object(ee.i)("CineDialog")(se);n(888);function le(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){le(o,r,a,i,s,"next",e)}function s(e){le(o,r,a,i,s,"throw",e)}i(void 0)}))}}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var he=[{key:"jpg",value:"jpg"},{key:"png",value:"png"}],ge=function(e){var t=e.activeViewport,n=e.onClose,r=e.updateViewportPreview,i=e.enableViewport,s=e.disableViewport,c=e.toggleAnnotations,l=e.loadImage,u=e.downloadBlob,f=e.defaultSize,p=e.minimumSize,m=e.maximumSize,d=e.canvasClass,g=de(Object(z.c)("ViewportDownloadForm"),1)[0],y=de(Object(a.useState)("image"),2),b=y[0],w=y[1],E=de(Object(a.useState)("jpg"),2),S=E[0],O=E[1],I=de(Object(a.useState)({width:f,height:f}),2),P=I[0],C=I[1],k=de(Object(a.useState)(!0),2),j=k[0],x=k[1],D=de(Object(a.useState)(!0),2),T=D[0],N=D[1],_=de(Object(a.useState)({width:1,height:1}),2),A=_[0],R=_[1],M=de(Object(a.useState)(),2),L=M[0],U=M[1],F=de(Object(a.useState)({width:f,height:f}),2),V=F[0],B=F[1],H=de(Object(a.useState)({ref:Object(a.createRef)(),width:f,height:f}),2),q=H[0],G=H[1],W=de(Object(a.useState)({src:null,width:f,height:f}),2),Y=W[0],J=W[1],K=de(Object(a.useState)({width:!1,height:!1,filename:!1}),2),X=K[0],Q=K[1],Z=Object.values(X).includes(!0),$=Object(a.useRef)(null),ee=function(e,t){var n="height"===t?"width":"height",r=e.target.value.replace(/\D/,""),a=""===r,o=pe({},P),i=a?"":Math.min(r,m);i!==P[t]&&(o[t]=i,T&&""!==o[n]&&(o[n]=Math.round(o[t]*A[n])),C(o),a||(B(o),G((function(e){return pe({},e,{},o)}))))},te={width:g("minWidthError"),height:g("minHeightError"),filename:g("emptyFilenameError")},ne=function(e){return X[e]?o.a.createElement("div",{className:"input-error"},te[e]):null},re=function(e){return e>=p?e:p},ae=Object(a.useCallback)(ue(regeneratorRuntime.mark((function e(){var n,a,o,i,s,u,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,L,P.width,P.height);case 2:return n=e.sent,a=n.width,o=n.height,c(j,L),i={height:re(o),width:re(a)},B(i),G((function(e){return pe({},e,{},i)})),e.next=11,r(L,q.ref.current,S);case 11:s=e.sent,u=s.dataUrl,f=s.width,p=s.height,J((function(e){return pe({},e,{src:u,width:re(f),height:re(p)})}));case 16:case"end":return e.stop()}}),e)}))),[t,L,j,l,c,r,S,q.ref,p,m,V]);return Object(a.useEffect)((function(){return i(L),function(){s(L)}}),[s,i,L]),Object(a.useEffect)((function(){null!==$.current&&clearTimeout($.current),$.current=setTimeout((function(){$.current=null,ae()}),1e3)}),[t,L,j,P,l,c,r,S,q.ref,p,m]),Object(a.useEffect)((function(){var e=P.width,t=P.height;Q(pe({},{width:e<p,height:t<p,filename:!b}))}),[P,b,p]),o.a.createElement("div",{className:"ViewportDownloadForm"},o.a.createElement("div",{className:"title"},g("formTitle")),o.a.createElement("div",{className:"file-info-container","data-cy":"file-info-container"},o.a.createElement("div",{className:"dimension-wrapper"},o.a.createElement("div",{className:"dimensions"},o.a.createElement("div",{className:"width"},o.a.createElement(Vr,{type:"number",min:p,max:m,value:P.width,label:g("imageWidth"),onChange:function(e){return ee(e,"width")},"data-cy":"image-width"}),ne("width")),o.a.createElement("div",{className:"height"},o.a.createElement(Vr,{type:"number",min:p,max:m,value:P.height,label:g("imageHeight"),onChange:function(e){return ee(e,"height")},"data-cy":"image-height"}),ne("height"))),o.a.createElement("div",{className:"keep-aspect-wrapper"},o.a.createElement("button",{id:"keep-aspect",className:v()("form-button btn",T?"active":""),"data-cy":"keep-aspect",alt:g("keepAspectRatio"),onClick:function(){var e=P.width,t=P.height,n=pe({},n);if(!T){var r=Math.min(e,t);n.width=e/r,n.height=t/r,R(n)}N(!T)}},o.a.createElement(h.a,{name:T?"link":"unlink",alt:T?"Dismiss Aspect":"Keep Aspect"})))),o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"file-name"},o.a.createElement(Vr,{type:"text","data-cy":"file-name",value:b,onChange:function(e){return w(e.target.value)},label:g("filename"),id:"file-name"}),ne("filename")),o.a.createElement("div",{className:"file-type"},o.a.createElement(gr,{value:S,"data-cy":"file-type",onChange:function(e){return O(e.target.value)},options:he,label:g("fileType")}))),o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"show-annotations"},o.a.createElement("label",{htmlFor:"show-annotations",className:"form-check-label"},o.a.createElement("input",{id:"show-annotations","data-cy":"show-annotations",type:"checkbox",className:"form-check-input",checked:j,onChange:function(e){return x(e.target.checked)}}),g("showAnnotations"))))),o.a.createElement("div",{style:{height:V.height,width:V.width,position:"absolute",left:"9999px"},ref:function(e){return U(e)}},o.a.createElement("canvas",{className:d,style:{height:q.height,width:q.width,display:"block"},width:q.width,height:q.height,ref:q.ref})),Y.src?o.a.createElement("div",{className:"preview","data-cy":"image-preview"},o.a.createElement("div",{className:"preview-header"}," ",g("imagePreview")),o.a.createElement("img",me({className:"viewport-preview",src:Y.src,alt:g("imagePreview"),"data-cy":"image-preview"},"data-cy","viewport-preview-img"))):o.a.createElement("div",{className:"loading-image"},o.a.createElement(h.a,{name:"circle-notch",className:"icon-spin"}),g("loadingPreview")),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"action-cancel"},o.a.createElement("button",{type:"button","data-cy":"cancel-btn",className:"btn btn-danger",onClick:n},g("Buttons:Cancel"))),o.a.createElement("div",{className:"action-save"},o.a.createElement("button",{disabled:Z,onClick:function(){u(b||"image",S,L,q.ref.current)},className:"btn btn-primary","data-cy":"download-btn"},g("Buttons:Download")))))};ge.propTypes={onClose:s.a.func.isRequired,activeViewport:s.a.object,updateViewportPreview:s.a.func.isRequired,enableViewport:s.a.func.isRequired,disableViewport:s.a.func.isRequired,toggleAnnotations:s.a.func.isRequired,loadImage:s.a.func.isRequired,downloadBlob:s.a.func.isRequired,defaultSize:s.a.number.isRequired,minimumSize:s.a.number.isRequired,maximumSize:s.a.number.isRequired,canvasClass:s.a.string.isRequired};var ve=ge;n(889);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=we(t)).call.apply(e,[this].concat(i)))||"object"!==ye(a)&&"function"!=typeof a?Ee(r):a,Oe(Ee(n),"getModalitiesStyle",(function(){return{}})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.studyData,t=e.StudyDate,n=e.StudyDescription,r=e.modalities,a=e.studyAvailable,i=this.props.active?" active":"",s=t&&n;return o.a.createElement("div",{className:"studyBrowseItem".concat(i),onClick:this.props.onClick},o.a.createElement("div",{className:"studyItemBox"},o.a.createElement("div",{className:"studyModality"},o.a.createElement("div",{className:"studyModalityText",style:this.getModalitiesStyle()},r)),o.a.createElement("div",{className:"studyText"},s?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"studyDate"},t),o.a.createElement("div",{className:"studyDescription"},n)):o.a.createElement("div",{className:"studyAvailability"},a?o.a.createElement(o.a.Fragment,null,"N/A"):o.a.createElement(o.a.Fragment,null,"Click to load")))))}}])&&be(n.prototype,r),a&&be(n,a),t}(a.Component);Oe(Ie,"propTypes",{onClick:s.a.func.isRequired,studyData:s.a.object.isRequired,active:s.a.bool});n(890);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return r=this,a=(e=ke(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==Pe(a)&&"function"!=typeof a?je(r):a,De(je(n),"getBrowserItems",(function(){return n.props.studyListData.map((function(e,t){return o.a.createElement(Ie,{key:t,studyData:e,active:e.StudyInstanceUID===n.props.activeStudyInstanceUID,onClick:function(t){return n.props.onClick(e)}})}))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"studiesList ".concat(this.props.class)},this.getBrowserItems())}}])&&Ce(n.prototype,r),a&&Ce(n,a),t}(a.Component);De(Te,"propTypes",{class:s.a.string,studyListData:s.a.array.isRequired,onClick:s.a.func.isRequired,activeStudyInstanceUID:s.a.string});n(891);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=function(e){function t(e){var n,r,a,o,i,s,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ae(t).call(this,e),n=!a||"object"!==Ne(a)&&"function"!=typeof a?Re(r):a,Le(Re(n),"scrollNavDown",(function(e){var t=n.scrollableElement,r=t.scrollTop,a=t.offsetHeight,o=t.scrollHeight-a,i=r+n.props.scrollStep;i=i>o?o:i,n.scrollableElement.scrollTop=i})),Le(Re(n),"scrollNavUp",(function(e){var t=n.scrollableElement.scrollTop-n.props.scrollStep;t=t<0?0:t,n.scrollableElement.scrollTop=t})),Le(Re(n),"adjustMargins",(function(){if(n.props.hideScrollbar){var e=n.props.scrollX?1:0,t=n.props.scrollY?1:0,r=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="100px",t.style.height="100px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth,r=e.offsetHeight;t.style.overflow="scroll";var a=e.offsetWidth,o=e.offsetHeight;return n===a&&(a=t.clientWidth),r===o&&(o=t.clientHeight),document.body.removeChild(t),[n-a,r-o]}();n.scrollableElement.style.marginRight="".concat(0-r[0]*t,"px"),n.scrollableElement.style.marginBottom="".concat(0-r[1]*e,"px")}})),Le(Re(n),"scrollHandler",(function(){var e=n.scrollableElement,t=e.offsetHeight,r=e.scrollTop,a="";r&&(a+="canScrollUp"),r+t<e.scrollHeight&&(a+=" canScrollDown"),n.state.scrollAreaClasses!==a&&n.setState({scrollAreaClasses:a})})),n.state={scrollAreaClasses:""},n.scrollHandlerThrottled=(o=150,i=n.scrollHandler,l=!1,function e(){if(l)return s=arguments,void(c=this);l=!0,i.apply(this,arguments),setTimeout((function(){l=!1,s&&(e.apply(c,s),s=c=null)}),o)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t="scrollable";return this.props.scrollableClass&&(t+=" ".concat(this.props.scrollableClass)),this.props.scrollX&&(t+=" scrollX"),this.props.scrollY&&(t+=" scrollY"),o.a.createElement("div",{className:"scrollArea ".concat(this.props.class," ").concat(this.state.scrollAreaClasses)},o.a.createElement("div",{className:t,ref:function(t){e.scrollableElement=t},onScroll:this.scrollHandlerThrottled,onMouseEnter:this.scrollHandlerThrottled,onTransitionEnd:this.scrollHandlerThrottled},this.props.children),o.a.createElement("div",{className:"scrollNav scrollNavUp",onClick:this.scrollNavUp},o.a.createElement(h.a,{name:"angle-double-up"})),o.a.createElement("div",{className:"scrollNav scrollNavDown",onClick:this.scrollNavDown},o.a.createElement(h.a,{name:"angle-double-down"})))}},{key:"componentDidMount",value:function(){this.adjustMargins(),this.scrollHandler(),window.addEventListener("resize",this.adjustMargins)}},{key:"componentDidUpdate",value:function(){this.adjustMargins(),this.scrollHandler()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.adjustMargins)}}])&&_e(n.prototype,r),a&&_e(n,a),t}(a.Component);Le(Ue,"propTypes",{children:s.a.node.isRequired,class:s.a.string,scrollableClass:s.a.string,scrollX:s.a.bool,scrollY:s.a.bool,hideScrollbar:s.a.bool,scrollStep:s.a.number}),Le(Ue,"defaultProps",{hideScrollbar:!0,class:"flex-grow fit",scrollY:!0,scrollX:!1,scrollStep:100});n(892);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return a=this,i=(e=ze(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==Fe(i)&&"function"!=typeof i?He(a):i,Ge(He(n),"getSeriesItems",(function(){return n.props.seriesItems.map((function(e,t){return o.a.createElement(r.a,Ve({key:e.displaySetInstanceUID,id:"series_thumb_".concat(t)},e,{active:e.displaySetInstanceUID===n.props.activeDisplaySetInstanceUID,onClick:function(){return n.props.onClick(e)}}))}))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"study-browser-series clearfix thumbnails-wrapper"},o.a.createElement("div",{className:"study-series-container"},this.getSeriesItems())))}}])&&Be(n.prototype,a),i&&Be(n,i),t}(a.Component);Ge(We,"propTypes",{seriesItems:s.a.array.isRequired,onClick:s.a.func.isRequired,activeDisplaySetInstanceUID:s.a.string});n(893);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ke(t).call(this,e),n=!a||"object"!==Ye(a)&&"function"!=typeof a?Xe(r):a,Ze(Xe(n),"getSeriesItems",(function(){var e;if(n.props.seriesData)e=n.props.seriesData;else if(n.state.activeStudyInstanceUID){e=n.props.studyListData.find((function(e){return e.StudyInstanceUID===n.state.activeStudyInstanceUID})).thumbnails}else e=n.props.studyListData[0].thumbnails;return e||[]})),Ze(Xe(n),"getSmallListItems",(function(){return(n.getSeriesItems()||[]).map((function(e,t){var r=e.displaySetInstanceUID===n.state.activeDisplaySetInstanceUID;return o.a.createElement("div",{key:t,className:"series-item ".concat(r?"active":"")})}))})),Ze(Xe(n),"onStudyClick",(function(e){n.props.onStudySelected&&n.props.onStudySelected(e),n.setState({activeStudyInstanceUID:e.StudyInstanceUID,seriesQuickSwitchOpen:!0})})),Ze(Xe(n),"onSeriesClick",(function(e){n.setState({activeDisplaySetInstanceUID:e.displaySetInstanceUID}),n.props.onSeriesSelected(e)})),Ze(Xe(n),"showSeriesSwitch",(function(){n.setState({seriesQuickSwitchOpen:!0})})),Ze(Xe(n),"hideSeriesSwitch",(function(){n.setState({seriesQuickSwitchOpen:!1})})),n.state={seriesQuickSwitchOpen:!1,sideClass:n.props.side||"",activeStudyInstanceUID:n.props.activeStudyInstanceUID,activeDisplaySetInstanceUID:n.props.activeDisplaySetInstanceUID},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props;t.activeStudyInstanceUID!==e.activeStudyInstanceUID&&this.setState({activeStudyInstanceUID:t.activeStudyInstanceUID}),t.activeDisplaySetInstanceUID!==e.activeDisplaySetInstanceUID&&this.setState({activeDisplaySetInstanceUID:t.activeDisplaySetInstanceUID})}},{key:"render",value:function(){var e=this.state.seriesQuickSwitchOpen?"series-triggered":"";return o.a.createElement("div",{className:"series-quick-switch clearfix noselect ".concat(this.state.sideClass," ").concat(e),onMouseLeave:this.hideSeriesSwitch},o.a.createElement("div",{className:"series-switch",onMouseEnter:this.showSeriesSwitch},o.a.createElement("div",{className:"title-label"},"Series"),o.a.createElement("div",{className:"series-box"},this.getSmallListItems(),o.a.createElement(Ue,{scrollStep:201,class:"series-browser"},o.a.createElement(We,{seriesItems:this.getSeriesItems(),onClick:this.onSeriesClick,activeDisplaySetInstanceUID:this.state.activeDisplaySetInstanceUID})))),o.a.createElement("div",{className:"study-switch"},o.a.createElement("div",{className:"title-label"},"Study"),o.a.createElement("div",{className:"study-box"},o.a.createElement(Ue,{scrollStep:91,class:"study-browser"},o.a.createElement(Te,{studyListData:this.props.studyListData,onClick:this.onStudyClick,activeStudyInstanceUID:this.state.activeStudyInstanceUID})))))}}])&&Je(n.prototype,r),a&&Je(n,a),t}(a.Component);Ze($e,"propTypes",{side:s.a.string,studyListData:s.a.array.isRequired,onSeriesSelected:s.a.func.isRequired,seriesData:s.a.array,onStudySelected:s.a.func,activeStudyInstanceUID:s.a.string,activeDisplaySetInstanceUID:s.a.string});n(894);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=nt(t).call(this),e=!r||"object"!==et(r)&&"function"!=typeof r?rt(n):r,ot(rt(e),"state",{badgeNumbers:[]}),ot(rt(e),"onClickOption",(function(t){var n=t;e.props.value===t&&(n=null),e.props.onValueChanged&&e.props.onValueChanged(n)})),e.onStateEvent=e.onStateEvent.bind(rt(e)),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),n=t,(r=[{key:"onStateEvent",value:function(e){var t=this.props.options.findIndex((function(t){return t.value===e.detail.target}));if(t>-1){var n=this.state.badgeNumbers;n[t]=e.detail.badgeNumber,this.setState({badgeNumbers:n})}}},{key:"componentDidMount",value:function(){var e=this;this.props.options.forEach((function(t){t.stateEvent&&document.addEventListener(t.stateEvent,e.onStateEvent)}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.options.forEach((function(t,r){t.stateEvent&&t.stateEvent!==(e.options[r]?e.options[r].stateEvent:null)&&(document.removeEventListener(t.stateEvent,n.onStateEvent),document.addEventListener(t.stateEvent,n.onStateEvent))}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.options.forEach((function(t){t.stateEvent&&document.removeEventListener(t.stateEvent,e.onStateEvent)}))}},{key:"render",value:function(){var e=this,n=v()(t.className,"clearfix center-table"),r=this.props.options.map((function(t,n){var r=v()({roundedButtonWrapper:!0,noselect:!0,active:e.props.value===t.value}),a=t.label&&o.a.createElement("span",null,t.label),i="string"==typeof t.icon?{name:t.icon}:t.icon,s=t.bottomLabel&&o.a.createElement("div",{className:"bottomLabel"},t.bottomLabel),c=e.state.badgeNumbers[n],l=String(c).length>2;return c=c?l?99:c:null,o.a.createElement("div",{key:n,className:r,onClick:function(){return e.onClickOption(t.value)}},o.a.createElement("div",{className:"roundedButton"},a,c&&o.a.createElement("div",{className:"badgeNumber-container"},o.a.createElement("span",{className:"badgeNumber"},c,l&&"+")),i&&o.a.createElement(h.a,i)),s)}));return o.a.createElement("div",{className:n},r)}}])&&tt(n.prototype,r),a&&tt(n,a),t}(a.Component);ot(it,"className","RoundedButtonGroup"),ot(it,"propTypes",{options:s.a.arrayOf(s.a.shape({value:s.a.any,label:s.a.string,stateEvent:s.a.string,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})),value:s.a.string,onValueChanged:s.a.func}),ot(it,"defaultProps",{options:[],value:null});n(895);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mt=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=lt(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==st(a)&&"function"!=typeof a?ut(r):a,pt(ut(n),"onSelected",(function(e){n.props.onSelected(e,n.props.itemData)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.labelClass?this.props.labelClass:"";return o.a.createElement("label",{className:"wrapperLabel radioLabel "+e,htmlFor:this.props.id},o.a.createElement("input",{type:"radio",id:this.props.id,className:"radioInput",value:this.props.value,onChange:this.onSelected}),o.a.createElement("span",{className:"wrapperText"},this.props.label))}}])&&ct(n.prototype,r),a&&ct(n,a),t}(a.Component);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pt(mt,"propTypes",{value:s.a.string,label:s.a.string.isRequired,itemData:s.a.object.isRequired,labelClass:s.a.string,id:s.a.string.isRequired,onSelected:s.a.func.isRequired});var bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gt(this,vt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"selectTreeBreadcrumb"},o.a.createElement("label",{className:"wrapperLabel radioLabel",htmlFor:"selectTreeBreadcrumb"},o.a.createElement("input",{type:"radio",id:"selectTreeBreadcrumb",className:"treeNode radioInput",value:this.props.value,onChange:this.props.onSelected}),o.a.createElement("span",{className:"wrapperText"},o.a.createElement("span",{className:"backIcon"},o.a.createElement(h.a,{name:"fast-backward"})),this.props.label)))}}])&&ht(n.prototype,r),a&&ht(n,a),t}(a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bt,"propTypes",{label:s.a.string.isRequired,value:s.a.string.isRequired,onSelected:s.a.func.isRequired});var wt=n(63),Et=n.n(wt);function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=It(t).call(this,e),n=!a||"object"!==St(a)&&"function"!=typeof a?Pt(r):a,kt(Pt(n),"componentDidUpdate",(function(){n.props.onComponentChange&&n.props.onComponentChange()})),kt(Pt(n),"isLeafSelected",(function(e){return e&&!Array.isArray(e.items)})),kt(Pt(n),"getLabelClass",(function(e){var t="treeLeaf";return(n.state.searchTerm||Array.isArray(e.items))&&(t="treeNode"),t})),kt(Pt(n),"headerItem",(function(){var e=n.props.selectTreeFirstTitle;return n.state.currentNode&&n.props.selectTreeSecondTitle&&(e=n.props.selectTreeSecondTitle),o.a.createElement("div",{className:"wrapperLabel treeHeader"},o.a.createElement("div",{className:"wrapperText"},e),n.props.searchEnabled&&o.a.createElement("div",{className:"wrapperSearch"},o.a.createElement("div",{className:"searchIcon"},o.a.createElement(h.a,{name:"search"})),o.a.createElement("input",{type:"text",className:"searchInput",placeholder:"Search labels",autoFocus:n.props.autoFocus,onChange:n.searchLocations,value:n.state.searchTerm?n.state.searchTerm:""})))})),kt(Pt(n),"searchLocations",(function(e){n.setState({currentNode:null,searchTerm:e.currentTarget.value})})),kt(Pt(n),"onSelected",(function(e,t){return n.isLeafSelected(t)?n.setState({searchTerm:null,currentNode:null,value:null}):n.setState({currentNode:t}),n.props.onSelected(e,t)})),kt(Pt(n),"onBreadcrumbSelected",(function(){n.setState({currentNode:null})})),n.state={searchTerm:null,currentNode:null,value:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.getTreeItems();return o.a.createElement("div",{className:"selectTree selectTreeRoot"},o.a.createElement("div",{className:"treeContent"},this.headerItem(),o.a.createElement("div",{className:"treeOptions"},this.state.currentNode&&o.a.createElement(bt,{onSelected:this.onBreadcrumbSelected,label:this.state.currentNode.label,value:this.state.currentNode.value}),o.a.createElement("div",{className:"treeInputsWrapper"},o.a.createElement("div",{className:"treeInputs"},e)))))}},{key:"filterItems",value:function(){var e=this,t=[];return Et()(this.props.items).forEach((function(n){if(Array.isArray(n.items))n.items.forEach((function(n){var r=n.label.toLowerCase(),a=e.state.searchTerm.toLowerCase();-1!==r.indexOf(a)&&t.push(n)}));else{var r=n.label.toLowerCase(),a=e.state.searchTerm.toLowerCase();-1!==r.indexOf(a)&&t.push(n)}})),t}},{key:"getTreeItems",value:function(){var e=this;return(this.state.searchTerm?this.filterItems():this.state.currentNode?Et()(this.state.currentNode.items):Et()(this.props.items)).map((function(t,n){var r=n;return e.state.currentNode&&(r+="_".concat(e.state.currentNode.value)),o.a.createElement(mt,{key:r,id:"".concat("SelectTree","_").concat(t.value),name:n,itemData:t,value:t.value,label:t.label,labelClass:e.getLabelClass(t),onSelected:e.onSelected})}))}}])&&Ot(n.prototype,r),a&&Ot(n,a),t}(a.Component);kt(jt,"propTypes",{autoFocus:s.a.bool,searchEnabled:s.a.bool,selectTreeFirstTitle:s.a.string,selectTreeSecondTitle:s.a.string,onComponentChange:s.a.func,items:s.a.array.isRequired,onSelected:s.a.func.isRequired}),kt(jt,"defaultProps",{searchEnabled:!0,autoFocus:!0,selectTreeFirstTitle:"First Level itens",items:[]});n(896);function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mt=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Nt(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Dt(a)&&"function"!=typeof a?_t(r):a,Rt(_t(n),"onClose",(function(e){e.preventDefault(),e.stopPropagation(),n.props.onClose()})),Rt(_t(n),"onConfirm",(function(e){e.preventDefault(),e.stopPropagation(),n.props.onConfirm()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.isOpen&&o.a.createElement("div",{className:"simpleDialog ".concat(this.props.rootClass," "),ref:this.props.componentRef,style:this.props.componentStyle},o.a.createElement("form",null,o.a.createElement("div",{className:"header"},o.a.createElement("span",{className:"closeBtn",onClick:this.onClose},o.a.createElement("span",{className:"closeIcon"},"x")),o.a.createElement("h4",{className:"title"},this.props.headerTitle)),o.a.createElement("div",{className:"content"},this.props.children),o.a.createElement("div",{className:"foot",style:{width:"100%"}},o.a.createElement("button",{className:"btn btn-default",onClick:this.onClose},"Cancel"),o.a.createElement("button",{className:"btn btn-default",style:{float:"right"},onClick:this.onConfirm},"Submit")))))}}])&&Tt(n.prototype,r),a&&Tt(n,a),t}(a.Component);Rt(Mt,"propTypes",{children:s.a.node,componentRef:s.a.any,componentStyle:s.a.object,rootClass:s.a.string,isOpen:s.a.bool,headerTitle:s.a.string.isRequired,onClose:s.a.func.isRequired,onConfirm:s.a.func.isRequired}),Rt(Mt,"defaultProps",{isOpen:!0,componentStyle:{},rootClass:""}),Rt(Mt,"InputDialog",(function(e){var t=e.onSubmit,n=e.defaultValue,r=e.title,i=e.label,s=e.onClose,c=xt(Object(a.useState)(n),2),l=c[0],u=c[1];return o.a.createElement("div",{className:"InputDialog"},o.a.createElement(Mt,{headerTitle:r,onClose:s,onConfirm:function(){t(l),s()}},o.a.createElement(Vr,{type:"text",value:l,onChange:function(e){return u(e.target.value)},label:i})))}));var Lt=n(412),Ut=n.n(Lt),Ft=(n(903),{overlay:{zIndex:1071,backgroundColor:"rgb(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"}});Ut.a.setAppElement(document.getElementById("root"));var Vt=function(e){var t=e.className,n=e.closeButton,r=e.shouldCloseOnEsc,a=e.isOpen,i=e.fullscreen,s=e.title,c=e.onClose,l=e.children,u=i?v()("OHIFModal",t,"OHIFModal-fullscreen"):v()("OHIFModal",t);return o.a.createElement(Ut.a,{className:u,"data-cy":"modal",shouldCloseOnEsc:r,isOpen:a,title:s,style:Ft},o.a.createElement(o.a.Fragment,null,s&&o.a.createElement("div",{className:"OHIFModal__header","data-cy":"modal-header"},o.a.createElement("h4",null,s),n&&o.a.createElement("button",{"data-cy":"close-button",onClick:c},"")),o.a.createElement("div",{className:"OHIFModal__content","data-cy":"modal-content"},l)))};Vt.propTypes={className:s.a.string,closeButton:s.a.bool,shouldCloseOnEsc:s.a.bool,isOpen:s.a.bool,title:s.a.string,onClose:s.a.func,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var Bt=Vt,zt=(n(904),function(e){var t=e.items,n=e.onClick;return o.a.createElement("div",{className:"ContextMenu",onContextMenu:function(e){return e.preventDefault()}},o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("button",{className:"form-action",onClick:function(){return n(e)}},o.a.createElement("span",{key:t},e.label)))}))))});zt.propTypes={items:s.a.array.isRequired,onClick:s.a.func.isRequired};var Ht=zt,qt=(n(905),function(e){var t=e.error,n=e.title,r=e.description,a=e.onRetry;return o.a.createElement("div",{className:"ErrorPage"},n&&o.a.createElement("h3",null,n),o.a.createElement("p",null,r),o.a.createElement(h.a,{className:"retry-icon",name:"rotate-right",width:"25px",height:"25px",onClick:a}),t&&o.a.createElement("div",{className:"error-container"},o.a.createElement("pre",null,t.message),o.a.createElement("pre",null,t.stack)))});qt.propTypes={error:s.a.object,title:s.a.string,description:s.a.string,onRetry:s.a.func},qt.defaultProps={description:"Oh snap, something went wrong, please try reloading",onRetry:function(){return window.location.reload()}};var Gt=qt,Wt=(n(906),n(6)),Yt=n.n(Wt),Jt=n(150);n(650),n(685),n(1126);function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Qt(e){var t=e.onDatesChange,n=e.startDate,r=e.endDate,a=(e.presets,Xt(e,["onDatesChange","startDate","endDate","presets"]));return o.a.createElement(Jt.DateRangePicker,Kt({},a,{startDate:n,endDate:r,renderCalendarInfo:function(){var a=e.presets;return o.a.createElement("div",{className:"PresetDateRangePicker_panel"},a.map((function(e){var a=e.text,i=e.start,s=e.end,c=n===i&&r===s;return o.a.createElement("button",{key:a,type:"button",className:"PresetDateRangePicker_button ".concat(c?"PresetDateRangePicker_button__selected":""),onClick:function(){return t({startDate:i,endDate:s,preset:!0})}},a)})))},onDatesChange:t,renderMonthElement:function e(t){var n=t.month,r=t.onMonthSelect,a=t.onYearSelect,i={margin:"0 5px"};return e.propTypes={onMonthSelect:s.a.func,onYearSelect:s.a.func},o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement("div",{style:i},o.a.createElement("select",{className:"DateRangePicker_select",value:n.month(),onChange:function(e){return r(n,e.target.value)}},Yt.a.months().map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))),o.a.createElement("div",{style:i},o.a.createElement("select",{className:"DateRangePicker_select",value:n.year(),onChange:function(e){return a(n,e.target.value)}},function(){for(var e=[],t=0;t<20;t++){var n=Yt()().year()-t;e.push(o.a.createElement("option",{value:n},n))}return e}())))},startDatePlaceholderText:"Start Date",endDatePlaceholderText:"End Date",phrases:{closeDatePicker:"Common:Close",clearDates:"Clear dates"}}))}Qt.propTypes={presets:s.a.arrayOf(s.a.shape({text:s.a.string,start:s.a.required,end:s.a.required})),onDatesChange:s.a.func.isRequired,startDate:s.a.instanceOf(Date),endDate:s.a.instanceOf(Date),month:s.a.instanceOf(Date)};var Zt=Qt;function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var en=function(e,t){return t||e||null},tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";if("number"==typeof t)return"end"===n?e:void e.subtract(t,"days")};function nn(e){var t=e.meta,n=e.values,r=e.onSort,i=e.onValueChange,s=e.sortFieldName,c=e.sortDirection,l=e.studyListDateFilterNumDays,u=n||{},f=u.studyDateTo,p=u.studyDateFrom,m=$t(Object(a.useState)(null),2),d=m[0],g=m[1],v=["sort","sort-up","sort-down"],y="asc"===c?v[1]:v[2],b=Yt()(),w=Yt()().subtract(7,"day"),E=Yt()().subtract(1,"month"),S=tn(b,l,"start"),O=tn(b,l,"end"),I=[{text:"Today",start:b,end:b},{text:"Last 7 days",start:w,end:b},{text:"Last 30 days",start:E,end:b}];return t.map((function(e,t){var a=e.displayText,c=e.fieldName,l=e.inputType,u=s===c?y:v[0];return o.a.createElement("th",{key:"".concat(c,"-").concat(t)},o.a.createElement("label",{htmlFor:"filter-".concat(c),onClick:function(){return r(c)}},"".concat(a),o.a.createElement(h.a,{name:u,style:{fontSize:"12px"}})),"text"===l&&o.a.createElement("input",{type:"text",id:"filter-".concat(c),className:"form-control studylist-search",value:n[c],onChange:function(e){return i(c,e.target.value)}}),"date-range"===l&&o.a.createElement(Zt,{startDate:en(p,S),startDateId:"start-date",endDate:en(f,O),endDateId:"end-date",onDatesChange:function(e){var t=e.startDate,n=e.endDate;e.preset;i("studyDateFrom",t),i("studyDateTo",n)},focusedInput:d,onFocusChange:function(e){return g(e)},numberOfMonths:1,showClearDates:!0,anchorDirection:"left",presets:I,hideKeyboardShortcutsPanel:!0,isOutsideRange:function(e){return!Object(Jt.isInclusivelyBeforeDay)(e,Yt()())}}))}))}nn.propTypes={meta:s.a.arrayOf(s.a.shape({displayText:s.a.string.isRequired,fieldName:s.a.string.isRequired,inputType:s.a.oneOf(["text","date-range"]).isRequired,size:s.a.number.isRequired})).isRequired,values:s.a.object.isRequired,onSort:s.a.func.isRequired,sortFieldName:s.a.string,sortDirection:s.a.oneOf([null,"asc","desc"])},nn.defaultProps={};var rn=nn,an=n(315),on=function(e,t,n){return e in t?t[e]:n};function sn(e){var t=e.isLoading,n=e.hasError,r=e.studies,a=e.sort,i=e.onSort,s=e.filterValues,c=e.onFilterChange,l=e.onSelectItem,u=e.studyListDateFilterNumDays,f=e.displaySize,p=[{displayText:"Search",fieldName:"allFields",inputType:"text",size:100}],m=on(f,{large:[{displayText:"PatientName",fieldName:"PatientName",inputType:"text",size:330},{displayText:"MRN",fieldName:"PatientID",inputType:"text",size:378},{displayText:"AccessionNumber",fieldName:"AccessionNumber",inputType:"text",size:180},{displayText:"StudyDate",fieldName:"StudyDate",inputType:"date-range",size:300},{displayText:"Modality",fieldName:"modalities",inputType:"text",size:114},{displayText:"StudyDescription",fieldName:"StudyDescription",inputType:"text",size:335}],medium:[{displayText:"PatientName/Id",fieldName:"patientNameOrId",inputType:"text",size:250},{displayText:"Modality",fieldName:"modalities",inputType:"text",size:114},{displayText:"StudyDate",fieldName:"StudyDate",inputType:"date-range",size:300}],small:p},p),d=m.map((function(e){return e.size})).reduce((function(e,t){return e+t}));return o.a.createElement("table",{className:"table table--striped table--hoverable"},o.a.createElement("colgroup",null,m.map((function(e,t){var n=e.size/d*100;return o.a.createElement("col",{key:t,style:{width:"".concat(n,"%")}})}))),o.a.createElement("thead",{className:"table-head"},o.a.createElement("tr",{className:"filters"},o.a.createElement(rn,{meta:m,values:s,onSort:i,onValueChange:c,sortFieldName:a.fieldName,sortDirection:a.direction,studyListDateFilterNumDays:u}))),o.a.createElement("tbody",{className:"table-body","data-cy":"study-list-results"},t&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:m.length},o.a.createElement(an.a,null))),!t&&n&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:m.length},o.a.createElement("div",{className:"notFound"},"There was an error fetching studies"))),!t&&!r.length&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:m.length},o.a.createElement("div",{className:"notFound"},"No matching results"))),!t&&r.map((function(e,t){return o.a.createElement(cn,{key:"".concat(e.StudyInstanceUID,"-").concat(t),onClick:function(e){return l(e)},AccessionNumber:e.AccessionNumber||"",modalities:e.modalities,PatientID:e.PatientID||"",PatientName:e.PatientName||"",StudyDate:e.StudyDate,StudyDescription:e.StudyDescription||"",StudyInstanceUID:e.StudyInstanceUID,displaySize:f})}))))}function cn(e){var t=e.AccessionNumber,n=e.isHighlighted,r=e.modalities,a=e.PatientID,i=e.PatientName,s=e.StudyDate,c=e.StudyDescription,l=e.StudyInstanceUID,u=e.onClick,f=e.displaySize,p=o.a.createElement("tr",{onClick:function(){return u(l)},className:v()({active:n})},o.a.createElement("td",{className:v()({"empty-value":!i})},i||"Empty"),o.a.createElement("td",null,a),o.a.createElement("td",null,t),o.a.createElement("td",null,s),o.a.createElement("td",{className:v()({"empty-value":!r})},r||"Empty"),o.a.createElement("td",null,c)),m=o.a.createElement("tr",{onClick:function(){return u(l)},className:v()({active:n})},o.a.createElement("td",{style:{textAlign:"center"},className:v()({"empty-value":!i})},i||"Empty",o.a.createElement("div",{style:{textAlign:"center",color:"#60656f"}},a)),o.a.createElement("td",null,o.a.createElement("div",{style:{textAlign:"center"},className:v()({modalities:r,"empty-value":!r}),"aria-label":r,title:r},r||"Empty")),o.a.createElement("td",{style:{textAlign:"center"}},s)),d=o.a.createElement("tr",{onClick:function(){return u(l)},className:v()({active:n})},o.a.createElement("td",{style:{position:"relative",overflow:"hidden"}},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("div",{className:v()({"empty-value":!i}),style:{width:"150px",minWidth:"150px"}},o.a.createElement("div",{style:{fontWeight:500,paddingTop:"3px"}},i||"Empty"),o.a.createElement("div",{style:{color:"#60656f"}},a)),o.a.createElement("div",{className:"hide-xs",style:{whiteSpace:"pre-wrap",flexGrow:1,paddingLeft:"35px"}},c),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"80px",width:"80px"}},o.a.createElement("div",{className:v()({modalities:r,"empty-value":!r}),"aria-label":r,title:r},r||"Empty"),o.a.createElement("div",null,s)))));return on(f,{large:p,medium:m,small:d},d)}sn.propTypes={isLoading:s.a.bool.isRequired,hasError:s.a.bool.isRequired,studies:s.a.array.isRequired,onSelectItem:s.a.func.isRequired,sort:s.a.shape({fieldName:s.a.string,direction:s.a.oneOf(["desc","asc",null])}).isRequired,onSort:s.a.func.isRequired,filterValues:s.a.shape({PatientName:s.a.string.isRequired,PatientID:s.a.string.isRequired,AccessionNumber:s.a.string.isRequired,StudyDate:s.a.string.isRequired,modalities:s.a.string.isRequired,StudyDescription:s.a.string.isRequired,patientNameOrId:s.a.string.isRequired,accessionOrModalityOrDescription:s.a.string.isRequired,allFields:s.a.string.isRequired,studyDateTo:s.a.any,studyDateFrom:s.a.any}).isRequired,onFilterChange:s.a.func.isRequired,studyListDateFilterNumDays:s.a.number,displaySize:s.a.string},sn.defaultProps={},cn.propTypes={AccessionNumber:s.a.string.isRequired,isHighlighted:s.a.bool,modalities:s.a.string,PatientID:s.a.string.isRequired,PatientName:s.a.string.isRequired,StudyDate:s.a.string.isRequired,StudyDescription:s.a.string.isRequired,StudyInstanceUID:s.a.string.isRequired,displaySize:s.a.string},cn.defaultProps={isHighlighted:!1};n(1127);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=fn(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==ln(a)&&"function"!=typeof a?pn(r):a,dn(pn(n),"nextPage",(function(){n.props.nextPageFunc(n.props.currentPage)})),dn(pn(n),"prevPage",(function(){n.props.prevPageFunc(n.props.currentPage)})),dn(pn(n),"onRowsPerPageChange",(function(e){n.props.onRowsPerPageChange(parseInt(e.target.value))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"renderPaginationButtons",value:function(){return o.a.createElement("div",{className:"col-xs-8 col-sm-9 col-md-9"},o.a.createElement("div",{className:"form-inline form-group page-buttons noselect"},o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"pagination-control no-margins"},o.a.createElement("li",{className:"page-item prev"},o.a.createElement("button",{onClick:this.prevPage,disabled:0===this.props.currentPage,className:"btn page-link"},"Previous")),o.a.createElement("li",{className:"page-item next"},o.a.createElement("button",{onClick:this.nextPage,disabled:0===this.props.recordCount||this.props.rowsPerPage>this.props.recordCount,className:"btn page-link"},"Next"))))))}},{key:"renderRowsPerPageDropdown",value:function(){return o.a.createElement("div",{className:"form-inline form-group rows-per-page"},o.a.createElement("span",null,"Show"),o.a.createElement("select",{onChange:this.onRowsPerPageChange,defaultValue:this.props.rowsPerPage},this.props.pageOptions.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))))}},{key:"render",value:function(){return o.a.createElement("div",{className:"pagination-area"},o.a.createElement("div",{className:"rows-dropdown"},this.renderRowsPerPageDropdown()),o.a.createElement("div",{className:"pagination-buttons"},o.a.createElement("div",{className:"form-inline form-group page-number pull-right"},this.renderPaginationButtons())))}}])&&un(n.prototype,r),a&&un(n,a),t}(a.PureComponent);dn(hn,"defaultProps",{pageOptions:[5,10,25,50,100],rowsPerPage:25,currentPage:0}),dn(hn,"propTypes",{pageOptions:s.a.array,rowsPerPage:s.a.number.isRequired,currentPage:s.a.number.isRequired,nextPageFunc:s.a.func,prevPageFunc:s.a.func,onRowsPerPageChange:s.a.func,recordCount:s.a.number.isRequired});var gn=hn;function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=bn(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==vn(a)&&"function"!=typeof a?wn(r):a,Sn(wn(n),"onImport",(function(e){n.props.onImport&&n.props.onImport(e)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,e),n=t,(r=[{key:"getImportTool",value:function(){if(this.props.onImport)return o.a.createElement("div",{className:"addNewStudy btn-file"},o.a.createElement("label",{htmlFor:"btnImport",style:{width:"18px"},onClick:this.onImport},o.a.createElement(h.a,{name:"plus"})))}},{key:"render",value:function(){return o.a.createElement("div",{className:"studylistToolbar"},this.getImportTool())}}])&&yn(n.prototype,r),a&&yn(n,a),t}(a.PureComponent);Sn(On,"propTypes",{onImport:s.a.func});n(1128),n(1129);var In=n(200);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nn=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=jn(t).call(this,e),n=!a||"object"!==Pn(a)&&"function"!=typeof a?xn(r):a,Tn(xn(n),"toolbarMenuOverlay",(function(){return o.a.createElement(In.a,{placement:"bottom",className:"tooltip-toolbar-overlay",id:"".concat(Math.random(),"_tooltip-toolbar-overlay}")},n.getButtons())})),Tn(xn(n),"getButtons",(function(){return n.props.buttons.map((function(e,t){return o.a.createElement(b,Cn({key:t},e,{isActive:e.id===n.props.activeCommand}))}))})),Tn(xn(n),"isActive",(function(){var e=!1;return n.props.activeCommand&&n.props.buttons.forEach((function(t){n.props.activeCommand===t.id&&(e=!0)})),e})),Tn(xn(n),"activeIcon",(function(){return n.props.activeCommand&&n.props.buttons.find((function(e){return n.props.activeCommand===e.id})).icon||n.props.icon})),Tn(xn(n),"onExpandableToolClick",(function(){n.props.onGroupMenuClick&&n.props.onGroupMenuClick(),n.setState({isExpanded:!n.state.isExpanded})})),Tn(xn(n),"onOverlayHide",(function(){n.setState({isExpanded:!1})})),n.state={isExpanded:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=o.a.createElement(b,{key:"menu-button",type:"tool",label:e.props.label,icon:e.activeIcon(),className:"toolbar-button expandableToolMenu",isActive:e.isActive(),isExpandable:!0,isExpanded:e.state.isExpanded});return o.a.createElement(k.a,{key:"menu-button",trigger:"click",placement:"bottom",rootClose:!0,handleHide:this.onOverlayHide,onClick:this.onExpandableToolClick,overlay:this.toolbarMenuOverlay()},t)}}])&&kn(n.prototype,r),a&&kn(n,a),t}(o.a.Component);Tn(Nn,"propTypes",{label:s.a.string.isRequired,buttons:s.a.arrayOf(s.a.shape({id:s.a.string,label:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})).isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),onGroupMenuClick:s.a.func,activeCommand:s.a.string}),Tn(Nn,"defaultProps",{buttons:[],icon:"ellipse-circle",label:"More"});var _n=Nn;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ln(this,Un(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.buttons.map((function(t,n){return t.buttons&&Array.isArray(t.buttons)?o.a.createElement(_n,Rn({key:"expandable-".concat(n)},t,{activeCommand:t.activeButton})):o.a.createElement(b,Rn({key:n},t,{isActive:e.props.activeButtons.includes(t.id)}))}));return o.a.createElement("div",{className:v()("ToolbarSection",this.props.className)},t)}}])&&Mn(n.prototype,r),a&&Mn(n,a),t}(a.PureComponent);Vn(Bn,"defaultProps",{className:""}),Vn(Bn,"propTypes",{buttons:s.a.arrayOf(s.a.shape({id:s.a.string,label:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),buttons:s.a.arrayOf(s.a.shape({}))})).isRequired,activeButtons:s.a.arrayOf(s.a.string).isRequired,className:s.a.string});var zn=n(764),Hn=(n(1130),function(e){var t=e.error,n=e.componentStack;e.resetErrorBoundary;return o.a.createElement("div",{className:"ErrorFallback",role:"alert"},o.a.createElement("p",null,"Something went wrong."),o.a.createElement("pre",null,t.message),o.a.createElement("pre",null,n))}),qn=function(e){var t=e.context,n=void 0===t?"OHIF":t,r=e.onReset,a=void 0===r?function(){}:r,i=e.onError,s=void 0===i?function(){}:i,c=e.fallbackComponent,l=e.children;return o.a.createElement(zn.ErrorBoundary,{FallbackComponent:c||Hn,onReset:function(){a()},onError:function(e,t){console.error("".concat(n," Error Boundary"),e,t),s(e,t)}},l)};qn.propTypes={context:s.a.string,onReset:s.a.func,onError:s.a.func,children:s.a.node.isRequired,fallbackComponent:s.a.oneOfType([s.a.node,s.a.func,s.a.element])};var Gn=qn,Wn=n(251),Yn=n.n(Wn);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(n,!0).forEach((function(t){Xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Zn=function(e,t,n){if((t||n)&&e){var r=e.findIndex((function(e){return e.matches}));return r>=0&&void 0!==t[r]?t[r]:n}},$n=function(e){return e&&e.map((function(e){return window.matchMedia(e)}))},er=function(e,t,n){var r=Qn(Object(a.useState)((function(){var r=$n(e);return{mediaQueryMap:r,displaySize:Zn(r,t,n),mediaQueriesStringList:e,mediaTypesAliases:t,defaultMediaType:n}})),2),o=r[0],i=r[1],s=Object(a.useRef)(!1),c=Object(a.useCallback)((function(e){if(e.matches){var t=function(e,t){var n=e.media,r=t.mediaQueriesStringList;return t.mediaTypesAliases[r.findIndex((function(e){return window.matchMedia(e).media===n}))]}(e,o);n=t,s.current&&i(Kn({},o,{displaySize:n}))}var n}),[]);return Object(a.useEffect)((function(){var n=o.mediaQueriesStringList,r=o.mediaTypesAliases;(e&&!Yn()(e,n)||t&&!Yn()(t,r))&&function(e){var t=e.mediaQueriesStringList,n=e.mediaTypesAliases,r=e.defaultMediaType,a=$n(t),c=Zn(a,n,r);s.current&&i(Kn({},o,{mediaQueriesStringList:t,mediaTypesAliases:n,displaySize:c,mediaQueryMap:a}))}({mediaQueriesStringList:e,mediaTypesAliases:t})}),[e,t]),Object(a.useEffect)((function(){o.mediaQueryMap.forEach((function(e){e.removeListener(c),e.addListener(c)}))}),[o.mediaQueryMap]),Object(a.useEffect)((function(){return s.current=!0,function(){s.current=!1,o.mediaQueryMap.forEach((function(e){e.removeListener(c)}))}}),[]),o.displaySize};function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function nr(e,t){var n=tr(Object(a.useState)(e),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e]),r}n(686);function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=or(t).call(this,e),n=!a||"object"!==rr(a)&&"function"!=typeof a?ir(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ir(n),"handleChange",(function(e){var t=e.target.value;n.setState({value:t}),n.props.onChange&&n.props.onChange(t)})),n.state={value:n.props.value},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("select",{className:"select-ohif",value:this.state.selected,onChange:this.handleChange},this.props.options.map((function(e){var t=e.key,n=e.value;return o.a.createElement("option",{key:t,value:n},t)})))}}])&&ar(n.prototype,r),a&&ar(n,a),t}(a.Component);cr.propTypes={options:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,value:s.a.string.isRequired})),value:s.a.string,onChange:s.a.func};function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=pr(t).call(this,e),n=!a||"object"!==lr(a)&&"function"!=typeof a?mr(r):a,hr(mr(n),"handleChange",(function(e){var t=e.target.value;n.setState({value:t}),n.props.onChange&&n.props.onChange(t)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"select-ohif-container"},this.props.label&&o.a.createElement("label",{className:"select-ohif-label",htmlFor:this.id},this.props.label),o.a.createElement("select",ur({className:"form-control select-ohif"},this.props),this.props.options.map((function(e){var t=e.key,n=e.value;return o.a.createElement("option",{key:t,value:n},t)}))))}}])&&fr(n.prototype,r),a&&fr(n,a),t}(a.Component);hr(gr,"propTypes",{options:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,value:s.a.string.isRequired})),value:s.a.string,onChange:s.a.func});n(1131);function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=br(this,wr(t).call(this,e))).state={value:n.props.text},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("label",{className:"label-ohif",htmlFor:this.props.for},this.props.text)}}])&&yr(n.prototype,r),a&&yr(n,a),t}(o.a.Component)).propTypes={text:s.a.string.isRequired,for:s.a.string};n(1132);function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ir(t).call(this,e),n=!a||"object"!==Sr(a)&&"function"!=typeof a?Pr(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pr(n),"handleChange",(function(e){n.setState({value:e.target.value}),n.props.onChange&&n.props.onChange(e)})),n.state={value:e.value||0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"range",value:this.state.value,min:this.props.min,max:this.props.max,step:this.props.step||1,onChange:this.handleChange,id:this.props.id,className:"range"}),this.props.showPercentage&&o.a.createElement("span",null,"".concat(this.state.value,"%")),this.props.showValue&&o.a.createElement("span",null,this.props.valueRenderer?this.props.valueRenderer(this.state.value):this.state.value))}}])&&Or(n.prototype,r),a&&Or(n,a),t}(a.Component);kr.propTypes={value:s.a.number,min:s.a.number.isRequired,max:s.a.number.isRequired,step:s.a.number,id:s.a.string,valueRenderer:s.a.func,onChange:s.a.func,showPercentage:s.a.bool,showValue:s.a.bool},kr.defaultProps={showPercentage:!1,showValue:!1};n(1133);function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e,t){return(Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Dr(t).call(this,e),n=!a||"object"!==jr(a)&&"function"!=typeof a?Tr(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tr(n),"handleChange",(function(e){n.setState({value:e.target.value}),n.props.onChange&&n.props.onChange()})),n.state={value:n.props.value},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("textarea",{className:"textarea-ohif",value:this.state.value,Rows:this.props.Rows,cols:this.props.cols,onChange:this.handleChange,id:this.props.id})}}])&&xr(n.prototype,r),a&&xr(n,a),t}(o.a.Component)).propTypes={value:s.a.string,Rows:s.a.number,cols:s.a.number,id:s.a.string,onChange:s.a.func};n(1134);function _r(e){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(){return(Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mr(e,t){return!t||"object"!==_r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mr(this,Lr(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"input-ohif-container"},this.props.label&&o.a.createElement("label",{className:"input-ohif-label",htmlFor:this.props.id},this.props.label),o.a.createElement("input",Ar({type:this.props.type,id:this.props.id,className:"form-control input-ohif"},this.props)))}}])&&Rr(n.prototype,r),a&&Rr(n,a),t}(o.a.Component);Fr(Vr,"propTypes",{value:s.a.oneOfType([s.a.string,s.a.number]),id:s.a.string,label:s.a.string,type:s.a.string}),Fr(Vr,"defaultProps",{value:"",id:"TextInput-".concat((new Date).toTimeString()),label:void 0,type:"text"});n(1135);function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jr=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return r=this,a=(e=qr(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==Br(a)&&"function"!=typeof a?Gr(r):a,Yr(Gr(n),"state",{open:!1}),Yr(Gr(n),"getListItems",(function(){var e=n.props,t=e.list;e.align;return t.map((function(e,t){var r=e.icon,a=e.title,i=e.link,s=e.onClick;return i?o.a.createElement("a",{href:i||"#",key:t,className:"dd-item",onClick:function(){return n.handleOnClick(s)}},r&&o.a.createElement(h.a,zr({},r,{className:"dd-item-icon"})),o.a.createElement("span",null,a)):o.a.createElement("button",{key:t,className:"dd-item","data-cy":"dd-item-menu",onClick:function(){return n.handleOnClick(s)}},r&&o.a.createElement(h.a,zr({},r,{className:"dd-item-icon"})),o.a.createElement("span",null,a))}))})),Yr(Gr(n),"renderList",(function(){var e=n.props.align;return n.state.open?o.a.createElement("div",{className:"dd-menu-list ".concat(e||"left")},n.getListItems()):null})),Yr(Gr(n),"handleOnClick",(function(e){n.toggleList(),e&&e()})),Yr(Gr(n),"handleMouseClick",(function(e){n.node.contains(e.target)||n.toggleList()})),Yr(Gr(n),"renderTitleElement",(function(){var e=n.props,t=e.titleElement,r=e.title;return t||o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"dd-title"},r),o.a.createElement("span",{className:"dd-caret-down"}))})),Yr(Gr(n),"toggleList",(function(){var e=n.state.open,t=!0;document.addEventListener("mousedown",n.handleMouseClick,!1),e&&(document.removeEventListener("mousedown",n.handleMouseClick,!1),t=!1),n.setState({open:t})})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"dd-menu","data-cy":"options-menu",ref:function(t){return e.node=t}},o.a.createElement("div",{className:"dd-menu-toggle",onClick:this.toggleList},this.renderTitleElement()),this.renderList())}}])&&Hr(n.prototype,r),a&&Hr(n,a),t}(a.Component);function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t){return!t||"object"!==Kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Yr(Jr,"propTypes",{titleElement:s.a.node,title:s.a.string,align:s.a.oneOf(["left","center","right"]),list:s.a.arrayOf(s.a.shape({title:s.a.string.isRequired,icon:s.a.object,onClick:s.a.func,link:s.a.string}))});var ta=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qr(this,Zr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.isPlaying?"stop":"play";return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{id:"playClip",type:"button",className:"imageViewerCommand btn btn-sm btn-default","data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:"Play/Stop Clip"},o.a.createElement(h.a,{name:e})),o.a.createElement("button",{id:"toggleCineDialog",type:"button",className:"imageViewerCommand btn btn-sm btn-default","data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:"Toggle CINE Dialog"},o.a.createElement(h.a,{name:"youtube"})))}}])&&Xr(n.prototype,r),a&&Xr(n,a),t}(a.Component);function na(e){var t=v()(e.className,"btn btn-sm btn-default");return o.a.createElement("button",{id:e.id,type:"button",className:t,"data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:e.title},e.icon&&o.a.createElement(h.a,{name:e.icon}))}ea(ta,"propTypes",{isPlaying:s.a.bool.isRequired}),ea(ta,"defaultProps",{isPlaying:!1}),na.propTypes={icon:s.a.string,title:s.a.string,className:s.a.string,id:s.a.string,onClick:s.a.func};var ra=na;function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sa(e,t){return!t||"object"!==aa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e,t){return(la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sa(this,ca(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&la(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t;return this.props.includePlayClipButton&&(e=o.a.createElement(ta,null)),this.props.includeLayoutButton&&(t=o.a.createElement(C,null)),o.a.createElement("div",{id:"toolbar"},o.a.createElement("div",{className:"btn-group"},this.props.buttons.map((function(e,t){return o.a.createElement(ra,oa({},e,{key:t}))})),e,t))}}])&&ia(n.prototype,r),a&&ia(n,a),t}(a.Component);ua(fa,"propTypes",{buttons:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,title:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})).isRequired,includeLayoutButton:s.a.bool.isRequired,includePlayClipButton:s.a.bool.isRequired}),ua(fa,"defaultProps",{buttons:[{id:"wwwc",title:"WW/WC",className:"imageViewerTool",icon:"sun"},{id:"wwwcRegion",title:"Window by Region",className:"imageViewerTool",icon:"stop"},{id:"magnify",title:"Magnify",className:"imageViewerTool",icon:"circle"},{id:"annotate",title:"Annotation",className:"imageViewerTool",icon:"arrows-alt-h"},{id:"invert",title:"Invert",className:"imageViewerCommand",icon:"adjust"},{id:"zoom",title:"Zoom",className:"imageViewerTool",icon:"search-plus"},{id:"pan",title:"Pan",className:"imageViewerTool",icon:"arrows"},{id:"stackScroll",title:"Stack Scroll",className:"imageViewerTool",icon:"bars"},{id:"length",title:"Length Measurement",className:"imageViewerTool",icon:"arrows-alt-v"},{id:"angle",title:"Angle Measurement",className:"imageViewerTool",icon:"fa fa-angle-left"},{id:"dragProbe",title:"Pixel Probe",className:"imageViewerTool",icon:"fa fa-dot-circle-o"},{id:"ellipticalRoi",title:"Elliptical ROI",className:"imageViewerTool",icon:"circle-o"},{id:"rectangleRoi",title:"Rectangle ROI",className:"imageViewerTool",icon:"square-o"},{id:"resetViewport",title:"Reset Viewport",className:"imageViewerCommand",icon:"reset"},{id:"clearTools",title:"Clear tools",className:"imageViewerCommand",icon:"trash"}],includeLayoutButton:!0,includePlayClipButton:!0});var pa=n(311),ma=n(792),da=n(793),ha=!!("ontouchstart"in window||navigator.maxTouchPoints);function ga(e){var t=ha?da.a:ma.a,n=ha?{enableMouseEvents:!0}:{};return function(r){return o.a.createElement(pa.b,{backend:t,opts:n},o.a.createElement(e,r))}}function va(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ya(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){va(o,r,a,i,s,"next",e)}function s(e){va(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ba(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var wa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((function(r,a){e().then(r).catch((function(o){setTimeout((function(){1!==t?retry(e,t-1,n).then(r,a):a(o)}),n)}))}))},Ea=function(e,t){return t({component:Gt})},Sa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onError:Ea};return function(n){var r=ba(Object(a.useState)({component:null}),2),i=r[0],s=r[1],c=function(e){return"function"==typeof e};Object(a.useEffect)((function(){(function(){var n=ya(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:r=n.sent,a=r.default,s({component:a}),t.onLoaded&&c(t.onLoaded)&&t.onLoaded(a),n.next=16;break;case 9:if(n.prev=9,n.t0=n.catch(0),console.error("[AsyncComponent] Failed to import chunk:",n.t0),!t.onError||!c(t.onError)){n.next=15;break}return t.onError(n.t0,s),n.abrupt("return");case 15:n.t0.toString().indexOf("ChunkLoadError")>-1&&(console.error("[AsyncComponent] Reloading due to chunk error"),window.location.reload());case 16:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}})()()}),[]);var l=i.component;return l?o.a.createElement(l,n):null}};n.d(t,"z",(function(){return Vr})),n.d(t,"a",(function(){return ce})),n.d(t,"b",(function(){return Ht})),n.d(t,"C",(function(){return ve})),n.d(t,"f",(function(){return _n})),n.d(t,"g",(function(){return h.a})),n.d(t,"h",(function(){return C})),n.d(t,"l",(function(){return On})),n.d(t,"m",(function(){return kr})),n.d(t,"n",(function(){return it})),n.d(t,"o",(function(){return Ue})),n.d(t,"p",(function(){return gr})),n.d(t,"q",(function(){return jt})),n.d(t,"r",(function(){return Mt})),n.d(t,"t",(function(){return sn})),n.d(t,"v",(function(){return A})),n.d(t,"w",(function(){return B})),n.d(t,"u",(function(){return q})),n.d(t,"y",(function(){return nn})),n.d(t,"x",(function(){return gn})),n.d(t,"A",(function(){return b})),n.d(t,"s",(function(){return ee.d})),n.d(t,"I",(function(){return ee.f})),n.d(t,"j",(function(){return ee.c})),n.d(t,"K",(function(){return ee.h})),n.d(t,"k",(function(){return Bt})),n.d(t,"c",(function(){return ee.a})),n.d(t,"J",(function(){return ee.g})),n.d(t,"d",(function(){return Gn})),n.d(t,"e",(function(){return Gt})),n.d(t,"i",(function(){return ee.b})),n.d(t,"G",(function(){return ee.e})),n.d(t,"F",(function(){return nr})),n.d(t,"H",(function(){return er})),n.d(t,"B",(function(){return ga})),n.d(t,"D",(function(){return Sa})),n.d(t,"E",(function(){return wa}))},1126:function(e,t,n){},1127:function(e,t,n){},1128:function(e,t,n){},1129:function(e,t,n){},1130:function(e,t,n){},1131:function(e,t,n){},1132:function(e,t,n){},1133:function(e,t,n){},1134:function(e,t,n){},1135:function(e,t,n){},114:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(0),a=n.n(r),o=n(19),i=n(317);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=a.a.createContext({}),l={CORNERSTONE:"ACTIVE_VIEWPORT::CORNERSTONE"},u=function(){return Object(r.useContext)(c)},f=function(e){var t=e.children,n=e.config,r=Object(o.d)((function(e){return Object(i.a)(e)}));return a.a.createElement(c.Provider,{value:{appConfig:n,activeContexts:r}},t)},p=function(e){return function(t){var n=u(),r=n.appConfig,o=n.activeContexts;return a.a.createElement(e,s({},t,{appConfig:r,activeContexts:o}))}};t.c=c},118:function(e,t,n){"use strict";var r=n(47),a=n(82),o=n.n(a),i=n(116),s=n.n(i),c=n(12);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=n(62),f=n(21),p=n(201),m=n(51),d=n(57);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function v(e,t){return y.apply(this,arguments)}function y(){var e;return e=regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.PaletteColorLookupTableUID,a=t.RedPaletteColorLookupTableDescriptor,o=t.GreenPaletteColorLookupTableDescriptor,i=t.BluePaletteColorLookupTableDescriptor,s=t.RedPaletteColorLookupTableData,c=t.GreenPaletteColorLookupTableData,l=t.BluePaletteColorLookupTableData,e.abrupt("return",new Promise((function(e,u){var f;if(b.isValidUID(r)&&(f=b.get(r)))return e(f);var p=[w(n,s,a),w(n,c,o),w(n,l,i)];Promise.all(p).then((function(n){var a=h(n,3),o=a[0],i=a[1],s=a[2];b.add({RedPaletteColorLookupTableData:o,GreenPaletteColorLookupTableData:i,BluePaletteColorLookupTableData:s,PaletteColorLookupTableUID:r}),t.RedPaletteColorLookupTableData=o,t.GreenPaletteColorLookupTableData=i,t.BluePaletteColorLookupTableData=s,e()}))})));case 2:case"end":return e.stop()}}),e)})),(y=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,s,"next",e)}function s(e){g(o,r,a,i,s,"throw",e)}i(void 0)}))}).apply(this,arguments)}var b={count:0,maxAge:864e5,entries:{},isValidUID:function(e){return"string"==typeof e&&e.length>0},get:function(e){var t=null;return this.entries.hasOwnProperty(e)&&(t=this.entries[e],Date.now()-t.time>this.maxAge&&(delete this.entries[e],this.count--,t=null)),t},add:function(e){if(this.isValidUID(e.uid)){var t=e.uid;!0!==this.entries.hasOwnProperty(t)&&this.count++,e.time=Date.now(),this.entries[t]=e}}};function w(e,t,n){var r=n[0]?n[0]:65536,a=n[2],o=function(e){for(var t=16===a?new Uint16Array(e):new Uint8Array(e),n=[],o=0;o<r;o++)n[o]=t[o];return n};if(t.BulkDataURI){var i=t.BulkDataURI;0!==e.wadoRoot.indexOf("https")||i.includes("https")||(i=i.replace("http","https"));var s={url:e.wadoRoot,headers:f.a.getAuthorizationHeader(e),errorInterceptor:m.a.getHTTPErrorHandler(),requestHooks:[Object(d.a)()]},c={BulkDataURI:i};return new u.a.DICOMwebClient(s).retrieveBulkData(c).then((function(e){return e[0]})).then(o)}if(t.InlineBinary){var l=atob(t.InlineBinary),h=Object(p.a)(l);return new Promise((function(e){e(o(h))}))}return Promise.resolve(o(t))}function E(e){for(var t=new Uint8Array(e),n=new Uint8Array(8*t.length),r=0;r<n.length;r++){var a=r%8,o=Math.floor(r/8);n[r]=1*((t[o]&1<<a)>>a)}return n}function S(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)}))}}function I(e,t){return P.apply(this,arguments)}function P(){return(P=O(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=[],e.abrupt("return",new Promise((function(e,o){for(var i=0;i<=30;i+=2){var s="60".concat(i.toString(16));3===s.length&&(s="600".concat(i.toString(16)));var c="".concat(s,"3000");if(t[c]&&t[c].InlineBinary){var l=atob(t[c].InlineBinary),u=Object(p.a)(l);t[c]=E(u)}else t[c]&&t[c].BulkDataURI?(r.push(C(t[c],n)),a.push(c)):t[c]&&t[c]instanceof ArrayBuffer&&(t[c]=E(t[c]))}r.length?Promise.all(r).then((function(n){for(var r=0;r<n.length;r++)t[a[r]]=n[r];e()})):e()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return k.apply(this,arguments)}function k(){return(k=O(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.BulkDataURI,a=r,0!==n.wadoRoot.indexOf("https")||a.includes("https")||(a=a.replace("http","https")),o={url:n.wadoRoot,headers:f.a.getAuthorizationHeader(n),errorInterceptor:m.a.getHTTPErrorHandler(),requestHooks:[Object(d.a)()]},i=new u.a.DICOMwebClient(o),s={BulkDataURI:a},e.abrupt("return",i.retrieveBulkData(s).then((function(e){return e[0]})).then(E));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){return Array.isArray(e)?e.map((function(e){return void 0!==e?Number(e):e})):void 0!==e?Number(e):e};function x(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x(o,r,a,i,s,"next",e)}function s(e){x(o,r,a,i,s,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"studies",{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(this,"imageIdToUIDs",{configurable:!1,enumerable:!1,writable:!1,value:new Map}),this.datasets={}}var t,n,a,i,u;return t=e,(n=[{key:"addInstance",value:(u=D(regeneratorRuntime.mark((function e(t){var n,a,o,i,s,c,l,u,f,p,m,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},t instanceof ArrayBuffer?(o=DicomMessage.readFile(t),a=o.dict):a=t,i=void 0===a.SeriesInstanceUID?r.b.data.DicomMetaDictionary.naturalizeDataset(a):a,c=(s=i).StudyInstanceUID,l=s.SeriesInstanceUID,u=s.SOPInstanceUID,this._getAndCacheStudyDataset(c,a),f=this._getAndCacheStudy(c),p=this._getAndCacheSeriesFromStudy(f,l),m=this._getAndCacheInstanceFromStudy(p,u),Object.assign(m,i),e.next=11,this._checkBulkDataAndInlineBinaries(m,n.server);case 11:return e.abrupt("return",m);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"addImageIdToUIDs",value:function(e,t){this.imageIdToUIDs.set(e,t)}},{key:"_getAndCacheStudyDataset",value:function(e,t){this.datasets[e]||(this.datasets[e]=t)}},{key:"getStudyDataset",value:function(e){return this.datasets[e]}},{key:"_getAndCacheStudy",value:function(e){var t=this.studies,n=t.get(e);return n||(n={series:new Map},t.set(e,n)),n}},{key:"_getAndCacheSeriesFromStudy",value:function(e,t){var n=e.series.get(t);return n||(n={instances:new Map},e.series.set(t,n)),n}},{key:"_getAndCacheInstanceFromStudy",value:function(e,t){var n=e.instances.get(t);return n||(n={},e.instances.set(t,n)),n}},{key:"_checkBulkDataAndInlineBinaries",value:(i=D(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n);case 2:if("PALETTE COLOR"!==t.PhotometricInterpretation){e.next=5;break}return e.next=5,v(t,n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"_getInstance",value:function(e){var t=this._getUIDsFromImageID(e);if(t){var n=t.StudyInstanceUID,r=t.SeriesInstanceUID,a=t.SOPInstanceUID;return this._getInstanceData(n,r,a)}}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fallback:!1},r=this._getInstance(t);return e===A?r:this.getTagFromInstance(e,r,n)}},{key:"getTag",value:function(e,t,n){return this.get(e,t,n)}},{key:"getInstance",value:function(e){return this.get(A,e)}},{key:"getTagFromInstance",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],t)return t[e]?t[e]:this._getCornerstoneWADOImageLoaderTag(e,t)}},{key:"_getCornerstoneWADOImageLoaderTag",value:function(e,t){var n;switch(e){case _.GENERAL_SERIES_MODULE:var r,a,o=t.SeriesDate,i=t.SeriesTime;o&&(r=s.a.parseDA(o)),i&&(a=s.a.parseTM(i)),n={modality:t.Modality,seriesInstanceUID:t.SeriesInstanceUID,seriesNumber:t.SeriesNumber,studyInstanceUID:t.StudyInstanceUID,seriesDate:r,seriesTime:a};break;case _.PATIENT_STUDY_MODULE:n={patientAge:t.PatientAge,patientSize:t.PatientSize,patientWeight:t.PatientWeight};break;case _.IMAGE_PLANE_MODULE:var u,f,p,m,d=t.ImageOrientationPatient,h=function(e){var t=e.PixelSpacing,n=e.ImagerPixelSpacing,r=e.SOPClassUID,a=e.PixelSpacingCalibrationType,o=e.PixelSpacingCalibrationDescription,i=e.EstimatedRadiographicMagnificationFactor,s=e.SequenceOfUltrasoundRegions,u=["1.2.840.10008.5.1.4.1.1.1","1.2.840.10008.5.1.4.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.2","1.2.840.10008.5.1.4.1.1.1.2.1","1.2.840.10008.5.1.4.1.1.1.3","1.2.840.10008.5.1.4.1.1.1.3.1","1.2.840.10008.5.1.4.1.1.12.1","1.2.840.10008.5.1.4.1.1.12.1.1","1.2.840.10008.5.1.4.1.1.12.2","1.2.840.10008.5.1.4.1.1.12.2.1","1.2.840.10008.5.1.4.1.1.12.3"].includes(r),f="NOT_APPLICABLE";if(u&&!n)return{PixelSpacing:t,type:"UNKNOWN",isProjection:u};if(t&&n&&t===n)return{PixelSpacing:t,type:"DETECTOR",isProjection:u};if(t&&n&&t!==n)return{PixelSpacing:t,type:"CALIBRATED",isProjection:u,PixelSpacingCalibrationType:a,PixelSpacingCalibrationDescription:o};if(!t&&n){var p=n;return i?p=n.map((function(e){return e/i})):c.a.info("EstimatedRadiographicMagnificationFactor was not present. Unable to correct ImagerPixelSpacing."),{PixelSpacing:p,isProjection:u}}if(s&&"object"===l(s))return{PixelSpacing:[10*s.PhysicalDeltaX,10*s.PhysicalDeltaY]};if(s&&Array.isArray(s)&&s.length>1)c.a.warn("Sequence of Ultrasound Regions > one entry. This is not yet implemented, all measurements will be shown in pixels.");else if(!1===u&&!n)return{PixelSpacing:t,type:f,isProjection:u};c.a.info("Unknown combination of PixelSpacing and ImagerPixelSpacing identified. Unable to determine spacing.")}(t).PixelSpacing;h&&(u=j(h[0]),f=j(h[1])),d&&(p=j(d.slice(0,3)),m=j(d.slice(3,6))),n={frameOfReferenceUID:t.FrameOfReferenceUID,rows:t.Rows,columns:t.Columns,imageOrientationPatient:j(d),rowCosines:p,columnCosines:m,imagePositionPatient:j(t.ImagePositionPatient),sliceThickness:j(t.SliceThickness),sliceLocation:j(t.SliceLocation),pixelSpacing:j(h),rowPixelSpacing:u,columnPixelSpacing:f};break;case _.IMAGE_PIXEL_MODULE:n={samplesPerPixel:t.SamplesPerPixel,photometricInterpretation:t.PhotometricInterpretation,rows:t.Rows,columns:t.Columns,bitsAllocated:t.BitsAllocated,bitsStored:t.BitsStored,highBit:t.HighBit,pixelRepresentation:t.PixelRepresentation,planarConfiguration:t.PlanarConfiguration,pixelAspectRatio:t.PixelAspectRatio,smallestPixelValue:t.SmallestPixelValue,largestPixelValue:t.LargestPixelValue,redPaletteColorLookupTableDescriptor:t.RedPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.GreenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.BluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.RedPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.GreenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.BluePaletteColorLookupTableData};break;case _.VOI_LUT_MODULE:var g=t.WindowCenter,v=t.WindowWidth,y=Array.isArray(g)?g:[g],b=Array.isArray(v)?v:[v];n={windowCenter:j(y),windowWidth:j(b)};break;case _.MODALITY_LUT_MODULE:var w=j(t.RescaleSlope);n={rescaleIntercept:j(t.RescaleIntercept),rescaleSlope:w,rescaleType:t.RescaleType};break;case _.SOP_COMMON_MODULE:n={sopClassUID:t.SOPClassUID,sopInstanceUID:t.SOPInstanceUID};break;case _.PET_ISOTOPE_MODULE:var E=t.RadiopharmaceuticalInformationSequence;if(E){var S=Array.isArray(E)?E[0]:E,O=S.RadiopharmaceuticalStartTime,I=S.RadionuclideTotalDose,P=S.RadionuclideHalfLife;n={radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:s.a.parseTM(O),radionuclideTotalDose:I,radionuclideHalfLife:P}}}break;case _.OVERLAY_PLANE_MODULE:for(var C=[],k=0;k<=30;k+=2){var x="60".concat(k.toString(16));3===x.length&&(x="600".concat(k.toString(16)));var D=t["".concat(x,"3000")];if(D){var T="".concat(x,"0010"),N="".concat(x,"0011"),A="".concat(x,"0040"),R="".concat(x,"0050"),M="".concat(x,"0022"),L="".concat(x,"1500"),U="".concat(x,"1301"),F="".concat(x,"1302"),V="".concat(x,"1303"),B=t[R],z={rows:t[T],columns:t[N],type:t[A],x:B[0],y:B[1],pixelData:D,description:t[M],label:t[L],roiArea:t[U],roiMean:t[F],roiStandardDeviation:t[V]};C.push(z)}}n={overlays:C};break;case _.PATIENT_MODULE:var H,q=t.PatientName;q&&(H=q.Alphabetic),n={patientName:H,patientId:t.PatientID};break;case _.GENERAL_IMAGE_MODULE:n={sopInstanceUid:t.SOPInstanceUID,instanceNumber:t.InstanceNumber,lossyImageCompression:t.LossyImageCompression,lossyImageCompressionRatio:t.LossyImageCompressionRatio,lossyImageCompressionMethod:t.LossyImageCompressionMethod};break;case _.GENERAL_STUDY_MODULE:n={studyDescription:t.StudyDescription,studyDate:t.StudyDate,studyTime:t.StudyTime,accessionNumber:t.AccessionNumber};break;case _.CINE_MODULE:n={frameTime:t.FrameTime}}return n}},{key:"_getInstanceData",value:function(e,t,n){var r=this.studies.get(e);if(r){var a=r.series.get(t);if(a)return a.instances.get(n)}}},{key:"_getUIDsFromImageID",value:function(e){if(e.includes("wadors:")){var t=e.split("studies/")[1].split("/");return{StudyInstanceUID:t[0],SeriesInstanceUID:t[2],SOPInstanceUID:t[4]}}if(e.includes("wado?requestType=WADO")){var n=o.a.parse(e);return{StudyInstanceUID:n.studyUID,SeriesInstanceUID:n.seriesUID,SOPInstanceUID:n.objectUID}}return this.imageIdToUIDs.get(e)}}])&&T(t.prototype,n),a&&T(t,a),e}()),_=(t.a=N,{GENERAL_SERIES_MODULE:"generalSeriesModule",PATIENT_STUDY_MODULE:"patientStudyModule",IMAGE_PLANE_MODULE:"imagePlaneModule",IMAGE_PIXEL_MODULE:"imagePixelModule",VOI_LUT_MODULE:"voiLutModule",MODALITY_LUT_MODULE:"modalityLutModule",SOP_COMMON_MODULE:"sopCommonModule",PET_ISOTOPE_MODULE:"petIsotopeModule",OVERLAY_PLANE_MODULE:"overlayPlaneModule",PATIENT_MODULE:"patientModule",GENERAL_IMAGE_MODULE:"generalImageModule",GENERAL_STUDY_MODULE:"generalStudyModule",CINE_MODULE:"cineModule"}),A="instance"},119:function(e,t,n){"use strict";var r,a,o=n(327),i=n.n(o);!function(e){var t=[],n=null,r=[],a=!1,o=e.prototype.handleKey;function i(e,t,n){if(this.recording)if("keydown"==n.type){1===e.length&&a&&c();for(var i=0;i<t.length;++i)s(t[i]);s(e)}else"keyup"==n.type&&r.length>0&&c();else o.apply(this,arguments)}function s(e){for(var t=0;t<r.length;++t)if(r[t]===e)return;r.push(e),1===e.length&&(a=!0)}function c(){t.push(r),r=[],a=!1,l()}function l(){n&&(!function(e){for(var t=0;t<e.length;++t)e[t].sort((function(e,t){return e.length>1&&1===t.length?-1:1===e.length&&t.length>1?1:e>t?1:-1})),e[t]=e[t].join("+")}(t),n(t)),t=[],n=null,r=[]}e.prototype.record=function(e){var t=this;t.recording=!0,n=function(){t.recording=!1,e.apply(t,arguments)}},e.prototype.stopRecord=function(){this.recording=!1},e.prototype.startRecording=function(){this.recording=!0},e.prototype.handleKey=function(){var e=this;i.apply(e,arguments)},e.init()}(i.a),r=i.a,a=r.prototype.stopCallback,r.prototype.stopCallback=function(e,t,n){return!!this.paused||a.call(this,e,t,n)},r.prototype.pause=function(){this.paused=!0},r.prototype.unpause=function(){this.paused=!1},r.init();t.a=i.a},12:function(e,t,n){"use strict";var r={error:console.error,warn:console.warn,info:console.log,trace:console.trace,debug:console.debug,time:console.time,timeEnd:console.timeEnd};t.a=r},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={DATASET_4D:"datasetis4D",VARYING_IMAGESDIMENSIONS:"imagesdimensionsvarying",VARYING_IMAGESCOMPONENTS:"imagescomponentsvarying",VARYING_IMAGESORIENTATION:"imagesorientationvarying",MISSING_FRAMES:"missingframes",IRREGULAR_SPACING:"irregularspacing",MULTIFFRAMES:"multiframe"}},1210:function(e,t){},1261:function(e,t,n){},1262:function(e,t,n){},1263:function(e,t,n){},1265:function(e,t,n){},1266:function(e,t,n){},1267:function(e,t,n){},1268:function(e,t,n){},1269:function(e,t,n){},1273:function(e,t,n){},1274:function(e,t,n){},1280:function(e,t,n){},1281:function(e,t,n){},1282:function(e,t,n){},1283:function(e,t,n){},1284:function(e,t,n){},1285:function(e,t,n){},1286:function(e,t,n){},1287:function(e,t,n){},1288:function(e,t,n){},1289:function(e,t,n){},1290:function(e,t,n){},1291:function(e,t,n){},1292:function(e,t,n){},1295:function(e,t,n){},1296:function(e,t,n){},1297:function(e,t,n){},134:function(e,t,n){"use strict";var r=new(n(254).a);t.a={add:function(e){r.insert(e)},get:function(e){return r.findBy({studyInstanceUID:e})},all:function(e){return r.all(e)},remove:function(e){r.remove({studyInstanceUID:e})},purge:function(){r.removeAll()}}},135:function(e,t,n){"use strict";var r=n(91),a=n(59),o=n(151);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n,r,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=c(this,l(t).call(this,e,a))).init(n,r),o}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e,t){var n=this.getData();Object.defineProperties(this,{_sopInstanceUID:{configurable:!1,enumerable:!1,writable:!1,value:n.SOPInstanceUID},_study:{configurable:!1,enumerable:!1,writable:!1,value:t},_series:{configurable:!1,enumerable:!1,writable:!1,value:e},_instance:{configurable:!1,enumerable:!1,writable:!1,value:n},_cache:{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}})}},{key:"getTagValue",value:function(e,t,n){if(e in this._cache&&!0!==n)return this._cache[e];var r,a=this._instance.metadata;return e in a?r=a[e]:e in this._series?r=this._series[e]:e in this._study&&(r=this._study[e]),void 0!==r?(this._cache[e]=r,r):t}},{key:"tagExists",value:function(e){return e in this._instance.metadata||e in this._series||e in this._study}},{key:"getImageId",value:function(e,t){return null===this._imageId&&(this._imageId=Object(o.a)(this.getData(),e,t)),this._imageId}}])&&s(n.prototype,r),a&&s(n,a),t}(r.a),p=n(92);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=h(this,g(t).call(this,e,r))).init(n),a}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var t=this,n=this.getData();Object.defineProperty(this,"_seriesInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:n.SeriesInstanceUID}),n.instances.forEach((function(r){t.addInstance(new f(r,n,e))}))}}])&&d(n.prototype,r),a&&d(n,a),t}(p.a),b=n(137);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,O(t).call(this,e,n))).init(),r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e=this,t=this.getData();Object.defineProperty(this,"_studyInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:t.StudyInstanceUID}),t.series.forEach((function(n){e.addSeries(new y(n,t))}))}}])&&E(n.prototype,r),a&&E(n,a),t}(b.a),C={Metadata:a.a,StudyMetadata:b.a,SeriesMetadata:p.a,InstanceMetadata:r.a,OHIFStudyMetadata:P,OHIFSeriesMetadata:y,OHIFInstanceMetadata:f};t.a=C},1350:function(e){e.exports=JSON.parse('{"name":"@ohif/extension-monai-label","version":"0.2.0","description":"OHIF extension for MONAI Label","author":"NVIDIA,KCL","license":"MIT","repository":"OHIF/Viewers","main":"dist/monailabel.umd.js","module":"src/index.js","sideEffects":true,"publishConfig":{"access":"public"},"files":["dist","README.md"],"engines":{"node":">=10","npm":">=6","yarn":">=1.16.0"},"scripts":{"dev":"cross-env NODE_ENV=development webpack --config .webpack/webpack.dev.js --watch --debug --output-pathinfo","dev:dicom-vtk":"yarn run dev","build":"cross-env NODE_ENV=production QUICK_BUILD=true webpack --config .webpack/webpack.prod.js","build:package":"yarn run build","prepublishOnly":"yarn run build","start":"yarn run dev"},"peerDependencies":{"@ohif/core":"^0.50.0","cornerstone-core":"^2.2.8","cornerstone-tools":"^4.20.1","prop-types":"^15.6.2","react":"^16.8.6","react-dom":"^16.8.6"},"dependencies":{"@babel/runtime":"^7.5.5","axios":"^0.21.1","arraybuffer-concat":"^0.0.1","ndarray":"^1.0.19","md5.js":"^1.3.5","nrrd-js":"^0.2.1","pako":"^2.0.3","itk":"^14.1.1","react-color":"^2.19.3","bootstrap":"^5.0.2","react-select":"^4.3.1","chroma-js":"^2.1.2","larvitar":"^1.2.10","vue":"^3.2.33"}}')},1353:function(e,t){},1355:function(e,t){},1362:function(e,t,n){},1363:function(e,t,n){},1364:function(e,t,n){},1365:function(e,t,n){},1366:function(e,t,n){},1367:function(e,t,n){},1368:function(e,t){},137:function(e,t,n){"use strict";var r=n(21),a=n(138),o=n(91),i=n(59),s=n(92),c=n(62),l=n(204),u=n(14),f=n(120);function p(e){if(!e.length)return{value:!1};var t=e[0].getData().metadata,n=t.Modality,r=t.NumberOfFrames>1;return y.includes(n)&&(r||1!==e.length)?r?{value:!1,reconstructionIssues:[f.a.MULTIFRAMES]}:function(e){for(var t=e.length,n=e[0].getData().metadata,r=n.Rows,a=n.Columns,o=n.SamplesPerPixel,i=n.ImageOrientationPatient,s=[],c=1;c<t;++c){var l=e[c].getData().metadata,u=l.Rows,p=l.Columns,d=l.SamplesPerPixel,h=l.ImageOrientationPatient;if(u!==r||p!==a?s.push(f.a.VARYING_IMAGESDIMENSIONS):d!==o?s.push(f.a.VARYING_IMAGESCOMPONENTS):m(h,i)||s.push(f.a.VARYING_IMAGESORIENTATION),0!==s.length)break}(function(e){for(var t=e.length,n=0;n<t;++n){var r=e[n].getData().metadata;if(r&&void 0!==r&&r.ImagePositionPatient&&void 0!==r.ImagePositionPatient)for(var a=n+1;a<t;++a){var o=e[a].getData().metadata;if(o&&void 0!==o&&o.ImagePositionPatient&&void 0!==o.ImagePositionPatient&&m(r.ImagePositionPatient,o.ImagePositionPatient))return!0}}return!1})(e)&&s.push(f.a.DATASET_4D);return{value:0===s.length,reconstructionIssues:s}}(e):{value:!1}}function m(e,t){if(void 0!==e&&void 0!==!t)return Math.abs(e[0]-t[0])<h&&Math.abs(e[1]-t[1])<h&&Math.abs(e[2]-t[2])<h}var d=.1,h=.01;function g(e,t){if(!(Math.abs(e-t)<t*d)){var n=e/t,r=Math.round(n);return Math.abs(e-r*t)/r<d*t?{issue:f.a.MISSING_FRAMES,missingFrames:r-1}:{issue:f.a.IRREGULAR_SPACING}}}function v(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}var y=["MR","CT","PT","NM"],b=n(51),w=n(211),E=n(57);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return k}));var k=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(o=I(t).call(this,e,n))||"object"!==S(o)&&"function"!=typeof o?P(a):o,Object.defineProperties(P(r),{_studyInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_series:{configurable:!1,enumerable:!1,writable:!1,value:[]},_displaySets:{configurable:!1,enumerable:!1,writable:!1,value:[]},_derivedDisplaySets:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstSeries:{configurable:!1,enumerable:!1,writable:!0,value:null},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,c,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,f=[{key:"getReferencedDisplaySet",value:function(e,t){var n=[];t.forEach((function(e){n=n.concat(e.displaySets)}));var r=[];0!==n.length&&void 0!==e&&void 0!==n&&(r=n.filter((function(t){if(void 0!==t)return t.displaySetInstanceUID!==e.displaySetInstanceUID})));var a=e.metadata,o=function(e,t){var n;if(e.SourceImageSequence)n=e.SourceImageSequence;else{var r=_(e.PerFrameFunctionalGroupsSequence)[0];if(r){var a=r.DerivationImageSequence;n=a}}if(n){for(var o,i=_(n),s=0;s<i.length;s++){var c=i[s].ReferencedSOPInstanceUID;if((o=N(t,c))&&0!==o.length)break}return o}}(a,r),i=!o||0===o.length;if(i&&(o=function(e){if(e.ReferencedSeriesSequence){var t=_(e.ReferencedSeriesSequence);return t.map((function(e){return e.SeriesInstanceUID}))}}(a)),(i=!o||0===o.length)&&(o=function(e,t){if(e.ReferencedImageSequence){for(var n,r=_(e.ReferencedImageSequence),a=0;a<r.length;a++){var o=r[a].ReferencedSOPInstanceUID;if(o&&(n=N(t,o))&&0!==n.length)break}return n}}(a,r)),o&&0!==o.length)return r.find((function(e){return o.includes(e.SeriesInstanceUID)}))}}],(c=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"studyInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getStudyInstanceUID()}})}},{key:"getDisplaySets",value:function(){return this._displaySets.slice()}},{key:"_createDisplaySetsForSeries",value:function(e,t){var n=this,o=[];if(!(t.getInstanceCount()>0)){var i=new a.a([]),s=t.getData();return i.setAttributes({displaySetInstanceUID:i.uid,SeriesInstanceUID:s.SeriesInstanceUID,SeriesDescription:s.SeriesDescription,SeriesNumber:s.SeriesNumber,Modality:s.Modality}),o.push(i),o}var c=function(e){var t=new Set;return e.forEachInstance((function(e){var n=e.getTagValue("SOPClassUID");t.add(n)})),Array.from(t)}(t);if(e&&e.length>0){var f=function(e,t,n,a){if(1===a.length){var o=a[0],i=e.map((function(e){return e.module})).filter((function(e){return e.sopClassUIDs.includes(o)}));if(i&&i.length){var s=i[0],c=r.a.getAuthorizationHeader(),l=b.a.getHTTPErrorHandler(),u=new j({url:n.getData().wadoRoot,headers:c,errorInterceptor:l,requestHooks:[Object(E.a)()]}),f=s.getDisplaySetFromSeries(t,n,u,c);if(f&&!f.Modality){var p=t.getFirstInstance();f.Modality=p.getTagValue("Modality")}return f}}else console.warn("getDisplaySetFromSopClassPlugin: More than one SOPClassUID in the same series is not yet supported.")}(e,t,n,c);if(f)return f.sopClassModule=!0,f.isDerived&&this._addDerivedDisplaySet(f),o.push(f),o}var p=[];if(t.forEachInstance((function(e){var r,i,s;if(Object(l.a)(e.getTagValue("SOPClassUID"))||e.getTagValue("Rows"))x(e)?((r=D(t,[e])).setAttributes({sopClassUIDs:c,isClip:!0,SeriesInstanceUID:t.getSeriesInstanceUID(),StudyInstanceUID:n.getStudyInstanceUID(),numImageFrames:e.getTagValue("NumberOfFrames"),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime")}),o.push(r)):T(e.Modality)?((r=D(t,[e])).setAttributes({sopClassUIDs:c,StudyInstanceUID:n.getStudyInstanceUID(),SeriesInstanceUID:t.getSeriesInstanceUID(),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime")}),o.push(r)):p.push(e);else{var f=new a.a([]),m=t.getData();f.setAttributes({displaySetInstanceUID:f.uid,SeriesDate:m.SeriesDate,SeriesTime:m.SeriesTime,SeriesInstanceUID:t.getSeriesInstanceUID(),SeriesNumber:e.getTagValue("SeriesNumber"),SeriesDescription:e.getTagValue("SeriesDescription"),numImageFrames:e.getTagValue("NumberOfFrames"),frameRate:e.getTagValue("FrameTime"),Modality:e.getTagValue("Modality"),isMultiFrame:!1,StudyInstanceUID:n.getStudyInstanceUID(),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime"),isReconstructable:!1,isSOPClassUIDSupported:!1,SOPClassUIDNaturalized:(i=e.getTagValue("SOPClassUID"),s="",i&&l.a?(u.a.MRSpectroscopyStorage===i?s="MRSpectroscopy":u.a.EnhancedUSVolumeStorage===i?s="EnhancedUSVolume":u.a.Sop12LeadECGWaveformStorage===i?s="Sop12LeadECGWaveform":u.a.GeneralECGWaveformStorage===i?s="GeneralECGWaveform":u.a.AmbulatoryECGWaveformStorage===i?s="AECAmbulatoryECGWaveformGW":u.a.HemodynamicWaveformStorage===i?s="HemodynamicWaveform":u.a.CardiacElectrophysiologyWaveformStorage===i?s="CardiacElectrophysiologyWaveform":u.a.BasicVoiceAudioWaveformStorage===i?s="BasicVoiceAudioWaveform":u.a.GeneralAudioWaveformStorage===i?s="GGeneralAudioWaveformAW":u.a.ArterialPulseWaveformStorage===i?s="APArterialPulseWaveformW":u.a.RespiratoryWaveformStorage===i?s="RespiratoryWaveform":u.a.GrayscaleSoftcopyPresentationStateStorage===i?s="GrayscaleSoftcopyPresentationState":u.a.ColorSoftcopyPresentationStateStorage===i?s="ColorSoftcopyPresentationState":u.a.PseudoColorSoftcopyPresentationStateStorage===i?s="PseudoColorSoftcopyPresentationState":u.a.BlendingSoftcopyPresentationStateStorage===i?s="BlendingSoftcopyPresentationState":u.a.XAXRFGrayscaleSoftcopyPresentationStateStorage===i?s="XAXRFGrayscaleSoftcopyPresentationState":u.a.RawDataStorage===i?s="RawData":u.a.SpatialRegistrationStorage===i?s="SpatialRegistration":u.a.SpatialFiducialsStorage===i?s="SpatialFiducials":u.a.DeformableSpatialRegistrationStorage===i?s="DeformableSpatialRegistration":u.a.SegmentationStorage===i?s="SEG":u.a.SurfaceSegmentationStorage===i?s="SurfaceSEG":u.a.RealWorldValueMappingStorage===i?s="RealWorldValueMapping":u.a.SurfaceScanMeshStorage===i?s="SurfaceScanMesh":u.a.SurfaceScanPointCloudStorage===i?s="SurfaceScanPointCloud":u.a.StereometricRelationshipStorage===i?s="StereometricRelationship":u.a.LensometryMeasurementsStorage===i?s="LensometryMeasurements":u.a.AutorefractionMeasurementsStorage===i?s="AutorefractionMeasurements":u.a.KeratometryMeasurementsStorage===i?s="KeratometryMeasurements":u.a.SubjectiveRefractionMeasurementsStorage===i?s="SubjectiveRefractionMeasurements":u.a.VisualAcuityMeasurementsStorage===i?s="VisualAcuityMeasurements":u.a.SpectaclePrescriptionReportStorage===i?s="SpectaclePrescriptionReport":u.a.OphthalmicAxialMeasurementsStorage===i?s="OphthalmicAxialMeasurements":u.a.IntraocularLensCalculationsStorage===i?s="IntraocularLensCalculations":u.a.MacularGridThicknessandVolumeReport===i?s="MacularGridThicknessandVolume":u.a.OphthalmicVisualFieldStaticPerimetryMeasurementsStorage===i?s="OphthalmicVisualFieldStaticPerimetryMeasurements":u.a.OphthalmicThicknessMapStorage===i?s="OphthalmicThicknessMap":u.a.CornealTopographyMapStorage===i?s="CornealTopographyMap":u.a.BasicTextSR===i?s="BasicTextSR":u.a.EnhancedSR===i?s="EnhancedSR":u.a.ComprehensiveSR===i?s="ComprehensiveSR":u.a.Comprehensive3DSR===i?s="Comprehensive3DSR":u.a.ProcedureLog===i?s="ProcedureLog":u.a.MammographyCADSR===i?s="MammographyCADSR":u.a.KeyObjectSelection===i?s="KeyObject":u.a.ChestCADSR===i?s="ChestCADSR":u.a.XRayRadiationDoseSR===i?s="XRayRadiationDoseSR":u.a.RadiopharmaceuticalRadiationDoseSR===i?s="RadiopharmaceuticalRadiationDoseSR":u.a.ColonCADSR===i?s="ColonCADSR":u.a.ImplantationPlanSRDocumentStorage===i?s="ImplantationPlanSRDocument":u.a.EncapsulatedPDFStorage===i?s="EncapsulatedPDF":u.a.EncapsulatedCDAStorage===i?s="EncapsulatedCDA":u.a.BasicStructuredDisplayStorage===i?s="BasicStructuredDisplay":u.a.RTDoseStorage===i?s="RTDose":u.a.RTStructureSetStorage===i?s="RTStructureSet":u.a.RTBeamsTreatmentRecordStorage===i?s="RTBeamsTreatmentRecord":u.a.RTPlanStorage===i?s="RTPlan":u.a.RTBrachyTreatmentRecordStorage===i?s="RTBrachyTreatmentRecord":u.a.RTTreatmentSummaryRecordStorage===i?s="RTTreatmentSummaryRecord":u.a.RTIonPlanStorage===i?s="RTIonPlan":u.a.RTIonBeamsTreatmentRecordStorage===i?s="RTIonBeamsTreatmentRecord":u.a.RTBeamsDeliveryInstructionStorage===i?s="RTBeamsDeliveryInstruction":u.a.GenericImplantTemplateStorage===i?s="GenericImplantTemplate":u.a.ImplantAssemblyTemplateStorage===i?s="ImplantAssemblyTemplate":u.a.ImplantTemplateGroupStorage===i&&(s="ImplantTemplateGroup"),s):s),metadata:e.getData().metadata}),o.push(f)}})),p.length){var m=D(t,p);m.setAttribute("StudyInstanceUID",n.getStudyInstanceUID()),m.setAttributes({sopClassUIDs:c}),o.push(m)}return o}},{key:"_addDerivedDisplaySet",value:function(e){this._derivedDisplaySets.push(e)}},{key:"_addDerivedDisplaySets",value:function(e){var t=this;e.map((function(e){return t._derivedDisplaySets.push(e)}))}},{key:"getDerivedDatasets",value:function(e){var n=this,r=e.Modality,a=e.referencedSeriesInstanceUID,o=e.referencedFrameOfReferenceUID,i=this._derivedDisplaySets;return r&&(i=i.filter((function(e){return e.Modality===r}))),a&&(i=i.filter((function(e){var r=t.getReferencedDisplaySet(e,[n]);return!!r&&r.SeriesInstanceUID===a}))),o&&(i=i.filter((function(e){return e.FrameOfReferenceUID===o}))),i}},{key:"createDisplaySets",value:function(e){var t=this;return this.getSeriesCount()?(this.forEachSeries((function(n){t._createDisplaySetsForSeries(e,n).forEach((function(e){return t._insertDisplaySet(e)}))})),this._displaySets):[]}},{key:"createAndAddDisplaySetsForSeries",value:function(e,t){var n=this;if(!this.containsSeries(t))return!1;for(var r=this._createDisplaySetsForSeries(e,t),a=this._displaySets.length-1;a>=0;a--)this._displaySets[a].SeriesInstanceUID===t.getSeriesInstanceUID()&&this._displaySets.splice(a,1);return r.forEach((function(e){n.addDisplaySet(e)})),!0}},{key:"addDisplaySet",value:function(e){return!!(e instanceof a.a||e.sopClassModule)&&(this._insertDisplaySet(e),!0)}},{key:"forEachDisplaySet",value:function(e){i.a.isValidCallback(e)&&this._displaySets.forEach((function(t,n){e.call(null,t,n)}))}},{key:"_insertDisplaySet",value:function(e){var t,n=e.SeriesNumber,r=this._displaySets,a=r.length;if(Object(w.a)(e.Modality)){for(var o,i=0;i<r.length;i++)if(Object(w.a)(r[i].Modality)){o=i;break}o||(o=r.length);for(var s=o;s<r.length;s++)if(r[s].SeriesNumber!==n||t||(t=s),r[s].SeriesNumber>n){a=s;break}}else for(var c=0;c<r.length;c++)if(r[c].SeriesNumber!==n||t||(t=c),r[c].SeriesNumber>n||Object(w.a)(r[c].Modality)){a=c;break}if(void 0!==t&&e.SeriesDate)for(var l="".concat(e.SeriesDate).concat(e.SeriesTime),u=t;u<a;u++){var f=r[u];if(f.SeriesDate&&"".concat(f.SeriesDate).concat(f.SeriesTime)<l){a=u;break}}this._displaySets.some((function(t){return t.displaySetInstanceUID===e.displaySetInstanceUID}))||(this._displaySets.splice(a,0,e),this.displaySets=this._displaySets)}},{key:"findDisplaySet",value:function(e){if(i.a.isValidCallback(e))return this._displaySets.find((function(t,n){return e.call(null,t,n)}))}},{key:"getDisplaySetCount",value:function(){return this._displaySets.length}},{key:"getStudyInstanceUID",value:function(){return this._studyInstanceUID}},{key:"getSeries",value:function(){return this._series.slice()}},{key:"addSeries",value:function(e){var t=!1;return e instanceof s.a&&void 0===this.getSeriesByUID(e.getSeriesInstanceUID())&&(this._series.push(e),t=!0),t}},{key:"updateSeries",value:function(e,t){var n=this._series.findIndex((function(t){return t.getSeriesInstanceUID()===e}));if(n<0)return!1;if(!(t instanceof s.a))throw new Error("Series must be an instance of SeriesMetadata");return this._series[n]=t,!0}},{key:"getSeriesByIndex",value:function(e){var t;return i.a.isValidIndex(e)&&(t=this._series[e]),t}},{key:"getSeriesByUID",value:function(e){var t;return i.a.isValidUID(e)&&(t=this._series.find((function(t){return t.getSeriesInstanceUID()===e}))),t}},{key:"containsSeries",value:function(e){return e instanceof s.a&&this._series.indexOf(e)>=0}},{key:"getSeriesCount",value:function(){return this._series.length}},{key:"getInstanceCount",value:function(){return this._series.reduce((function(e,t){return e+t.getInstanceCount()}),0)}},{key:"forEachSeries",value:function(e){i.a.isValidCallback(e)&&this._series.forEach((function(t,n){e.call(null,t,n)}))}},{key:"indexOfSeries",value:function(e){return this._series.indexOf(e)}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getStudyInstanceUID()===this.getStudyInstanceUID()}},{key:"getFirstSeries",value:function(){var e=this._firstSeries;if(!(e instanceof s.a)){e=null;var t=this.getSeriesByIndex(0);t instanceof s.a&&(this._firstSeries=t,e=t)}return e}},{key:"getFirstImageId",value:function(e){try{return this.findDisplaySet((function(t){return t.displaySetInstanceUID===e})).images[0].getImageId()}catch(e){return console.error("Failed to retrieve image metadata"),null}}},{key:"getFirstInstance",value:function(){var e=this._firstInstance;if(!(e instanceof o.a)){e=null;var t=this.getFirstSeries();if(t instanceof s.a){var n=t.getFirstInstance();n instanceof o.a&&(this._firstInstance=n,e=n)}}return e}},{key:"findSeriesAndInstanceByInstance",value:function(e){var t;if(i.a.isValidCallback(e)){var n,r=this._series.find((function(t){return(n=t.findInstance(e))instanceof o.a}));r instanceof s.a&&(t={series:r,instance:n})}return t||{}}},{key:"findSeriesByInstance",value:function(e){return this.findSeriesAndInstanceByInstance(e).series}},{key:"findInstance",value:function(e){return this.findSeriesAndInstanceByInstance(e).instance}}])&&O(n.prototype,c),f&&O(n,f),t}(i.a),j=c.a.DICOMwebClient,x=function(e){return e.getTagValue("NumberOfFrames")>1},D=function(e,t){var n=t[0],r=new a.a(t),o=e.getData();r.setAttributes({displaySetInstanceUID:r.uid,SeriesDate:o.SeriesDate,SeriesTime:o.SeriesTime,SeriesInstanceUID:e.getSeriesInstanceUID(),SeriesNumber:n.getTagValue("SeriesNumber"),SeriesDescription:n.getTagValue("SeriesDescription"),numImageFrames:t.length,frameRate:n.getTagValue("FrameTime"),Modality:n.getTagValue("Modality"),isMultiFrame:x(n)});r.sortBy((function(e,t){return(parseInt(e.getTagValue("InstanceNumber",0))||0)-(parseInt(t.getTagValue("InstanceNumber",0))||0)})),r.setAttribute("InstanceNumber",r.getImage(0).getTagValue("InstanceNumber"));var i=p(t);r.isReconstructable=i.value;var s=void 0;if(r.isReconstructable){r.sortByImagePositionPatient();var c=i.reconstructionIssues.find((function(e){return e===ReconstructionIssues.DATASET_4D}));s=function(e,t){var n=e.length,r=e[0].getData().metadata.ImagePositionPatient,a=[],o=0;if(n>2){var i=e[n-1].getData().metadata.ImagePositionPatient;if(r&&i)for(var s=v(r,i)/(n-1),c=r,l=1;l<n;++l){var u=e[l].getData().metadata.ImagePositionPatient,p=v(u,c);if(!(t&&p<.001)){var m=g(p,s);if(m){var d=m.issue;if(d===f.a.MISSING_FRAMES)o+=m.missingFrames;else if(d===f.a.IRREGULAR_SPACING){a.push(d);break}}c=u}}}return{isUniform:0===a.length,missingFrames:o,reconstructionIssues:a}}(r.images,c),r.isReconstructable=s.isUniform,s.missingFrames&&(r.missingFrames=s.missingFrames)}return r.displayReconstructableInfo||(r.reconstructionIssues=s?i.reconstructionIssues.concat(s.reconstructionIssues):i.reconstructionIssues),r.isSOPClassUIDSupported=!0,r},T=function(e){return"CR"===e||"MG"===e||"DX"===e};function N(e,t){for(var n=e.filter((function(e){return e instanceof a.a})),r=0;r<n.length;r++){var o=n[r].images;if(o)for(var i=0;i<o.length;i++){var s=o[i];if(s&&s.SOPInstanceUID===t)return[s.getData().metadata.SeriesInstanceUID]}}}function _(e){return Array.isArray(e)?e:[e]}},1374:function(e,t,n){"use strict";n.r(t);n(811),n(812);var r=n(268),a=n(0),o=n.n(a),i=n(33),s=n.n(i),c=n(22),l=n(4),u=n.n(l),f=n(3),p=n.n(f),m=u.a.importInternal,d=m("drawing/draw"),h=m("drawing/drawLine"),g=m("drawing/getNewContext");function v(e,t,n){var r=g(e.canvasContext.canvas),a=e.element,o=p.a.pixelToCanvas(a,t),i=a.clientWidth,s=a.clientHeight;d(r,(function(e){h(e,a,{x:o.x+10,y:o.y},{x:i,y:o.y},n,"canvas"),h(e,a,{x:o.x-10,y:o.y},{x:0,y:o.y},n,"canvas"),h(e,a,{x:o.x,y:o.y+10},{x:o.x,y:s},n,"canvas"),h(e,a,{x:o.x,y:o.y-10},{x:o.x,y:0},n,"canvas")}))}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O={DICOM_SEG_TEMP_CROSSHAIRS_TOOL:"DICOMSegTempCrosshairsTool"}.DICOM_SEG_TEMP_CROSSHAIRS_TOOL,I=Object(l.getModule)("segmentation").getters,P=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={mixins:["enabledOrDisabledBinaryTool"],name:O},a=Object.assign(r,n);return(e=w(this,E(t).call(this,a)))._rtStructModule=u.a.getModule("rtstruct"),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"renderToolData",value:function(e){var t=e.detail,n=(t.element,Object(l.getToolState)(e.currentTarget,this.name));if(n)for(var r=0;r<n.data.length;r++)v(t,n.data[r].center,{color:l.toolColors.getActiveColor(),lineWidth:1}),n.data.pop()}}])&&b(n.prototype,r),a&&b(n,a),t}(Object(l.importInternal)("base/BaseTool"));P.addCrosshair=function(e,t,n){var r=I.labelmap3D(e),a=u.a.getToolState(e,"stack"),o=p.a.getEnabledElement(e).image,i=o.rows,s=o.columns;if(a){for(var c=a.data[0].imageIds.findIndex((function(e){return e===t})),f=r.labelmaps2D[c].pixelData,m=0,d=0,h=0,g=0;g<i;g++)for(var v=0;v<s;v++)f[g*s+v]===n&&(h++,m+=v+.5,d+=g+.5);m/=h,d/=h;var y=l.globalImageIdSpecificToolStateManager.saveToolState();y[t]||(y[t]={});var b=y[t];b[O]?b[O].data||(b[O].data=[]):b[O]={data:[]},b[O].data.push({center:{x:m,y:d},segmentNumber:n}),"enabled"!==u.a.getToolForElement(e,O).mode&&u.a.setToolEnabled(O)}};var C={definitions:[],defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"},k=n(766),j=n(202),x=n(47);function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function N(e,t,n,r,a,o){return _.apply(this,arguments)}function _(){var e;return e=regeneratorRuntime.mark((function e(t,n,r,a,o,i){var s,c,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.a.getModule("segmentation"),c=s.setters,l=A(t[0]),f=R(a),c.labelmap3DByFirstImageId(t[0],r,l,a,t.length,o,f),n.labelmapSegments||(n.labelmapSegments={}),n.labelmapSegments[l]=i.length?Array.from(new Set(i.filter((function(e){return!!e})).reduce((function(e,t){return e.concat(t)})))):[],n.labelmapIndex=l,console.log("Segmentation loaded."),p=new CustomEvent("extensiondicomsegmentationsegloaded",{detail:{imageIds:t,segDisplaySet:n,labelmapBuffer:r,segMetadata:a,segmentsOnFrame:o,labelmapSegments:i}}),document.dispatchEvent(p),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})),(_=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){T(o,r,a,i,s,"next",e)}function s(e){T(o,r,a,i,s,"throw",e)}i(void 0)}))}).apply(this,arguments)}function A(e){var t=u.a.getModule("segmentation").state.series[e],n=0;if(t){var r=t.labelmaps3D;n=r.length;for(var a=0;a<r.length;a++)if(!r[a]){n=a;break}}return n}function R(e){var t=u.a.getModule("segmentation"),n=t.setters,r=t.state.colorLutTables,a=function(){for(var e=u.a.getModule("segmentation").state.colorLutTables,t=e.length,n=0;n<e.length;n++)if(!e[n]){t=n;break}return t}(),o=e.data;if(!o.some((function(e){return e&&(e.ROIDisplayColor||e.RecommendedDisplayCIELabValue)})))return 0;for(var i=[],s=0;s<o.length;s++){var c=o[s];if(c){var l=c.ROIDisplayColor,f=c.RecommendedDisplayCIELabValue;if(f){var p=x.b.data.Colors.dicomlab2RGB(f).map((function(e){return Math.round(255*e)}));i[s]=[].concat(D(p),[255])}else i[s]=l?[].concat(D(l),[255]):D(r[0][s])}}return i.shift(),n.colorLUT(a,i),a}var M=n(12);function L(){cornerstone.getEnabledElements().forEach((function(e){cornerstone.updateImage(e.element)}))}function U(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var F=j.a.studyMetadataManager;function V(e,t,n){return B.apply(this,arguments)}function B(){var e;return e=regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c,l,f,p,m,d,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>3&&void 0!==h[3]?h[3]:function(){},o=h.length>4&&void 0!==h[4]?h[4]:function(e){console.error(e.message)},i=F.get(t.StudyInstanceUID),s=i.getFirstImageId(t.displaySetInstanceUID),c=u.a.getModule("segmentation"),l=c.state,f=l.series[s],p=f?f.activeLabelmapIndex:void 0,(m=!0===r.hasOverlapping?r.originLabelMapIndex:r.labelmapIndex)!==p){e.next=11;break}return M.a.warn("".concat(p," is already the active labelmap")),e.abrupt("return",m);case 11:if(r.isLoaded||r.loadError){e.next=26;break}return e.prev=12,e.next=15,r.load(t,n);case 15:e.next=26;break;case 17:return e.prev=17,e.t0=e.catch(12),r.isLoaded=!1,r.loadError=!0,r.segLoadErrorMessagge=e.t0.message,o(e.t0),d=new CustomEvent("segmentationLoadingError"),document.dispatchEvent(d),e.abrupt("return",-1);case 26:return m=!0===r.hasOverlapping?r.originLabelMapIndex:r.labelmapIndex,l=u.a.getModule("segmentation").state,(f=l.series[s])&&(f.activeLabelmapIndex=m),L(),a(),e.abrupt("return",m);case 33:case"end":return e.stop()}}),e,null,[[12,17]])})),(B=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){U(o,r,a,i,s,"next",e)}function s(e){U(o,r,a,i,s,"throw",e)}i(void 0)}))}).apply(this,arguments)}var z=n(135);function H(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,o=z.a.StudyMetadata.getReferencedDisplaySet(t,e);return r&&(n=V(o,e,t,void 0,a)),{referencedDisplaySet:o,activatedLabelmapPromise:n}}function q(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var G=c.a.utils.DicomLoaderService,W=x.b.data,Y=W.DicomMessage,J=W.DicomMetaDictionary,K=Object.values({DICOM_SEG:"1.2.840.10008.5.1.4.1.1.66.4"});function X(e,t){return x.b.adapters.Cornerstone.Segmentation.generateToolState(t,e,cornerstone.metaData,!1,.01,4)}function Q(e,t,n){var r=e.find((function(e){return e.StudyInstanceUID===t})).displaySets.filter((function(e){return e.SeriesInstanceUID===n}));return r.length>1&&console.warn("More than one display set with the same SeriesInstanceUID. This is not supported yet..."),r[0].images.map((function(e){return e.getImageId()}))}var Z=n(1),$=n.n(Z),ee=n(6),te=n.n(ee),ne=n(28),re=n.n(ne),ae=n(11),oe=n(9),ie=n.n(oe),se=n(1418),ce=(n(1289),function(e){var t=e.defaultColor,n=e.index,r=e.onNext,a=e.onPrev;return o.a.createElement("div",{className:"dcmseg-brush-color-selector"},o.a.createElement("div",{className:"selector-active-segment",style:{backgroundColor:t}},n),o.a.createElement("div",{className:"selector-buttons"},o.a.createElement("button",{onClick:a},"Previous"),o.a.createElement("button",{onClick:r},"Next")))});ce.propTypes={defaultColor:$.a.string.isRequired,index:$.a.oneOfType([$.a.number,$.a.string]).isRequired,onNext:$.a.func.isRequired,onPrev:$.a.func.isRequired};n(1290);var le=function(e){var t=e.value,n=e.onChange,r=e.min,a=e.max,i=e.step;return o.a.createElement("div",{className:"dcmseg-brush-radius"},o.a.createElement("label",{htmlFor:"dcmseg-brush-radius"},"Brush Radius"),o.a.createElement(ae.m,{value:t,min:r,max:a,step:i,onChange:n,id:"dcmseg-brush-radius"}))};le.propTypes={value:$.a.number.isRequired,onChange:$.a.number,min:$.a.number,max:$.a.number,step:$.a.number},le.defaultProps={onChange:function(){},min:1,max:50,step:1};n(1291);var ue=function(e){var t=e.onClick,n=e.title,r=e.description;return o.a.createElement("li",{className:"dcmseg-segmentation-item",onClick:t},o.a.createElement("div",{className:"segmentation-meta"},o.a.createElement("div",{className:"segmentation-meta-title"},n),o.a.createElement("div",{className:"segmentation-meta-description"},r)))};ue.propTypes={onClick:$.a.func.isRequired,title:$.a.string.isRequired,description:$.a.string.isRequired},ue.defaultProps={description:""};var fe=ue;n(1292);function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(n,!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ve=function(e){var t=e.configuration,n=e.onBack,r=e.onChange,i=e.disabledFields,s=void 0===i?[]:i,c=ge(Object(a.useState)({renderFill:t.renderFill,renderOutline:t.renderOutline,shouldRenderInactiveLabelmaps:t.shouldRenderInactiveLabelmaps,fillAlpha:t.fillAlpha,outlineAlpha:t.outlineAlpha,outlineWidth:t.outlineWidth,fillAlphaInactive:t.fillAlphaInactive,outlineAlphaInactive:t.outlineAlphaInactive}),2),l=c[0],u=c[1];Object(a.useEffect)((function(){r(l)}),[r,l]);var f=function(e){u((function(t){return de({},t,he({},e,!t[e]))}))},p=function(e,t){u((function(n){return de({},n,he({},e,t))}))},m=function(e){return parseFloat(e/100).toFixed(2)};return o.a.createElement("div",{className:"dcmseg-segmentation-settings"},o.a.createElement("div",{className:"settings-title"},o.a.createElement("h4",null,"Settings"),o.a.createElement("button",{className:"return-button",onClick:n},"Back")),o.a.createElement("div",{className:"settings-group",style:{marginBottom:l.renderFill?15:0}},o.a.createElement(ye,{label:"Segment Fill",checked:l.renderFill,onChange:function(){return f("renderFill")}}),l.renderFill&&o.a.createElement(be,{label:"Opacity",step:1,min:0,max:100,value:100*l.fillAlpha,onChange:function(e){return p("fillAlpha",m(e.target.value))},showPercentage:!0})),o.a.createElement("div",{className:"settings-group",style:{marginBottom:l.renderOutline?15:0}},o.a.createElement(ye,{label:"Segment Outline",checked:l.renderOutline,onChange:function(){return f("renderOutline")}}),l.renderOutline&&o.a.createElement(o.a.Fragment,null,!s.includes("outlineAlpha")&&o.a.createElement(be,{value:100*l.outlineAlpha,label:"Opacity",showPercentage:!0,step:1,min:0,max:100,onChange:function(e){return p("outlineAlpha",m(e.target.value))}}),!s.includes("outlineWidth")&&o.a.createElement(be,{value:l.outlineWidth,label:"Width",showValue:!0,step:1,min:0,max:5,onChange:function(e){return p("outlineWidth",parseInt(e.target.value))}}))))},ye=function(e){var t=e.label,n=e.checked,r=e.onChange;return o.a.createElement("div",{className:"custom-check"},o.a.createElement("label",null,o.a.createElement("span",null,t),o.a.createElement("input",{type:"checkbox",checked:n,onChange:r})))},be=function(e){var t=e.label,n=e.onChange;return o.a.createElement("div",{className:"range"},o.a.createElement("label",{htmlFor:"range"},t),o.a.createElement(ae.m,pe({},e,{onChange:function(e){e.persist(),n(e)}})))};ve.propTypes={configuration:$.a.shape({renderFill:$.a.bool.isRequired,renderOutline:$.a.bool.isRequired,shouldRenderInactiveLabelmaps:$.a.bool.isRequired,fillAlpha:$.a.oneOfType([$.a.string,$.a.number]).isRequired,outlineAlpha:$.a.oneOfType([$.a.string,$.a.number]).isRequired,outlineWidth:$.a.number.isRequired,fillAlphaInactive:$.a.number.isRequired,outlineAlphaInactive:$.a.number.isRequired}).isRequired,onBack:$.a.func.isRequired,onChange:$.a.func.isRequired};var we=ve,Ee=n(775);n(1295);function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oe=function(e){var t=e.color;return o.a.createElement("div",{className:"segment-color",style:{backgroundColor:"rgba(".concat(t.join(","),")")}})};Oe.propTypes={color:$.a.array.isRequired};var Ie=function(e){var t=e.index,n=e.label,r=e.onClick,i=e.itemClass,s=e.color,c=e.labelmap3D,l=e.visible,u=e.onVisibilityChange,f=Se(Object(a.useState)(l),2),p=f[0],m=f[1];Object(a.useEffect)((function(){m(l)}),[l]);return o.a.createElement("div",{className:"dcmseg-segment-item"},o.a.createElement(ae.w,{key:t,itemKey:t,itemIndex:t,itemClass:i,itemMeta:o.a.createElement(Oe,{color:s}),itemMetaClass:"segment-color-section",onItemClick:function(){return r(t)}},o.a.createElement("div",null,o.a.createElement("div",{className:"segment-label",style:{marginBottom:4}},o.a.createElement("a",{"data-tip":!0,"data-for":"SegmentHover".concat(t)},o.a.createElement("span",null,n)),o.a.createElement(Ee.a,{id:"SegmentHover".concat(t),delayShow:250,place:"right",border:!0,type:"light"},o.a.createElement("span",null,n)),o.a.createElement(ae.g,{className:"eye-icon ".concat(p&&"--visible"),name:p?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(e){e.stopPropagation();var n=!p;m(n),u(n,t,c)}})),!1,!1)))};Ie.propTypes={index:$.a.oneOfType([$.a.string,$.a.number]).isRequired,label:$.a.string.isRequired,onClick:$.a.func,itemClass:$.a.string,color:$.a.array.isRequired},Ie.defaultProps={itemClass:"",onClick:function(){}};var Pe=Ie,Ce=n(319);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=getComputedStyle(document.body),Te=De.getPropertyValue("--ui-gray-darker"),Ne=De.getPropertyValue("--active-color"),_e=De.getPropertyValue("--default-color"),Ae=De.getPropertyValue("--ui-gray-dark"),Re={singleValue:function(e,t){return je({},e,{width:"100%"})},control:function(e,t){return je({},e,{cursor:"pointer",background:Te,borderRadius:t.isFocused?"5px 5px 5px 5px":5,borderColor:t.isFocused?Ne:_e,boxShadow:(t.isFocused,null),minHeight:"50px","&:hover":{borderColor:Ne}})},menu:function(e){return je({},e,{borderRadius:5,background:Te})},option:function(e,t){return je({},e,{cursor:"pointer","&:first-of-type":{borderTopLeftRadius:5,borderTopRightRadius:5},"&:last-of-type":{borderBottomLeftRadius:5,borderBottomRightRadius:5},background:t.isSelected?Ae:Te,"&:hover":{background:Ae}})}},Me=function(e){var t=e.value,n=e.formatOptionLabel,r=e.options;return o.a.createElement(Ce.a,{value:void 0===t?null:t,formatOptionLabel:n,styles:Re,options:r})},Le=(n(1296),n(1419)),Ue=n(1420),Fe=(n(734),u.a.getModule("segmentation")),Ve=Fe.setters,Be=Fe.getters;function ze(e,t,n){var r=e.find((function(e){return e.StudyInstanceUID===t})).displaySets.filter((function(e){return e.SeriesInstanceUID===n}));return r.length>1&&console.warn("More than one display set with the same SeriesInstanceUID. This is not supported yet..."),r[0].images.map((function(e){return e.getImageId()}))}function He(e){var t=[];if(!e)return console.warn("element is empty... weird..."),t;var n=u.a.getModule("segmentation"),r=Be.labelmaps3D(e).labelmaps3D;if(!r)return console.debug("LabelMap3D is empty.. so zero segments"),t;console.debug(r);for(var a=0;a<r.length;a++){var o=[],i=r[a],s=i&&i.metadata&&i.metadata.data?i.metadata.data:null,c=n.state.colorLutTables[i.colorLUTIndex];if(console.debug("Labelmap3D Index = "+a),console.debug("labelmap3D.colorLUTIndex = "+i.colorLUTIndex),console.debug(i),console.debug(c),s)for(var l=1;l<s.length;l++){var f=s[l];if(f){console.debug("SegmentNumber = "+f.SegmentNumber),console.debug(f);var p=a+"+"+f.SegmentNumber,m=c[f.SegmentNumber],d={id:p,labelmapIndex:a,segmentIndex:f.SegmentNumber,color:m,meta:f,name:f.SegmentLabel,description:f.SegmentDescription};o.push(d)}}else console.warn("Missing Meta Data for Label; so ignore");t.push(o)}return t}function qe(e){return[].concat.apply([],e)}function Ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(o=o||{SegmentedPropertyCategoryCodeSequence:{CodeValue:"T-D0050",CodingSchemeDesignator:"SRT",CodeMeaning:"Tissue"},SegmentNumber:1,SegmentLabel:t||"label-0-1",SegmentDescription:n,SegmentAlgorithmType:"SEMIAUTOMATIC",SegmentAlgorithmName:"MONAI",SegmentedPropertyTypeCodeSequence:{CodeValue:"T-D0050",CodingSchemeDesignator:"SRT",CodeMeaning:"Tissue"}},a){for(var i=He(e),s=i?i.length:0,c=0;c<i.length;c++)if(!i[c]||!i[c].length){s=c;break}console.debug("Next LabelmapIndex: "+s),Ve.activeLabelmapIndex(e,s)}var l=Be.labelmap2D(e),f=l.labelmap3D,p=l.activeLabelmapIndex;console.debug("activeLabelmapIndex: "+p);var m=u.a.getModule("segmentation").state;console.debug(m.colorLutTables),m.colorLutTables.length<=p&&(console.debug("Adding new Color LUT Table for: "+p),Ve.colorLUT(p),console.debug(m.colorLutTables),f.colorLUTIndex=p),console.debug("labelmap3D.colorLUTIndex = "+f.colorLUTIndex),f.metadata&&f.metadata.data||(f.metadata={data:[void 0]});for(var d=f.metadata,h=1,g=1;g<d.data.length&&h===d.data[g].SegmentNumber;g++)h++;if(console.debug("Next Segment: "+h+"; LabelMap: "+p),o.SegmentNumber=h,o.SegmentLabel=t||"label_"+p+"-"+h,h===d.data.length?d.data.push(o):d.data.splice(h,0,o),Ve.activeSegmentIndex(e,h),r){var v=u.a.getModule("segmentation").state.colorLutTables[f.colorLUTIndex];v[h][0]=r.r,v[h][1]=r.g,v[h][2]=r.b}return{id:p+"+"+h,labelmapIndex:p,segmentIndex:h}}function We(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,s=Be.labelmap3D(e,t);if(s){var c=s.metadata.data?s.metadata.data:s.metadata;if(c){var l=c.filter((function(e){return e&&e.SegmentNumber})).map((function(e){return e.SegmentNumber}));l.unshift(0),console.debug(l);var u=n-1;console.debug("labelmapIndex: "+t),console.debug("segmentIndex: "+n),console.debug("segmentOffset: "+u);var f=s.labelmaps2D,m=r.byteLength/a;console.debug("labelmap2d length:"+f.length),(!f.length||f.length<1)&&(console.debug("First time update..."),o=void 0);for(var d=s.buffer,h=!1,g=0;g<a;g++)if(!(i>=0&&g!==i)){f[g]&&f[g].segmentsOnLabelmap&&f[g].segmentsOnLabelmap.length||(o="override");var v=m*g,y=m/2,b=new Uint16Array(r,v,y),w=new Uint16Array(d,v,y);"overlap"!==o&&"override"!==o||(h=!0);for(var E=0;E<b.length;E++)"overlap"===o?b[E]>0&&(w[E]=b[E]+u):"override"===o?(w[E]===n&&(w[E]=0),b[E]>0&&(w[E]=b[E]+u)):b[E]>0&&(b[E]=b[E]+u);b=h?w:b,f[g]={pixelData:b,segmentsOnLabelmap:l}}s.buffer=h?d:r,p.a.updateImage(e)}else console.warn("Missing Meta; so ignore")}else console.warn("Missing Label; so ignore")}function Ye(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,i=Be.labelmap3D(e,t);if(i){var s=i.metadata.data?i.metadata.data:i.metadata;if(s){if(r&&(s[n].SegmentLabel=r),a&&(s[n].SegmentDescription=a),o){var c=u.a.getModule("segmentation").state.colorLutTables[i.colorLUTIndex];c[n][0]=o.r,c[n][1]=o.g,c[n][2]=o.b}}else console.warn("Missing Meta; so ignore")}else console.warn("Missing Label; so ignore")}n(1297);var Je=n(791),Ke=n(780);function Xe(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function Qe(e,t,n){return"#"+Xe(e)+Xe(t)+Xe(n)}var Ze=["james","robert","john","michael","william","david","richard","joseph","thomas","charles","christopher","daniel","matthew","anthony","mark","donald","steven","paul","andrew","joshua","kenneth","kevin","brian","george","edward","ronald","timothy","jason","jeffrey","ryan","jacob","gary","nicholas","eric","jonathan","stephen","larry","justin","scott","brandon","benjamin","samuel","gregory","frank","alexander","raymond","patrick","jack","dennis","jerry","tyler","aaron","jose","adam","henry","nathan","douglas","zachary","peter","kyle","walter","ethan","jeremy","harold","keith","christian","roger","noah","gerald","carl","terry","sean","austin","arthur","lawrence","jesse","dylan","bryan","joe","jordan","billy","bruce","albert","willie","gabriel","logan","alan","juan","wayne","roy","ralph","randy","eugene","vincent","russell","elijah","louis","bobby","philip","johnny","mary","patricia","jennifer","linda","elizabeth","barbara","susan","jessica","sarah","karen","nancy","lisa","betty","margaret","sandra","ashley","kimberly","emily","donna","michelle","dorothy","carol","amanda","melissa","deborah","stephanie","rebecca","sharon","laura","cynthia","kathleen","amy","shirley","angela","helen","anna","brenda","pamela","nicole","emma","samantha","katherine","christine","debra","rachel","catherine","carolyn","janet","ruth","maria","heather","diane","virginia","julie","joyce","victoria","olivia","kelly","christina","lauren","joan","evelyn","judith","megan","cheryl","andrea","hannah","martha","jacqueline","frances","gloria","ann","teresa","kathryn","sara","janice","jean","alice","madison","doris","abigail","julia","judy","grace","denise","amber","marilyn","beverly","danielle","theresa","sophia","marie","diana","brittany","natalie","isabella","charlotte","rose","alexis","kayla"],$e=[{label:"background",value:Qe(0,0,0)},{label:"tissue",value:Qe(128,174,128)},{label:"bone",value:Qe(241,214,145)},{label:"skin",value:Qe(177,122,101)},{label:"connective tissue",value:Qe(111,184,210)},{label:"blood",value:Qe(216,101,79)},{label:"organ",value:Qe(221,130,101)},{label:"mass",value:Qe(144,238,144)},{label:"muscle",value:Qe(192,104,88)},{label:"foreign object",value:Qe(220,245,20)},{label:"waste",value:Qe(78,63,0)},{label:"teeth",value:Qe(255,250,220)},{label:"fat",value:Qe(230,220,70)},{label:"gray matter",value:Qe(200,200,235)},{label:"white matter",value:Qe(250,250,210)},{label:"nerve",value:Qe(244,214,49)},{label:"vein",value:Qe(0,151,206)},{label:"artery",value:Qe(216,101,79)},{label:"capillary",value:Qe(183,156,220)},{label:"ligament",value:Qe(183,214,211)},{label:"tendon",value:Qe(152,189,207)},{label:"cartilage",value:Qe(111,184,210)},{label:"meniscus",value:Qe(178,212,242)},{label:"lymph node",value:Qe(68,172,100)},{label:"lymphatic vessel",value:Qe(111,197,131)},{label:"cerebro-spinal fluid",value:Qe(85,188,255)},{label:"bile",value:Qe(0,145,30)},{label:"urine",value:Qe(214,230,130)},{label:"feces",value:Qe(78,63,0)},{label:"gas",value:Qe(218,255,255)},{label:"fluid",value:Qe(170,250,250)},{label:"edema",value:Qe(140,224,228)},{label:"bleeding",value:Qe(188,65,28)},{label:"necrosis",value:Qe(216,191,216)},{label:"clot",value:Qe(145,60,66)},{label:"embolism",value:Qe(150,98,83)},{label:"head",value:Qe(177,122,101)},{label:"central nervous system",value:Qe(244,214,49)},{label:"brain",value:Qe(250,250,225)},{label:"gray matter of brain",value:Qe(200,200,215)},{label:"telencephalon",value:Qe(68,131,98)},{label:"cerebral cortex",value:Qe(128,174,128)},{label:"right frontal lobe",value:Qe(83,146,164)},{label:"left frontal lobe",value:Qe(83,146,164)},{label:"right temporal lobe",value:Qe(162,115,105)},{label:"left temporal lobe",value:Qe(162,115,105)},{label:"right parietal lobe",value:Qe(141,93,137)},{label:"left parietal lobe",value:Qe(141,93,137)},{label:"right occipital lobe",value:Qe(182,166,110)},{label:"left occipital lobe",value:Qe(182,166,110)},{label:"right insular lobe",value:Qe(188,135,166)},{label:"left insular lobe",value:Qe(188,135,166)},{label:"right limbic lobe",value:Qe(154,150,201)},{label:"left limbic lobe",value:Qe(154,150,201)},{label:"right striatum",value:Qe(177,140,190)},{label:"left striatum",value:Qe(177,140,190)},{label:"right caudate nucleus",value:Qe(30,111,85)},{label:"left caudate nucleus",value:Qe(30,111,85)},{label:"right putamen",value:Qe(210,157,166)},{label:"left putamen",value:Qe(210,157,166)},{label:"right pallidum",value:Qe(48,129,126)},{label:"left pallidum",value:Qe(48,129,126)},{label:"right amygdaloid complex",value:Qe(98,153,112)},{label:"left amygdaloid complex",value:Qe(98,153,112)},{label:"diencephalon",value:Qe(69,110,53)},{label:"thalamus",value:Qe(166,113,137)},{label:"right thalamus",value:Qe(122,101,38)},{label:"left thalamus",value:Qe(122,101,38)},{label:"pineal gland",value:Qe(253,135,192)},{label:"midbrain",value:Qe(145,92,109)},{label:"substantia nigra",value:Qe(46,101,131)},{label:"right substantia nigra",value:Qe(0,108,112)},{label:"left substantia nigra",value:Qe(0,108,112)},{label:"cerebral white matter",value:Qe(250,250,225)},{label:"right superior longitudinal fasciculus",value:Qe(127,150,88)},{label:"left superior longitudinal fasciculus",value:Qe(127,150,88)},{label:"right inferior longitudinal fasciculus",value:Qe(159,116,163)},{label:"left inferior longitudinal fasciculus",value:Qe(159,116,163)},{label:"right arcuate fasciculus",value:Qe(125,102,154)},{label:"left arcuate fasciculus",value:Qe(125,102,154)},{label:"right uncinate fasciculus",value:Qe(106,174,155)},{label:"left uncinate fasciculus",value:Qe(106,174,155)},{label:"right cingulum bundle",value:Qe(154,146,83)},{label:"left cingulum bundle",value:Qe(154,146,83)},{label:"projection fibers",value:Qe(126,126,55)},{label:"right corticospinal tract",value:Qe(201,160,133)},{label:"left corticospinal tract",value:Qe(201,160,133)},{label:"right optic radiation",value:Qe(78,152,141)},{label:"left optic radiation",value:Qe(78,152,141)},{label:"right medial lemniscus",value:Qe(174,140,103)},{label:"left medial lemniscus",value:Qe(174,140,103)},{label:"right superior cerebellar peduncle",value:Qe(139,126,177)},{label:"left superior cerebellar peduncle",value:Qe(139,126,177)},{label:"right middle cerebellar peduncle",value:Qe(148,120,72)},{label:"left middle cerebellar peduncle",value:Qe(148,120,72)},{label:"right inferior cerebellar peduncle",value:Qe(186,135,135)},{label:"left inferior cerebellar peduncle",value:Qe(186,135,135)},{label:"optic chiasm",value:Qe(99,106,24)},{label:"right optic tract",value:Qe(156,171,108)},{label:"left optic tract",value:Qe(156,171,108)},{label:"right fornix",value:Qe(64,123,147)},{label:"left fornix",value:Qe(64,123,147)},{label:"commissural fibers",value:Qe(138,95,74)},{label:"corpus callosum",value:Qe(97,113,158)},{label:"posterior commissure",value:Qe(126,161,197)},{label:"cerebellar white matter",value:Qe(194,195,164)},{label:"CSF space",value:Qe(85,188,255)},{label:"ventricles of brain",value:Qe(88,106,215)},{label:"right lateral ventricle",value:Qe(88,106,215)},{label:"left lateral ventricle",value:Qe(88,106,215)},{label:"right third ventricle",value:Qe(88,106,215)},{label:"left third ventricle",value:Qe(88,106,215)},{label:"cerebral aqueduct",value:Qe(88,106,215)},{label:"fourth ventricle",value:Qe(88,106,215)},{label:"subarachnoid space",value:Qe(88,106,215)},{label:"spinal cord",value:Qe(244,214,49)},{label:"gray matter of spinal cord",value:Qe(200,200,215)},{label:"white matter of spinal cord",value:Qe(250,250,225)},{label:"endocrine system of brain",value:Qe(82,174,128)},{label:"pituitary gland",value:Qe(57,157,110)},{label:"adenohypophysis",value:Qe(60,143,83)},{label:"neurohypophysis",value:Qe(92,162,109)},{label:"meninges",value:Qe(255,244,209)},{label:"dura mater",value:Qe(255,244,209)},{label:"arachnoid",value:Qe(255,244,209)},{label:"pia mater",value:Qe(255,244,209)},{label:"muscles of head",value:Qe(201,121,77)},{label:"salivary glands",value:Qe(70,163,117)},{label:"lips",value:Qe(188,91,95)},{label:"nose",value:Qe(177,122,101)},{label:"tongue",value:Qe(166,84,94)},{label:"soft palate",value:Qe(182,105,107)},{label:"right inner ear",value:Qe(229,147,118)},{label:"left inner ear",value:Qe(229,147,118)},{label:"right external ear",value:Qe(174,122,90)},{label:"left external ear",value:Qe(174,122,90)},{label:"right middle ear",value:Qe(201,112,73)},{label:"left middle ear",value:Qe(201,112,73)},{label:"right eyeball",value:Qe(194,142,0)},{label:"left eyeball",value:Qe(194,142,0)},{label:"skull",value:Qe(241,213,144)},{label:"right frontal bone",value:Qe(203,179,77)},{label:"left frontal bone",value:Qe(203,179,77)},{label:"right parietal bone",value:Qe(229,204,109)},{label:"left parietal bone",value:Qe(229,204,109)},{label:"right temporal bone",value:Qe(255,243,152)},{label:"left temporal bone",value:Qe(255,243,152)},{label:"right sphenoid bone",value:Qe(209,185,85)},{label:"left sphenoid bone",value:Qe(209,185,85)},{label:"right ethmoid bone",value:Qe(248,223,131)},{label:"left ethmoid bone",value:Qe(248,223,131)},{label:"occipital bone",value:Qe(255,230,138)},{label:"maxilla",value:Qe(196,172,68)},{label:"right zygomatic bone",value:Qe(255,255,167)},{label:"right lacrimal bone",value:Qe(255,250,160)},{label:"vomer bone",value:Qe(255,237,145)},{label:"right palatine bone",value:Qe(242,217,123)},{label:"left palatine bone",value:Qe(242,217,123)},{label:"mandible",value:Qe(222,198,101)},{label:"neck",value:Qe(177,122,101)},{label:"muscles of neck",value:Qe(213,124,109)},{label:"pharynx",value:Qe(184,105,108)},{label:"larynx",value:Qe(150,208,243)},{label:"thyroid gland",value:Qe(62,162,114)},{label:"right parathyroid glands",value:Qe(62,162,114)},{label:"left parathyroid glands",value:Qe(62,162,114)},{label:"skeleton of neck",value:Qe(242,206,142)},{label:"hyoid bone",value:Qe(250,210,139)},{label:"cervical vertebral column",value:Qe(255,255,207)},{label:"thorax",value:Qe(177,122,101)},{label:"trachea",value:Qe(182,228,255)},{label:"bronchi",value:Qe(175,216,244)},{label:"right lung",value:Qe(197,165,145)},{label:"left lung",value:Qe(197,165,145)},{label:"superior lobe of right lung",value:Qe(172,138,115)},{label:"superior lobe of left lung",value:Qe(172,138,115)},{label:"middle lobe of right lung",value:Qe(202,164,140)},{label:"inferior lobe of right lung",value:Qe(224,186,162)},{label:"inferior lobe of left lung",value:Qe(224,186,162)},{label:"pleura",value:Qe(255,245,217)},{label:"heart",value:Qe(206,110,84)},{label:"right atrium",value:Qe(210,115,89)},{label:"left atrium",value:Qe(203,108,81)},{label:"atrial septum",value:Qe(233,138,112)},{label:"ventricular septum",value:Qe(195,100,73)},{label:"right ventricle of heart",value:Qe(181,85,57)},{label:"left ventricle of heart",value:Qe(152,55,13)},{label:"mitral valve",value:Qe(159,63,27)},{label:"tricuspid valve",value:Qe(166,70,38)},{label:"aortic valve",value:Qe(218,123,97)},{label:"pulmonary valve",value:Qe(225,130,104)},{label:"aorta",value:Qe(224,97,76)},{label:"pericardium",value:Qe(255,244,209)},{label:"pericardial cavity",value:Qe(184,122,154)},{label:"esophagus",value:Qe(211,171,143)},{label:"thymus",value:Qe(47,150,103)},{label:"mediastinum",value:Qe(255,244,209)},{label:"skin of thoracic wall",value:Qe(173,121,88)},{label:"muscles of thoracic wall",value:Qe(188,95,76)},{label:"skeleton of thorax",value:Qe(255,239,172)},{label:"thoracic vertebral column",value:Qe(226,202,134)},{label:"ribs",value:Qe(253,232,158)},{label:"sternum",value:Qe(244,217,154)},{label:"right clavicle",value:Qe(205,179,108)},{label:"left clavicle",value:Qe(205,179,108)},{label:"abdominal cavity",value:Qe(186,124,161)},{label:"abdomen",value:Qe(177,122,101)},{label:"peritoneum",value:Qe(255,255,220)},{label:"omentum",value:Qe(234,234,194)},{label:"peritoneal cavity",value:Qe(204,142,178)},{label:"retroperitoneal space",value:Qe(180,119,153)},{label:"stomach",value:Qe(216,132,105)},{label:"duodenum",value:Qe(255,253,229)},{label:"small bowel",value:Qe(205,167,142)},{label:"colon",value:Qe(204,168,143)},{label:"anus",value:Qe(255,224,199)},{label:"liver",value:Qe(221,130,101)},{label:"biliary tree",value:Qe(0,145,30)},{label:"gallbladder",value:Qe(139,150,98)},{label:"pancreas",value:Qe(249,180,111)},{label:"spleen",value:Qe(157,108,162)},{label:"urinary system",value:Qe(203,136,116)},{label:"right kidney",value:Qe(185,102,83)},{label:"left kidney",value:Qe(185,102,83)},{label:"right ureter",value:Qe(247,182,164)},{label:"left ureter",value:Qe(247,182,164)},{label:"urinary bladder",value:Qe(222,154,132)},{label:"urethra",value:Qe(124,186,223)},{label:"right adrenal gland",value:Qe(249,186,150)},{label:"left adrenal gland",value:Qe(249,186,150)},{label:"female internal genitalia",value:Qe(244,170,147)},{label:"uterus",value:Qe(255,181,158)},{label:"right fallopian tube",value:Qe(255,190,165)},{label:"left fallopian tube",value:Qe(227,153,130)},{label:"right ovary",value:Qe(213,141,113)},{label:"left ovary",value:Qe(213,141,113)},{label:"vagina",value:Qe(193,123,103)},{label:"male internal genitalia",value:Qe(216,146,127)},{label:"prostate",value:Qe(230,158,140)},{label:"right seminal vesicle",value:Qe(245,172,147)},{label:"left seminal vesicle",value:Qe(245,172,147)},{label:"right deferent duct",value:Qe(241,172,151)},{label:"left deferent duct",value:Qe(241,172,151)},{label:"skin of abdominal wall",value:Qe(177,124,92)},{label:"muscles of abdominal wall",value:Qe(171,85,68)},{label:"skeleton of abdomen",value:Qe(217,198,131)},{label:"lumbar vertebral column",value:Qe(212,188,102)},{label:"female external genitalia",value:Qe(185,135,134)},{label:"male external genitalia",value:Qe(185,135,134)},{label:"skeleton of upper limb",value:Qe(198,175,125)},{label:"muscles of upper limb",value:Qe(194,98,79)},{label:"right upper limb",value:Qe(177,122,101)},{label:"left upper limb",value:Qe(177,122,101)},{label:"right shoulder",value:Qe(177,122,101)},{label:"left shoulder",value:Qe(177,122,101)},{label:"right arm",value:Qe(177,122,101)},{label:"left arm",value:Qe(177,122,101)},{label:"right elbow",value:Qe(177,122,101)},{label:"left elbow",value:Qe(177,122,101)},{label:"right forearm",value:Qe(177,122,101)},{label:"left forearm",value:Qe(177,122,101)},{label:"right wrist",value:Qe(177,122,101)},{label:"left wrist",value:Qe(177,122,101)},{label:"right hand",value:Qe(177,122,101)},{label:"left hand",value:Qe(177,122,101)},{label:"skeleton of lower limb",value:Qe(255,238,170)},{label:"muscles of lower limb",value:Qe(206,111,93)},{label:"right lower limb",value:Qe(177,122,101)},{label:"left lower limb",value:Qe(177,122,101)},{label:"right hip",value:Qe(177,122,101)},{label:"left hip",value:Qe(177,122,101)},{label:"right thigh",value:Qe(177,122,101)},{label:"left thigh",value:Qe(177,122,101)},{label:"right knee",value:Qe(177,122,101)},{label:"left knee",value:Qe(177,122,101)},{label:"right leg",value:Qe(177,122,101)},{label:"left leg",value:Qe(177,122,101)},{label:"right foot",value:Qe(177,122,101)},{label:"left foot",value:Qe(177,122,101)},{label:"peripheral nervous system",value:Qe(216,186,0)},{label:"autonomic nerve",value:Qe(255,226,77)},{label:"sympathetic trunk",value:Qe(255,243,106)},{label:"cranial nerves",value:Qe(255,234,92)},{label:"vagus nerve",value:Qe(240,210,35)},{label:"peripheral nerve",value:Qe(224,194,0)},{label:"circulatory system",value:Qe(213,99,79)},{label:"systemic arterial system",value:Qe(217,102,81)},{label:"systemic venous system",value:Qe(0,147,202)},{label:"pulmonary arterial system",value:Qe(0,122,171)},{label:"pulmonary venous system",value:Qe(186,77,64)},{label:"lymphatic system",value:Qe(111,197,131)},{label:"needle",value:Qe(240,255,30)},{label:"region 0",value:Qe(185,232,61)},{label:"region 1",value:Qe(0,226,255)},{label:"region 2",value:Qe(251,159,255)},{label:"region 3",value:Qe(230,169,29)},{label:"region 4",value:Qe(0,194,113)},{label:"region 5",value:Qe(104,160,249)},{label:"region 6",value:Qe(221,108,158)},{label:"region 7",value:Qe(137,142,0)},{label:"region 8",value:Qe(230,70,0)},{label:"region 9",value:Qe(0,147,0)},{label:"region 10",value:Qe(0,147,248)},{label:"region 11",value:Qe(231,0,206)},{label:"region 12",value:Qe(129,78,0)},{label:"region 13",value:Qe(0,116,0)},{label:"region 14",value:Qe(0,0,255)},{label:"region 15",value:Qe(157,0,0)},{label:"unknown",value:Qe(100,100,130)},{label:"cyst",value:Qe(205,205,100)}],et=n(418),tt=n.n(et);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(n,!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=st(t).call(this,e),n=!a||"object"!==nt(a)&&"function"!=typeof a?ct(r):a,ut(ct(n),"onChange",(function(e){n.setState(ut({},e.target.name,e.target.value))})),ut(ct(n),"setColor",(function(e){n.setState({color:e.hex})})),ut(ct(n),"onSubmit",(function(){n.props.onSubmit(n.state.name,n.state.description,n.state.color)})),ut(ct(n),"createOption",(function(e){return{label:e,value:n.state.color}})),ut(ct(n),"handleChange",(function(e){if(e){var t=n.state.color,r=!0,a=!1,o=void 0;try{for(var i,s=n.state.options[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){if(i.value.label===e.label){t=e.value;break}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}n.setState({name:e.label,color:t,value:e})}})),ut(ct(n),"handleCreate",(function(e){n.setState({isLoading:!0}),setTimeout((function(){var t=n.state.options,r=n.createOption(e);n.setState({isLoading:!1,options:[].concat(ot(t),[r]),value:r,name:r.label})}),1e3)}));var o=$e,i=null,s=!0,c=!1,l=void 0;try{for(var u,f=o[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=u.value;if(p.label===e.name){p.color!==e.color?(i={label:e.name,value:e.color},o=[].concat(ot(o),[i])):i=p;break}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}return i||(i={label:e.name,value:e.color},o=[].concat(ot(o),[i])),n.state={name:e.name,description:e.description,color:e.color,isLoading:!1,options:o,value:i},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ccc";return{alignItems:"center",display:"flex",":before":{backgroundColor:e,borderRadius:10,content:'" "',display:"block",marginRight:8,height:10,width:10}}},n={control:function(e){return at({},e,{backgroundColor:"white"})},option:function(t,n){var r=n.data,a=n.isDisabled,o=n.isFocused,i=n.isSelected,s=r.value&&"#"===r.value[0]?r.value:e.state.color,c=tt()(s);return at({},t,{backgroundColor:a?null:i?s:o?c.alpha(.1).css():null,color:a?"#ccc":i?tt.a.contrast(c,"white")>2?"white":"black":s,cursor:a?"not-allowed":"default",":active":at({},t[":active"],{backgroundColor:!a&&(i?s:c.alpha(.3).css())})})},input:function(e){return at({},e,{},t())},placeholder:function(e){return at({},e,{},t())},singleValue:function(e,n){var r=n.data;return at({},e,{},t(r.value))}};return o.a.createElement("div",null,o.a.createElement("div",{className:"mb-3"},o.a.createElement("label",{htmlFor:"name",className:"form-label",style:{color:"white"}},"Name"),o.a.createElement(Ke.a,{isClearable:!0,isDisabled:this.state.isLoading,isLoading:this.state.isLoading,onChange:this.handleChange,onInputChange:this.handleChange,onCreateOption:this.handleCreate,options:this.state.options,styles:n,value:this.state.value})),o.a.createElement("div",{className:"mb-3"},o.a.createElement("label",{htmlFor:"color",className:"form-label",style:{color:"white"}},"Color"),o.a.createElement(Je.a,{color:this.state.color,onChangeComplete:this.setColor,disableAlpha:!0})),o.a.createElement("br",null),o.a.createElement("div",{className:"mb-3 text-right"},o.a.createElement("button",{className:"actionButton",type:"submit",onClick:this.onSubmit},"OK")))}}])&&it(n.prototype,r),a&&it(n,a),t}(a.Component);function pt(){return Ze[(e=0,t=Ze.length,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e))];var e,t}function mt(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function dt(e,t,n){return"#"+mt(e)+mt(t)+mt(n)}function ht(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function gt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.toLowerCase(),r=!0,a=!1,o=void 0;try{for(var i,s=$e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(c.label===n)return t?ht(c.value):c.value}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return null}ut(ft,"propTypes",{name:$.a.string,description:$.a.string,color:$.a.string,onSubmit:$.a.func});var vt=n(419),yt=n.n(vt),bt=n(323),wt=n.n(bt),Et=n(781),St=n(794),Ot=n(117);function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pt=n(1350).dependencies.itk.substring(1);Ot.a.itkModulesPath="https://unpkg.com/itk@"+Pt;var Ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseNrrdData",value:function(e){var t=yt.a.parse(e);if("gzip"===t.encoding){var n=wt.a.inflate(t.buffer).buffer;t.encoding="raw",t.data=new Uint16Array(n),t.buffer=n}var r=t.buffer,a=t;return delete a.data,delete a.buffer,{header:a,image:r}}},{key:"saveFile",value:function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a");document.body.appendChild(n);var r=window.URL.createObjectURL(e);n.href=r,n.download=t,n.click(),setTimeout((function(){window.URL.revokeObjectURL(r),document.body.removeChild(n)}),0)}}},{key:"serializeNrrdCompressed",value:function(t,n,r){var a=e.serializeNrrd(t,n);Object(Et.a)(null,a,"temp.nrrd").then((function(t){Object(St.a)(t.webWorker,!0,t.image,r).then((function(t){e.saveFile(new Blob([t.arrayBuffer]),r)}))}))}},{key:"serializeNrrd",value:function(t,n,r){var a=Object.assign({},t);a.buffer=n,a.data=new Uint16Array(n);var o=yt.a.serialize(a);return r&&e.saveFile(new Blob([o]),r),o}}],(n=null)&&It(t.prototype,n),r&&It(t,r),e}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function xt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){jt(o,r,a,i,s,"next",e)}function s(e){jt(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rt=function(e){var t=e.color;return o.a.createElement("span",{className:"segColor",style:{backgroundColor:"rgba(".concat(t.join(","),")")}})};Rt.propTypes={color:$.a.array.isRequired};var Mt=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Tt(t).call(this,e),n=!a||"object"!==kt(a)&&"function"!=typeof a?Nt(r):a,At(Nt(n),"getSelectedActiveIndex",(function(){var e=n.state.selectedSegmentId;if(e){var t=e.split("+").map(Number);return{id:e,labelmapIndex:t[0],segmentIndex:t[1]}}return null})),At(Nt(n),"onAddSegment",(function(e,t,r){n.uiModelService.hide();var a=Ge(n.props.viewConstants.element,e,t,ht(r)).id;n.refreshSegTable(a),n.setState({addedSegmentName:e,addedSegmentColor:r}),n.props.onSegmentCreated&&n.props.onSegmentCreated(a)})),At(Nt(n),"onUpdateSegment",(function(e,t,r){n.uiModelService.hide();var a=n.props.viewConstants.element,o=n.getSelectedActiveIndex();Ye(a,o.labelmapIndex,o.segmentIndex,e,t,ht(r)),n.refreshSegTable(o.id),n.props.onSegmentUpdated&&n.props.onSegmentUpdated(o.id)})),At(Nt(n),"onSelectSegment",(function(e){var t=e.currentTarget.value;n.setState({selectedSegmentId:t})})),At(Nt(n),"onClickAddSegment",(function(){var e,t;n.uiModelService.show({content:ft,title:"Add New Segment",contentProps:{name:pt(),description:"",color:(e=Math.round,t=Math.random,dt(e(255*t()),e(255*t()),e(255*t()))),onSubmit:n.onAddSegment},customClassName:"segmentationLabelForm",shouldCloseOnEsc:!0})})),At(Nt(n),"onClickEditSegment",(function(){var e=n.props.viewConstants.element,t=n.getSelectedActiveIndex(),r=function(e,t,n){var r="",a="",o="",i=Be.labelmap3D(e,t);if(!i)return console.warn("Missing Label; so ignore"),{name:r,description:a,color:o};var s=i.metadata.data?i.metadata.data:i.metadata;return s?{name:r=s[n].SegmentLabel,description:a=s[n].SegmentDescription,color:o=u.a.getModule("segmentation").state.colorLutTables[i.colorLUTIndex][n]}:(console.warn("Missing Meta; so ignore"),{name:r,description:a,color:o})}(e,t.labelmapIndex,t.segmentIndex),a=r.name,o=r.description,i=r.color;n.uiModelService.show({content:ft,title:"Edit Label",contentProps:{name:a,description:o,color:dt(Math.floor(i[0]),Math.floor(i[1]),Math.floor(i[2])),onSubmit:n.onUpdateSegment},customClassName:"segmentationLabelForm",shouldCloseOnEsc:!0})})),At(Nt(n),"onUpdateLabelOrDesc",(function(e,t,r){var a=n.props.viewConstants.element,o=e.split("+").map(Number);Ye(a,o[0],o[1],r?t.currentTarget.textContent:void 0,r?void 0:t.currentTarget.textContent)})),At(Nt(n),"onClickDeleteSegment",(function(){var e=n.props.viewConstants.element,t=n.getSelectedActiveIndex();!function(e,t,n){if(console.debug("calling delete segment with "+t+" and "+n),e&&n){var r=Be.labelmap3D(e,t);if(r){if(r.metadata&&r.metadata.data){for(var a=[void 0],o=1;o<r.metadata.data.length;o++){var i=r.metadata.data[o];n!==i.SegmentNumber&&a.push(i)}r.metadata.data=a}for(var s=r.labelmaps2D,c=0;c<s.length;c++){var l=s[c];if(l&&l.segmentsOnLabelmap.includes(n)){var u=l.segmentsOnLabelmap.indexOf(n);l.segmentsOnLabelmap.splice(u,1)}}for(var f=new Uint16Array(r.buffer),m=0;m<f.length;m++)f[m]===n&&(f[m]=0);p.a.updateImage(e)}else console.warn("Missing Label; so ignore")}}(e,t.labelmapIndex,t.segmentIndex),n.setState({selectedSegmentId:null}),n.refreshSegTable(null),n.props.onSegmentDeleted&&n.props.onSegmentDeleted(t.id)})),At(Nt(n),"onClickExportSegments",(function(){var e=u.a.getModule("segmentation").getters.labelmaps3D(n.props.viewConstants.element).labelmaps3D;if(e){n.notification.show({title:"AI Tools",message:"Preparing the label to download as .nrrd",type:"info",duration:5e3});for(var t=0;t<e.length;t++){var r=e[t];if(r){var a=r.metadata.data?r.metadata.data:r.metadata;a&&a.length?Ct.serializeNrrd(n.state.header,r.buffer,"segment-"+t+".nrrd"):console.warn("Missing Meta; so ignore")}else console.warn("Missing Label; so ignore")}}else console.info("LabelMap3D is empty.. so zero segments")})),At(Nt(n),"refreshSegTable",(function(e){var t=qe(He(n.props.viewConstants.element));t.length?e||(e=t[t.length-1].id):e=void 0,e?n.setState({segments:t,selectedSegmentId:e}):n.setState({segments:t})})),At(Nt(n),"setActiveSegment",(function(){var e=n.props.viewConstants.element,t=n.getSelectedActiveIndex(),r=u.a.getModule("segmentation").setters,a=t.labelmapIndex,o=t.segmentIndex;r.activeLabelmapIndex(e,a),r.activeSegmentIndex(e,o),p.a.updateImage(e),n.props.onSegmentSelected&&n.props.onSegmentSelected(t.id)})),At(Nt(n),"updateView",function(){var e=xt(regeneratorRuntime.mark((function e(t,r,a,o,i){var s,c,l,u,f,p,m,d,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.props.viewConstants,c=s.element,l=s.numberOfFrames,u=n.getSelectedActiveIndex(),f=Ct.parseNrrdData(t.data),p=f.header,m=f.image,Ct.serializeNrrd(p,m,"result.nrrd"),n.setState({header:p}),!r){e.next=19;break}d=0,e.t0=regeneratorRuntime.keys(r);case 8:if((e.t1=e.t0()).done){e.next=19;break}if(h=e.t1.value,Array.isArray(r)&&(h=r[h]+"#1",n.state.segments.forEach((function(e){if(e.meta.SegmentLabel===h){var t=parseInt(e.meta.SegmentLabel.split("#")[1]);h=h.replace("#".concat(t),"#".concat(t+1))}}))),"background"!==h){e.next=13;break}return e.abrupt("continue",8);case 13:g=Ge(c,h,"",gt(h),0===d&&!i),0===d&&(u=g),d++,n.state.selectedSegmentId?n.refreshSegTable():n.refreshSegTable(u.id),e.next=8;break;case 19:!a&&i&&(a="overlap"),We(c,u.labelmapIndex,u.segmentIndex,m,l,a,o);case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),At(Nt(n),"onClickSubmit",(function(){n.uiDialogService.create({content:ae.r.InputDialog,contentProps:{defaultValue:"Segmentation 1",title:"Submission Description",onClose:n.onClose,onSubmit:n.onClickSubmitLabel}})})),At(Nt(n),"onClose",(function(){n.uiDialogService.dismissAll()})),At(Nt(n),"onClickSubmitLabel",function(){var e=xt(regeneratorRuntime.mark((function e(t){var r,a,o,i,s,c,l,f,p,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.a.getModule("segmentation"),a=r.getters,o=a.labelmaps3D(n.props.viewConstants.element),i=o.labelmaps3D){e.next=5;break}return console.info("LabelMap3D is empty.. so zero segments"),e.abrupt("return");case 5:n.notification.show({title:"AI Tools - ".concat(t),message:"Preparing to submit. This can take a few seconds...",type:"info",duration:1e4}),s=0;case 7:if(!(s<i.length)){e.next=31;break}if(c=i[s]){e.next=12;break}return console.warn("Missing Label; so ignore"),e.abrupt("continue",28);case 12:if((l=c.metadata.data?c.metadata.data:c.metadata)&&l.length){e.next=16;break}return console.warn("Missing Meta; so ignore"),e.abrupt("continue",28);case 16:if(f=qe(He(n.props.viewConstants.element)),l.length===f.length+1){e.next=20;break}return console.warn("Segments and Metadata NOT matching; So Ignore"),e.abrupt("continue",28);case 20:return p=n.props.viewConstants.SeriesInstanceUID,m=new Blob([c.buffer],{type:"application/octet-stream"}),d={label_info:f,submission_name:t},e.next=25,n.props.client().save_label(p,m,d);case 25:201!==e.sent.status?n.notification.show({title:"AI Tools",message:"Failed to save label",type:"error",duration:1e4}):n.notification.show({title:"AI Tools",message:"Segmentation series submitted to server",type:"success",duration:1e4}),n.refreshSegTable();case 28:s++,e.next=7;break;case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.notification=se.a.create({}),n.uiModelService=Le.a.create({}),n.uiDialogService=Ue.a.create({});var o=n.props.viewConstants.element,i=qe(He(o));return n.state={element:o,segments:i,selectedSegmentId:i&&i.length?i[0].id:null,header:null,addedSegmentName:"",addedSegmentColor:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e,t,n){t.selectedSegmentId!==this.state.selectedSegmentId&&this.state.selectedSegmentId&&this.setActiveSegment()}},{key:"render",value:function(){var e,t,n=this,r=this.state.selectedSegmentId?this.state.selectedSegmentId:(e=this.props.viewConstants.element,t=qe(He(e)),console.debug(t),t&&t.length?t[0].id:null);return console.log("render seg list: "+r),o.a.createElement("div",{className:"segmentationList"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"segButton",onClick:this.onClickAddSegment,title:"Add Segment"},o.a.createElement(ae.g,{name:"plus",width:"12px",height:"12px"})),"",o.a.createElement("button",{className:"segButton",onClick:this.onClickEditSegment,title:"Edit Selected Segment",disabled:!r},o.a.createElement(ae.g,{name:"edit",width:"12px",height:"12px"})),"",o.a.createElement("button",{className:"segButton",onClick:this.onClickDeleteSegment,title:"Clear Selected Segment",disabled:!r},o.a.createElement(ae.g,{name:"trash",width:"12px",height:"12px"}))),o.a.createElement("td",{align:"right"},this.state.header?o.a.createElement("button",{className:"segButton",onClick:this.onClickExportSegments,title:"Download Segment"},o.a.createElement(ae.g,{name:"save",width:"12px",height:"12px"})):null,"",localStorage.getItem("HealthProfessional_Authenticated")&&this.props.canEditStudy?o.a.createElement("button",{className:"segButton",onClick:this.onClickSubmit,title:"Submit Segment to Database",disabled:!r},o.a.createElement(ae.g,{name:"database",width:"12px",height:"12px"})):null)))),o.a.createElement("div",{className:"segSection"},o.a.createElement("table",{className:"segTable"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{width:"2%"},"#"),o.a.createElement("th",{width:"18%"},"Color"),o.a.createElement("th",{width:"80%"},"Name"))),o.a.createElement("tbody",null,this.state.segments.map((function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,o.a.createElement("input",{type:"radio",name:"segitem",value:e.id,checked:e.id===n.state.selectedSegmentId,onChange:n.onSelectSegment})),o.a.createElement("td",null,o.a.createElement(Rt,{color:e.color})),o.a.createElement("td",{className:"segEdit",contentEditable:"true",suppressContentEditableWarning:"true",onKeyUp:function(t){return n.onUpdateLabelOrDesc(e.id,t,!0)}},e.meta.SegmentLabel))}))))),this.state.addedSegmentName&&this.state.addedSegmentColor?o.a.createElement("p",{style:{color:this.state.addedSegmentColor,marginTop:"10px"}},o.a.createElement("b",null,"*")," Now, you can draw the segment"," ",o.a.createElement("b",null,this.state.addedSegmentName)," using the Segmentation tools available in the Toolbar."):null)}}])&&Dt(n.prototype,r),a&&Dt(n,a),t}(a.Component);function Lt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ut(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Lt(o,r,a,i,s,"next",e)}function s(e){Lt(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}At(Mt,"propTypes",{viewConstants:$.a.any,onSegmentCreated:$.a.func,onSegmentUpdated:$.a.func,onSegmentDeleted:$.a.func,onSegmentSelected:$.a.func,client:$.a.func,canEditStudy:$.a.bool});var Vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server_url=new URL("http://localhost/")}var t,n,r,a,o,i,s,c,l;return t=e,n=[{key:"info",value:(l=Ut(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URL("/api/model/",this.server_url),t.next=3,e.api_get(n.toString());case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"segmentation",value:(c=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},a=o.length>3&&void 0!==o[3]?o[3]:null,console.log(r),e.abrupt("return",this.infer(t,n,r,a,"arraybuffer"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"classification",value:(s=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},a=o.length>3&&void 0!==o[3]?o[3]:null,e.abrupt("return",this.infer(t,n,r,a,"json"));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"registration",value:(i=Ut(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},a=o.length>3&&void 0!==o[3]?o[3]:null,e.abrupt("return",this.infer(t,n,r,a,"arraybuffer"));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"infer",value:(o=Ut(regeneratorRuntime.mark((function t(n,r,a){var o,i,s,c,l,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>3&&void 0!==u[3]?u[3]:null,i=u.length>4?u[4]:void 0,s=u.length>5&&void 0!==u[5]?u[5]:".nrrd",c=a.port,l=(l=new URL("ml/".concat(n,"/").concat(c,"/")+encodeURIComponent(n)+"/"+encodeURIComponent(r),"http://localhost/")).toString(),console.log(l),s&&(a.result_extension=s,a.result_dtype="uint16",a.result_compress=!1),t.next=10,e.api_post(l,a,o,!0,i);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"save_label",value:(a=Ut(regeneratorRuntime.mark((function t(n,r,a){var o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new URL("/api/label/",this.server_url)).searchParams.append("image",n),o=o.toString(),i=e.constructFormDataFromArray(a,r,"label","label.bin"),t.next=6,e.api_put_data(o,i,"json");case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(e,t,n){return a.apply(this,arguments)})}],r=[{key:"constructFormDataFromArray",value:function(e,t,n,r){var a=new FormData;return a.append("params",JSON.stringify(e)),a.append(n,t,r),a}},{key:"constructFormData",value:function(e,t){var n=new FormData;if(n.append("params",JSON.stringify(e)),t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)n.append(t[r].name,t[r].data,t[r].fileName)}return n}},{key:"constructFormOrJsonData",value:function(t,n){return n?e.constructFormData(t,n):t}},{key:"api_get",value:function(e){var t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))}};return ie.a.get(e,t).then((function(e){return e})).catch((function(e){return e})).finally((function(){}))}},{key:"api_delete",value:function(e){return console.debug("DELETE:: "+e),ie.a.delete(e).then((function(e){return console.debug(e),e})).catch((function(e){return e})).finally((function(){}))}},{key:"api_post",value:function(t,n,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"arraybuffer",i=a?e.constructFormData(n,r):e.constructFormOrJsonData(n,r);return e.api_post_data(t,i,o)}},{key:"api_post_data",value:function(e,t,n){return console.debug("POST:: "+e),ie.a.post(e,t,{responseType:n,headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),accept:["application/json","multipart/form-data"]}}).then((function(e){return console.debug(e),e})).catch((function(e){return e})).finally((function(){}))}},{key:"api_put",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"json",i=a?e.constructFormData(n,r):e.constructFormOrJsonData(n,r);return e.api_put_data(t,i,o)}},{key:"api_put_data",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return console.debug("PUT:: "+e),ie.a.put(e,t,{responseType:n,headers:{accept:["application/json","multipart/form-data"],Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return console.debug(e),e})).catch((function(e){return e}))}}],n&&Ft(t.prototype,n),r&&Ft(t,r),e}(),Bt=n(324),zt=n.n(Bt);function Ht(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Gt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){qt(o,r,a,i,s,"next",e)}function s(e){qt(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Xt=j.a.studyMetadataManager,Qt=function(e){var t=e.studies,n=e.viewports,r=e.activeIndex,i=e.isOpen,s=e.onSegmentItemClick,c=e.onSegmentVisibilityChange,l=e.onConfigurationChange,f=e.onDisplaySetLoadFailure,m=e.onSelectedSegmentationChange,d=e.activeContexts,h=void 0===d?[]:d,g=e.contexts,v=void 0===g?{}:g,y=Object(a.useCallback)((function(){return h.includes(v.VTK)}),[h,v.VTK]),b=Object(a.useCallback)((function(){return h.includes(v.CORNERSTONE)}),[h,v.CORNERSTONE]),w=u.a.getModule("segmentation").configuration,E=w.radius||10,S=Kt(Object(a.useState)({brushRadius:E,brushColor:"rgba(221, 85, 85, 1)",selectedSegment:0,selectedSegmentation:0,showSettings:!1,showList:!1,labelMapList:[],segmentList:[],segmentsHidden:[],segmentNumbers:[],isLoading:!1,isDisabled:!0,viewConstants:null}),2),O=S[0],I=S[1],C=Kt(Object(a.useState)(!1),2),k=C[0],j=C[1],x=Object(a.useCallback)((function(){return n[r]}),[r,n]),D=Object(a.useCallback)((function(){var e=x(),t=e.StudyInstanceUID,n=e.displaySetInstanceUID;return Xt.get(t).getFirstImageId(n)}),[x]),T=Object(a.useCallback)((function(){for(var e=n[r],a=t[r].PatientID,o=e.StudyInstanceUID,i=e.SeriesInstanceUID,s=e.displaySetInstanceUID,c=ze(t,o,i),l=new Map,u=0;u<c.length;u++)l.set(c[u],u);var f=p.a.getEnabledElements()[r].element,m=(new zt.a).update(a+o+i).digest("hex");I((function(e){return Yt({},e,{viewConstants:{PatientID:a,StudyInstanceUID:o,SeriesInstanceUID:i,displaySetInstanceUID:s,imageIdsToIndex:l,element:f,numberOfFrames:c.length,cookiePostfix:m,viewports:n}})}))}),[r,t,n]),N=Object(a.useCallback)((function(){var e=K();return e.labelmaps3D[e.activeLabelmapIndex]}),[K]),_=Object(a.useCallback)((function(){return K().activeLabelmapIndex}),[K]),A=Object(a.useCallback)((function(){return N().activeSegmentIndex}),[N]),R=Object(a.useCallback)((function(){return N().labelmaps2D}),[N]),U=Object(a.useCallback)((function(){var e=x(),t=e.StudyInstanceUID,n=e.displaySetInstanceUID;return Xt.get(t).getDisplaySets().find((function(e){return e.displaySetInstanceUID===n}))}),[x]),F=Object(a.useCallback)((function(e){var t=A(),n=x();if(e!==t){N().activeSegmentIndex=e;var r,a=n.StudyInstanceUID,o=Xt.get(a).getDisplaySets(),i=_();return o.forEach((function(t){t.labelmapSegments&&Object.keys(t.labelmapSegments).forEach((function(n){t.labelmapSegments[n].includes(e)&&(i=n,r=!0===t.hasOverlapping?t.originLabelMapIndex:n)}))})),K().activeLabelmapIndex=i,r&&I((function(e){return Yt({},e,{selectedSegmentation:r})})),L(),e}M.a.info("".concat(t," is already the active segment"))}),[_,N,A,x,K]);Object(a.useEffect)((function(){var e=function(e){M.a.warn("Segmentation Panel: labelmap modified",e),T();var n=localStorage.getItem("studyEditControl");0===JSON.parse(n)[t[0].StudyInstanceUID]&&j(!0),z()};return document.addEventListener("extensiondicomsegmentationsegloaded",z),document.addEventListener("extensiondicomsegmentationsegselected",B),u.a.store.state.enabledElements.forEach((function(t){return t.addEventListener("cornerstonetoolslabelmapmodified",e)})),function(){document.removeEventListener("extensiondicomsegmentationsegloaded",z),document.removeEventListener("extensiondicomsegmentationsegselected",B),u.a.store.state.enabledElements.forEach((function(t){return t.removeEventListener("cornerstonetoolslabelmapmodified",e)}))}}),[r,T,z,t,n]);var B=function(e){var t=e.detail.activatedLabelmapIndex;-1!==t&&I((function(e){return Yt({},e,{selectedSegmentation:t})}))},z=Object(a.useCallback)((function(){var e=x(),t=!e||!e.StudyInstanceUID;if(!t)if(K()){var n=H(),r=J(),a=r.items,o=r.numbers,i=r.segmentsHidden;I((function(e){return Yt({},e,{segmentsHidden:i,segmentNumbers:o,labelMapList:n,segmentList:a,isDisabled:t})}))}else I((function(e){return Yt({},e,{segmentsHidden:[],segmentNumbers:[],labelMapList:[],segmentList:[],isDisabled:t})}))}),[x,K,H,J]);Object(a.useEffect)((function(){T();var e=localStorage.getItem("studyEditControl");0===JSON.parse(e)[t[0].StudyInstanceUID]&&j(!0),z()}),[n,r,i,O.selectedSegmentation,h,O.isLoading,z,T,t]),Object(a.useEffect)((function(){T();var e=localStorage.getItem("studyEditControl");0===JSON.parse(e)[t[0].StudyInstanceUID]&&j(!0),I((function(e){return Yt({},e,{showSettings:e.showSettings&&!i})}))}),[T,i,t]);var H=Object(a.useCallback)((function(){var e=x();return Zt(e.StudyInstanceUID,e.SeriesInstanceUID).filter((function(e){return!0!==e.loadError})).map((function(n,r){var a,o=n.labelmapIndex,i=n.originLabelMapIndex,s=n.hasOverlapping,c=n.SeriesDate,l=n.SeriesTime,u="".concat(c,":").concat(l).split(".")[0],p=te()(u,"YYYYMMDD:HHmmss").format("ddd, MMM Do YYYY, h:mm:ss a");return{value:!0===s?i:o,title:n.SeriesDescription,description:p,onClick:(a=Gt(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,V(e,t,n,m,f);case 2:a=r.sent,I((function(e){return Yt({},e,{selectedSegmentation:a})}));case 4:case"end":return r.stop()}}),r)}))),function(){return a.apply(this,arguments)})}}))}),[x,f,m,t]),q=Object(a.useCallback)((function(e){F(e),O.selectedSegment===e||I((function(t){return Yt({},t,{selectedSegment:e})}));var n=[];R().forEach((function(t,r){t.segmentsOnLabelmap.includes(e)&&n.push(r)}));var a,o=(a=n).reduce((function(e,t){return e+t}))/a.length,i=n.reduce((function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e}));if(b()){var c=W(),l=u.a.getToolState(c,"stack");if(!l)return;var f=l.data[0].imageIds,m=f[i],d=f.indexOf(m),h=p.a.metaData.get("SOPInstanceUID",m),g=p.a.metaData.get("StudyInstanceUID",m);P.addCrosshair(c,m,e),s({StudyInstanceUID:g,SOPInstanceUID:h,frameIndex:d,activeViewportIndex:r})}if(y()){var v=N(),w=U(),E=v.labelmaps2D[i];s({studies:t,StudyInstanceUID:w.StudyInstanceUID,displaySetInstanceUID:w.displaySetInstanceUID,SOPClassUID:x().sopClassUIDs[0],SOPInstanceUID:w.SOPInstanceUID,segmentNumber:e,frameIndex:i,frame:E})}}),[r,R,N,x,U,W,b,y,s,F,O.selectedSegment,t]),G=Object(a.useCallback)((function(){var e=u.a.getModule("segmentation").state,t=N().colorLUTIndex;return e.colorLutTables[t]}),[N]),W=Object(a.useCallback)((function(){return p.a.getEnabledElements()[r].element}),[r]),Y=Object(a.useCallback)((function(e,t,n){var r=[];n.metadata.hasOverlapping?K().labelmaps3D.filter((function(e){var t=e.metadata;return n.metadata.segmentationSeriesInstanceUID===t.segmentationSeriesInstanceUID})).filter((function(e){return e.labelmaps2D.some((function(e){return e.segmentsOnLabelmap.includes(t)}))})).forEach((function(n){n.segmentsHidden[t]=!e,r=Ht(new Set([].concat(Ht(r),Ht(n.segmentsHidden))))})):(n.segmentsHidden[t]=!e,r=Ht(n.segmentsHidden));I((function(e){return Yt({},e,{segmentsHidden:r})})),z(),L(),y()&&c(t,e)}),[K,y,c,z]),J=Object(a.useCallback)((function(){for(var e=R().reduce((function(e,t){if(t)for(var n=t.segmentsOnLabelmap,r=0;r<n.length;r++)e.includes(n[r])||0===n[r]||e.push(n[r]);return e}),[]).sort((function(e,t){return e-t})),t=N(),n=G(),r=t.metadata&&t.metadata.data,a=[],i=[],s=0;s<e.length;s++){var c=e[s],l=n[c],u="(unlabeled)",f=c;if(r){var p=t.metadata.data[c];p&&(f=p.SegmentNumber,u=p.SegmentLabel)}var m=O.selectedSegment===f;i.push(f),a.push(o.a.createElement(Pe,{key:f,itemClass:"segment-item ".concat(m&&"selected"),onClick:q,label:u,index:f,color:l,labelmap3D:t,visible:!t.segmentsHidden[c],onVisibilityChange:Y}))}return{items:a,numbers:i,segmentsHidden:t.segmentsHidden}}),[R,N,G,Y,q,O.selectedSegment]),K=Object(a.useCallback)((function(){var e=u.a.getModule("segmentation"),t=D();return e.state.series[t]}),[D]),X=function(){var e=Gt(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,l,u,f,p,m,d,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x(),r=Zt(n.StudyInstanceUID,n.SeriesInstanceUID),a=r.filter((function(e){return!0!==e.loadError})),s=0;case 4:if(!(s<a.length)){e.next=18;break}if(c=a[s],l=c.SeriesDescription,u=c.SeriesDate,f=c.SeriesTime,p=c.wadoUri,m="".concat(u,":").concat(f).split(".")[0],d=te()(m,"YYYYMMDD:HHmmss"),d.format("ddd, MMM Do YYYY, h:mm:ss a")!==t.description||l!==t.title){e.next=15;break}return o=p,i=c.metadata.PatientID,e.abrupt("break",18);case 15:s++,e.next=4;break;case 18:return h=new FormData,g=se.a.create({}),h.append("wadoURI",o),h.append("patientID",i),e.next=24,ie.a.post("/api/segmentation_delete/",h,{headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"multipart/form-data"}}).then((function(e){return e})).catch((function(e){return e.response}));case 24:200===e.sent.status?g.show({title:"Delete Segmentation",message:"Segmentation deleted - Success",type:"success",duration:8e3}):g.show({title:"Delete Segmentation",message:"Failed to delete segmentation - Failure",type:"error",duration:1e4});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=O.labelMapList.find((function(e){return e.value===O.selectedSegmentation}));return O.showSettings?o.a.createElement(we,{disabledFields:y()?["outlineAlpha","shouldRenderInactiveLabelmaps"]:[],configuration:w,onBack:function(){return I((function(e){return Yt({},e,{showSettings:!1})}))},onChange:function(e){w.renderFill=e.renderFill,w.renderOutline=e.renderOutline,w.shouldRenderInactiveLabelmaps=e.shouldRenderInactiveLabelmaps,w.fillAlpha=e.fillAlpha,w.outlineAlpha=e.outlineAlpha,w.outlineWidth=e.outlineWidth,w.fillAlphaInactive=e.fillAlphaInactive,w.outlineAlphaInactive=e.outlineAlphaInactive,l(e),L()}}):O.showList?o.a.createElement("div",{className:"dcmseg-segmentation-panel-list"},o.a.createElement("div",{className:"settings-title"},o.a.createElement("h4",null,"Segmentation Panel"),o.a.createElement("button",{style:{float:"right"},className:"return-button",onClick:function(){return I((function(e){return Yt({},e,{showList:!1})}))}},"Back")),null!==O.viewConstants?o.a.createElement(Mt,{ref:o.a.createRef(),viewConstants:O.viewConstants,client:function(){return new Vt},canEditStudy:k}):null):o.a.createElement("div",{className:re()("dcmseg-segmentation-panel",{disabled:O.isDisabled})},o.a.createElement("div",{className:"panel-button-div",style:{display:"inline-block"}},o.a.createElement("button",{title:"Go to Segmentation Panel",onClick:function(){return I((function(e){return Yt({},e,{showList:!0})}))},style:{padding:"4px 12px"},className:"panel-button"},"Panel"),o.a.createElement(ae.g,{className:"cog-icon",title:"Settings",name:"cog",width:"25px",height:"25px",onClick:function(){return I((function(e){return Yt({},e,{showSettings:!0})}))}})),!1,o.a.createElement("div",{className:"segmentations"},o.a.createElement("p",{style:{color:"white",marginTop:"20px",marginBottom:"5px"}},"Series Saved in Orthanc:",o.a.createElement("button",{className:"btn btn-danger",title:"Delete Segmentation",onClick:function(){return X(Q)},style:{float:"right",borderRadius:"6px",fontSize:"11px",marginBottom:"5px",marginLeft:"5px"},disabled:!Q||!localStorage.getItem("HealthProfessional_Authenticated")||!k},"x")),o.a.createElement(Me,{value:Q,formatOptionLabel:fe,options:O.labelMapList})),o.a.createElement($t,{count:O.segmentList.length,isVisible:O.segmentsHidden.filter((function(e){return!0===e})).length<O.segmentNumbers.length&&O.segmentNumbers.length>0,onVisibilityChange:function(e){var t=[];O.segmentNumbers.forEach((function(n){y()&&c(n,e),K().labelmaps3D.filter((function(e){return e.labelmaps2D.some((function(e){return e.segmentsOnLabelmap.includes(n)}))})).forEach((function(r){r.segmentsHidden[n]=!e,t=Ht(new Set([].concat(Ht(t),Ht(r.segmentsHidden))))}))})),I((function(e){return Yt({},e,{segmentsHidden:t})})),z(),L()}},o.a.createElement(ae.o,null,o.a.createElement(ae.v,{headless:!0},O.segmentList))))};Qt.propTypes={viewports:$.a.shape({displaySetInstanceUID:$.a.string,frameRate:$.a.any,InstanceNumber:$.a.number,isMultiFrame:$.a.bool,isReconstructable:$.a.bool,Modality:$.a.string,plugin:$.a.string,SeriesDate:$.a.string,SeriesDescription:$.a.string,SeriesInstanceUID:$.a.string,SeriesNumber:$.a.any,SeriesTime:$.a.string,sopClassUIDs:$.a.arrayOf($.a.string),StudyInstanceUID:$.a.string}),activeIndex:$.a.number.isRequired,studies:$.a.array.isRequired,isOpen:$.a.bool.isRequired},Qt.defaultProps={};var Zt=function(e,t){var n=Xt.get(e).getDerivedDatasets({referencedSeriesInstanceUID:t,Modality:"SEG"});return n.sort((function(e,t){var n=Number("".concat(e.SeriesDate).concat(e.SeriesTime));return Number("".concat(t.SeriesDate).concat(t.SeriesTime))-n})),n},$t=function(e){var t=e.count,n=e.children,r=e.isVisible,i=e.onVisibilityChange,s=Kt(Object(a.useState)(r),2),c=s[0],l=s[1];return Object(a.useEffect)((function(){l(r)}),[r]),o.a.createElement("div",{className:"SegmentsSection"},o.a.createElement("div",{className:"header"},o.a.createElement("div",null,"Segments"),o.a.createElement("div",{className:"icons"},o.a.createElement(ae.g,{className:"eye-icon ".concat(c&&"expanded"),name:c?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(){var e=!c;l(e),i(e)}}),o.a.createElement("div",{className:"count"},t))),n)};$t.defaultProps={onVisibilityChange:function(){}};var en=Qt,tn=n(785);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var rn=c.a.utils.studyMetadataManager,an={id:"com.ohif.dicom-segmentation",version:tn.a,preRegistration:function(e){var t=e.servicesManager,n=e.configuration;!function(e){e.servicesManager,e.configuration;var t=u.a.BrushTool;[t,u.a.SphericalBrushTool,u.a.CorrectionScissorsTool].forEach((function(e){return u.a.addTool(e)})),u.a.addTool(t,{name:"BrushEraser",configuration:{alwaysEraseOnClick:!0}}),u.a.addTool(P)}({servicesManager:t,configuration:void 0===n?{}:n})},getToolbarModule:function(){return C},getPanelModule:function(e){var t=e.commandsManager,n=e.api,r=e.servicesManager.services,a=r.UINotificationService,i=r.LoggerService,s=function(e){var t=new CustomEvent("segmentation-panel-tab-updated",{detail:e});document.dispatchEvent(t)};return document.addEventListener("extensiondicomsegmentationsegloaded",(function(e){var t=e.detail,n=t.segDisplaySet,r=t.segMetadata,a=rn.get(n.StudyInstanceUID).getDerivedDatasets({referencedSeriesInstanceUID:r.seriesInstanceUid,Modality:"SEG"});s({badgeNumber:a.length,target:"segmentation-panel"})})),{menuOptions:[{icon:"inline-edit",label:"Segmentation",target:"segmentation-panel",stateEvent:"segmentation-panel-tab-updated",isDisabled:function(e,t){if(!e)return!0;for(var n=0;n<e.length;n++){var r=e[n];if(r&&r.series)for(var a=0;a<r.series.length;a++){if("SEG"===r.series[a].Modality){if(t){var o=rn.get(t.StudyInstanceUID);if(!o)return;var i=o.getDerivedDatasets({referencedSeriesInstanceUID:t.SeriesInstanceUID,Modality:"SEG"});s({badgeNumber:i.length,target:"segmentation-panel"})}return!1}}}return!1}}],components:[{id:"segmentation-panel",component:function(e){var r=n.hooks.useAppContext().activeContexts;return o.a.createElement(en,nn({},e,{activeContexts:r,contexts:n.contexts,onSegmentItemClick:function(e){t.runCommand("jumpToImage",e),t.runCommand("jumpToSlice",e)},onSegmentVisibilityChange:function(e,n){t.runCommand("setSegmentConfiguration",{segmentNumber:e,visible:n})},onConfigurationChange:function(e){t.runCommand("setSegmentationConfiguration",{globalOpacity:e.fillAlpha,outlineThickness:e.outlineWidth,renderOutline:e.renderOutline,visible:e.renderFill})},onSelectedSegmentationChange:function(){t.runCommand("requestNewSegmentation")},onDisplaySetLoadFailure:function(e){i.error({error:e,message:e.message}),a.show({title:"DICOM Segmentation Loader",message:e.message,type:"error",autoClose:!1})}}))}}],defaultContext:["VIEWER"]}},getSopClassHandlerModule:function(e){return e.servicesManager,{id:"OHIFDicomSegSopClassHandler",type:k.a.SOP_CLASS_HANDLER,sopClassUIDs:K,getDisplaySetFromSeries:function(e,t,n,r){var a=e.getFirstInstance(),o=a.getData().metadata,i=o.SeriesDate,s=o.SeriesTime,c=o.SeriesDescription,l=o.FrameOfReferenceUID,u=o.SOPInstanceUID,f=o.SeriesInstanceUID,p=o.StudyInstanceUID,m=o.SeriesNumber,d={Modality:"SEG",displaySetInstanceUID:j.a.guid(),wadoRoot:t.getData().wadoRoot,wadoUri:a.getData().wadouri,SOPInstanceUID:u,SeriesInstanceUID:f,StudyInstanceUID:p,FrameOfReferenceUID:l,authorizationHeaders:r,isDerived:!0,referencedDisplaySetUID:null,labelmapIndex:null,isLoaded:!1,loadError:!1,hasOverlapping:!1,SeriesDate:i,SeriesTime:s,SeriesNumber:m,SeriesDescription:c,metadata:o,getSourceDisplaySet:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return H(e,d,t,n)}};return d.load=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,l,u,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.isLoaded=!0,r=t.StudyInstanceUID,e.next=4,G.findDicomDataPromise(d,n);case 4:return a=e.sent,o=Y.readFile(a),J.naturalizeDataset(o.dict)._meta=J.namifyDataset(o.meta),i=Q(n,r,t.SeriesInstanceUID),e.next=11,X(a,i);case 11:if(void 0!==(s=e.sent)){e.next=14;break}return e.abrupt("return");case 14:if(c=s.labelmapBufferArray,l=s.segMetadata,u=s.segmentsOnFrame,f=s.segmentsOnFrameArray,!(c.length>1)){e.next=35;break}p=[],m=0;case 18:if(!(m<c.length)){e.next=29;break}return l.segmentationSeriesInstanceUID=d.SeriesInstanceUID,l.hasOverlapping=!0,e.t0=p,e.next=24,N(i,d,c[m],l,u,f[m]);case 24:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 26:++m,e.next=18;break;case 29:d.hasOverlapping=!0,d.originLabelMapIndex=p[0],p[0],console.warn("Overlapping segments!"),e.next=40;break;case 35:return l.segmentationSeriesInstanceUID=d.SeriesInstanceUID,l.hasOverlapping=!1,e.next=39,N(i,d,c[0],l,u,[]);case 39:e.sent;case 40:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,s,"next",e)}function s(e){q(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),d}}}},on=n(203),sn=n(409);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(n,!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fn=getComputedStyle(document.body),pn=fn.getPropertyValue("--ui-gray-darker"),mn=fn.getPropertyValue("--active-color"),dn=fn.getPropertyValue("--default-color"),hn=fn.getPropertyValue("--ui-gray-dark"),gn={singleValue:function(e,t){return ln({},e,{width:"100%"})},control:function(e,t){return ln({},e,{cursor:"pointer",background:pn,borderRadius:t.isFocused?"5px 5px 5px 5px":5,borderColor:t.isFocused?mn:dn,minHeight:"50px","&:hover":{borderColor:mn}})},menu:function(e){return ln({},e,{borderRadius:5,background:pn})},option:function(e,t){return ln({},e,{width:"100%",cursor:"pointer","&:first-of-type":{borderTopLeftRadius:5,borderTopRightRadius:5},"&:last-of-type":{borderBottomLeftRadius:5,borderBottomRightRadius:5},background:t.isSelected?hn:pn,"&:hover":{background:hn}})}},vn=function(e){var t=e.value,n=e.formatOptionLabel,r=e.options;return o.a.createElement(Ce.a,{value:t,formatOptionLabel:n,styles:gn,options:r})},yn=(n(1362),n(1363),function(e){var t=e.onClick,n=e.title,r=e.description;return o.a.createElement("li",{className:"dcmseg-segmentation-item",onClick:t},o.a.createElement("div",{className:"segmentation-meta"},o.a.createElement("div",{className:"segmentation-meta-title"},n),o.a.createElement("div",{className:"segmentation-meta-description"},r)))});yn.propTypes={onClick:$.a.func.isRequired,title:$.a.string.isRequired,description:$.a.string.isRequired},yn.defaultProps={description:""};var bn=yn;function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var On=on.a.ImageSet,In=x.b.data.DicomMetaDictionary.nameMap,Pn=sn.a.metadataProvider;function Cn(e){var t=function e(t,n){var r=[];t.forEach((function(t){if("SQ"===t.vr){r.push(["".concat(t.tagIndent).concat(t.tag),t.vr,t.keyword,""]),t.values.forEach((function(t,n){var a=e(t);r.push(["".concat(t[0].tagIndent,"(FFFE,E000)"),"","Item #".concat(n),""]),r.push.apply(r,En(a))}))}else{if("xs"===t.vr)try{var a=Pn.getStudyDataset(n.StudyInstanceUID)[x.b.data.Tag.fromPString(t.tag).toCleanString()];t.vr=a.vr}catch(e){console.error("Failed to parse value representation for tag '".concat(t.keyword,"'"))}r.push(["".concat(t.tagIndent).concat(t.tag),t.vr,t.keyword,t.value])}}));return r}(e.tags,e.meta);return o.a.createElement("table",{className:"dicom-tag-browser-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"dicom-tag-browser-table-left"},"Tag"),o.a.createElement("th",{className:"dicom-tag-browser-table-left"},"Value Representation"),o.a.createElement("th",{className:"dicom-tag-browser-table-left"},"Keyword"),o.a.createElement("th",{className:"dicom-tag-browser-table-left"},"Value")),t.map((function(e,t){var n=e.className?e.className:null;return o.a.createElement("tr",{className:n,key:"DICOMTagRow-".concat(t)},o.a.createElement("td",null,e[0]),o.a.createElement("td",{className:"dicom-tag-browser-table-center"},e[1]),o.a.createElement("td",null,e[2]),o.a.createElement("td",null,e[3]))}))))}function kn(e){e.sort((function(e,t){return e.tag<t.tag?-1:1}))}var jn=function(e){var t=e.displaySets,n=e.displaySetInstanceUID,r=Sn(Object(a.useState)(n),2),i=r[0],s=r[1],c=Sn(Object(a.useState)(1),2),l=c[0],u=c[1],f=Sn(Object(a.useState)([]),2),p=f[0],m=f[1],d=Sn(Object(a.useState)(""),2),h=d[0],g=d[1],v=Sn(Object(a.useState)([]),2),y=v[0],b=v[1],w=Sn(Object(a.useState)([]),2),E=w[0],S=w[1],O=Sn(Object(a.useState)(!1),2),I=O[0],P=O[1];Object(a.useEffect)((function(){var e,n,r=t.find((function(e){return e.displaySetInstanceUID===i})),a=t.map((function(e){var t=e.displaySetInstanceUID,n=e.SeriesDate,r=e.SeriesTime,a=e.SeriesNumber,o=e.SeriesDescription,i=e.Modality,c="".concat(n,":").concat(r).split(".")[0],l=te()(c,"YYYYMMDD:HHmmss").format("ddd, MMM Do YYYY");return{value:t,title:"".concat(a," (").concat(i,"): ").concat(o),description:l,onClick:function(){s(t),u(1)}}})),o=r instanceof On&&!0===r.isSOPClassUIDSupported;if(o){var c=r.images,f=c[l-1];n=c.map((function(e,t){var n=e.getData().metadata.InstanceNumber;return{value:t,title:"Instance Number: ".concat(n),description:"",onClick:function(){u(t)}}})),e=f.getData().metadata}else e=r.metadata;m(function(e){var t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=Object.keys(t);var a="";for(var o=0;o<n;o++)a+=">";n>0&&(a+=" ");var i=[];for(var s=0;s<r.length;s++){var c=r[s];if("_vrMap"!==c){var l=In[c],u=t[c];if(l&&"SQ"===l.vr)if("continue"===function(){var t,r=(t=u,Array.isArray(t)?t:[t]),o={tag:l.tag,tagIndent:a,vr:l.vr,keyword:c,values:[]};return i.push(o),null===u?"continue":(r.forEach((function(t){var r=e(t,n+1);r.length&&(kn(r),o.values.push(r))})),"continue")}())continue;if(Array.isArray(u)&&(u=u.join("\\")),"number"==typeof u&&(u=u.toString()),"string"!=typeof u&&(null===u?u=" ":"object"===wn(u)?u.InlineBinary?u="Inline Binary":u.BulkDataURI?u="Bulk Data URI":u.Alphabetic?u=u.Alphabetic:(console.warn("Unrecognised Value: ".concat(u," for ").concat(c,":")),console.warn(u),u=" "):(console.warn("Unrecognised Value: ".concat(u," for ").concat(c,":")),u=" ")),c=c.replace("RETIRED_",""),l)i.push({tag:l.tag,tagIndent:a,vr:l.vr,keyword:c,value:u});else{var f="(".concat(c.substring(0,4),",").concat(c.substring(4,8),")");i.push({tag:f,tagIndent:a,vr:"",keyword:"Private Tag",value:u})}}}return i}(e);return kn(t),t}(e)),g(e),b(n),S(a),P(o)}),[i,l,t]);var C=E.find((function(e){return e.value===i})),k=null;return I&&(k=o.a.createElement("div",{className:"dicom-tag-browser-instance-range"},o.a.createElement(ae.m,{showValue:!0,step:1,min:1,max:y.length,value:l,valueRenderer:function(e){return o.a.createElement("p",null,"Instance Number: ",e)},onChange:function(e){var t=e.target,n=parseInt(t.value);u(n)}}))),o.a.createElement("div",{className:"dicom-tag-browser-content"},o.a.createElement(vn,{value:C,formatOptionLabel:bn,options:E}),k,o.a.createElement("div",{className:"dicom-tag-browser-table-wrapper"},o.a.createElement(Cn,{tags:p,meta:h})))},xn=j.a.studyMetadataManager;var Dn={definitions:[{id:"TagBrowser",label:"Tag Browser",icon:"list",type:"command",commandName:"openDICOMTagViewer",context:"VIEWER"}],defaultContext:"VIEWER"},Tn={id:"dicom-tag-browser",getCommandsModule:function(e){return function(e){var t={openDICOMTagViewer:function(t){var n=t.viewports,r=n.activeViewportIndex,a=n.viewportSpecificData[r],i=a.StudyInstanceUID,s=a.displaySetInstanceUID,c=xn.get(i).getDisplaySets();e.services.UIModalService.show({content:function(){return o.a.createElement(jn,{displaySets:c,displaySetInstanceUID:s})},title:"DICOM Tag Browser",fullscreen:!0,noScroll:!0})}};return{actions:t,definitions:{openDICOMTagViewer:{commandFn:t.openDICOMTagViewer,storeContexts:["servers","viewports"]}}}}(e.servicesManager)},getToolbarModule:function(){return Dn}},Nn="setToolActive",_n={definitions:[{id:"SegTools",label:"Segmentation",icon:"ellipse-circle",buttons:[{id:"Brush",label:"Brush",icon:"brush",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"Brush"}},{id:"SphericalBrush",label:"Spherical",icon:"sphere",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"SphericalBrush"}},{id:"CircleScissors",label:"Circle",icon:"circle",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"CircleScissors"}},{id:"CircleScissorsEraser",label:"Circle",icon:"circle-o",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"CircleScissorsEraser"}},{id:"FreehandScissors",label:"Freehand",icon:"inline-edit",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"FreehandScissors"}},{id:"FreehandScissorsEraser",label:"Freehand",icon:"liver",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"FreehandScissorsEraser"}},{id:"RectangleScissors",label:"Rectangle",icon:"stop",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"RectangleScissors"}},{id:"RectangleScissorsEraser",label:"Rectangle",icon:"square-o",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"RectangleScissorsEraser"}},{id:"CorrectionScissors",label:"Correction Scissors",icon:"scissors",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"CorrectionScissors"}},{id:"BrushEraser",label:"Eraser",icon:"trash",type:Nn,commandName:"setToolActive",commandOptions:{toolName:"BrushEraser"}}]}],defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"};n(1364),n(1365),n(1366);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Mn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rn(o,r,a,i,s,"next",e)}function s(e){Rn(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zn=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Un(t).call(this,e),n=!a||"object"!==An(a)&&"function"!=typeof a?Fn(r):a,Bn(Fn(n),"onChangeModel",(function(e){var t=null;n.props.info.forEach((function(n){n.name===e.target.value&&(t=n)})),n.setState({currentModel:e.target.value,currentModelInfo:t}),n.props.onSelectModel&&n.props.onSelectModel(e.target.value)})),Bn(Fn(n),"handleFilterChange",(function(e){n.props.handleFilterChange&&(n.setState({filterBodyPart:e}),n.props.handleFilterChange(e))})),Bn(Fn(n),"currentModel",(function(){return n.props.currentModel?n.props.currentModel:n.state.currentModel})),Bn(Fn(n),"onClickBtn",Mn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.buttonDisabled){e.next=2;break}return e.abrupt("return");case 2:return(t=n.state.currentModel)||(t=n.props.models.length>0?n.props.models[0]:""),n.setState({buttonDisabled:!0}),e.next=7,n.props.onClick(t);case 7:n.setState({buttonDisabled:!1});case 8:case"end":return e.stop()}}),e)})))),Bn(Fn(n),"onClickApply",Mn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.onClickApply&&n.props.onClickApply();case 1:case"end":return e.stop()}}),e)}))));var o=e.currentModel?e.currentModel:e.models.length>0?e.models[0]:"",i=null;return e.info.forEach((function(e){e.name===o&&(i=e)})),n.state={models:e.models,currentModel:o,buttonDisabled:!1,currentModelInfo:i,filterBodyPart:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,e),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.models!==e.models?{models:e.models,currentModel:e.models.length>0?e.models[0]:""}:null}}],(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.useFilter,a=this.currentModel(),i=this.state.currentModelInfo,s=!1,c="",l=[];if(null!==i){var u=i.user,f=i.user_permissions;(u===n.email||f.includes("Test Models")||localStorage.getItem("HealthProfessional_Authenticated"))&&(s=!0),c=i.references;var p=new RegExp("(http|https)://((.)|[a-z]|[0-9]|/|_)*","gmi");if(p.test(c))for(var m=c.match(p),d=0;d<m.length;d++)m[d].lastIndexOf(".")===m[d].length-1&&(m[d]=m[d].substring(0,m[d].length-1)),l.push(m[d])}return o.a.createElement("div",{className:"modelSelector",style:{marginLeft:"auto",marginRight:"5px"}},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3"},"Available Models ",o.a.createElement("b",null,"(",this.props.models.length,")"),":")),o.a.createElement("tr",null,o.a.createElement("td",{width:"80%"},o.a.createElement("select",{className:"selectBox",onChange:this.onChangeModel,value:a,style:{borderRadius:"5px",marginBottom:"10px",marginTop:"10px"}},this.props.models.map((function(e){return o.a.createElement("option",{key:e,name:e,value:e},"".concat(e," "))})))),o.a.createElement("td",{width:"2%"},""),s?o.a.createElement("td",{width:"18%"},o.a.createElement("button",{className:"actionButton",onClick:this.onClickBtn,title:"Run Algorithm",disabled:this.state.isButtonDisabled||!this.props.models.length,style:{display:this.props.onClick?"block":"none",marginLeft:"10px"}},"Run")):null),r?o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,""),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3"},"Body Part Examined:")),o.a.createElement("tr",null,o.a.createElement("td",{width:"80%"},o.a.createElement("input",{type:"text",id:"filter-bodyPart",className:"selectBox",value:this.state.filterBodyPart,placeholder:"Filter...",onChange:function(t){return e.handleFilterChange(t.target.value)}})),o.a.createElement("td",{width:"2%"},""),o.a.createElement("td",{width:"18%"},o.a.createElement("button",{className:"actionButton",onClick:this.onClickApply,title:"Run Algorithm",disabled:!this.props.models.length,style:{display:this.props.onClick?"block":"none",marginLeft:"10px"}},"Apply")),o.a.createElement("td",null,""))):null)),o.a.createElement("p",null),this.props.models.length>0?o.a.createElement("h5",null,"Model Information"):null,o.a.createElement("p",null),i?o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Algorithm Name"),o.a.createElement("th",null,i.name)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Task"),o.a.createElement("th",null,i.task)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Body Part Examined"),o.a.createElement("th",null,i.bodyPart)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Version"),o.a.createElement("th",null,i.version)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Algorithm Overview"),o.a.createElement("th",null,i.algorithm_overview)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Model Architecture"),o.a.createElement("th",null,i.model_architecture)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"References"),o.a.createElement("div",{className:"refs"},l.map((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("th",{key:e},o.a.createElement("a",{key:e,className:"newbutton",target:"_blank",rel:"noopener noreferrer",href:e,style:{overflow:"hidden",wordBreak:"break-all"}},e)),o.a.createElement("br",null))})))),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Model Performance"),o.a.createElement("th",null,i.model_performance)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Data Description"),o.a.createElement("th",null,i.data_description)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Input"),o.a.createElement("th",null,i.input)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Input Modality"),o.a.createElement("th",null,i.inputModality)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Output"),o.a.createElement("th",null,i.output)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Additional Info"),o.a.createElement("th",null,i.additional_info)),o.a.createElement("tr",null,""),o.a.createElement("tr",null,o.a.createElement("th",null,"Created at"),o.a.createElement("th",null,i.created_at)),o.a.createElement("tr",null,""))):null)}}])&&Ln(n.prototype,r),a&&Ln(n,a),t}(a.Component);Bn(zn,"propTypes",{info:$.a.array,models:$.a.array,currentModel:$.a.string,onClick:$.a.func,onSelectModel:$.a.func,user:$.a.object,useFilter:$.a.bool});var Hn=zn;n(1367);function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kn=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Gn(t).call(this,e),n=!a||"object"!==qn(a)&&"function"!=typeof a?Wn(r):a,Jn(Wn(n),"onSelectActionTab",(function(e){n.props.onSelectActionTab(e.currentTarget.value)})),Jn(Wn(n),"onEnterActionTab",(function(){})),Jn(Wn(n),"onLeaveActionTab",(function(){})),Jn(Wn(n),"onSegmentCreated",(function(e){})),Jn(Wn(n),"onSegmentUpdated",(function(e){})),Jn(Wn(n),"onSegmentDeleted",(function(e){})),Jn(Wn(n),"onSegmentSelected",(function(e){})),Jn(Wn(n),"onSelectModel",(function(e){})),n.notification=se.a.create({}),n.uiModelService=Le.a.create({}),n.tabId="tab-"+n.props.tabIndex,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(t,e),t}(a.Component);Jn(Kn,"propTypes",{tabIndex:$.a.number,info:$.a.any,segmentId:$.a.string,viewConstants:$.a.any,client:$.a.func,updateView:$.a.func,onSelectActionTab:$.a.func,onOptionsConfig:$.a.func});var Xn=n(19),Qn=n(406);function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function er(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$n(o,r,a,i,s,"next",e)}function s(e){$n(o,r,a,i,s,"throw",e)}i(void 0)}))}}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=j.a.studyMetadataManager,sr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nr(t).call(this,e),n=!a||"object"!==Zn(a)&&"function"!=typeof a?rr(r):a,or(rr(n),"onSelectModel",(function(e){n.setState({currentModel:e})})),or(rr(n),"onInference",er(regeneratorRuntime.mark((function e(){var t,r,a,o,i,s,c,l,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.notification.show({title:"AI Tools",message:"Running Inference...",type:"info",duration:1e5}),r=n.props.viewConstants,a=n.modelSelector.current.currentModel(),o="",i="",s="",n.props.info.forEach((function(e){e.name==a&&(o=e.task,i=e.port,s=e.inputExtension)})),c=r.SeriesInstanceUID,l=null,"Segmentation"!=o){e.next=15;break}return e.next=12,n.props.client().segmentation(a,c,{port:i,inputExtension:s,task:o});case 12:l=e.sent,e.next=38;break;case 15:if("Classification"!=o){e.next=21;break}return e.next=18,n.props.client().classification(a,c,{port:i,inputExtension:s,task:o});case 18:l=e.sent,e.next=38;break;case 21:if("Image Registration"!=o){e.next=35;break}if(u=r.viewports,2!==Object.keys(u).length){e.next=32;break}return f="",Object.keys(u).forEach((function(e){f=f+"S"+u[e].SeriesInstanceUID})),f=f.substr(1),e.next=29,n.props.client().registration(a,f,{port:i,inputExtension:s,task:o});case 29:l=e.sent,e.next=33;break;case 32:alert("Failed to Run Image Registration. You must select 2 series in the Layout!");case 33:e.next=38;break;case 35:return e.next=37,n.props.client().segmentation(a,c,{port:i,inputExtension:s,task:o});case 37:l=e.sent;case 38:if(t?n.notification.hide(t):window.snackbar.hideAll(),!l){e.next=43;break}return 200!==l.status?n.notification.show({title:"AI Tools",message:"Failed to Run Inference",type:"error",duration:8e3}):n.notification.show({title:"AI Tools",message:"Run Inference - Successful",type:"success",duration:8e3}),e.next=43,n.props.updateView(l,["".concat(a,"_result")],o);case 43:case"end":return e.stop()}}),e)})))),n.server_url=new URL("http://localhost/"),n.modelSelector=o.a.createRef(),n.state={currentModel:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props,r=n.user,a=n.viewConstants,i=!0,s=ir.get(a.StudyInstanceUID).getDisplaySets().find((function(e){return e.displaySetInstanceUID===a.displaySetInstanceUID})).images[0].getData().metadata,c="";Object.keys(s).includes("BodyPartExamined")&&(t=s.BodyPartExamined,c=Object.keys(Qn.a).find((function(e){return Qn.a[e]===t}))),console.log("Body Part:",c),Object.keys(a.viewports).forEach((function(t){e=a.viewports[t].Modality}));var l=[];if(this.props.info)if(r&&localStorage.getItem("HealthProfessional_Authenticated")){var u=["clara-pt-spleen-ct-segmentation","left-atrium-segmentation","mr-classification"];this.props.info.forEach((function(t){var n=t.inputModality.split("-")[0];n=n.replace(" ",""),u.includes(t.name)&&n===e&&(""!==c&&t.bodyPart===c?(i=!1,l.push(t.name)):""===c&&l.push(t.name))}))}else r&&localStorage.getItem("Investigator_Authenticated")&&this.props.info.forEach((function(t){var n=t.inputModality.split("-")[0];(n=n.replace(" ",""))===e&&(""!==c&&t.bodyPart===c?l.push(t.name):""===c&&l.push(t.name))}));return o.a.createElement("div",{className:"tab-content"},o.a.createElement(Hn,{ref:this.modelSelector,info:this.props.info,models:l,currentModel:this.state.currentModel,onClick:this.onInference,onSelectModel:this.onSelectModel,user:r,useFilter:i,handleFilterChange:this.props.handleFilterChange,onClickApply:this.props.onClickApply}))}}])&&tr(n.prototype,r),a&&tr(n,a),t}(Kn),cr=Object(Xn.b)((function(e){return{user:e.auth.user}}),null)(sr);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vr=n(800),yr=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=mr(t).call(this,e),n=!a||"object"!==fr(a)&&"function"!=typeof a?dr(r):a,gr(dr(n),"logMouseButton",(function(e){if("object"===fr(e)&&0===e.button){var t=p.a.getViewport(n.props.viewConstants.element),r=p.a.getImage(n.props.viewConstants.element),a="".concat(r.width," x ").concat(r.height),o=t.voi.windowWidth,i=t.voi.windowCenter,s="W: ".concat(o.toFixed?o.toFixed(0):o," L: ").concat(o.toFixed?i.toFixed(0):i),c=u.a.getToolState(n.props.viewConstants.element,"stack").data[0];n.setState({scale:t.scale,wwwc:s,size:a,slice:c.currentImageIdIndex+1,stackSize:c.imageIds.length})}})),gr(dr(n),"logScrollButton",(function(){var e=u.a.getToolState(n.props.viewConstants.element,"stack").data[0];n.setState({slice:e.currentImageIdIndex+1,stackSize:e.imageIds.length})})),gr(dr(n),"logKeyButton",(function(e){e=e||window.event;var t=vr.getColormapsList();n.color_counter=n.color_counter===t.length-1?0:n.color_counter+1;var r=t[n.color_counter];if(109===e.keyCode){var a=p.a.colors.getColormap(r.id),o=p.a.getViewport(n.props.viewConstants.element);o&&(o.colormap=a,p.a.setViewport(n.props.viewConstants.element,o),p.a.updateImage(n.props.viewConstants.element,!0)),n.setState({activeColorMap:r.name})}})),gr(dr(n),"onSelect",(function(e){if(e.currentTarget.checked){var t=n.props.viewConstants.element;n.updateTheImage(n.state.resultImage),n.csToolsUpdateImageIds(t,n.state.nrrdSeries.imageIds,0);var r=n.state.results[0].id;n.setState({selectedResultId:r,slice:1,stackSize:n.state.nrrdSeries.imageIds.length})}else n.props.resetImage&&n.props.resetImage(),n.setState({selectedResultId:null,activeColorMap:"Gray"})})),gr(dr(n),"onClickDelete",(function(){n.refreshTable(),n.props.disableResultsButton&&n.props.disableResultsButton()})),gr(dr(n),"onClickExport",(function(){n.notification.show({title:"AI Tools",message:"Preparing the result to download as .nrrd",type:"info",duration:5e3}),Ct.serializeNrrd(n.state.header,n.state.image,"result.nrrd")})),gr(dr(n),"refreshTable",(function(e){if(e){var t=[];t.push(e),n.setState({results:t,selectedResultId:e.id})}else n.setState({results:null,selectedResultId:null,header:null,image:null,resultImage:null,nrrdSeries:null,scale:null,wwwc:null,size:null,slice:null,stackSize:null})})),gr(dr(n),"updateView",function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r){var a,o,i,s,c,l,u,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.viewConstants.element,o=Ct.parseNrrdData(t.data),i=o.header,s=o.image,Ct.serializeNrrd(i,s,"result.nrrd"),n.setState({header:i,image:s}),r)for(l in c=function(e){if(Array.isArray(r)&&(e=r[e]+"#1",null!==n.state.results&&n.state.results.length>0&&n.state.results.forEach((function(t){if(t.label===e){var n=parseInt(t.label.split("#")[1]);e=e.replace("#".concat(n),"#".concat(n+1))}}))),null!==n.state.selectedResultId){var t={color:"Gray",id:n.state.selectedResultId+1,label:e};n.refreshTable(t)}else{var a={color:"Gray",id:0,label:e};n.refreshTable(a)}l=e},r)c(l);return e.next=7,t.data;case 7:u=e.sent,f=new File([u],"example.nrrd"),(p=new FileReader).readAsArrayBuffer(f),m=dr(n),p.onload=function(){var e=vr.importNRRDImage(p.result),t=vr.buildNrrdImage(e,"1234",{});m.renderImage(t,a),m.setState({nrrdSeries:t})};case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ur(o,r,a,i,s,"next",e)}function s(e){ur(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()),gr(dr(n),"getSeriesData",(function(e){var t={};if(e.isMultiframe?(t.isMultiframe=!0,t.numberOfSlices=e.imageIds.length,t.imageIndex=0,t.imageId=e.imageIds[t.imageIndex]):(t.isMultiframe=!1,t.numberOfSlices=e.imageIds.length,t.imageIndex=Math.floor(t.numberOfSlices/2),t.imageId=e.imageIds[t.imageIndex]),t.isColor=e.color,t.isTimeserie=!1,t.rows=e.instances[e.imageIds[0]].metadata.x00280010,t.cols=e.instances[e.imageIds[0]].metadata.x00280011,t.thickness=e.instances[e.imageIds[0]].metadata.x00180050,t.spacing_x=e.instances[e.imageIds[0]].metadata.x00280030?e.instances[e.imageIds[0]].metadata.x00280030[0]:null,t.spacing_y=e.instances[e.imageIds[0]].metadata.x00280030?e.instances[e.imageIds[0]].metadata.x00280030[1]:null,t.wc=e.instances[e.imageIds[0]].metadata.x00281050,t.ww=e.instances[e.imageIds[0]].metadata.x00281051,t.defaultWW=t.ww,t.defaultWC=t.wc,null!=t.rows&&null!=t.cols)return t;alert("invalid image metadata")})),gr(dr(n),"csToolsUpdateImageIds",(function(e,t,n){var r=u.a.getToolState(e,"stack").data[0];r.imageIds=t,r.currentImageIdIndex=r.currentImageIdIndex<n?r.currentImageIdIndex:r.currentImageIdIndex+=1})),gr(dr(n),"updateTheImage",(function(e){var t=n.state.element;n.setState({activeColorMap:"Gray"});var r=dr(n);p.a.loadImage(e.imageId).then((function(e){p.a.displayImage(t,e);var n=p.a.getViewport(t),a=p.a.colors.getColormap("gray");t.style.width=e.width,t.style.height=e.height,p.a.resize(t,!0),n.voi.windowWidth=e.windowWidth,n.voi.windowCenter=e.windowCenter,n.invert=e.invert,n.colormap=a,p.a.setViewport(t,n),p.a.fitToWindow(t);var o="".concat(e.width," x ").concat(e.height),i=n.voi.windowWidth,s=n.voi.windowCenter,c="W: ".concat(i.toFixed?i.toFixed(0):i," L: ").concat(i.toFixed?s.toFixed(0):s);r.setState({scale:n.scale,wwwc:c,size:o})}))})),gr(dr(n),"renderImage",(function(e,t){var r,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(n,!0).forEach((function(t){gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);(r=n.getSeriesData(a)).imageId?(n.setState({resultImage:r,slice:1,stackSize:a.imageIds.length}),n.updateTheImage(r),n.csToolsUpdateImageIds(t,a.imageIds,r.imageIndex-1)):alert("Error during renderImage: imageId has not been loaded yet.")})),n.notification=se.a.create({}),n.uiModelService=Le.a.create({}),n.uiDialogService=Ue.a.create({});var o=n.props.viewConstants.element,i=p.a.getEnabledElement(o).image;return n.state={element:o,results:null,selectedResultId:null,header:null,image:null,mainImage:i,resultImage:null,nrrdSeries:null,scale:null,wwwc:null,size:null,slice:null,stackSize:null,activeColorMap:null},n.state.element.addEventListener("mouseup",n.logMouseButton),n.state.element.addEventListener("wheel",n.logScrollButton),document.addEventListener("keypress",n.logKeyButton),n.color_counter=0,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.state.element.removeEventListener("mouseup",this.logMouseButton),this.state.element.removeEventListener("wheel",this.logScrollButton),document.removeEventListener("keypress",this.logKeyButton)}},{key:"render",value:function(){var e=this,t=this.state.selectedResultId,n=parseFloat(100*this.state.scale).toFixed(0);return o.a.createElement("div",{className:"segmentationList"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("button",{className:"segButton",onClick:this.onClickDelete,title:"Clear Result Image",disabled:null===t},o.a.createElement(ae.g,{name:"trash",width:"12px",height:"12px"}))),o.a.createElement("td",{align:"right"},o.a.createElement("button",{className:"segButton",onClick:this.onClickExport,title:"Download Result Image as .nrrd",disabled:null===t},o.a.createElement(ae.g,{name:"save",width:"12px",height:"12px"})))))),o.a.createElement("div",{className:"segSection"},o.a.createElement("table",{className:"segTable"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{width:"2%"},"#"),o.a.createElement("th",{width:"80%"},"Name"))),o.a.createElement("tbody",null,null!==this.state.results&&this.state.results.map((function(n){return o.a.createElement("tr",{key:n.id},o.a.createElement("td",null,o.a.createElement("input",{className:"selectSegment",name:"selectSegment",id:"selectSegment",type:"checkbox",checked:n.id===t,onChange:function(t){e.onSelect(t)}})),o.a.createElement("td",{className:"segEdit",contentEditable:"true",suppressContentEditableWarning:"true"},n.label))}))))),null!==this.state.selectedResultId&&null!==this.state.nrrdSeries?o.a.createElement("p",{style:{marginTop:"10px",marginLeft:"10px"}},o.a.createElement("b",null,"Zoom"),": ",n," %",o.a.createElement("br",null),o.a.createElement("b",null,"Window Width/Level"),": ",this.state.wwwc,o.a.createElement("br",null),o.a.createElement("b",null,"Image Dimensions"),": ",this.state.size,o.a.createElement("br",null),o.a.createElement("b",null,"Slice Number"),": ",this.state.slice,"/",this.state.stackSize,o.a.createElement("br",null)):null,o.a.createElement("p",{style:{marginTop:"10px",marginLeft:"10px"}},o.a.createElement("b",null,"Active Color Map"),": ",this.state.activeColorMap,o.a.createElement("br",null),"Press ",o.a.createElement("b",null,'"M"')," to cycle through color maps"))}}])&&pr(n.prototype,r),a&&pr(n,a),t}(a.Component);function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Er(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wr(o,r,a,i,s,"next",e)}function s(e){wr(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}gr(yr,"propTypes",{viewConstants:$.a.any,client:$.a.func,disableResultsButton:$.a.func,resetImage:$.a.func,canEditStudy:$.a.bool});var kr=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Or(t).call(this,e),n=!a||"object"!==br(a)&&"function"!=typeof a?Ir(r):a,Cr(Ir(n),"client",(function(){return new Vt})),Cr(Ir(n),"getViewConstants",(function(e,t,r){for(var a=e[r],o=t[r].PatientID,i=a.StudyInstanceUID,s=a.SeriesInstanceUID,c=a.displaySetInstanceUID,l=ze(t,i,s),u=new Map,f=0;f<l.length;f++)u.set(l[f],f);var m=p.a.getEnabledElements()[n.props.activeIndex].element,d=(new zt.a).update(o+i+s).digest("hex");return{PatientID:o,StudyInstanceUID:i,SeriesInstanceUID:s,displaySetInstanceUID:c,imageIdsToIndex:u,element:m,numberOfFrames:l.length,cookiePostfix:d,viewports:e}})),Cr(Ir(n),"handleFilterChange",(function(e){n.setState({filterBodyPart:e})})),Cr(Ir(n),"onClickApply",Er(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.onInfo();case 3:e.t1=e.sent,e.t2={info:e.t1},e.t0.setState.call(e.t0,e.t2),n.setState({children:o.a.createElement("div",null,o.a.createElement(cr,{ref:n.actions.inference,tabIndex:3,info:n.state.info,viewConstants:n.viewConstants,client:n.client,notification:n.notification,updateView:n.updateView,onSelectActionTab:n.onSelectActionTab,onOptionsConfig:n.onOptionsConfig,handleFilterChange:n.handleFilterChange,onClickApply:n.onClickApply}))});case 7:case"end":return e.stop()}}),e)})))),Cr(Ir(n),"onInfo",Er(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/model/?user=".concat(n.props.user.email),null!==(r=n.state.filterBodyPart)&&""!==r&&void 0!==r&&(t+="&bodyPart=".concat(r)),e.next=5,ie.a.get(t,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 5:if(200===(a=e.sent).status){e.next=10;break}n.notification.show({title:"AI Tools",message:"Failed to Connect to Server",type:"error",duration:6e3}),e.next=11;break;case 10:return e.abrupt("return",a.data);case 11:case"end":return e.stop()}}),e)})))),Cr(Ir(n),"disableResults",(function(){n.setState({isResultsButtonDisabled:!0}),n.onModelsClick()})),Cr(Ir(n),"csToolsUpdateImageIds",(function(e,t,n){var r=u.a.getToolState(e,"stack").data[0];r.imageIds=t,r.currentImageIdIndex=r.currentImageIdIndex<n?r.currentImageIdIndex:r.currentImageIdIndex+=1})),Cr(Ir(n),"updateTheImage",(function(){var e=n.state.mainImage,t=n.viewConstants.element;p.a.loadImage(e.imageId).then((function(e){p.a.displayImage(t,e);var n=p.a.getViewport(t),r=p.a.colors.getColormap("gray");t.style.width=e.width,t.style.height=e.height,p.a.resize(t,!0),n.voi.windowWidth=e.windowWidth,n.voi.windowCenter=e.windowCenter,n.invert=e.invert,n.colormap=r,p.a.setViewport(t,n),p.a.fitToWindow(t)})),p.a.updateImage(t)})),Cr(Ir(n),"resetImage",(function(){if(n.state.renderNrrd){var e=n.viewConstants,t=e.element,r=e.imageIdsToIndex;n.updateTheImage(),n.csToolsUpdateImageIds(t,Array.from(r.keys()),0)}})),Cr(Ir(n),"onModelsClick",Er(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.resetImage(),n.setState({children:o.a.createElement("div",null,o.a.createElement(cr,{ref:n.actions.inference,tabIndex:3,info:n.state.info,viewConstants:n.viewConstants,client:n.client,notification:n.notification,updateView:n.updateView,onSelectActionTab:n.onSelectActionTab,onOptionsConfig:n.onOptionsConfig,handleFilterChange:n.handleFilterChange,onClickApply:n.onClickApply}))});case 2:case"end":return e.stop()}}),e)})))),Cr(Ir(n),"onResultsClick",(function(){var e=n.state.results;n.setState({children:e})})),Cr(Ir(n),"onSegmentCreated",(function(e){for(var t=0,r=Object.keys(n.actions);t<r.length;t++){var a=r[t];n.actions[a].current&&n.actions[a].current.onSegmentCreated(e)}})),Cr(Ir(n),"onSegmentUpdated",(function(e){for(var t=0,r=Object.keys(n.actions);t<r.length;t++){var a=r[t];n.actions[a].current&&n.actions[a].current.onSegmentUpdated(e)}})),Cr(Ir(n),"onSegmentDeleted",(function(e){for(var t=0,r=Object.keys(n.actions);t<r.length;t++){var a=r[t];n.actions[a].current&&n.actions[a].current.onSegmentDeleted(e)}})),Cr(Ir(n),"onSegmentSelected",(function(e){for(var t=0,r=Object.keys(n.actions);t<r.length;t++){var a=r[t];n.actions[a].current&&n.actions[a].current.onSegmentSelected(e)}})),Cr(Ir(n),"onSelectActionTab",(function(e){for(var t=0,r=Object.keys(n.actions);t<r.length;t++){var a=r[t];n.state.action===a&&n.actions[a].current&&n.actions[a].current.onLeaveActionTab()}for(var o=0,i=Object.keys(n.actions);o<i.length;o++){var s=i[o];e===s&&n.actions[s].current&&n.actions[s].current.onEnterActionTab()}n.setState({action:e})})),Cr(Ir(n),"onOptionsConfig",(function(){return n.actions.options.current&&n.actions.options.current.state?n.actions.options.current.state.config:{}})),Cr(Ir(n),"updateView",function(){var e=Er(regeneratorRuntime.mark((function e(t,r,a,i,s,c){var l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Classification"===a?"object"!==br(l=t.data.prediction)?n.notification.show({title:"AI Tools",message:"Prediction result is not a JSON object!",type:"error",duration:6e3}):(u=[],Object.keys(l).forEach((function(e){u.push(e)})),n.setState({children:o.a.createElement("div",null,o.a.createElement("h4",{style:{marginLeft:"10px"}},"Prediction Result"),o.a.createElement("br",null),o.a.createElement("ul",null,u.map((function(e,t){return o.a.createElement("li",{key:t},e,": ",l[e])})))),isResultsButtonDisabled:!1,renderNrrd:!1,results:o.a.createElement("div",null,o.a.createElement("h4",{style:{marginLeft:"10px"}},"Prediction Result"),o.a.createElement("br",null),o.a.createElement("ul",null,u.map((function(e,t){return o.a.createElement("li",{key:t},e,": ",l[e])}))))})):"Segmentation"===a?(n.setState({children:o.a.createElement("div",null,o.a.createElement(Mt,{ref:n.segmentationList,viewConstants:n.viewConstants,onSegmentCreated:n.onSegmentCreated,onSegmentUpdated:n.onSegmentUpdated,onSegmentDeleted:n.onSegmentDeleted,onSegmentSelected:n.onSegmentSelected,client:n.client})),isResultsButtonDisabled:!1,renderNrrd:!1,results:o.a.createElement("div",null,o.a.createElement(Mt,{ref:n.segmentationList,viewConstants:n.viewConstants,onSegmentCreated:n.onSegmentCreated,onSegmentUpdated:n.onSegmentUpdated,onSegmentDeleted:n.onSegmentDeleted,onSegmentSelected:n.onSegmentSelected,client:n.client}))}),n.segmentationList.current.updateView(t,r,i,s,c)):(n.setState({children:o.a.createElement("div",null,o.a.createElement(yr,{ref:n.nrrdImageList,viewConstants:n.viewConstants,client:n.client,disableResultsButton:n.disableResults,resetImage:n.resetImage})),isResultsButtonDisabled:!1,renderNrrd:!0,results:o.a.createElement("div",null,o.a.createElement(yr,{ref:n.nrrdImageList,viewConstants:n.viewConstants,client:n.client,disableResultsButton:n.disableResults,resetImage:n.resetImage}))}),n.nrrdImageList.current.updateView(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}());var i=e.viewports,s=e.studies,c=e.activeIndex;n.viewConstants=n.getViewConstants(i,s,c);var l=n.viewConstants.element,f=p.a.getEnabledElement(l).image;return n.notification=se.a.create({}),n.segmentationList=o.a.createRef(),n.nrrdImageList=o.a.createRef(),n.actions={inference:o.a.createRef()},n.state={children:null,results:null,info:[],action:{},isResultsButtonDisabled:!0,mainImage:f,renderNrrd:!1,filterBodyPart:""},n}var n,r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(i=Er(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.onInfo();case 3:e.t1=e.sent,e.t2={info:e.t1},e.t0.setState.call(e.t0,e.t2),this.setState({children:o.a.createElement("div",null,o.a.createElement(cr,{ref:this.actions.inference,tabIndex:3,info:this.state.info,viewConstants:this.viewConstants,client:this.client,notification:this.notification,updateView:this.updateView,onSelectActionTab:this.onSelectActionTab,onOptionsConfig:this.onOptionsConfig,handleFilterChange:this.handleFilterChange,onClickApply:this.onClickApply}))});case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.children;return o.a.createElement("div",{className:"monaiLabelPanel"},o.a.createElement("div",{className:"btn-group rounded-pill",role:"group","aria-label":"Outline example",style:{width:"100%",borderRadius:"5px",marginBottom:"5px",marginTop:"10px"}},o.a.createElement("button",{type:"button",onClick:this.onModelsClick,className:"btn btn-outline-primary"},"Models"),o.a.createElement("button",{type:"button",onClick:this.onResultsClick,className:"btn btn-outline-primary",disabled:this.state.isResultsButtonDisabled},"Results")),o.a.createElement("hr",null),e)}}])&&Sr(n.prototype,r),a&&Sr(n,a),t}(a.Component);Cr(kr,"propTypes",{studies:$.a.any,viewports:$.a.any,activeIndex:$.a.any,user:$.a.object});var jr=Object(Xn.b)((function(e){return{user:e.auth.user}}),null)(kr),xr=function(){return{menuOptions:[{icon:"brain",label:"AI",from:"right",target:"panel"}],components:[{id:"panel",component:jr}],defaultContext:["VIEWER"]}};var Dr={id:"com.ohif.monai-label",preRegistration:function(e){var t,n,r,a,o,i;e.servicesManager,e.configuration;t=u.a.BrushTool,n=u.a.SphericalBrushTool,r=u.a.CorrectionScissorsTool,a=u.a.CircleScissorsTool,o=u.a.FreehandScissorsTool,i=u.a.RectangleScissorsTool,[t,n,r,a,o,i].forEach((function(e){return u.a.addTool(e)})),u.a.addTool(t,{name:"BrushEraser",configuration:{alwaysEraseOnClick:!0}}),u.a.addTool(a,{name:"CircleScissorsEraser",defaultStrategy:"ERASE_INSIDE"}),u.a.addTool(o,{name:"FreehandScissorsEraser",defaultStrategy:"ERASE_INSIDE"}),u.a.addTool(i,{name:"RectangleScissorsEraser",defaultStrategy:"ERASE_INSIDE"})},getToolbarModule:function(){return _n},getPanelModule:function(e){var t=e.servicesManager,n=e.commandsManager;return xr({servicesManager:t,commandsManager:n})}},Tr=n(790),Nr={};window&&(Nr=window.config||{},window.version=Tr.a);var _r={config:Nr,defaultExtensions:[an,Tn,Dr]},Ar=o.a.createElement(r.b,_r,null);s.a.render(Ar,document.getElementById("root"))},138:function(e,t,n){"use strict";var r=n(48),a=n(53),o=n(104);function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&s(a,n.prototype),a}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!0!==Array.isArray(t))throw new a.a("ImageSet expects an array of images");Object.defineProperty(this,"images",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"uid",{enumerable:!1,configurable:!1,writable:!1,value:Object(r.a)()})}var t,n,s;return t=e,(n=[{key:"getUID",value:function(){return this.uid}},{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"setAttributes",value:function(e){if("object"===l(e)&&null!==e){var t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&(this[n]=e[n])}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"sortBy",value:function(e){return this.images.sort(e)}},{key:"sortByImagePositionPatient",value:function(){var e=this.images,t=p(e[0]),n=new o.Vector3(t[0],t[1],t[2]),r=e[0].getData().metadata.ImageOrientationPatient,a=new o.Vector3(r[0],r[1],r[2]).cross(new o.Vector3(r[3],r[4],r[5])),s=e.map((function(e){var t=i(o.Vector3,c(p(e)));return{distance:n.clone().sub(t).dot(a),image:e}}));s.sort((function(e,t){return t.distance-e.distance}));var l=s.map((function(e){return e.image}));e.sort((function(e,t){return l.indexOf(e)-l.indexOf(t)}))}}])&&u(t.prototype,n),s&&u(t,s),e}();function p(e){return e.getData().metadata.ImagePositionPatient}t.a=f},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={ComputedRadiographyImageStorage:"1.2.840.10008.5.1.4.1.1.1",DigitalXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.1",DigitalXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.1.1",DigitalMammographyXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.2",DigitalMammographyXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.2.1",DigitalIntraOralXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.3",DigitalIntraOralXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.3.1",CTImageStorage:"1.2.840.10008.5.1.4.1.1.2",EnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.1",LegacyConvertedEnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.2",UltrasoundMultiframeImageStorage:"1.2.840.10008.5.1.4.1.1.3.1",MRImageStorage:"1.2.840.10008.5.1.4.1.1.4",EnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.1",MRSpectroscopyStorage:"1.2.840.10008.5.1.4.1.1.4.2",EnhancedMRColorImageStorage:"1.2.840.10008.5.1.4.1.1.4.3",LegacyConvertedEnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.4",UltrasoundImageStorage:"1.2.840.10008.5.1.4.1.1.6.1",EnhancedUSVolumeStorage:"1.2.840.10008.5.1.4.1.1.6.2",SecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7",MultiframeSingleBitSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.1",MultiframeGrayscaleByteSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.2",MultiframeGrayscaleWordSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.3",MultiframeTrueColorSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.4",Sop12LeadECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.1",GeneralECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.2",AmbulatoryECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.3",HemodynamicWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.2.1",CardiacElectrophysiologyWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.3.1",BasicVoiceAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.1",GeneralAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.2",ArterialPulseWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.5.1",RespiratoryWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.6.1",GrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.1",ColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.2",PseudoColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.3",BlendingSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.4",XAXRFGrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.5",XRayAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.12.1",EnhancedXAImageStorage:"1.2.840.10008.5.1.4.1.1.12.1.1",XRayRadiofluoroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.12.2",EnhancedXRFImageStorage:"1.2.840.10008.5.1.4.1.1.12.2.1",XRay3DAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.1",XRay3DCraniofacialImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.2",BreastTomosynthesisImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.3",BreastProjectionXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.13.1.4",BreastProjectionXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.13.1.5",IntravascularOpticalCoherenceTomographyImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.14.1",IntravascularOpticalCoherenceTomographyImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.14.2",NuclearMedicineImageStorage:"1.2.840.10008.5.1.4.1.1.20",RawDataStorage:"1.2.840.10008.5.1.4.1.1.66",SpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.1",SpatialFiducialsStorage:"1.2.840.10008.5.1.4.1.1.66.2",DeformableSpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.3",SegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.4",SurfaceSegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.5",RealWorldValueMappingStorage:"1.2.840.10008.5.1.4.1.1.67",SurfaceScanMeshStorage:"1.2.840.10008.5.1.4.1.1.68.1",SurfaceScanPointCloudStorage:"1.2.840.10008.5.1.4.1.1.68.2",VLEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1",VideoEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1.1",VLMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2",VideoMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2.1",VLSlideCoordinatesMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.3",VLPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4",VideoPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4.1",OphthalmicPhotography8BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.1",OphthalmicPhotography16BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.2",StereometricRelationshipStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.3",OphthalmicTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.4",VLWholeSlideMicroscopyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.6",LensometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.1",AutorefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.2",KeratometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.3",SubjectiveRefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.4",VisualAcuityMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.5",SpectaclePrescriptionReportStorage:"1.2.840.10008.5.1.4.1.1.78.6",OphthalmicAxialMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.7",IntraocularLensCalculationsStorage:"1.2.840.10008.5.1.4.1.1.78.8",MacularGridThicknessandVolumeReport:"1.2.840.10008.5.1.4.1.1.79.1",OphthalmicVisualFieldStaticPerimetryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.80.1",OphthalmicThicknessMapStorage:"1.2.840.10008.5.1.4.1.1.81.1",CornealTopographyMapStorage:"1.2.840.10008.5.1.4.1.1.82.1",BasicTextSR:"1.2.840.10008.5.1.4.1.1.88.11",EnhancedSR:"1.2.840.10008.5.1.4.1.1.88.22",ComprehensiveSR:"1.2.840.10008.5.1.4.1.1.88.33",Comprehensive3DSR:"1.2.840.10008.5.1.4.1.1.88.34",ProcedureLog:"1.2.840.10008.5.1.4.1.1.88.40",MammographyCADSR:"1.2.840.10008.5.1.4.1.1.88.50",KeyObjectSelection:"1.2.840.10008.5.1.4.1.1.88.59",ChestCADSR:"1.2.840.10008.5.1.4.1.1.88.65",XRayRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.67",RadiopharmaceuticalRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.68",ColonCADSR:"1.2.840.10008.5.1.4.1.1.88.69",ImplantationPlanSRDocumentStorage:"1.2.840.10008.5.1.4.1.1.88.70",EncapsulatedPDFStorage:"1.2.840.10008.5.1.4.1.1.104.1",EncapsulatedCDAStorage:"1.2.840.10008.5.1.4.1.1.104.2",PositronEmissionTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.128",EnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.130",LegacyConvertedEnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.128.1",BasicStructuredDisplayStorage:"1.2.840.10008.5.1.4.1.1.131",RTImageStorage:"1.2.840.10008.5.1.4.1.1.481.1",RTDoseStorage:"1.2.840.10008.5.1.4.1.1.481.2",RTStructureSetStorage:"1.2.840.10008.5.1.4.1.1.481.3",RTBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.4",RTPlanStorage:"1.2.840.10008.5.1.4.1.1.481.5",RTBrachyTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.6",RTTreatmentSummaryRecordStorage:"1.2.840.10008.5.1.4.1.1.481.7",RTIonPlanStorage:"1.2.840.10008.5.1.4.1.1.481.8",RTIonBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.9",RTBeamsDeliveryInstructionStorage:"1.2.840.10008.5.1.4.34.7",GenericImplantTemplateStorage:"1.2.840.10008.5.1.4.43.1",ImplantAssemblyTemplateStorage:"1.2.840.10008.5.1.4.44.1",ImplantTemplateGroupStorage:"1.2.840.10008.5.1.4.45.1"}},1416:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(766),a=n(12);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this,a=t.commandsManager,o=t.servicesManager,i=t.api,s=t.appConfig,c=void 0===s?{}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modules={},this.registeredExtensionIds=[],this.registeredExtensionVesions={},this.moduleTypeNames=Object.values(r.a),this._commandsManager=a,this._servicesManager=o,this._appConfig=c,this._api=i,this.moduleTypeNames.forEach((function(e){n.modules[e]=[]}))}var t,n,s;return t=e,(n=[{key:"registerExtensions",value:function(e){var t=this;e.forEach((function(e){if(Array.isArray(e)){var n=o(e,2),r=n[0],a=n[1];t.registerExtension(r,a)}else t.registerExtension(e)}))}},{key:"registerExtension",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=e.id,o=e.version;r||(r=Math.random().toString(36).substr(2,5),a.a.warn("Extension ID not set. Using random string ID: ".concat(r))),this.registeredExtensionIds.includes(r)?a.a.warn("Extension ID ".concat(r," has already been registered. Exiting before duplicating modules.")):(e.preRegistration&&e.preRegistration({servicesManager:this._servicesManager,commandsManager:this._commandsManager,appConfig:this._appConfig,configuration:n}),this.moduleTypeNames.forEach((function(a){var o=t._getExtensionModule(a,e,r,n);o&&(t._initSpecialModuleTypes(a,o),t.modules[a].push({extensionId:r,module:o}))})),this.registeredExtensionIds.push(r),this.registeredExtensionVesions[r]=o)}else a.a.warn("Attempting to register a null/undefined extension. Exiting early.")}},{key:"_getExtensionModule",value:function(e,t,n,r){var o,i="get"+((o=e).charAt(0).toUpperCase()+o.substr(1)),s=t[i];if(s)try{var c=s({servicesManager:this._servicesManager,commandsManager:this._commandsManager,appConfig:this._appConfig,configuration:r,api:this._api,extensionManager:this});return c||a.a.warn("Null or undefined returned when registering the ".concat(i," module for the ").concat(n," extension")),c}catch(e){a.a.error("Exception thrown while trying to call ".concat(i," for the ").concat(n," extension"))}}},{key:"_initSpecialModuleTypes",value:function(e,t){switch(e){case"commandsModule":var n=t.definitions,r=t.defaultContext;if(!n||0===Object.keys(n).length)return void a.a.warn("Commands Module contains no command definitions");this._initCommandsModule(n,r)}}},{key:"_initCommandsModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VIEWER";this._commandsManager.getContext(n)||this._commandsManager.createContext(n),Object.keys(e).forEach((function(r){var a=e[r];a.context&&!t._commandsManager.getContext(a.context)&&t._commandsManager.createContext(a.context),t._commandsManager.registerCommand(a.context||n,r,a)}))}}])&&i(t.prototype,n),s&&i(t,s),e}()},1417:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(12);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services={},this.registeredServiceNames=[]}var t,n,i;return t=e,(n=[{key:"registerService",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?e.name?this.registeredServiceNames.includes(e.name)?r.a.warn("Service name ".concat(e.name," has already been registered. Exiting before duplicating services.")):e.create?(this.services[e.name]=e.create({configuration:t}),this.registeredServiceNames.push(e.name)):r.a.warn("Service create factory function not defined. Exiting early."):r.a.warn("Service name not set. Exiting early."):r.a.warn("Attempting to register a null/undefined service. Exiting early.")}},{key:"registerServices",value:function(e){var t=this;e.forEach((function(e){if(Array.isArray(e)){var n=a(e,2),r=n[0],o=n[1];t.registerService(r,o)}else t.registerService(e)}))}}])&&o(t.prototype,n),i&&o(t,i),e}()},1418:function(e,t,n){"use strict";var r="UINotificationService",a=[],o={name:r,hide:function(e){return i._hide({id:e})},show:function(e){var t=e.title,n=e.message,r=e.duration,a=void 0===r?5e3:r,o=e.position,s=void 0===o?"bottomRight":o,c=e.type,l=void 0===c?"info":c,u=e.autoClose,f=void 0===u||u,p=e.action,m=void 0===p?null:p;return i._show({title:t,message:n,duration:a,position:s,type:l,autoClose:f,action:m})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(i._hide=t);if(n)for(i._show=n;a.length>0;){var r=a.pop();i._show(r)}}},i={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(e){a.push(e),console.warn("show() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return o}}},1419:function(e,t,n){"use strict";var r="UIModalService",a={name:r,hide:function(){return o._hide()},show:function(e){var t=e.content,n=void 0===t?null:t,r=e.contentProps,a=void 0===r?null:r,i=e.shouldCloseOnEsc,s=void 0!==i&&i,c=e.isOpen,l=void 0===c||c,u=e.onClose,f=void 0===u?null:u,p=e.closeButton,m=void 0===p||p,d=e.title,h=void 0===d?null:d,g=e.fullscreen,v=void 0!==g&&g,y=e.customClassName,b=void 0===y?null:y,w=e.showScrollbar,E=void 0!==w&&w,S=e.noScroll,O=void 0!==S&&S;return o._show({content:n,contentProps:a,shouldCloseOnEsc:s,isOpen:l,onClose:f,closeButton:m,title:h,fullscreen:v,customClassName:b,showScrollbar:E,noScroll:O})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(o._hide=t);n&&(o._show=n)}},o={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(){return console.warn("show() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},1420:function(e,t,n){"use strict";var r="UIDialogService",a={name:r,dismiss:function(e){var t=e.id;return o._dismiss({id:t})},dismissAll:function(){return o._dismissAll()},create:function(e){var t=e.id,n=e.content,r=e.contentProps,a=e.onStart,i=e.onDrag,s=e.onStop,c=e.centralize,l=void 0===c||c,u=e.preservePosition,f=void 0===u||u,p=e.isDraggable,m=void 0!==p&&p,d=e.showOverlay,h=void 0!==d&&d,g=e.defaultPosition;return o._create({id:t,content:n,contentProps:r,onStart:a,onDrag:i,onStop:s,centralize:l,preservePosition:f,isDraggable:m,showOverlay:h,defaultPosition:g})},setServiceImplementation:function(e){var t=e.dismiss,n=e.dismissAll,r=e.create;t&&(o._dismiss=t);n&&(o._dismissAll=n);r&&(o._create=r)}},o={_dismiss:function(){return console.warn("dismiss() NOT IMPLEMENTED")},_dismissAll:function(){return console.warn("dismissAll() NOT IMPLEMENTED")},_create:function(){return console.warn("create() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},1421:function(e,t,n){"use strict";var r="LoggerService",a={name:r,info:function(e){var t=e.message,n=e.displayOnConsole;return o._info({message:t,displayOnConsole:n})},error:function(e){var t=e.error,n=e.stack,r=e.message,a=e.displayOnConsole;return o._error({error:t,stack:n,message:r,displayOnConsole:a})},setServiceImplementation:function(e){var t=e.info,n=e.error;t&&(o._info=t);n&&(o._error=n)}},o={_info:function(){return console.warn("info() NOT IMPLEMENTED")},_error:function(){return console.warn("error() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},1430:function(e,t,n){"use strict";var r=n(12),a=n(48),o={subscribe:function(e,t){var n=this;if(this._isValidEvent(e)){var r=Object(a.a)(),o={id:r,callback:t};return console.info("Subscribing to '".concat(e,"'.")),Array.isArray(this.listeners[e])?this.listeners[e].push(o):this.listeners[e]=[o],{unsubscribe:function(){return n._unsubscribe(e,r)}}}throw new Error("Event ".concat(e," not supported."))},publish:function(e,t){var n=Object.keys(this.listeners).length>0,r=Array.isArray(this.listeners[e]);n&&r&&this.listeners[e].forEach((function(e){e.callback(t)}))},_unsubscribe:function(e,t){if(!this.listeners[e])return;var n=this.listeners[e];Array.isArray(n)?this.listeners[e]=n.filter((function(e){return e.id!==t})):this.listeners[e]=void 0},_isValidEvent:function(e){return Object.values(this.EVENTS).includes(e)}};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=["id","SOPInstanceUID","FrameOfReferenceUID","referenceStudyUID","referenceSeriesUID","label","description","type","unit","area","mean","stdDev","length","shortestDiameter","longestDiameter","text","points","source"],f={MEASUREMENT_UPDATED:"event::measurement_updated",INTERNAL_MEASUREMENT_UPDATED:"event:internal_measurement_updated",MEASUREMENT_ADDED:"event::measurement_added",RAW_MEASUREMENT_ADDED:"event::raw_measurement_added",MEASUREMENT_REMOVED:"event::measurement_removed",MEASUREMENTS_CLEARED:"event::measurements_cleared",JUMP_TO_MEASUREMENT:"event:jump_to_measurement"},p={POLYLINE:"value_type::polyline",POINT:"value_type::point",BIDIRECTIONAL:"value_type::shortAxisLongAxis",ELLIPSE:"value_type::ellipse",MULTIPOINT:"value_type::multipoint",CIRCLE:"value_type::circle"},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_arrayOfObjects",(function(e){return Object.entries(e).map((function(e){return l({},e[0],e[1])}))})),this.sources={},this.mappings={},this.measurements={},this.listeners={},this._jumpToMeasurementCache={},Object.defineProperty(this,"EVENTS",{value:f,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this,"VALUE_TYPES",{value:p,writable:!1,enumerable:!0,configurable:!1}),Object.assign(this,o)}var t,n,i;return t=e,(n=[{key:"getMeasurements",value:function(){var e=this,t=this._arrayOfObjects(this.measurements);return t&&t.map((function(t){return e.measurements[Object.keys(t)[0]]}))}},{key:"getMeasurement",value:function(e){var t=null,n=this.measurements[e];return n&&Object.keys(n).length>0&&(t=this.measurements[e]),t}},{key:"createSource",value:function(e,t){var n=this;if(!e)throw new Error("Source name not provided.");if(!t)throw new Error("Source version not provided.");var o=Object(a.a)(),i={id:o,name:e,version:t,addOrUpdate:function(e,t){return n.addOrUpdate(i,e,t)},remove:function(e){return n.remove(e,i)},getAnnotation:function(e,t){return n.getAnnotation(i,e,t)}};return r.a.info("New '".concat(e,"@").concat(t,"' source added.")),this.sources[o]=i,i}},{key:"getSource",value:function(e,t){return this.sources[this._getSourceId(e,t)]}},{key:"getSourceMappings",value:function(e,t){return this.mappings[this._getSourceId(e,t)]}},{key:"_getSourceId",value:function(e,t){var n=this.sources;return Object.keys(n).find((function(r){var a=n[r];return a.name===e&&a.version===t}))}},{key:"addMapping",value:function(e,t,n,a,o){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!n)throw new Error("Matching criteria not provided.");if(!t)throw new Error("Definition not provided.");if(!a)throw new Error("Mapping function to source schema not provided.");if(!o)throw new Error("Measurement mapping function not provided.");var i={matchingCriteria:n,definition:t,toSourceSchema:a,toMeasurementSchema:o};Array.isArray(this.mappings[e.id])?this.mappings[e.id].push(i):this.mappings[e.id]=[i],r.a.info("New measurement mapping added to source '".concat(this._getSourceInfo(e),"'."))}},{key:"getAnnotation",value:function(e,t,n){if(this._isValidSource(e))if(t){var a=this._getMappingByMeasurementSource(n,t),o=this.getMeasurement(n);if(a)return a.toSourceSchema(o,t);var i=this._getMatchingMapping(e,t,o);if(i)return r.a.info("Matching mapping found:",i),(0,i.toSourceSchema)(o,i.definition)}else r.a.warn("No source definition provided. Exiting early.");else r.a.warn("Invalid source. Exiting early.")}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.measurements[e]){var a=s({},t,{modifiedTimestamp:Math.floor(Date.now()/1e3)});return r.a.info("Updating internal measurement representation...",a),this.measurements[e]=a,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:t.source,measurement:a,notYetUpdatedAtSource:n}),a.id}}},{key:"addRawMeasurement",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this._isValidSource(e)){var c=this._getSourceInfo(e);if(t)if(this._sourceHasMappings(e)){var l={};try{(l=o(n)).source=e}catch(e){return void r.a.warn("Failed to map '".concat(c,"' measurement for definition ").concat(t,":"),e.message)}if(this._isValidMeasurement(l)){var u=n.id;u||(u=Object(a.a)(),r.a.warn("Measurement ID not found. Generating UID: ".concat(u)));var f=s({},l,{modifiedTimestamp:Math.floor(Date.now()/1e3),id:u});return this.measurements[u]?(r.a.info("Measurement already defined. Updating measurement.",f),this.measurements[u]=f,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:f})):(r.a.info("Measurement added.",f),this.measurements[u]=f,this.publish(this.EVENTS.RAW_MEASUREMENT_ADDED,{source:e,measurement:f,data:n,dataSource:i})),f.id}r.a.warn("Attempting to add or update a invalid measurement provided by '".concat(c,"'. Exiting early."))}else r.a.warn("No measurement mappings found for '".concat(c,"' source. Exiting early."));else r.a.warn("No source definition provided. Exiting early.")}else r.a.warn("Invalid source. Exiting early.")}},{key:"addOrUpdate",value:function(e,t,n){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!t)throw new Error("No source definition provided.");var o=this._getSourceInfo(e);if(!this._sourceHasMappings(e))throw new Error("No measurement mappings found for '".concat(o,"' source. Exiting early."));var i={};try{(i=(0,this.mappings[e.id].find((function(e){return e.definition===t})).toMeasurementSchema)(n)).source=e}catch(e){throw new Error("Failed to map '".concat(o,"' measurement for definition ").concat(t,":"),e.message)}if(!this._isValidMeasurement(i))throw new Error("Attempting to add or update a invalid measurement provided by '".concat(o,"'. Exiting early."));var c=n.id;c||(c=Object(a.a)(),r.a.info("Measurement ID not found. Generating UID: ".concat(c)));var l=s({},i,{modifiedTimestamp:Math.floor(Date.now()/1e3),id:c});return this.measurements[c]?(r.a.info("Measurement already defined. Updating measurement.",l),this.measurements[c]=l,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:l,notYetUpdatedAtSource:!1})):(r.a.info("Measurement added.",l),this.measurements[c]=l,this.publish(this.EVENTS.MEASUREMENT_ADDED,{source:e,measurement:l})),l.id}},{key:"remove",value:function(e,t){e&&this.measurements[e]?(delete this.measurements[e],this.publish(this.EVENTS.MEASUREMENT_REMOVED,{source:t,measurement:e})):r.a.warn("No id provided, or unable to find measurement by id.")}},{key:"clearMeasurements",value:function(){this.measurements={},this._jumpToMeasurementCache={},this.publish(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"jumpToMeasurement",value:function(e,t){var n=this.measurements[t];if(n){this._addJumpToMeasurement(e,t);var a=this.EVENTS.JUMP_TO_MEASUREMENT,o=Object.keys(this.listeners).length>0,i=Array.isArray(this.listeners[a]);o&&i&&this.listeners[a].forEach((function(t){t.callback({viewportIndex:e,measurement:n})}))}else r.a.warn("No id provided, or unable to find measurement by id.")}},{key:"_addJumpToMeasurement",value:function(e,t){this._jumpToMeasurementCache[e]=t}},{key:"getJumpToMeasurement",value:function(e){return this._jumpToMeasurementCache[e]}},{key:"removeJumpToMeasurement",value:function(e){delete this._jumpToMeasurementCache[e]}},{key:"_getMappingByMeasurementSource",value:function(e,t){var n=this.getMeasurement(e);if(this._isValidSource(n.source))return this.mappings[n.source.id].find((function(e){return e.definition===t}))}},{key:"clear",value:function(){this.measurements={},this.publish(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"_getMatchingMapping",value:function(e,t,n){return this.mappings[e.id].filter((function(e){return e.definition===t})).find((function(e){var t=e.matchingCriteria;return!!(t.type===n.type&&(t.properties&&t.properties.every((function(e){return n.hasOwnProperty(e)}))||n.points&&n.points.length===t.points))}))}},{key:"_getSourceInfo",value:function(e){return"".concat(e.name,"@").concat(e.version)}},{key:"_isValidSource",value:function(e){return e&&this.sources[e.id]}},{key:"_sourceHasMappings",value:function(e){return Array.isArray(this.mappings[e.id])&&this.mappings[e.id].length}},{key:"_isValidMeasurement",value:function(e){return Object.keys(e).forEach((function(e){if(!u.includes(e))return r.a.warn("Invalid measurement key: ".concat(e)),!1})),!0}}])&&c(t.prototype,n),i&&c(t,i),e}();t.a={name:"MeasurementService",create:function(e){e.configuration;return new m}}},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(259);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if("function"==typeof e.getImageId)return e.getImageId();if(e.url)return void 0!==t&&(e.url=(a=e.url,o="frame",i=t,s=new RegExp("([?&])"+o+"=.*?(&|$)","i"),c=-1!==a.indexOf("?")?"&":"?",a.match(s)?a.replace(s,"$1"+o+"="+i+"$2"):a+c+o+"="+i)),e.url;var a,o,i,s,c,l=n?"thumbnailRendering":"imageRendering";if(e[l]&&"wadouri"!==e[l]&&e.wadorsuri)return Object(r.a)(e,t,n);var u="dicomweb:"+e.wadouri;return void 0!==t&&(u+="&frame="+t),u}}},168:function(e,t,n){"use strict";var r,a=n(28),o=n.n(a),i=n(0),s=n.n(i),c=n(1),l=n.n(c),u=n(757),f=n(306),p=n.n(f),m=n(65),d=n(205),h=n.n(d);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={in:l.a.bool,mountOnEnter:l.a.bool,unmountOnExit:l.a.bool,appear:l.a.bool,timeout:l.a.number,onEnter:l.a.func,onEntering:l.a.func,onEntered:l.a.func,onExit:l.a.func,onExiting:l.a.func,onExited:l.a.func},P=(O(r={},d.ENTERING,"in"),O(r,d.ENTERED,"in"),r),C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,E(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=y(e,["className","children"]);return s.a.createElement(h.a,r,(function(e,r){return s.a.cloneElement(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{className:o()("fade",t,n.props.className,P[e])}))}))}}])&&b(n.prototype,r),a&&b(n,a),t}(s.a.Component);C.propTypes=I,C.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1};var k=C;function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R={show:l.a.bool,rootClose:l.a.bool,onHide:l.a.func,animation:l.a.oneOfType([l.a.bool,p.a]),onEnter:l.a.func,onEntering:l.a.func,onEntered:l.a.func,onExit:l.a.func,onExiting:l.a.func,onExited:l.a.func,placement:l.a.oneOf(["top","right","bottom","left"])},M={animation:k,rootClose:!1,show:!1,placement:"right"},L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.animation,r=t.children,a=D(t,["animation","children"]),c=!0===n?k:n||null;return e=c?r:Object(i.cloneElement)(r,{className:o()(r.props.className,"in")}),s.a.createElement(u.Overlay,x({},a,{transition:c}),e)}}])&&T(n.prototype,r),a&&T(n,a),t}(s.a.Component);L.propTypes=R,L.defaultProps=M;var U=Object(m.i)()(L),F=n(249),V=n.n(F),B=n(33),z=n.n(B),H=n(250),q=n.n(H);var G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}var ee=l.a.oneOf(["click","hover","focus"]),te={trigger:l.a.oneOfType([ee,l.a.arrayOf(ee)]),delay:l.a.number,delayShow:l.a.number,delayHide:l.a.number,defaultOverlayShown:l.a.bool,overlay:l.a.node.isRequired,handleHide:l.a.func,onBlur:l.a.func,onClick:l.a.func,onFocus:l.a.func,onMouseOut:l.a.func,onMouseOver:l.a.func,target:l.a.oneOf([null]),onHide:l.a.oneOf([null]),show:l.a.oneOf([null])},ne=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=X(t).call(this,e,n),(r=!o||"object"!==W(o)&&"function"!=typeof o?Q(a):o).handleToggle=r.handleToggle.bind(Q(r)),r.handleDelayedShow=r.handleDelayedShow.bind(Q(r)),r.handleDelayedHide=r.handleDelayedHide.bind(Q(r)),r.handleHide=G(r.handleHide.bind(Q(r)),e.handleHide),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e,"fromElement")},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e,"toElement")},r._mountNode=null,r.state={show:e.defaultOverlayShown},r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._mountNode=document.createElement("div"),this.renderOverlay()}},{key:"componentDidUpdate",value:function(){this.renderOverlay()}},{key:"componentWillUnmount",value:function(){z.a.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)}},{key:"handleDelayedHide",value:function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout((function(){e._hoverHideDelay=null,e.hide()}),t):this.hide()}}},{key:"handleDelayedShow",value:function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout((function(){e._hoverShowDelay=null,e.show()}),t):this.show()}}},{key:"handleHide",value:function(){this.hide()}},{key:"handleMouseOverOut",value:function(e,t,n){var r=t.currentTarget,a=t.relatedTarget||t.nativeEvent[n];a&&a===r||V()(r,a)||e(t)}},{key:"handleToggle",value:function(){this.state.show?this.hide():this.show()}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"makeOverlay",value:function(e,t){return s.a.createElement(U,J({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)}},{key:"show",value:function(){this.setState({show:!0})}},{key:"renderOverlay",value:function(){z.a.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)}},{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.overlay,r=e.children,a=e.onBlur,o=e.onClick,c=e.onFocus,l=e.onMouseOut,u=e.onMouseOver,f=Y(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete f.delay,delete f.delayShow,delete f.delayHide,delete f.defaultOverlayShown;var p=s.a.Children.only(r),m=p.props,d={};return this.state.show&&(d["aria-describedby"]=n.props.id),d.onClick=G(m.onClick,o),$("click",t)&&(d.onClick=G(d.onClick,this.handleToggle)),$("hover",t)&&(q()(!("hover"===t),'[react-bootstrap] Specifying only the `"hover"` trigger limits the visibility of the overlay to just mouse users. Consider also including the `"focus"` trigger so that touch and keyboard only users can see the overlay as well.'),d.onMouseOver=G(m.onMouseOver,u,this.handleMouseOver),d.onMouseOut=G(m.onMouseOut,l,this.handleMouseOut)),$("focus",t)&&(d.onFocus=G(m.onFocus,c,this.handleDelayedShow),d.onBlur=G(m.onBlur,a,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,f),Object(i.cloneElement)(p,d)}}])&&K(n.prototype,r),a&&K(n,a),t}(s.a.Component);ne.propTypes=te,ne.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},n.d(t,"a",(function(){return ne}))},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(53);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getByInstanceUID",value:function(e){throw new r.a("StudyMetadataSource::getByInstanceUID is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}},{key:"loadStudy",value:function(e){throw new r.a("StudyMetadataSource::loadStudy is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}}])&&a(t.prototype,n),o&&a(t,o),e}()},171:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(264);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="RetrieveStudyMetadata",i=new Map;function s(e,t,n){var s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)throw new Error("".concat(o,": Required 'server' parameter not provided."));if(!t)throw new Error("".concat(o,": Required 'StudyInstanceUID' parameter not provided."));return i.has(t)?i.get(t):(s=n&&n.seriesInstanceUID&&c?function(e,t,n){var o=n.seriesInstanceUID.split(",");return new Promise((function(i,s){var c=[];o.forEach((function(a){var o=Object.assign({},n,{seriesInstanceUID:a});c.push(Object(r.a)(e,t,o))})),Promise.all(c).then((function(e){var t=e[0],n=[];e.forEach((function(e){n=[].concat(a(n),a(e.series))})),t.series=n,i(t)}),s)}))}(e,t,n):Object(r.a)(e,t,n),i.set(t,s),s)}function c(e){i.has(e)&&i.delete(e)}},18:function(e,t,n){"use strict";n.d(t,"D",(function(){return r})),n.d(t,"C",(function(){return a})),n.d(t,"B",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"p",(function(){return c})),n.d(t,"o",(function(){return l})),n.d(t,"w",(function(){return u})),n.d(t,"v",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"H",(function(){return d})),n.d(t,"G",(function(){return h})),n.d(t,"A",(function(){return g})),n.d(t,"z",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"t",(function(){return w})),n.d(t,"u",(function(){return E})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return O})),n.d(t,"j",(function(){return I})),n.d(t,"i",(function(){return P})),n.d(t,"f",(function(){return C})),n.d(t,"e",(function(){return k})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return x})),n.d(t,"n",(function(){return D})),n.d(t,"m",(function(){return T})),n.d(t,"y",(function(){return N})),n.d(t,"x",(function(){return _})),n.d(t,"F",(function(){return A})),n.d(t,"E",(function(){return R})),n.d(t,"q",(function(){return M}));var r="UPDATE_TOKEN",a="SUPERUSER_LOGIN_SUCCESS",o="SUPERUSER_LOGIN_FAIL",i="INVESTIGATOR_LOGIN",s="HEALTHPROFESSIONAL_LOGIN",c="LOGIN_SUCCESS",l="LOGIN_FAIL",u="SIGNUP_SUCCESS",f="SIGNUP_FAIL",p="ACTIVATION_SUCCESS",m="ACTIVATION_FAIL",d="USER_LOADED_SUCCESS",h="USER_LOADED_FAIL",g="SUPERUSER_AUTHENTICATED_SUCCESS",v="SUPERUSER_AUTHENTICATED_FAIL",y="AUTHENTICATED_SUCCESS",b="AUTHENTICATED_FAIL",w="PASSWORD_RESET_FAIL",E="PASSWORD_RESET_SUCCESS",S="PASSWORD_RESET_CONFIRM_FAIL",O="PASSWORD_RESET_CONFIRM_SUCCESS",I="GOOGLE_AUTH_SUCCESS",P="GOOGLE_AUTH_FAIL",C="FACEBOOK_AUTH_SUCCESS",k="FACEBOOK_AUTH_FAIL",j="GITHUB_AUTH_SUCCESS",x="GITHUB_AUTH_FAIL",D="LINKEDIN_AUTH_SUCCESS",T="LINKEDIN_AUTH_FAIL",N="SPOTIFY_AUTH_SUCCESS",_="SPOTIFY_AUTH_FAIL",A="USER_LOADED_APPS_SUCCESS",R="USER_LOADED_APPS_FAIL",M="LOGOUT"},200:function(e,t,n){"use strict";n(829);var r=n(28),a=n.n(r),o=n(0),i=n.n(o),s=n(1),c=n.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g={placement:c.a.oneOf(["top","right","bottom","left"]),positionTop:c.a.oneOfType([c.a.number,c.a.string]),positionLeft:c.a.oneOfType([c.a.number,c.a.string]),arrowOffsetTop:c.a.oneOfType([c.a.number,c.a.string]),arrowOffsetLeft:c.a.oneOfType([c.a.number,c.a.string])},v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,d(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.placement,n=e.positionTop,r=e.positionLeft,o=e.arrowOffsetTop,s=e.arrowOffsetLeft,c=e.className,l=e.style,p=e.children,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({top:n,left:r},l),d={top:o,left:s};return i.a.createElement("div",{role:"tooltip",className:a()(c,"tooltip",t),style:m},i.a.createElement("div",{className:"tooltip-arrow",style:d}),i.a.createElement("div",{className:"tooltip-inner"},p))}}])&&p(n.prototype,r),o&&p(n,o),t}(i.a.Component);v.propTypes=g,v.defaultProps={placement:"right"},n.d(t,"a",(function(){return v}))},201:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}n.d(t,"a",(function(){return r}))},202:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"parse",(function(){return B})),n.d(r,"queryString",(function(){return z})),n.d(r,"paramString",(function(){return H}));var a={};n.r(a),n.d(a,"addToList",(function(){return re})),n.d(a,"getItem",(function(){return oe})),n.d(a,"forEach",(function(){return ae})),n.d(a,"print",(function(){return ie}));var o={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(o),n.d(o,"createList",(function(){return me})),n.d(o,"isList",(function(){return de})),n.d(o,"createTask",(function(){return he})),n.d(o,"isTask",(function(){return ge})),n.d(o,"increaseList",(function(){return ve})),n.d(o,"update",(function(){return ye})),n.d(o,"finish",(function(){return be})),n.d(o,"getOverallProgress",(function(){return we})),n.d(o,"waitOn",(function(){return Ee})),n.d(o,"addDeferred",(function(){return Se})),n.d(o,"setTaskName",(function(){return Oe})),n.d(o,"getTaskByName",(function(){return Ie})),n.d(o,"addObserver",(function(){return Pe})),n.d(o,"removeObserver",(function(){return Ce}));var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"set",value:function(t,n,r){var a=e.getPathComponents(n),o=null!==a?a.length:0,i=!1;if(o>0&&e.isValidObject(t)){for(var s=0,c=o-1,l=t;s<c;){var u=a[s];if(u in l){if(!e.isValidObject(l[u]))break}else l[u]={};l=l[u],s++}s===c&&(l[a[c]]=r,i=!0)}return i}},{key:"get",value:function(t,n){var r,a=e.getPathComponents(n),o=null!==a?a.length:0;if(o>0&&e.isValidObject(t)){for(var i=0,s=o-1,c=t;i<s;){var l=a[i],u=e.isValidObject(c[l]);if(!(l in c&&u))break;c=c[l],i++}i===s&&a[s]in c&&(r=c[a[s]])}return r}},{key:"isValidObject",value:function(e){return"object"===i(e)&&null!==e&&e instanceof Object}},{key:"getPathComponents",value:function(e){return"string"==typeof e?e.split("."):null}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}(),l=n(253),u=function(e){var t="/";if(!e)return t;var n=window.location.origin,r=n.split("/");if(r.length>4){var a=n.indexOf(r[3]);t+=n.substring(a)+e}else t+=e;return t.replace(/\/\/+/g,"/")},f=function(e,t){if(!e||!t)throw new Error("The servers and store must be defined");Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=Object.assign({},e);r.type=n,t.dispatch({type:"ADD_SERVER",server:r})}))}))},p=n(48),m=n(252),d=n(134);var h=n(3),g=n.n(h),v=n(29),y=n.n(v),b=n(62),w=n(21),E=n(51),S=n(57);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(e){if(e)return"function"==typeof e.getImageId?e.getImageId():e.url},P=function(e){return(Array.isArray(e)?e:[e]).some((function(e){return!e}))},C=function(e){return e&&e.images&&e.images[0]},k=function(e){return I(e)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.a.getAuthorizationHeader();return fetch(e,t).then((function(e){return e.arrayBuffer()}))},x=function(e){return g.a.loadAndCacheImage(e).then((function(e){return e&&e.data&&e.data.byteArray.buffer}))},D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w.a.getAuthorizationHeader(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E.a.getHTTPErrorHandler(),i={url:e,headers:a,errorInterceptor:o,requestHooks:[Object(S.a)()]},s=new b.a.DICOMwebClient(i);return s.retrieveInstance({studyInstanceUID:t,seriesInstanceUID:n,sopInstanceUID:r})},T=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getLocalData",value:function(e,t){if(e&&e.localFile){var n=C(e),r=k(n);if(P(r)&&(r=function(e,t){var n=e.find((function(e){return e.displaySets.some((function(e){return e.displaySetInstanceUID===t}))})).series,r=((void 0===n?[]:n)[0]||{}).instances,a=(void 0===r?[]:r)[0];return I(a)}(t,e.displaySetInstanceUID)),!P(r))return y.a.wadouri.loadFileRequest(r)}}},{key:"getDataByImageType",value:function(e){var t=C(e);if(t){var n=k(t),r=j;switch(function(e){var t=/^\w+\:/,n=t.exec(e);return 0===t.lastIndex&&n&&n[0]&&n[0].replace(":","")||""}(n)){case"dicomfile":r=x.bind(this,n);break;case"wadors":var a=t.getData().wadoRoot,o=t.getStudyInstanceUID(),i=t.getSeriesInstanceUID(),s=t.getSOPInstanceUID();if(P([a,o,i,s]))return;r=D.bind(this,a,o,i,s);break;case"wadouri":if(function(e){throw new Error('"'+e+'" is read-only')}("imageId"),n=n.substring(n.indexOf(":")+1),P(n))return;r=j.bind(this,n)}return r()}}},{key:"getDataByDatasetType",value:function(e){var t=e.StudyInstanceUID,n=e.SeriesInstanceUID,r=e.SOPInstanceUID,a=e.authorizationHeaders,o=e.wadoRoot,i=e.wadoUri;return P(o)?P(i)?void 0:j(i,{headers:a}):D(o,t,n,r,a)}},{key:"getLoaderIterator",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalData(t,n);case 2:return e.next=4,this.getDataByImageType(t);case 4:return e.next=6,this.getDataByDatasetType(t);case 6:case"end":return e.stop()}}),e,this)}))},{key:"findDicomDataPromise",value:function(e,t){var n=this.getLoaderIterator(e,t),r=!0,a=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(c)return c}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}throw new Error("Invalid dicom data loader")}}])&&O(t.prototype,n),r&&O(t,r),e}()),N=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),a=[],o=0;o<r.length;o+=n){for(var i=r.slice(o,o+n),s=new Array(i.length),c=0;c<i.length;c++)s[c]=i.charCodeAt(c);var l=new Uint8Array(s);a.push(l)}var u=new Blob(a,{type:t});return u};function _(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_(o,r,a,i,s,"next",e)}function s(e){_(o,r,a,i,s,"throw",e)}i(void 0)}))}}function R(){return(R=A(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,l,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.StudyInstanceUID,i=t.SeriesInstanceUID,s=[],c=d.a.get(o)){e.next=5;break}return e.abrupt("return",s);case 5:if((l=c.getDerivedDatasets({referencedSeriesInstanceUID:i})).length){e.next=8;break}return e.abrupt("return",s);case 8:return u={},l.forEach((function(e){var t=e.Modality;void 0===u[t]&&(u[t]=[]),u[t].push(e)})),e.next=12,Promise.all(Object.keys(u).map(function(){var e=A(regeneratorRuntime.mark((function e(o){var i,s,c,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u[o],!i.some((function(e){return e.isLoaded}))){e.next=4;break}return e.abrupt("return");case 4:if(!i.some((function(e){return e.loadError}))){e.next=6;break}return e.abrupt("return");case 6:if(s=0,c=i[0],i.forEach((function(e){var t=Number("".concat(e.SeriesDate).concat(e.SeriesTime));t>s&&(s=t,c=e)})),e.prev=9,!c.hasOwnProperty("getSourceDisplaySet")||"function"!=typeof c.getSourceDisplaySet){e.next=25;break}if("SEG"!==c.Modality||!r){e.next=21;break}l=function(e){r.error({error:e,message:e.message}),a.show({title:"DICOM Segmentation Loader",message:e.message,type:"error",autoClose:!0})},f=-1,p=regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getSourceDisplaySet(n,!0,l);case 2:return t=e.sent,t.referencedDisplaySet,r=t.activatedLabelmapPromise,e.next=7,r;case 7:f=e.sent,a=new CustomEvent("extensiondicomsegmentationsegselected",{detail:{activatedLabelmapIndex:f}}),document.dispatchEvent(a),o=Number("".concat(c.SeriesDate).concat(c.SeriesTime)),s=0,i.forEach((function(e){var t=Number("".concat(e.SeriesDate).concat(e.SeriesTime));t>s&&t<o&&(s=t,c=e)}));case 13:case"end":return e.stop()}}),e)}));case 15:if(-1!=f){e.next=19;break}return e.delegateYield(p(),"t0",17);case 17:e.next=15;break;case 19:e.next=23;break;case 21:return e.next=23,c.getSourceDisplaySet(n);case 23:e.next=27;break;case 25:return e.next=27,c.load(t,n);case 27:e.next=35;break;case 29:e.prev=29,e.t1=e.catch(9),c.isLoaded=!1,c.loadError=!0,r.error({error:e.t1,message:e.t1.message}),a.show({title:"Error loading derived display set:",message:e.t1.message,type:"error",error:e.t1,autoClose:!1});case 35:case"end":return e.stop()}}),e,null,[[9,29]])})));return function(t){return e.apply(this,arguments)}}()));case 12:f=new CustomEvent("deriveddisplaysetsloadedandcached"),document.dispatchEvent(f);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e,t,n,r){return R.apply(this,arguments)},L=n(82),U=n.n(L);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function V(e){return e[0].toLowerCase()+e.slice(1)}var B=function(e){return e?U.a.parse(e):{}},z={getQueryFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;if(t){var n=B(t),r={};return Object.entries(n).forEach((function(e){var t=F(e,2),n=t[0],a=t[1];r[V(n)]=a})),r}}},H={isValidPath:function(e){var t="/".concat(":");return e.indexOf(t)<0},parseParam:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t=window.atob(e);return t}catch(t){return e}}(e);if(t&&"string"==typeof t)return t.split(";")},replaceParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="".concat(":").concat(t);return n?e.replace(r,n):e}};function q(){var e,t,n=new Promise((function(n,r){t=n,e=r}));return Object.freeze({promise:n,resolve:t,reject:e})}var G=n(119);function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,s,"next",e)}function s(e){Y(o,r,a,i,s,"throw",e)}i(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=t,this.size=0,this.awaiting=null}var t,n,r;return t=e,(n=[{key:"bind",value:function(e){return Q(this,e)}},{key:"bindSafe",value:function(e,t){var n=Q(this,e);return(function(){var e=J(regeneratorRuntime.mark((function e(){var r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.apply(void 0,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),t(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}())}}])&&K(t.prototype,n),r&&K(t,r),e}();function Q(e,t){var n=Z.bind(null,e);return(function(){var r=J(regeneratorRuntime.mark((function r(){var a,o,i,s,c=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.size>=e.limit)){r.next=2;break}throw new Error("Queue limit reached");case 2:for(a=c.length,o=new Array(a),i=0;i<a;i++)o[i]=c[i];return s=$(e.awaiting,t,o),e.awaiting=s.then(n,n),e.size++,r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}())}function Z(e){e.size>0&&0==--e.size&&(e.awaiting=null)}function $(e,t,n){return ee.apply(this,arguments)}function ee(){return(ee=J(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",n.apply(void 0,W(r)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ne="/";function re(e){if(Array.isArray(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length>0&&function e(t,n){var r=n.shift();var a=function(e,t){var n=function(e,t){if("string"==typeof t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(a===t||ce(a)&&a[0]===t)return n}return-2}return-1}(e,t);-2===n&&(n=e.push(t)-1);return n}(t,r);if(a>=0){if(n.length>0){var o=t[a];return ce(o)||(o=function(e){return[e+"",[]]}(r),t[a]=o),e(o[1],n)}return!0}return!1}(e,n),e}return null}function ae(e,t){return Array.isArray(e)?("function"==typeof t&&se(e,t),e):null}function oe(e,t){if(Array.isArray(e)){var n=null,r="number"==typeof t?t:-1;if("string"==typeof t){var a=t.indexOf(ne);a>0?(r=parseInt(t.slice(0,a),10),a+1<t.length&&(n=t.slice(a+1,t.length))):r=parseInt(t,10)}if(r>=0&&r<e.length){var o=e[r];return ce(o)?null!==n?oe(o[1],n):o[0]:o}}}function ie(e){var t="";if(Array.isArray(e)){var n=[];se(e,(function(){for(var e=n.length,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];for(var i=0,s=a.length;i<s;++i)i<e&&a[i]===n[i]||(t+="  ".repeat(i)+a[i]+"\n");n=a}))}return t}function se(e,t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(ce(a)){if(a[1].length>0){se(a[1],t.bind(null,a[0]));continue}a=a[0]}t(a)}}function ce(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&Array.isArray(e[1])}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue=Symbol("Type"),fe=Symbol("Task"),pe=Symbol("List");function me(){return ke(pe,{head:null,named:Object.create(null),observers:[]})}function de(e){return je(pe,e)}function he(e,t){return ke(fe,{list:de(e)?e:null,next:ge(t)?t:null,failed:!1,awaiting:null,progress:0})}function ge(e){return je(fe,e)}function ve(e){if(de(e)){var t=he(e,e.head);return e.head=t,De(e,we(e)),t}return null}function ye(e,t){ge(e)&&xe(t)&&t<1&&e.progress!==t&&(e.progress=t,de(e.list)&&De(e.list,we(e.list)))}function be(e){ge(e)&&(e.progress=1,e.awaiting=null,Object.freeze(e),de(e.list)&&De(e.list,we(e.list)))}function we(e){var t=Object.seal({total:0,partial:0,progress:0,failures:0});if(de(e))for(var n=e.head;ge(n);)t.total++,xe(n.progress)&&(t.partial+=n.progress,1===n.progress&&n.failed&&t.failures++),n=n.next;return t.total>0&&(t.progress=t.partial/t.total),Object.freeze(t)}function Ee(e,t){var n=ve(e);return ge(n)?(n.awaiting=Promise.resolve(t).then((function(){be(n)}),(function(){n.failed=!0,be(n)})),n):null}function Se(e){var t=q(),n=Ee(e,t.promise);return Object.freeze({deferred:t,task:n})}function Oe(e,t,n){return!(!function(e,t){if(de(e)&&ge(t))for(var n=e.head;ge(n);){if(n===t)return!0;n=n.next}return!1}(e,t)||null===e.named||"object"!==le(e.named)||"string"!=typeof n)&&(e.named[n]=t,!0)}function Ie(e,t){if(de(e)&&null!==e.named&&"object"===le(e.named)&&"string"==typeof t){var n=e.named[t];if(ge(n))return n}return null}function Pe(e,t){return!(!de(e)||!Array.isArray(e.observers)||"function"!=typeof t)&&(e.observers.push(t),!0)}function Ce(e,t){if(de(e)&&Array.isArray(e.observers)&&e.observers.length>0){var n=e.observers.indexOf(t);if(n>=0)return e.observers.splice(n,1),!0}return!1}function ke(e,t){return Object.seal(Object.defineProperty(t,ue,{value:e}))}function je(e,t){return null!==t&&"object"===le(t)&&t[ue]===e}function xe(e){return"number"==typeof e&&e>=0&&e<=1}function De(e,t){de(e)&&Array.isArray(e.observers)&&e.observers.length>0&&e.observers.slice().forEach((function(n){if("function"==typeof n)try{n(t,e)}catch(e){}}))}var Te={guid:p.a,ObjectPath:c,absoluteUrl:u,addServers:f,sortBy:m.a,writeScript:function(e,t){var n=document.createElement("script");n.src=u(e),n.onload=function(){"function"==typeof t&&t(n)},document.body.appendChild(n)},b64toBlob:N,StackManager:l.a,studyMetadataManager:d.a,DicomLoaderService:T,urlUtil:r,loadAndCacheDerivedDisplaySets:M,makeDeferred:q,makeCancelable:function(e){var t=!1,n=Promise.resolve(e).then((function(e){if(t)throw Object.freeze({isCanceled:t});return e}),(function(e){if(t)throw Object.freeze({isCanceled:t,error:e});throw e}));return Object.assign(Object.create(n),{then:n.then.bind(n),cancel:function(){t=!0}})},hotkeys:G.a,Queue:X,isDicomUid:function(e){return"string"==typeof e&&/^\d+(?:\.\d+)*$/.test(e.trim())},resolveObjectPath:function e(t,n,r){if(null!==t&&"object"===te(t)&&"string"==typeof n){var a,o=n.indexOf(".");return o>=0?e(t[n.slice(0,o)],n.slice(o+1,n.length),r):void 0===(a=t[n])&&void 0!==r?r:a}},hierarchicalListUtils:a,progressTrackingUtils:o,xhrRetryRequestHook:S.a};t.a=Te},203:function(e,t,n){"use strict";var r=n(137),a=n(92),o=n(91),i=n(404),s=n(3),c=n.n(s),l=n(29),u=n.n(l),f=n(758),p=n.n(f),m=n(253),d=n(151);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){},w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"options",{order:"closest",displaySetCount:1,onImageCached:b,requestType:"prefetch",preventCache:!1,prefetchDisplaySetsTimeout:300,maxNumPrefetchRequests:100,includeActiveDisplaySet:!1}),y(this,"cacheFullHandler",(function(){log.warn("Cache full"),r.stopPrefetching()})),this.studies=t||[],n&&(this.options=g({},this.options,{},n),this.options.requestType="prefetch"),c.a.events.addEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandler)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.instance||(e.instance=new e(t,n)),n&&(this.options=g({},this.options,{},n),this.options.requestType="prefetch"),e.instance}}],(n=[{key:"destroy",value:function(){this.stopPrefetching(),c.a.events.removeEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandler)}},{key:"setStudies",value:function(e){this.stopPrefetching(),this.studies=e}},{key:"getElement",value:function(){return this.element}},{key:"prefetch",value:function(e,t){if(this.studies&&this.studies.length){this.element=e;try{this.enabledElement=c.a.getEnabledElement(e)}catch(e){throw new Error("Failed to find the enabled element")}this.stopPrefetching(),this.prefetchDisplaySets(t)}}},{key:"stopPrefetching",value:function(){c.a.imageLoadPoolManager.clearRequestStack("prefetch")}},{key:"prefetchDisplaySetsAsync",value:function(e,t){var n=this;try{this.enabledElement=c.a.getEnabledElement(e)}catch(e){throw new Error("Failed to find the enabled element")}t=t||this.options.prefetchDisplaySetsTimeout,clearTimeout(this.prefetchDisplaySetsHandler),this.prefetchDisplaySetsHandler=setTimeout((function(){n.prefetchDisplaySets(e)}),t)}},{key:"prefetchDisplaySets",value:function(e){var t=this.getDisplaySetsToPrefetch(e),n=this.getImageIdsFromDisplaySets(t);this.prefetchImageIds(n)}},{key:"prefetchImageIds",value:function(e){var t,n=this,r=this.filterCachedImageIds(e),a=c.a.imageLoadPoolManager;a.maxNumRequests=g({},a.maxNumRequests,{prefetch:this.options.maxNumPrefetchRequests}),t=this.options.preventCache?function(e){return c.a.loadImage(e)}:function(e){return c.a.loadAndCacheImage(e)},r.forEach((function(e){a.addRequest(t.bind(n,e),n.options.requestType,{imageId:e})}))}},{key:"getStudy",value:function(e){var t=c.a.metaData.get("StudyInstanceUID",e.imageId);return this.studies.find((function(e){return e.getData().StudyInstanceUID===t}))}},{key:"getSeries",value:function(e,t){var n=c.a.metaData.get("SeriesInstanceUID",t.imageId);return e.getSeriesByUID(n)}},{key:"getInstance",value:function(e,t){var n=c.a.metaData.get("instance",t.imageId);return e.getInstanceByUID(n.SOPInstanceUID)}},{key:"getDisplaySetByUID",value:function(e){var t;return this.studies.forEach((function(n){var r=n.displaySets.find((function(t){return t.displaySetInstanceUID===e}));r&&(t=r)})),t}},{key:"getDisplaySetBySOPInstanceUID",value:function(e,t){return e.find((function(e){return e.images.some((function(e){return e.SOPInstanceUID===t.SOPInstanceUID}))}))}},{key:"getActiveViewportImage",value:function(){if(this.enabledElement)return this.enabledElement.image}},{key:"getDisplaySetsToPrefetch",value:function(e){var t=this.getActiveViewportImage();if(!t)return[];var n=this.getStudy(t),r=this.getSeries(n,t),a=this.getInstance(r,t),o=n.displaySets,i=e?this.getDisplaySetByUID(e):this.getDisplaySetBySOPInstanceUID(o,a),s=this.options.order,c=this[{topdown:"getFirstDisplaySets",downward:"getNextDisplaySets",upward:"getPreviousDisplaySets",closest:"getClosestDisplaySets",all:"getAllDisplaySets"}[s]];return c?c.call(this,o,i,this.options.displaySetCount,this.options.includeActiveDisplaySet):(s&&log.warn("Invalid prefetch order configuration (".concat(s,")")),[])}},{key:"getAllDisplaySets",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a;i++){var s=e[i];o.push(s)}return o}},{key:"getFirstDisplaySets",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a&&n;i++){var s=e[i];(r||s!==t)&&(o.push(s),n--)}return o}},{key:"getPreviousDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=r?a+1:a;return e.slice(0,o).reverse().slice(0,n)}},{key:"getNextDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=r?a:a+1,i=Math.min(o+n,e.length);return e.slice(o,i)}},{key:"getClosestDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=e.length,i=[],s=a-1,c=a+1;for(r&&(i.push(e[a]),n--);(s>=0||c<o)&&n;)s>=0&&(i.push(e[s]),n--,s--),c<o&&n&&(i.push(e[c]),n--,c++);return i}},{key:"getImageIdsFromDisplaySets",value:function(e){var t=this,n=[];return e.forEach((function(e){n=n.concat(t.getImageIdsFromDisplaySet(e))})),n}},{key:"getImageIdsFromDisplaySet",value:function(e){var t=[];return!e.images||e.images.length<1?[]:(e.images.forEach((function(e){var n=e.numFrames;if(n>1)for(var r=0;r<n;r++){var a=Object(d.a)(e,r);t.push(a)}else{var o=Object(d.a)(e);t.push(o)}})),t)}},{key:"filterCachedImageIds",value:function(e){var t=this;return e.filter((function(e){return!t.isImageCached(e)}))}},{key:"isImageCached",value:function(e){var t=c.a.imageCache.imageCache[e];return t&&t.sizeInBytes}}])&&v(t.prototype,n),r&&v(t,r),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?I(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(this,e),this.id=e.getNewId(),this.stack=t,this.statsItemsLimit=n.statsItemsLimit||2,this.stats={items:[],total:0,elapsedTime:0,speed:0},this._setProgressData=n._setProgressData,this._clearProgressById=n._clearProgressById,this._addStatsData(0),this._updateProgress()}return D(e,[{key:"_addStatsData",value:function(e){var t=new Date,n=this.stats,r=n.items,a={value:e,date:t};for(r.push(a),n.total+=a.value;r.length>this.statsItemsLimit;){var o=r.shift();n.total-=o.value}if(r.length>1){var i=r[0];n.elapsedTime=(a.date.getTime()-i.date.getTime())/1e3,n.speed=(n.total-i.value)/n.elapsedTime}}},{key:"_getProgressId",value:function(){return"StackProgress:"+this.stack.displaySetInstanceUID}},{key:"_clearProgress",value:function(){var e=this._getProgressId();this._clearProgressById(e)}},{key:"startListening",value:function(){throw new Error("`startListening` must be implemented by child classes")}},{key:"stopListening",value:function(){throw new Error("`stopListening` must be implemented by child classes")}},{key:"destroy",value:function(){this.stopListening(),this._clearProgress()}}],[{key:"getNewId",value:function(){var e=(new Date).getTime().toString().slice(-8),t=parseInt(1e9*Math.random());return e.toString()+t.toString()}}]),e}(),N=function(e){function t(e,n){var r;return j(this,t),k(I(r=S(this,O(t).call(this,e,n))),"_imageLoadProgressEventHandler",(function(e){var t=e.detail,n=r._convertImageIdToDataSetUrl(t.imageId),a=t.loaded-r._lastLoaded;!r._dataSetUrl!==n&&(r._addStatsData(a),r._updateProgress(t),r._lastLoaded=t.loaded)})),r.imageLoadProgressEventHandler=r._imageLoadProgressEventHandler.bind(I(r)),r._dataSetUrl=r._getDataSetUrl(e),r._lastLoaded=0,r._checkCachedData(),r.startListening(),r}return P(t,e),D(t,[{key:"_checkCachedData",value:function(){var e=u.a.wadouri.dataSetCacheManager.get(this._dataSetUrl);if(e){var t=e.byteArray.length;this._updateProgress({percentComplete:100,loaded:t,total:t})}}},{key:"_getImageLoadProgressEventName",value:function(){return"cornerstoneimageloadprogress."+this.id}},{key:"startListening",value:function(){var e=this._getImageLoadProgressEventName();this.stopListening(),c.a.events.addEventListener(e,this.imageLoadProgressEventHandle)}},{key:"stopListening",value:function(){var e=this._getImageLoadProgressEventName();c.a.events.removeEventListener(e,this.imageLoadProgressEventHandle)}},{key:"_updateProgress",value:function(e){var t=this._getProgressId(),n={multiFrame:!1,percentComplete:(e=e||{}).percentComplete,bytesLoaded:e.loaded,bytesTotal:e.total,bytesPerSecond:this.stats.speed};this._setProgressData(t,n)}},{key:"_convertImageIdToDataSetUrl",value:function(e){return e=(e=(e=e.replace(/^(dicomweb:|wadouri:)/i,"")).replace(/frame=\d+&?/i,"")).replace(/&$/,"")}},{key:"_getDataSetUrl",value:function(e){var t=e.imageIds[0];return this._convertImageIdToDataSetUrl(t)}}]),t}(T),_={OnProgress:"StudyLoadingListenerEvents.OnProgress"};function A(e,t){var n=window.Symbol?Symbol("unique"):/unique/;var r=[e,Promise.resolve(n)];Promise.race(r).then((function(e){return t(e===n?"pending":"fulfilled")}),(function(e){return t("rejected")}))}var R=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(this,t),r.statsItemsLimit=20,(n=S(this,O(t).call(this,e,r))).imageLoadedEventHandler=n._imageLoadedEventHandler.bind(I(n)),n.imageCachePromiseRemovedEventHandler=n._imageCachePromiseRemovedEventHandler.bind(I(n)),n.imageDataMap=n._convertImageIdsArrayToMap(e.imageIds),n.framesStatus=n._createArray(e.imageIds.length,!1),n.loadedCount=0,n._debouncedSetProgressData=p()((function(){var e;(e=n)._setProgressData.apply(e,arguments);var t=w.getInstance();t.prefetch(t.getElement())}),300);return n._checkCachedData(!0),n.startListening(),n}return P(t,e),D(t,[{key:"_convertImageIdsArrayToMap",value:function(e){for(var t=new Map,n=0;n<e.length;n++)t.set(e[n],{index:n,loaded:!1});return t}},{key:"_createArray",value:function(e,t){for(var n=[],r=0;r<e;r++)n[r]=t;return n}},{key:"isImageCached",value:function(e){var t=c.a.imageCache.imageCache[e];return t&&t.sizeInBytes}},{key:"_checkCachedData",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.stack.imageIds,r=function(r){var a=n[r],o=c.a.imageCache.getImageLoadObject(a);e.isImageCached(a)&&e._updateFrameStatus(a,!0,t),o&&o.promise&&A(o.promise,(function(n){"fulfilled"===n&&e._updateFrameStatus(a,!0,t)}))},a=0;a<n.length;a++)r(a)}},{key:"_getImageLoadedEventName",value:function(){return"".concat(c.a.EVENTS.IMAGE_LOADED,".").concat(this.id)}},{key:"_getImageCachePromiseRemoveEventName",value:function(){return"".concat(c.a.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,".").concat(this.id)}},{key:"_imageLoadedEventHandler",value:function(e){this._updateFrameStatus(e.detail.image.imageId,!0)}},{key:"_imageCachePromiseRemovedEventHandler",value:function(e){this._updateFrameStatus(e.detail.imageId,!1)}},{key:"startListening",value:function(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName();this.stopListening(),c.a.events.addEventListener(e,this.imageLoadedEventHandler),c.a.events.addEventListener(t,this.imageCachePromiseRemovedEventHandler)}},{key:"stopListening",value:function(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName();c.a.events.removeEventListener(e,this.imageLoadedEventHandler),c.a.events.removeEventListener(t,this.imageCachePromiseRemovedEventHandler)}},{key:"_updateFrameStatus",value:function(e,t,n){var r=this.imageDataMap.get(e);r&&r.loaded!==t&&(t&&this._addStatsData(1),r.loaded=t,this.framesStatus[r.index]=t,this.loadedCount+=t?1:-1,this._updateProgress(n))}},{key:"_setProgressData",value:function(e,t){throw new Error("The _setProgressData function must be provided in StudyLoadingListener's options")}},{key:"_clearProgressById",value:function(e){throw new Error("The _clearProgressById function must be provided in StudyLoadingListener's options")}},{key:"_updateProgress",value:function(e){var t=this.stack.imageIds.length,n=this.loadedCount,r=t-n,a=Math.ceil(n/t*100),o=this._getProgressId(),i={multiFrame:!0,totalFramesCount:t,loadedFramesCount:n,loadingFramesCount:r,percentComplete:a,framesPerSecond:this.stats.speed,framesStatus:this.framesStatus};e?this._debouncedSetProgressData(o,i):this._setProgressData(o,i)}},{key:"_logProgress",value:function(){for(var e=this.stack.imageIds.length,t=this.stack.displaySetInstanceUID,n="[",r=0;r<e;r++){var a=this.framesStatus[r]?"|":".";n+="".concat(a)}n+="]",console.info("".concat(t,": ").concat(n))}}]),t}(T),M=function(){function e(t){j(this,e),this.listeners={},this.options=t}return D(e,[{key:"addStack",value:function(e,t){if(e){var n=e.displaySetInstanceUID;if(!this.listeners[n]){var r=this._createListener(e,t);r&&(this.listeners[n]=r)}}}},{key:"addStudy",value:function(e){var t=this;e.displaySets.forEach((function(n){var r=m.a.findOrCreateStack(e,n);if(!r)return console.warn("Skipping adding displaySet to StudyLoadingListener"),void console.warn(n);t.addStack(r,{isMultiFrame:n.isMultiFrame})}))}},{key:"addStudies",value:function(e){var t=this;e&&e.length&&e.forEach((function(e){return t.addStudy(e)}))}},{key:"clear",value:function(){for(var e=Object.keys(this.listeners),t=e.length,n=0;n<t;n++){var r=e[n];this.listeners[r].destroy()}this.listeners={}}},{key:"_createListener",value:function(e,t){return"wadors"!==this._getSchema(e)&&t.isMultiFrame?new N(e,this.options):new R(e,this.options)}},{key:"_getSchema",value:function(e){var t=e.imageIds[0];if(t){var n=t.indexOf(":");return t.substring(0,n)}}}],[{key:"getInstance",value:function(t){var n={_setProgressData:function(e,t){var n=new CustomEvent(_.OnProgress,{detail:{progressId:e,progressData:t}});document.dispatchEvent(n)},_clearProgressById:function(e){var t=new CustomEvent(_.OnProgress,{detail:{progressId:e,percentComplete:0}});document.dispatchEvent(t)}};return e._instance||(e._instance=new e(t||n)),e._instance}}]),e}();k(M,"events",_);var L=n(405),U=n(138);function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=Symbol("subscriptions"),B=Symbol("lastSubscriptionId"),z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[V]={},this[B]=0}var t,n,r;return t=e,(n=[{key:"subscribe",value:function(e,t){if(void 0===e)throw new Error("Event name is required");if("function"!=typeof t)throw new Error("Callback must be a function");this[V].hasOwnProperty(e)||(this[V][e]={});var n="sub".concat(this[B]++);this[V][e][n]=t}},{key:"unsubscribe",value:function(e,t){var n=this[V][e]||{};for(var r in n)t?n[r]===t&&delete n[r]:delete n[r]}},{key:"publish",value:function(e){if(void 0===e)throw new Error("Event name is required");for(var t=this[V][e]||{},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o in t)t[o].apply(t,r)}}])&&F(t.prototype,n),r&&F(t,r),e}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=Object.freeze({OnLog:"onLog"}),J=new(function(e){function t(){var e,n,r,a,o,i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return r=this,n=!(a=(e=q(t)).call.apply(e,[this].concat(l)))||"object"!==H(a)&&"function"!=typeof a?G(r):a,o=G(n),s=Y,(i="EVENTS")in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),t}(z)),K=n(118),X=n(53),Q=n(134),Z=n(169),$=n(171);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ne(this,re(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,o=[{key:"_updateStudyCollections",value:function(e){var t=e.getData();t.selected=!0,t.displaySets=e.getDisplaySets(),Q.a.add(e)}}],(a=[{key:"getByInstanceUID",value:function(e,t){return Object($.b)(e,t)}},{key:"loadStudy",value:function(e){var n=this;if(!(e instanceof r.a))throw new X.a("OHIFStudyMetadataSource::loadStudy study is not an instance of StudyMetadata");return new Promise((function(a,o){var i=e.getStudyInstanceUID();if(e instanceof r.a)return OHIF.viewer.Studies.findBy({StudyInstanceUID:i})||t._updateStudyCollections(e),void a(e);n.getByInstanceUID(i).then((function(e){var n=new r.a(e,e.StudyInstanceUID);n.createDisplaySets(),t._updateStudyCollections(n),a(n)})).catch(o)}))}}])&&te(n.prototype,a),o&&te(n,o),t}(Z.a),ie=n(254),se={OHIFStudyMetadataSource:oe,MetadataProvider:K.a,CommandsManager:i.a,HotkeysManager:L.a,LogManager:J,ImageSet:U.a,PubSub:z,StudyPrefetcher:w,StudyLoadingListener:M,StackLoadingListener:R,DICOMFileLoadingListener:N,StudyMetadata:r.a,SeriesMetadata:a.a,InstanceMetadata:o.a,TypeSafeCollection:ie.a,OHIFError:X.a,StudyMetadataSource:Z.a};t.a=se},204:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),a=[r.a.ComputedRadiographyImageStorage,r.a.DigitalXRayImageStorageForPresentation,r.a.DigitalXRayImageStorageForProcessing,r.a.DigitalMammographyXRayImageStorageForPresentation,r.a.DigitalMammographyXRayImageStorageForProcessing,r.a.DigitalIntraOralXRayImageStorageForPresentation,r.a.DigitalIntraOralXRayImageStorageForProcessing,r.a.CTImageStorage,r.a.EnhancedCTImageStorage,r.a.LegacyConvertedEnhancedCTImageStorage,r.a.UltrasoundMultiframeImageStorage,r.a.MRImageStorage,r.a.EnhancedMRImageStorage,r.a.EnhancedMRColorImageStorage,r.a.LegacyConvertedEnhancedMRImageStorage,r.a.UltrasoundImageStorage,r.a.SecondaryCaptureImageStorage,r.a.MultiframeSingleBitSecondaryCaptureImageStorage,r.a.MultiframeGrayscaleByteSecondaryCaptureImageStorage,r.a.MultiframeGrayscaleWordSecondaryCaptureImageStorage,r.a.MultiframeTrueColorSecondaryCaptureImageStorage,r.a.XRayAngiographicImageStorage,r.a.EnhancedXAImageStorage,r.a.XRayRadiofluoroscopicImageStorage,r.a.EnhancedXRFImageStorage,r.a.XRay3DAngiographicImageStorage,r.a.XRay3DCraniofacialImageStorage,r.a.BreastTomosynthesisImageStorage,r.a.BreastProjectionXRayImageStorageForPresentation,r.a.BreastProjectionXRayImageStorageForProcessing,r.a.IntravascularOpticalCoherenceTomographyImageStorageForPresentation,r.a.IntravascularOpticalCoherenceTomographyImageStorageForProcessing,r.a.NuclearMedicineImageStorage,r.a.VLEndoscopicImageStorage,r.a.VideoEndoscopicImageStorage,r.a.VLMicroscopicImageStorage,r.a.VideoMicroscopicImageStorage,r.a.VLSlideCoordinatesMicroscopicImageStorage,r.a.VLPhotographicImageStorage,r.a.VideoPhotographicImageStorage,r.a.OphthalmicPhotography8BitImageStorage,r.a.OphthalmicPhotography16BitImageStorage,r.a.OphthalmicTomographyImageStorage,r.a.VLWholeSlideMicroscopyImageStorage,r.a.PositronEmissionTomographyImageStorage,r.a.EnhancedPETImageStorage,r.a.LegacyConvertedEnhancedPETImageStorage,r.a.RTImageStorage],o=function(e){return!!e&&-1!==a.indexOf(e)}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return C}));var r=n(11),a=n(22).a.utils.urlUtil,o=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(0),n.e(1),n.e(15)]).then(n.bind(null,1380))}))})),i=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(2),n.e(9)]).then(n.bind(null,1386))}))})),s=Object(r.D)((function(){return Object(r.E)((function(){return n.e(14).then(n.bind(null,1381))}))})),c=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(2),n.e(5),n.e(13)]).then(n.bind(null,1384))}))})),l=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,1385))}))})),u=Object(r.D)((function(){return Object(r.E)((function(){return n.e(17).then(n.bind(null,1387))}))})),f=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,1388))}))})),p=Object(r.D)((function(){return Object(r.E)((function(){return Promise.all([n.e(6),n.e(0),n.e(10)]).then(n.bind(null,1389))}))})),m=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,386))}))})),d=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,387))}))})),h=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,388))}))})),g=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,389))}))})),v=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,403))}))})),y=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,390))}))})),b=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,391))}))})),w=Object(r.D)((function(){return Object(r.E)((function(){return n.e(11).then(n.bind(null,1382))}))})),E=Object(r.D)((function(){return Object(r.E)((function(){return n.e(12).then(n.bind(null,1383))}))})),S=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,392))}))})),O=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,393))}))})),I=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,394))}))})),P=Object(r.D)((function(){return Object(r.E)((function(){return Promise.resolve().then(n.bind(null,395))}))})),C=function(){return window.location.reload()},k={default:{superuser:{path:"/superuser",component:m},verifySecret:{path:"/verify_secret",component:P},groupDetails:{path:"/group_details/:name/:userName",component:g},removePermissions:{path:"/remove_permissions/:name/:user",component:S},addGroup:{path:"/add_group",component:O},addElements:{path:"/add_elements/:name",component:I},addModels:{path:"/add_models/:name",component:w},addRemoveStudies:{path:"/add_remove_studies/:name",component:E},addPermissions:{path:"/add_permissions/:name/:user",component:b},viewModels:{path:"/view_models/:name",component:y},viewStudies:{path:"/view_studies/:name",component:v},viewGroups:{path:"/view_groups",component:h},twoFa:{path:"/twoFA",component:d},viewer:{path:"/viewer/:studyInstanceUIDs",component:l},standaloneViewer:{path:"/viewer",component:f},upload:{path:"/model",component:i},modelList:{path:"/modelList",component:s},editor:{path:"/editor",component:c},list:{path:"/studylist",component:u},local:{path:"/local",component:p},IHEInvokeImageDisplay:{path:"/IHEInvokeImageDisplay",component:o}}},j=function(e){var t=[];for(var n in k){var r=k[n];for(var a in r){var o=r[a];("function"!=typeof o.condition||o.condition(e))&&t.push({path:o.path,Component:o.component})}}return t},x=function(e,t,n){var r=e,o=Object.assign({},t,n);for(var i in o)r=a.paramString.replaceParam(r,i,o[i]);return r},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=k.default.viewer.path;return e.enableGoogleCloudAdapter&&(r=k.gcloud.viewer.path),x(r,t,n)}},21:function(e,t,n){"use strict";var r={getAttribute:function(e,t){return e&&e.Value&&e.Value.length?function(e){function t(e){var t=e.length;return 0==t?"0000":1==t?"000"+e:2==t?"00"+e:3==t?"0"+e:e}for(var n="",r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)n+=t(e[r].charCodeAt(a).toString(16));return parseInt(n,16)}(e.Value):t},getAuthorizationHeader:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).requestOptions;var e={};return e.Authorization="Basic "+btoa("orthanc:orthanc"),e},getModalities:function(e,t){if(!e&&!t)return{};var n=e||{vr:"CS",Value:[]};if(t){if(!n.vr||n.vr!==t.vr)return t;for(var r=0;r<t.Value.length;r++){var a=t.Value[r];-1===n.Value.indexOf(a)&&n.Value.push(a)}}return n},getName:function(e,t){return e&&e.Value&&e.Value.length?e.Value[0].Alphabetic?e.Value[0].Alphabetic:e.Value[0]:t},getNumber:function(e,t){return e&&e.Value&&e.Value.length?parseFloat(e.Value[0]):t},getString:function(e,t){return e&&e.Value&&e.Value.length?e.Value.join("\\"):t}};t.a=r},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=Object.freeze(["SEG","DOC","RTSTRUCT","SR","KO","PR"]);function a(e){return r.includes(e)}},22:function(e,t,n){"use strict";var r=n(766),a=n(1416),o=n(1417),i=n(404),s=n(405),c=n(203),l=n(21),u=n(407),f=n(409),p=n(53),m=n(135),d=n(169),h=n(204),g=n(153),v=n.n(g);v.a.validators.equals=function(e,t,n,r){if(t&&e!==t.value)return n+"must equal "+t.value},v.a.validators.doesNotEqual=function(e,t,n){if(t&&e===t.value)return n+"cannot equal "+t.value},v.a.validators.contains=function(e,t,n){if(t&&e.indexOf&&-1===e.indexOf(t.value))return n+"must contain "+t.value},v.a.validators.doesNotContain=function(e,t,n){if(t&&e.indexOf&&-1!==e.indexOf(t.value))return n+"cannot contain "+t.value},v.a.validators.startsWith=function(e,t,n){if(t&&e.startsWith&&!e.startsWith(t.value))return n+"must start with "+t.value},v.a.validators.endsWith=function(e,t,n){if(t&&e.endsWith&&!e.endsWith(t.value))return n+"must end with "+t.value};var y={};function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=m.a.InstanceMetadata,E=function(e,t){if(!(e instanceof w))throw new p.a("HPMatcher::match metadataInstance must be an instance of InstanceMetadata");var n={format:"grouped"},r={passed:[],failed:[]},a=!1,o=0;return t.forEach((function(t){var i=t.attribute;if(y.hasOwnProperty(i)){var s=y[i];e.setCustomAttribute(i,s.callback(e))}var c,l=b({},i,t.constraint),u=b({},i,e.customAttributeExists(i)?e.getCustomAttribute(i):e.getTagValue(i));try{c=v()(u,l,[n])}catch(e){c=["Something went wrong during validation.",e]}c?(t.required&&(a=!0),r.failed.push({rule:t,errorMessages:c})):(o+=parseInt(t.weight,10),r.passed.push({rule:t}))})),a&&(o=0),{score:o,details:r,requiredFailed:a}},S=n(12),O=n(252),I={};var P=[{id:"equals",name:"= (Equals)",validator:"equals",validatorOption:"value",description:"The attribute must equal this value."},{id:"doesNotEqual",name:"!= (Does not equal)",validator:"doesNotEqual",validatorOption:"value",description:"The attribute must not equal this value."},{id:"contains",name:"Contains",validator:"contains",validatorOption:"value",description:"The attribute must contain this value."},{id:"doesNotContain",name:"Does not contain",validator:"doesNotContain",validatorOption:"value",description:"The attribute must not contain this value."},{id:"startsWith",name:"Starts with",validator:"startsWith",validatorOption:"value",description:"The attribute must start with this value."},{id:"endsWith",name:"Ends with",validator:"endsWith",validatorOption:"value",description:"The attribute must end with this value."},{id:"onlyInteger",name:"Only Integers",validator:"numericality",validatorOption:"onlyInteger",description:"Real numbers won't be allowed."},{id:"greaterThan",name:"> (Greater than)",validator:"numericality",validatorOption:"greaterThan",description:"The attribute has to be greater than this value."},{id:"greaterThanOrEqualTo",name:">= (Greater than or equal to)",validator:"numericality",validatorOption:"greaterThanOrEqualTo",description:"The attribute has to be at least this value."},{id:"lessThanOrEqualTo",name:"<= (Less than or equal to)",validator:"numericality",validatorOption:"lessThanOrEqualTo",description:"The attribute can be this value at the most."},{id:"lessThan",name:"< (Less than)",validator:"numericality",validatorOption:"lessThan",description:"The attribute has to be less than this value."},{id:"odd",name:"Odd",validator:"numericality",validatorOption:"odd",description:"The attribute has to be odd."},{id:"even",name:"Even",validator:"numericality",validatorOption:"even",description:"The attribute has to be even."}];Object.freeze(P);var C=n(48);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=/^equals$/,x=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(C.a)(),this.weight=a||1,t&&(this.attribute=t),n&&(this.constraint=n),this.required=void 0!==r&&r,this._constraintInfo=void 0,this._validatorAndValue=void 0}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){this.id=e.id||Object(C.a)(),this.required=e.required,this.weight=e.weight,this.attribute=e.attribute,this.constraint=e.constraint}},{key:"getConstraintInfo",value:function(){var e=this._constraintInfo;if(void 0!==e)return e;var t=Object.keys(this.constraint)[0];return void 0!==t&&(e=P.find((function(e){return t===e.id}))),this._constraintInfo=e,e}},{key:"isRuleForPrior",value:function(){return"abstractPriorValue"===this.attribute}},{key:"getNumberOfPriorsReferenced",value:function(){if(!this.isRuleForPrior())return-1;var e=this.getConstraintValidatorAndValue(),t=e.value,n=e.validator,r=parseInt(t,10)||0;return j.test(n)?r<0?1:r:0}},{key:"getConstraintValidatorAndValue",value:function(){var e=this._validatorAndValue;if(void 0!==e)return e;var t=this.getConstraintInfo();if(void 0!==t){var n=t.validator,r=this.constraint[n];r&&(e={value:r[t.validatorOption],validator:t.id},this._validatorAndValue=e)}return e}}])&&k(t.prototype,n),r&&k(t,r),e}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(){return T(this,t),N(this,_(t).apply(this,arguments))}return A(t,e),t}(x),L=function(e){function t(){return T(this,t),N(this,_(t).apply(this,arguments))}return A(t,e),t}(x),U=function(e){function t(){return T(this,t),N(this,_(t).apply(this,arguments))}return A(t,e),t}(x),F=function(e){function t(){return T(this,t),N(this,_(t).apply(this,arguments))}return A(t,e),t}(x),V=function(e,t){return!(!e||!e.length)&&(e.forEach((function(e,n){if(e===t)return indexToRemove=n,!1})),void 0!==indexToRemove&&(e.splice(indexToRemove,1),!0))};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.properties=n}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){this.type=e.type,this.properties=e.properties}},{key:"getLayoutTemplateName",value:function(){switch(this.type){case"grid":return"gridLayout"}}},{key:"getNumViewports",value:function(){switch(this.type){case"grid":return this.properties.Rows*this.properties.Columns}}}])&&B(t.prototype,n),r&&B(t,r),e}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewportSettings={},this.imageMatchingRules=[],this.seriesMatchingRules=[],this.studyMatchingRules=[]}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){var t=this;e.imageMatchingRules&&e.imageMatchingRules.forEach((function(e){var n=new F;n.fromObject(e),t.imageMatchingRules.push(n)})),e.seriesMatchingRules&&e.seriesMatchingRules.forEach((function(e){var n=new U;n.fromObject(e),t.seriesMatchingRules.push(n)})),e.studyMatchingRules&&e.studyMatchingRules.forEach((function(e){var n=new L;n.fromObject(e),t.studyMatchingRules.push(n)})),e.viewportSettings&&(this.viewportSettings=e.viewportSettings)}},{key:"removeRule",value:function(e){var t;e instanceof L?t=this.studyMatchingRules:e instanceof U?t=this.seriesMatchingRules:e instanceof F&&(t=this.imageMatchingRules),V(t,e)}}])&&H(t.prototype,n),r&&H(t,r),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(C.a)(),this.name=n,this.viewportStructure=t,this.viewports=[],this.createdDate=new Date}var t,n,r;return t=e,(n=[{key:"createClone",value:function(t){var n=Object.assign({},this),r=new e;return n.id=r.id,r.fromObject(n),t&&(r.name=t),r}},{key:"fromObject",value:function(e){var t=this;this.id=e.id||Object(C.a)(),this.name=e.name,this.viewportStructure=new z,this.viewportStructure.fromObject(e.viewportStructure),e.viewports&&e.viewports.forEach((function(e){var n=new q;n.fromObject(e),t.viewports.push(n)}))}}])&&G(t.prototype,n),r&&G(t,r),e}(),Y=n(71);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(C.a)(),this.locked=!1,this.hasUpdatedPriorsInformation=!1,this.name=t,this.createdDate=new Date,this.modifiedDate=new Date,Y.a.userLoggedIn&&Y.a.userLoggedIn()&&(this.createdBy=Y.a.getUserId(),this.modifiedBy=Y.a.getUserId()),this.availableTo=new Set,this.editableBy=new Set,this.protocolMatchingRules=[],this.stages=[],this.numberOfPriorsReferenced=-1}var t,n,r;return t=e,(n=[{key:"getNumberOfPriorsReferenced",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!0!==e?this.numberOfPriorsReferenced:-1;return t>-1?t:(t=0,this.stages.forEach((function(e){e.viewports&&e.viewports.forEach((function(e){e.studyMatchingRules&&e.studyMatchingRules.forEach((function(e){var n=e.getNumberOfPriorsReferenced();n>t&&(t=n)}))}))})),this.numberOfPriorsReferenced=t,t)}},{key:"updateNumberOfPriorsReferenced",value:function(){this.getNumberOfPriorsReferenced(!0)}},{key:"protocolWasModified",value:function(){Y.a.userLoggedIn&&Y.a.userLoggedIn()&&(this.modifiedBy=Y.a.getUserId()),this.hasUpdatedPriorsInformation=!1,this.updateNumberOfPriorsReferenced(),this.modifiedDate=new Date}},{key:"fromObject",value:function(e){var t=this;this.id=e.id||Object(C.a)(),this.name=e.name,this.locked=!!e.locked,e.protocolMatchingRules&&e.protocolMatchingRules.forEach((function(e){var n=new M;n.fromObject(e),t.protocolMatchingRules.push(n)})),e.stages&&e.stages.forEach((function(e){var n=new W;n.fromObject(e),t.stages.push(n)}))}},{key:"createClone",value:function(t){var n=Object.assign({},this),r=new e;return n.id=r.id,r.fromObject(n),t&&(r.name=t),r.locked=!1,r}},{key:"addStage",value:function(e){this.stages.push(e),this.protocolWasModified()}},{key:"addProtocolMatchingRule",value:function(e){this.protocolMatchingRules.push(e),this.protocolWasModified()}},{key:"removeProtocolMatchingRule",value:function(e){V(this.protocolMatchingRules,e)&&this.protocolWasModified()}}])&&J(t.prototype,n),r&&J(t,r),e}();function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=m.a.StudyMetadata,ee=m.a.InstanceMetadata,te=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,"matchedProtocols",new Map),Z(this,"matchedProtocolScores",{}),!(a instanceof d.a))throw new p.a("ProtocolEngine::constructor studyMetadataSource is not an instance of StudyMetadataSource");if(!(n instanceof Array||n.every((function(e){return e instanceof $}))))throw new p.a("ProtocolEngine::constructor studies is not an array or it's items are not instances of StudyMetadata");this.protocolStore=t,this.studies=n,this.priorStudies=r instanceof Map?r:new Map,this.studyMetadataSource=a,this.options=o,this.reset(),this.newStageIds=[]}var t,n,r;return t=e,(n=[{key:"reset",value:function(){var e=this.getBestProtocolMatch();this.setHangingProtocol(e)}},{key:"getCurrentStageModel",value:function(){return this.protocol.stages[this.stage]}},{key:"findMatchByStudy",value:function(e){S.a.trace("ProtocolEngine::findMatchByStudy");var t=[],n=e.getFirstInstance(),r=this.getNumberOfAvailablePriors(e.getObjectID());return this.protocolStore.getProtocol().forEach((function(e){var a=e.protocolMatchingRules.slice();if(a&&!(e.getNumberOfPriorsReferenced()>r)){var o=E(n,a).score;o>0&&t.push({score:o,protocol:e})}})),t.length?(t.sort((function(e,t){return t.score-e.score})),S.a.trace("ProtocolEngine::findMatchByStudy matched",t),t):[{score:1,protocol:this.protocolStore.getProtocol("defaultProtocol")}]}},{key:"_clearMatchedProtocols",value:function(){this.matchedProtocols.clear(),this.matchedProtocolScores={}}},{key:"updateProtocolMatches",value:function(){var e=this;S.a.trace("ProtocolEngine::updateProtocolMatches"),this._clearMatchedProtocols(),this.studies.forEach((function(t){e.findMatchByStudy(t).forEach((function(t){var n=t.protocol;n&&(e.matchedProtocols.has(n.id)||(S.a.trace("ProtocolEngine::updateProtocolMatches inserting protocol match",t),e.matchedProtocols.set(n.id,n),e.matchedProtocolScores[n.id]=t.score))}))}))}},{key:"_largestKeyByValue",value:function(e){return Object.keys(e).reduce((function(t,n){return e[t]>e[n]?t:n}))}},{key:"_getHighestScoringProtocol",value:function(){if(!Object.keys(this.matchedProtocolScores).length)return this.protocolStore.getProtocol("defaultProtocol");var e=this._largestKeyByValue(this.matchedProtocolScores);return this.matchedProtocols.get(e)}},{key:"getBestProtocolMatch",value:function(){this.updateProtocolMatches();var e=this._getHighestScoringProtocol();return S.a.trace("ProtocolEngine::getBestProtocolMatch bestMatch",e),e}},{key:"getNumberOfAvailablePriors",value:function(e){return this.getAvailableStudyPriors(e).length}},{key:"getAvailableStudyPriors",value:function(e){var t=this.priorStudies.get(e);return t instanceof Array?t:[]}},{key:"matchImages",value:function(e,t){var n=this;S.a.trace("ProtocolEngine::matchImages");var r,a=e.studyMatchingRules,o=e.seriesMatchingRules,i=e.imageMatchingRules,s=[],c=this.studies[0],l=c.getFirstInstance(),u=0,f=0;c.setCustomAttribute("abstractPriorValue",0),l instanceof ee&&l.setCustomAttribute("abstractPriorValue",0),a.forEach((function(e){if("abstractPriorValue"===e.attribute){var a,o=Object.keys(e.constraint)[0],i=Object.keys(e.constraint[o])[0],s=e.constraint[o][i];if(s=parseInt(s,10),r||(r=n.getAvailableStudyPriors(c.getObjectID())),-1===s)a=r[r.length-1];else{var l=Math.max(s-1,0);a=r[l]}if(!a instanceof $)return;var u=a.getObjectID();if(n.studies.find((function(e){return e.getObjectID()===u})))return;n.studyMetadataSource.loadStudy(a).then((function(e){e.setCustomAttribute("abstractPriorValue",s);var r=e.getFirstInstance();r instanceof ee&&r.setCustomAttribute("abstractPriorValue",s),n.studies.push(e),n.updateViewports(t)}),(function(e){throw S.a.warn(e),new p.a("ProtocolEngine::matchImages could not get study metadata for the Study with the following ObjectID: ".concat(u))}))}})),this.studies.forEach((function(e){var t=E(e.getFirstInstance(),a);!0===t.requiredFailed||t.score<u||(u=t.score,e.forEachSeries((function(n){var r=E(n.getFirstInstance(),o);!0===r.requiredFailed||r.score<f||(f=r.score,n.forEachInstance((function(a,o){if(Object(h.a)(a.getTagValue("SOPClassUID"))||a.getTagValue("Rows")){var c=E(a,i);if(!0!==c.requiredFailed){var l={passed:[],failed:[]};l.passed=l.passed.concat(c.details.passed),l.passed=l.passed.concat(r.details.passed),l.passed=l.passed.concat(t.details.passed),l.failed=l.failed.concat(c.details.failed),l.failed=l.failed.concat(r.details.failed),l.failed=l.failed.concat(t.details.failed);var u=c.score+r.score+t.score,f=a.getSOPInstanceUID(),p={StudyInstanceUID:e.getStudyInstanceUID(),SeriesInstanceUID:n.getSeriesInstanceUID(),SOPInstanceUID:f,currentImageIdIndex:o,matchingScore:u,matchDetails:l,sortingInfo:{score:u,study:a.getTagValue("StudyDate")+a.getTagValue("StudyTime"),series:parseInt(a.getTagValue("SeriesNumber")),instance:parseInt(a.getTagValue("InstanceNumber"))}},m=e.findDisplaySet((function(e){return e.images.find((function(e){return e.getSOPInstanceUID()===f}))}));m&&(p.displaySetInstanceUID=m.getUID(),p.imageId=a.getImageId()),s.push(p)}}})))})))}));var m=Object(O.a)({name:"score",reverse:!0},{name:"study",reverse:!0},{name:"instance"},{name:"series"});s.sort((function(e,t){return m(e.sortingInfo,t.sortingInfo)}));var d=s[0];return S.a.trace("ProtocolEngine::matchImages bestMatch",d),{bestMatch:d,matchingScores:s}}},{key:"setLayout",value:function(e,t){if(e<1&&t<1)S.a.error("Invalid layout ".concat(e," x ").concat(t));else if("function"==typeof this.options.setLayout){for(var n=[],r=e*t,a=0;a<r;a++)n.push({});this.options.setLayout({numRows:e,numColumns:t,viewports:n})}else S.a.error("Hanging Protocol Engine setLayout callback is not defined")}},{key:"updateViewports",value:function(e){var t=this;if(S.a.trace("ProtocolEngine::updateViewports viewportIndex: ".concat(e)),this.getNumProtocolStages()){var n=this.getCurrentStageModel();if(n&&n.viewportStructure&&n.viewports&&n.viewports.length&&n.viewportStructure.getLayoutTemplateName()){var r=n.viewportStructure.properties;if(r){var a=[];this.matchDetails=[],n.viewports.forEach((function(e,n){var o=t.matchImages(e,n);t.matchDetails[n]=o;var i={},s=Object.keys(e.viewportSettings);s.forEach((function(t){var n=e.viewportSettings[t];"YES"===n?n=!0:"NO"===n&&(n=!1),i[t]=n}));var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewportIndex:n,viewport:i},r),l=[];s.forEach((function(t){I[t]&&l.push({id:t,value:e.viewportSettings[t]})})),c.renderedCallback=function(e){l.forEach((function(t){S.a.trace("ProtocolEngine::currentViewportData.renderedCallback Applying custom setting: ".concat(t.id)),S.a.trace("ProtocolEngine::currentViewportData.renderedCallback with value: ".concat(t.value)),I[t.id].callback(e,t.value)}))};for(var u=o.bestMatch,f=1,p=o.matchingScores.length;f<p&&a.find((function(e){return e.imageId===u.imageId}));)u=o.matchingScores[f],f++;u&&u.imageId&&(c.StudyInstanceUID=u.StudyInstanceUID,c.SeriesInstanceUID=u.SeriesInstanceUID,c.SOPInstanceUID=u.SOPInstanceUID,c.currentImageIdIndex=u.currentImageIdIndex,c.displaySetInstanceUID=u.displaySetInstanceUID,c.imageId=u.imageId),a.push(c)})),this.setLayout(r.Rows,r.Columns),"function"==typeof this.options.setViewportSpecificData?void 0!==e&&a[e]?this.options.setViewportSpecificData(e,a[e]):a.forEach((function(e){t.options.setViewportSpecificData(e.viewportIndex,e)})):S.a.error("Hanging Protocol Engine setViewportSpecificData callback is not defined")}}}}},{key:"setHangingProtocol",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S.a.trace("ProtocolEngine::setHangingProtocol newProtocol",e),S.a.trace("ProtocolEngine::setHangingProtocol updateViewports = ".concat(t)),this.newStageIds=[],K.prototype.isPrototypeOf(e)?this.protocol=e:(this.protocol=new K,this.protocol.fromObject(e)),this.stage=0,t&&this.updateViewports()}},{key:"isNextStageAvailable",value:function(){var e=this.getNumProtocolStages();return this.stage+1<e}},{key:"isPreviousStageAvailable",value:function(){return this.stage-1>=0}},{key:"setCurrentProtocolStage",value:function(e){return!(-1===e&&!this.isPreviousStageAvailable()||1===e&&!this.isNextStageAvailable()||(this.stage+=e,S.a.trace("ProtocolEngine::setCurrentProtocolStage stage = ".concat(this.stage)),this.updateViewports(),0))}},{key:"getNumProtocolStages",value:function(){if(this.protocol&&this.protocol.stages&&this.protocol.stages.length)return this.protocol.stages.length}},{key:"nextProtocolStage",value:function(){S.a.trace("ProtocolEngine::nextProtocolStage"),this.setCurrentProtocolStage(1)||S.a.trace("ProtocolEngine::nextProtocolStage failed")}},{key:"previousProtocolStage",value:function(){S.a.trace("ProtocolEngine::previousProtocolStage"),this.setCurrentProtocolStage(-1)||S.a.trace("ProtocolEngine::previousProtocolStage failed")}}])&&Q(t.prototype,n),r&&Q(t,r),e}();function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t}var t,n,r;return t=e,r=[{key:"getProtocolInstance",value:function(e){var t=e;if(t instanceof Array)t.forEach((function(e,n){if(!(e instanceof K)){var r=new K;r.fromObject(e),t[n]=r}}));else if(void 0!==t&&!(t instanceof K)){var n=new K;n.fromObject(t),t=n}return t}}],(n=[{key:"onReady",value:function(e){this.strategy.onReady(e)}},{key:"getProtocol",value:function(t){var n=this.strategy.getProtocol(t);return e.getProtocolInstance(n)}},{key:"addProtocol",value:function(e){this.strategy.addProtocol(e)}},{key:"updateProtocol",value:function(e,t){this.strategy.updateProtocol(e,t)}},{key:"removeProtocol",value:function(e){this.strategy.removeProtocol(e)}}])&&ne(t.prototype,n),r&&ne(t,r),e}();var ae=function(){var e=new K("Default");e.id="defaultProtocol",e.locked=!0;var t=new z("grid",{Rows:1,Columns:1}),n=new q,r=new W(t,"oneByOne");return r.viewports.push(n),e.stages.push(r),e}();function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ie={ProtocolEngine:te,ProtocolStore:re,ProtocolStrategy:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hangingProtocols=new Map,this.defaultsAdded=!1}var t,n,r;return t=e,(n=[{key:"onReady",value:function(e){this.defaultsAdded||(S.a.info("Inserting the default hanging protocol..."),this.addProtocol(ae),this.defaultsAdded=!0),e()}},{key:"getProtocol",value:function(e){return e?this.hangingProtocols.get(e):Array.from(this.hangingProtocols.values())}},{key:"addProtocol",value:function(e){this.hangingProtocols.set(e.id,e)}},{key:"updateProtocol",value:function(e,t){this.hangingProtocols.has(e)&&this.hangingProtocols.set(e,t)}},{key:"removeProtocol",value:function(e){this.hangingProtocols.has(e)&&this.hangingProtocols.delete(e)}}])&&oe(t.prototype,n),r&&oe(t,r),e}(),addCustomAttribute:function(e,t,n){y[e]={name:t,callback:n}},addCustomViewportSetting:function(e,t,n,r){I[e]={id:e,text:t,options:n,callback:r}}},se={},ce=n(257);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue={getNestedObject:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))for(var r=e[n],a=n.split("."),o=t;a.length;){var i=a.shift();a.length?(o[i]||(o[i]={}),o=o[i]):o[i]=r}return t},getShallowObject:function(e){var t={};return function e(t,n,r){for(var a in n)if(n.hasOwnProperty(a)){var o=t?"".concat(t,".").concat(a):a,i=n[a];"object"===le(i)?(i instanceof Array&&(o+="[]"),e(o,i,r)):r[o]=i}}("",e,t),t}},fe=n(408);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e){return"string"==typeof e}var de={search:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=new RegExp(n.trim(),"i");return Object.keys(t).forEach((function(i){var s=t[i];if(s){var c,l=me(r)?s[r]:s;me(l)&&o.test(l)&&a.push(s),((c=s)instanceof Object||"object"===pe(c)&&null!==c)&&e(s,n,r,a)}})),a},encodeId:function(e){var t=e&&e.toString?e.toString():e;return""===t||"string"!=typeof t?"_":t.replace(/[^a-zA-Z0-9-]/g,(function(e){return"_"+e[0].charCodeAt(0).toString(16)+"_"}))}},he=n(258);var ge={getScrollbarSize:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="100px",t.style.height="100px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth,r=e.offsetHeight;t.style.overflow="scroll";var a=e.offsetWidth,o=e.offsetHeight;return n===a&&(a=t.clientWidth),r===o&&(o=t.clientHeight),document.body.removeChild(t),[n-a,r-o]},getOffset:function(e){var t=0,n=0;if(e.offsetParent)do{n+=e.offsetLeft,t+=e.offsetTop}while(e=e.offsetParent);return{left:n,top:t}},isCharacterKeyPress:function(e){return void 0===e.which||"number"==typeof e.which&&e.which>0&&(!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!==e.which)},handleError:function(e){var t=e.title,n=e.message;t||e instanceof Error&&(t=e.name),n||e instanceof Error&&(n=e.message),Object.assign({title:t,message:n,class:"themed",hideConfirm:!0,cancelLabel:"Dismiss",cancelClass:"btn-secondary"},e||{}),S.a.error(e)}},ve=n(51),ye=n(202),be=n(119),we=n(1418),Ee=n(1419),Se=n(1420),Oe=n(1430),Ie=n(1421),Pe={MODULE_TYPES:r.a,CommandsManager:i.a,ExtensionManager:a.a,HotkeysManager:s.a,ServicesManager:o.a,utils:ye.a,hotkeys:be.a,studies:he.a,redux:fe.a,classes:c.a,metadata:m.a,header:se,cornerstone:f.a,string:de,ui:ge,user:Y.a,errorHandler:ve.a,object:ue,log:S.a,DICOMWeb:l.a,DICOMSR:u.a,viewer:{},measurements:ce.a,hangingProtocols:ie,UINotificationService:we.a,UIModalService:Ee.a,UIDialogService:Se.a,MeasurementService:Oe.a,LoggerService:Ie.a};t.a=Pe},252:function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments),t=e.length;return function(n,r){var a,o,i,s,c,l,u;for(u=0;u<t&&(l=0,a=n[s="string"==typeof(i=e[u])?i:i.name],o=r[s],void 0!==i.primer&&(a=i.primer(a),o=i.primer(o)),c=i.reverse?-1:1,a<o&&(l=-1*c),a>o&&(l=1*c),0===l);u++);return l}}n.d(t,"a",(function(){return r}))},253:function(e,t,n){"use strict";var r=n(53),a=n(151),o=n(118),i={},s={},c=[];s={createAndAddStack:function(e,t,n,r){var i=n.images;if(i){var s,c=i.length,l=[];n.images.forEach((function(e,r){var i=e.getData(),u={instance:i,series:n,study:t,numImages:c,imageIndex:r+1},f=e.getData().metadata,p=f.NumberOfFrames;if(p>1)for(var m=0;m<p;m++){u.frameNumber=m,s=Object(a.a)(i,m),l.push(s);var d=e.getData().metadata,h=d.StudyInstanceUID,g=d.SeriesInstanceUID,v=d.SOPInstanceUID;o.a.addImageIdToUIDs(s,{StudyInstanceUID:h,SeriesInstanceUID:g,SOPInstanceUID:v})}else{u.frameNumber=1,s=Object(a.a)(i),l.push(s);var y=f.StudyInstanceUID,b=f.SeriesInstanceUID,w=f.SOPInstanceUID;o.a.addImageIdToUIDs(s,{StudyInstanceUID:y,SeriesInstanceUID:b,SOPInstanceUID:w})}}));var u={StudyInstanceUID:t.StudyInstanceUID,displaySetInstanceUID:n.displaySetInstanceUID,imageIds:l,frameRate:n.frameRate,isClip:n.isClip};return e[n.displaySetInstanceUID]=u,u}}};var l={clearStacks:function(){i={}},makeAndAddStack:function(e,t){return s.createAndAddStack(i,e,t,c)},findStack:function(e){return i[e]},findOrCreateStack:function(e,t){var n=this.findStack(t.displaySetInstanceUID);return n&&n.imageIds||(n=this.makeAndAddStack(e,t)),n},getAllStacks:function(){return i},addStackUpdatedCallback:function(e){if("function"!=typeof e)throw new r.a("callback must be provided as a function");c.push(e)},getConfiguration:function(){return s},setConfiguration:function(e){s=e}};t.a=l},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(48);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=".",s="asc",c="desc",l=0,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._operationCount=l,this._elementList=[],this._handlers=Object.create(null)}var t,n,a;return t=e,(n=[{key:"_invalidate",value:function(){var e=this._operationCount;this._operationCount=e<2147483647?e+1:l}},{key:"_elements",value:function(e){return!0===e||this._operationCount,this._elementList}},{key:"_elementWithPayload",value:function(e,t){return this._elements(t).find((function(t){return t.payload===e}))}},{key:"_elementWithId",value:function(e,t){return this._elements(t).find((function(t){return t.id===e}))}},{key:"_trigger",value:function(e,t){var n=this._handlers;if(e in n){if(!((n=n[e])instanceof Array))return;for(var r=0,a=n.length;r<a;++r){var o=n[r];m(o)&&o.call(null,t)}}}},{key:"onInsert",value:function(e){if(m(e)){var t=this._handlers.insert;t instanceof Array||(t=[],this._handlers.insert=t),t.push(e)}}},{key:"updateById",value:function(e,t){var n=!1,r=this._elementWithPayload(t,!0);return r?r.id===e&&(n=!0,this._invalidate()):(r=this._elementWithId(e,!0))&&(r.payload=t,n=!0,this._invalidate()),n}},{key:"update",value:function(e){var t=!1;return this._elementWithPayload(e,!0)&&(t=!0,this._invalidate()),t}},{key:"insert",value:function(e){var t=null;return this._elementWithPayload(e,!0)||(t=Object(r.a)(),this._elements(!0).push({id:t,payload:e}),this._invalidate(),this._trigger("insert",{id:t,data:e})),t}},{key:"removeAll",value:function(){for(var e=this._elements(!0),t=e.length,n=t-1;n>=0;n--){var r=e[n];delete r.id,delete r.payload,e[n]=null}e.splice(0,t),this._invalidate()}},{key:"remove",value:function(e){var t=this.findAllEntriesBy(e),n=t.length,r=[];if(n>0){for(var a=this._elements(!0),o=n-1;o>=0;o--){var i=t[o];a.splice(i[2],1),r.push(i[0])}this._invalidate()}return r}},{key:"getElementId",value:function(e){var t=this._elementWithPayload(e);return t&&t.id}},{key:"findById",value:function(e){var t=this._elementWithId(e);return t&&t.payload}},{key:"indexOfElement",value:function(e){return this._elements().indexOf(this._elementWithPayload(e,!0))}},{key:"indexOfId",value:function(e){return this._elements().indexOf(this._elementWithId(e,!0))}},{key:"getElementByIndex",value:function(e){var t=this._elements()[e>=0?e:-1];return t&&t.payload}},{key:"find",value:function(e){var t,n=this;return m(e)&&(t=this._elements().find((function(t,r){return e.call(n,t.payload,t.id,r)}))),t&&t.payload}},{key:"findBy",value:function(e,t){var n;if(f(t)){var r=this.all(t);r.length>0&&(n=f(e)?r.find((function(t){return g(e,t)})):r[0])}else f(e)&&(n=this._elements().find((function(t){return g(e,t.payload)})))&&(n=n.payload);return n}},{key:"findAllEntriesBy",value:function(e){var t=[];return f(e)&&this._elements().forEach((function(n,r){g(e,n.payload)&&t.push([n.payload,n.id,r])})),t}},{key:"findAllBy",value:function(e,t){var n=this.findAllEntriesBy(e).map((function(e){return e[0]}));return f(t)&&"sort"in t&&v(n,t.sort),n}},{key:"forEach",value:function(e){var t=this;m(e)&&this._elements().forEach((function(n,r){e.call(t,n.payload,n.id,r)}))}},{key:"count",value:function(){return this._elements().length}},{key:"all",value:function(e){var t=this._elements().map((function(e){return e.payload}));return f(e)&&"sort"in e&&v(t,e.sort),t}}])&&o(t.prototype,n),a&&o(t,a),e}();function f(e){return e instanceof Object||"object"===a(e)&&null!==e}function p(e){return"string"==typeof e}function m(e){return"function"==typeof e}var d=Object.prototype.hasOwnProperty;function h(e,t){var n;if(f(e)&&p(t)){var r=t.split(i),a=r.length;if(a>0){var o=r[0],s=a>1?r.slice(1).join(i):null;n=e[o],null!==s&&(n=h(n,s))}}return n}function g(e,t){var n=!1;for(var r in e)if(d.call(e,r)){if(e[r]!==h(t,r)){n=!1;break}!0!==n&&(n=!0)}return n}function v(e,t){if(!(e instanceof Array&&function(e){var t=!0;if(e instanceof Array&&e.length>0)for(var n=e.length-1;n>=0;n--){var r=e[n];if(r instanceof Array){var a=r[0],o=r[1];if(p(a)&&(o===s||o===c))continue}t=!1;break}return t}(t)))throw new Error("Invalid Arguments");var n=t.length;e.sort((function(e,r){for(var a=0;a<n;){var o=t[a],i=o[0],s=o[1]===c?-1:1,l=h(e,i),u=h(r,i);if(l<u)return-1*s;if(l>u)return 1*s;if(++a>=n)return 0}}))}},257:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"arrowAnnotate",(function(){return i})),n.d(r,"bidirectional",(function(){return s})),n.d(r,"ellipticalRoi",(function(){return c})),n.d(r,"circleRoi",(function(){return l})),n.d(r,"freehandMouse",(function(){return u})),n.d(r,"length",(function(){return f})),n.d(r,"nonTarget",(function(){return p})),n.d(r,"rectangleRoi",(function(){return m})),n.d(r,"angle",(function(){return d})),n.d(r,"targetCR",(function(){return h})),n.d(r,"targetNE",(function(){return g})),n.d(r,"targetUN",(function(){return v})),n.d(r,"dicomSRDisplayTool",(function(){return y}));var a={};n.r(a),n.d(a,"LocationSchema",(function(){return ee})),n.d(a,"LocationCriterion",(function(){return te})),n.d(a,"MaxTargetsPerOrganSchema",(function(){return se})),n.d(a,"MaxTargetsPerOrganCriterion",(function(){return ce})),n.d(a,"MaxTargetsSchema",(function(){return de})),n.d(a,"MaxTargetsCriterion",(function(){return he})),n.d(a,"MeasurementsLengthSchema",(function(){return Ee})),n.d(a,"MeasurementsLengthCriterion",(function(){return Se})),n.d(a,"ModalitySchema",(function(){return je})),n.d(a,"ModalityCriterion",(function(){return xe})),n.d(a,"NonTargetResponseSchema",(function(){return Re})),n.d(a,"NonTargetResponseCriterion",(function(){return Me})),n.d(a,"TargetTypeSchema",(function(){return ze})),n.d(a,"TargetTypeCriterion",(function(){return He}));var o={};n.r(o),n.d(o,"recist11",(function(){return Xe}));var i={id:"ArrowAnnotate",name:"ArrowAnnotate",toolGroup:"allTools",cornerstoneToolType:"ArrowAnnotate",options:{measurementTable:{displayFunction:function(e){return e.text||""}},caseProgress:{include:!0,evaluate:!0}}},s={id:"Bidirectional",name:"Target",toolGroup:"allTools",cornerstoneToolType:"Bidirectional",options:{measurementTable:{displayFunction:function(e){return e.shortestDiameter?e.longestDiameter+" x "+e.shortestDiameter:e.longestDiameter}},caseProgress:{include:!0,evaluate:!0}}},c={id:"EllipticalRoi",name:"Ellipse",toolGroup:"allTools",cornerstoneToolType:"EllipticalRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},l={id:"CircleRoi",name:"Circle",toolGroup:"allTools",cornerstoneToolType:"CircleRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},u={id:"FreehandMouse",name:"Freehand",toolGroup:"allTools",cornerstoneToolType:"FreehandMouse",options:{measurementTable:{displayFunction:function(e){var t="";return e.meanStdDev&&e.meanStdDev.mean&&!isNaN(e.meanStdDev.mean)&&(t=e.meanStdDev.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},f={id:"Length",name:"Length",toolGroup:"allTools",cornerstoneToolType:"Length",options:{measurementTable:{displayFunction:function(e){var t="";return e.length&&!isNaN(e.length)&&(t=e.length.toFixed(2)+" mm"),t}},caseProgress:{include:!0,evaluate:!0}}},p={id:"NonTarget",name:"Non-Target",toolGroup:"allTools",cornerstoneToolType:"NonTarget",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},m={id:"RectangleRoi",name:"Rectangle",toolGroup:"allTools",cornerstoneToolType:"RectangleRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},d={id:"Angle",name:"Angle",toolGroup:"allTools",cornerstoneToolType:"Angle",options:{measurementTable:{displayFunction:function(e){var t="";return e.rAngle&&!isNaN(e.rAngle)&&(t=e.rAngle.toFixed(2)+String.fromCharCode(parseInt("00B0",16))),t}},caseProgress:{include:!0,evaluate:!0}}},h={id:"TargetCR",name:"CR Target",toolGroup:"allTools",cornerstoneToolType:"TargetCR",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},g={id:"TargetNE",name:"NE Target",toolGroup:"allTools",cornerstoneToolType:"TargetNE",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},v={id:"TargetUN",name:"UN Target",toolGroup:"allTools",cornerstoneToolType:"TargetUN",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},y={id:"DICOMSRDisplayTool",name:"DICOMSRDisplayTool",toolGroup:"allTools",cornerstoneToolType:"DICOMSRDisplayTool",options:{measurementTable:{displayFunction:function(e){return"(SR) ".concat(e.lesionNamingNumber||e.measurementNumber||e.text||"")}},caseProgress:{include:!0,evaluate:!0}}},b=n(12),w=[];Object.keys(r).forEach((function(e){return w.push(r[e])}));var E={measurementTools:[{id:"allTools",name:"Measurements",childTools:w,options:{caseProgress:{include:!0,evaluate:!0}}}],newLesions:[{id:"newTargets",name:"New Targets",toolGroupId:"targets"},{id:"newNonTargets",name:"New Non-Targets",toolGroupId:"nonTargets"}],dataExchange:{retrieve:function(e,t){return b.a.error("retrieveMeasurements"),Promise.resolve()},store:function(e,t){return b.a.error("storeMeasurements"),Promise.resolve()}}};function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{dataExchange:{retrieve:function(e){return b.a.error("retrieveTimepoints"),Promise.resolve()},store:function(e){return b.a.error("storeTimepoints"),Promise.resolve()},remove:function(e){return b.a.error("removeTimepoint"),Promise.resolve()},update:function(e,t){return b.a.error("updateTimepoint"),Promise.resolve()},disassociate:function(e,t){return b.a.error("disassociateStudy"),Promise.resolve()}}}),k={prebaseline:"Pre-Baseline",baseline:"Baseline",followup:"Follow-up"},j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.Instance)return e.Instance.initialize(t,n),e.Instance;this.initialize(t,n),e.Instance=this}return O(e,null,[{key:"setConfiguration",value:function(e){Object.assign(C,e)}},{key:"getConfiguration",value:function(){return C}}]),O(e,[{key:"initialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.currentTimepointId=e,this.comparisonTimepointKey=t.comparisonTimepointKey||"baseline",this.options=t,this.timepoints=[]}},{key:"onTimepointsUpdated",value:function(){"function"==typeof this.options.onTimepointsUpdated?this.options.onTimepointsUpdated(Object.assign([],this.timepoints)):b.a.warn("Timepoints update callback is not defined")}},{key:"calculateVisitNumber",value:function(e){var t=this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).find((function(t){return t.PatientID===e.PatientID&&t.timepointType===e.timepointType})).map((function(e){return e.timepointId})).indexOf(e.timepointId)+1;if(!t)throw new Error("Current timepoint was not in the list of relevant timepoints?");return t}},{key:"retrieveTimepoints",value:function(e){var t=this,n=C.dataExchange.retrieve;if("function"==typeof n)return new Promise((function(r,a){n(e).then((function(e){b.a.info("Timepoint data retrieval"),e.forEach((function(e){var n=t.timepoints.findIndex((function(t){return t.timepointId===e.timepointId}));n<0?t.timepoints.push(e):t.timepoints[n]=e})),t.onTimepointsUpdated(),r()})).catch((function(e){b.a.error("Timepoint retrieval function failed: ".concat(e)),a(e)}))}));b.a.error("Timepoint retrieval function has not been configured.")}},{key:"storeTimepoints",value:function(){var e=C.dataExchange.store;"function"==typeof e?(b.a.info("Preparing to store timepoints"),b.a.info(JSON.stringify(this.timepoints,null,2)),e(this.timepoints).then((function(){return b.a.info("Timepoint storage completed")}))):b.a.error("Timepoint store function has not been configured.")}},{key:"disassociateStudy",value:function(e,t){var n=this,r=C.dataExchange.disassociate;"function"==typeof r?r(e,t).then((function(){b.a.info("Disassociation completed"),n.timepoints=[],n.retrieveTimepoints({})})):b.a.error("Study disassociate function has not been configured.")}},{key:"removeTimepoint",value:function(e){var t=this,n=C.dataExchange.remove;if("function"==typeof n){var r={timepointId:e};b.a.info("Preparing to remove timepoint"),b.a.info(JSON.stringify(r,null,2)),n(r).then((function(){b.a.info("Timepoint removal completed");var n=t.timepoints.findIndex((function(t){return t.timepointId===e}));n>-1&&t.timepoints.splice(n,1),t.onTimepointsUpdated()}))}else b.a.error("Timepoint remove function has not been configured.")}},{key:"updateTimepoint",value:function(e,t){var n=this,r=C.dataExchange.update;if("function"==typeof r){var a={timepointId:e};b.a.info("Preparing to update timepoint"),b.a.info(JSON.stringify(a,null,2)),b.a.info(JSON.stringify(t,null,2)),r(a,t).then((function(){b.a.info("Timepoint updated completed");var r=n.timepoints.findIndex((function(t){return t.timepointId===e}));r>-1&&(n.timepoints[r]=Object.assign({},n.timepoints[r],t)),n.onTimepointsUpdated()}))}else b.a.error("Timepoint update function has not been configured.")}},{key:"all",value:function(e){return(e?this.timepoints.filter(e):this.timepoints).sort((function(e,t){return e.visitDate<t.visitDate?1:-1}))}},{key:"current",value:function(){var e=this;return this.timepoints.find((function(t){return t.timepointId===e.currentTimepointId}))}},{key:"lock",value:function(){var e=this,t=this.timepoints.findIndex((function(t){return t.timepointId===e.currentTimepointId}));t<0||(this.timepoints[t]=Object.assign({},this.timepoints[t],{locked:!0}))}},{key:"prior",value:function(){var e=this.current();if(e)return this.all().find((function(t){return t.visitDate<e.visitDate}))}},{key:"currentAndPrior",value:function(){var e=[],t=this.current();t&&e.push(t);var n=this.prior();return t&&n&&n.timepointId!==t.timepointId&&e.push(n),e}},{key:"currentAndComparison",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.comparisonTimepointKey,t=this.current(),n=this.comparison(e),r=[t];return n&&!r.find((function(e){return e.timepointId===n.timepointId}))&&r.push(n),r}},{key:"isRebaseline",value:function(e){var t=e?this.timepoints.find((function(t){return t.timepointId===e})):this.current();return!!t&&this.timepoints.filter((function(e){return"baseline"===e.timepointType&&e.visitDate<=t.visitDate})).length>1}},{key:"nextBaselineAfterCurrent",value:function(){var e=this.current();return this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).find((function(t){return t.visitDate>e.visitDate&&"baseline"===t.timepointType}))}},{key:"setCurrentTimepointId",value:function(e){this.currentTimepointId=e}},{key:"setUserComparison",value:function(e){this.userComparison=e}},{key:"comparison",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.comparisonTimepointKey;if(this.userComparison)return this.userComparison;var t=this.current();if(t){if("prebaseline"===t.timepointType){var n=this.nextBaselineAfterCurrent();if(n)return n}if("baseline"===t.timepointType){var r=this.prior();if(r)return r}var a=this[e]();if(!a||a.timepointId!==t.timepointId)return a}}},{key:"latestInitialTimepointAfterCurrent",value:function(){var e=this.current();if("followup"!==e.timepointType){var t=this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).filter((function(t){return t.visitDate>e.visitDate})),n=t.findIndex((function(e){return"followup"===e.timepointType}))-1;return n<0?t[t.length-1]:t[n]}}},{key:"initialTimepointIds",value:function(){var e=this.current();"prebaseline"!==e.timepointType&&"baseline"!==e.timepointType||(e=this.latestInitialTimepointAfterCurrent()||e);var t=e.visitDate,n=(this.timepoints.filter((function(e){return"prebaseline"===e.timepointType&&e.visitDate<=t}))||[]).map((function(e){return e.timepointId})),r=(this.timepoints.filter((function(e){return"baseline"===e.timepointType&&e.visitDate<=t}))||[]).map((function(e){return e.timepointId}));return n.concat(r)}},{key:"baseline",value:function(){var e=this.current().visitDate;return this.all().find((function(t){return"baseline"===t.timepointType&&t.visitDate<=e}))}},{key:"nadir",value:function(){var e=this.current(),t=this.all().find((function(t){return t.timepointId!==e.timepointId&&"nadir"===t.timepointKey&&t.visitDate<=e.visitDate}));return t||this.baseline()}},{key:"key",value:function(){var e=[this.current()],t=this.prior(),n=this.nadir(),r=this.baseline(),a=function(t){return!!e.find((function(e){return e.timepointId===t.timepointId}))};return t&&!1===a(t)&&e.push(t),n&&!1===a(n)&&e.push(n),r&&!1===a(r)&&e.push(r),e}},{key:"study",value:function(e){return this.all().filter((function(t){return t.studyInstanceUIDs.includes(e)}))}},{key:"name",value:function(e){var t=k[e.timepointType];if("baseline"===e.timepointType)return"Baseline";if(e.visitNumber)return"".concat(t," ").concat(e.visitNumber);var n=this.calculateVisitNumber(e);return"".concat(t," ").concat(n)}},{key:"title",value:function(e){for(var t=this.name(e),n=this.all(),r=-1,a=null,o=0;o<n.length;o++){var i=n[o];if(this.currentTimepointId===i.timepointId&&(a=0),null!==a&&(r=a++),i.timepointId===e.timepointId)break}var s={0:["Current"],1:["Prior"]}[r]||[],c=this.nadir();c&&c.timepointId===e.timepointId&&s.push("Nadir");var l="";return s.length&&(l="(".concat(s.join(", "),")")),"".concat(t," ").concat(l)}}]),e}();P(j,"Instance",void 0);var x=n(4),D=n.n(x),T=n(3),N=n.n(T),_=function(e){if(e)switch(e.toolType){case"Bidirectional":case"TargetCR":case"TargetNE":case"TargetUN":return"Target ".concat(e.lesionNamingNumber);case"NonTarget":return"Non-Target ".concat(e.lesionNamingNumber)}},A=function(e){return e.description},R=n(134);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("_"),r=M(n,4),a=r[0],o=r[1],i=r[2],s=r[3],c=R.a.get(a),l=c.getSeriesByUID(o),u=l.getInstanceByUID(i);return u.getImageId(s,t)},U=n(48);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},E),W=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.Instance)return e.Instance.initialize(t,n),e.Instance;this.initialize(t,n),e.Instance=this}return z(e,null,[{key:"setConfiguration",value:function(e){Object.assign(G,e)}},{key:"getConfiguration",value:function(){return G}},{key:"getToolsGroupsMap",value:function(){var e={};return G.measurementTools.forEach((function(t){t.childTools.forEach((function(n){return e[n.id]=t.id}))})),e}},{key:"getToolGroupTools",value:function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];t[r]||(t[r]=[]),t[r].push(n)})),t}},{key:"getToolConfiguration",value:function(t){var n,r=e.getConfiguration(),a=e.getToolsGroupsMap()[t],o=r.measurementTools.find((function(e){return e.id===a}));return o&&(n=o.childTools.find((function(e){return e.id===t}))),{toolGroupId:a,toolGroup:o,tool:n}}},{key:"syncMeasurementAndToolData",value:function(t){b.a.info("syncMeasurementAndToolData");var n=_(t);n&&(t.labels=[n]);var r=D.a.globalImageIdSpecificToolStateManager.saveToolState(),a=t.StudyInstanceUID;if(R.a.get(a)){var o=t.toolType,i=e.getToolConfiguration(o).tool;if(Array.isArray(i.childTools))i.childTools.forEach((function(n){var r=t[n];r&&(r._id=t._id,r.measurementNumber=t.measurementNumber,r.lesionNamingNumber=t.lesionNamingNumber,e.syncMeasurementAndToolData(r))}));else{var s=L(t.imagePath);r[s]||(r[s]={});var c=r[s][o],l=c&&c.data;if(l&&l.length){var u=r[s][o].data,f=!1;if(u.forEach((function(e){if(e._id===t._id)return f=!0,Object.assign(e,t),!1})),!0===f)return}else r[s][o]={data:[]};r[s][o].data.push(t),D.a.globalImageIdSpecificToolStateManager.restoreToolState(r)}}}},{key:"isToolIncluded",value:function(e){return e.options&&e.options.caseProgress&&e.options.caseProgress.include}}]),z(e,[{key:"initialize",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timepointApi=t,this.options=r,this.toolGroups={},this.tools={},this.toolsGroupsMap=e.getToolsGroupsMap(),this.toolGroupTools=e.getToolGroupTools(this.toolsGroupsMap),G.measurementTools.forEach((function(e){n.toolGroups[e.id]=[],e.childTools.forEach((function(e){n.tools[e.id]=[]}))}))}},{key:"onMeasurementsUpdated",value:function(){"function"==typeof this.options.onMeasurementsUpdated?this.options.onMeasurementsUpdated(Object.assign({},this.tools)):b.a.warn("Measurements update callback is not defined")}},{key:"retrieveMeasurements",value:function(e,t){var n=this,r=G.dataExchange.retrieve,a=G.server;if("function"==typeof r)return new Promise((function(e,t){r(a).then((function(t){t&&(b.a.info("Measurement data retrieval"),Object.keys(t).forEach((function(e){t[e].forEach((function(e){var t=e.toolType;"DICOMSRDisplayTool"!==t&&!0!==e.isReadOnly&&(console.log(e),n.addMeasurement(t,e))}))}))),e(),n.syncMeasurementsAndToolData(),N.a.getEnabledElements().forEach((function(e){e.image&&N.a.updateImage(e.element)})),n.onMeasurementsUpdated()}),t)}));b.a.error("Measurement retrieval function has not been configured.")}},{key:"storeMeasurements",value:function(t){var n=this,r=G.server,a=G.dataExchange.store;if("function"==typeof a){var o={};G.measurementTools.forEach((function(t){e.isToolIncluded(t)&&t.childTools.forEach((function(r){e.isToolIncluded(r)&&(o[t.id]||(o[t.id]=[]),o[t.id]=o[t.id].concat(n.tools[r.id]))}))}));var i=t?function(e){return e.timepointId===t}:null,s=this.timepointApi.all(i),c=s.map((function(e){return e.timepointId})),l={PatientID:s[0].PatientID,timepointIds:c};return b.a.info("Saving Measurements for timepoints:",s),a(o,l,r).then((function(e){return b.a.info("Measurement storage completed"),e}))}b.a.error("Measurement store function has not been configured.")}},{key:"calculateLesionNamingNumber",value:function(e){var t,n=e.sort((function(e,t){return e.lesionNamingNumber>t.lesionNamingNumber?1:e.lesionNamingNumber<t.lesionNamingNumber?-1:0}));for(t=1;t<n.length+1&&!(t<n[t-1].lesionNamingNumber);t++);return t}},{key:"fetch",value:function(e,t){var n=this;if(!this.toolGroups[e])throw new Error("MeasurementApi: No Collection with the id: ".concat(e));return(t?this.toolGroups[e].filter(t):this.toolGroups[e]).map((function(e){return e.toolId?n.tools[e.toolId].find((function(t){return t._id===e.toolItemId})):{lesionNamingNumber:e.lesionNamingNumber}}))}},{key:"getFirstMeasurement",value:function(t){var n=this,r=[];G.measurementTools.forEach((function(t){if(!e.isToolIncluded(t))return!1;r=r.concat(t.childTools)}));var a=r.filter((function(t){return e.isToolIncluded(t)})),o=void 0;return a.every((function(e){return!(o=n.tools[e.id].find((function(e){return e.timepointId===t&&1===e.measurementNumber})))})),o}},{key:"lesionExistsAtTimepoints",value:function(e,t,n){return!!this.fetch(t,(function(e){return n.includes(e.timepointId)})).find((function(t){return t.lesionNamingNumber===e}))}},{key:"isNewLesionsMeasurement",value:function(t){if(t){var n=e.getToolConfiguration(t.toolType),r=n.tool.parentTool||t.toolType,a=this.timepointApi,o=this.tools[r].find((function(e){return e._id===t._id}))||{},i=o.timepointId||t.timepointId,s=o.lesionNamingNumber||t.lesionNamingNumber;if(a&&i&&n){var c=n.toolGroupId,l=a.timepoints.find((function(e){return e.timepointId===i})),u=a.initialTimepointIds();return!(!u||u.length<1||u.some((function(e){return e===l.timepointId})))&&!1===this.lesionExistsAtTimepoints(s,c,u)}}}},{key:"calculateLesionMaxMeasurementNumber",value:function(e,t){for(var n=this,r=(e?this.toolGroups[e]||[]:Object.keys(this.toolGroups).reduce((function(e,t){return e.push.apply(e,V(n.toolGroups[t])),e}),[])).filter(t).sort((function(e,t){return e.measurementNumber<t.measurementNumber?1:-1})),a=function(e){var t=r[e],a=n.tools[t.toolId].find((function(e){return e._id===t.toolItemId}));if(!n.isNewLesionsMeasurement(a))return{v:a.measurementNumber}},o=0;o<r.length;o++){var i=a(o);if("object"===F(i))return i.v}return 0}},{key:"calculateNewLesionMaxMeasurementNumber",value:function(e,t){for(var n=this,r=this.toolGroups[e].filter(t).sort((function(e,t){return e.measurementNumber<t.measurementNumber?1:-1})),a=function(e){var t=r[e],a=n.tools[t.toolId].find((function(e){return e._id===t.toolItemId}));if(n.isNewLesionsMeasurement(a))return{v:a.measurementNumber}},o=0;o<r.length;o++){var i=a(o);if("object"===F(i))return i.v}return 0}},{key:"calculateMeasurementNumber",value:function(e){var t=this.toolsGroupsMap[e.toolType],n=function(t){return t._id!==e._id};if(!this.isNewLesionsMeasurement(e)){var r=this.calculateLesionMaxMeasurementNumber("targets",n);if("targets"===t)return r;if("nonTargets"===t){var a=this.calculateLesionMaxMeasurementNumber("nonTargets",n);return Math.max(r,a)}return this.calculateLesionMaxMeasurementNumber(null,n)}var o=this.calculateLesionMaxMeasurementNumber("targets",n),i=this.calculateLesionMaxMeasurementNumber("nonTargets",n),s=this.calculateNewLesionMaxMeasurementNumber("targets",n);if("targets"===t)return Math.max(o,i,s);if("nonTargets"===t){var c=this.calculateNewLesionMaxMeasurementNumber("nonTargets",n);return Math.max(o,i,s,c)}return 0}},{key:"getPreviousMeasurement",value:function(e){if(e){var t=e.timepointId,n=e.toolType,r=e.lesionNamingNumber;if(t&&n&&r){var a,o=this.toolsGroupsMap[e.toolType],i=e.additionalData&&e.additionalData.TrialPatientLocationUID;a=i?function(t){return t._id!==e._id&&t.additionalData&&t.additionalData.TrialPatientLocationUID===i}:function(t){return t._id!==e._id&&t.lesionNamingNumber===r};for(var s=this.toolGroupTools[o],c=0;c<s.length;c++){var l=s[c],u=this.tools[l].find(a);if(u)return u}}}}},{key:"hasDuplicateMeasurementNumber",value:function(e){var t=this;if(e){var n=e.toolType,r=e.measurementNumber;if(n&&r){var a=function(t){return t._id!==e._id&&t.measurementNumber===e.measurementNumber};return G.measurementTools.filter((function(e){return"temp"!==e.id})).some((function(e){return!!t.toolGroups[e.id].find(a)||e.childTools.some((function(e){if(t.tools[e.id].find(a))return!0}))}))}}}},{key:"updateNumbering",value:function(e,t,n,r){e.filter(t).forEach((function(e){e[n]+=r}))}},{key:"updateMeasurementNumberForAllMeasurements",value:function(e,t){var n=this,r=function(t){return t._id!==e._id&&t.measurementNumber>=e.measurementNumber};G.measurementTools.filter((function(e){return"temp"!==e.id})).forEach((function(e){n.updateNumbering(n.toolGroups[e.id],r,"measurementNumber",t),e.childTools.forEach((function(e){n.updateNumbering(n.tools[e.id],r,"measurementNumber",t)}))}))}},{key:"addMeasurement",value:function(e,t){if(t.isReadOnly||"DICOMSRDisplayTool"===e)console.log(t);else{var n,r=this.toolsGroupsMap[e],a=this.toolGroups[r],o=this.tools[e],i=o.find((function(e){return e.lesionNamingNumber===t.lesionNamingNumber&&e.toolType===t.toolType}));if(i&&i.location&&(t.location=i.location),i&&i.description&&(t.description=i.description),t._id=Object(U.a)(),t.isReadOnly=!1,t.StudyInstanceUID)n=this.timepointApi.study(t.StudyInstanceUID)[0];else{var s=t.timepointId;n=this.timepointApi.timepoints.find((function(e){return e.timepointId===s}))}if(n){var c=a.find((function(e){return!e.toolId&&e.timepointId===n.timepointId}));if(t.timepointId=n.timepointId,c)t.lesionNamingNumber=c.lesionNamingNumber,t.measurementNumber=c.measurementNumber,a.filter((function(e){return e.timepointId===n.timepointId&&e.lesionNamingNumber===t.lesionNamingNumber})).forEach((function(e){e.toolItemId=t._id,e.createdAt=t.createdAt,e.measurementNumber=t.measurementNumber}));else{var l=a.filter((function(e){return e.timepointId===n.timepointId}));t.lesionNamingNumber=this.calculateLesionNamingNumber(l),t.measurementNumber=t.measurementNumber||this.calculateMeasurementNumber(t)+1}var u,f={timepointId:n.timepointId,lesionNamingNumber:t.lesionNamingNumber,measurementNumber:t.measurementNumber},p=this.getPreviousMeasurement(t);if(p){t.lesionNamingNumber=p.lesionNamingNumber,t.measurementNumber=p.measurementNumber,f.lesionNamingNumber=p.lesionNamingNumber,f.measurementNumber=p.measurementNumber,f.additionalData=t.additionalData||{},f.additionalData.TrialPatientLocationUID=p.additionalData&&p.additionalData.TrialPatientLocationUID,f.location=p.location,f.label=p.label,f.description=p.description,f.isSplitLesion=p.isSplitLesion,f.isNodal=p.isNodal;var m=A(p);m&&(f.description=m)}else this.hasDuplicateMeasurementNumber(t)&&this.updateMeasurementNumberForAllMeasurements(t,1);var d=o.findIndex((function(e){return e._id===t._id}));return d>-1?(u=Object.assign({},o[d],f),o[d]=u):(u=Object.assign({},t,f),o.push(u)),c||a.push({toolId:e,toolItemId:u._id,timepointId:n.timepointId,StudyInstanceUID:u.StudyInstanceUID,createdAt:u.createdAt,lesionNamingNumber:u.lesionNamingNumber,measurementNumber:u.measurementNumber}),this.onMeasurementsUpdated(),console.log("Added measurement",u),u}}}},{key:"updateMeasurement",value:function(e,t){var n=this.tools[e],r=n.findIndex((function(e){return e._id===t._id}));r<0||(n[r]=Object.assign({},t),this.onMeasurementsUpdated())}},{key:"onMeasurementRemoved",value:function(e,t){var n=this,r=t.lesionNamingNumber,a=t.measurementNumber,o=this.toolsGroupsMap[e],i=this.toolGroups[o],s=i.findIndex((function(e){return e.toolItemId===t._id}));if(!(s<0)){if(i.splice(s,1),i.filter((function(e){return e.measurementNumber===a})).map((function(e){return e.timepointId})).length<1){var c=function(e){return e.lesionNamingNumber>=r};this.updateNumbering(i,c,"lesionNamingNumber",-1);var l=G.measurementTools.find((function(e){return e.id===o}));l&&l.childTools&&l.childTools.forEach((function(e){var t=n.tools[e.id];n.updateNumbering(t,c,"lesionNamingNumber",-1)})),this.updateMeasurementNumberForAllMeasurements(t,-1)}this.syncMeasurementsAndToolData(),this.onMeasurementsUpdated()}}},{key:"syncMeasurementsAndToolData",value:function(){var t=this;G.measurementTools.forEach((function(n){e.isToolIncluded(n)&&n.childTools.forEach((function(n){e.isToolIncluded(n)&&t.tools[n.id].forEach((function(t){e.syncMeasurementAndToolData(t)}))}))}))}},{key:"deleteMeasurements",value:function(t,n,r){var a=this,o=Object.keys(r),i=this.toolGroups[n];if(i){var s=i.filter((function(e){return o.every((function(t){return e[t]===r[t]}))})),c=[];if(s.forEach((function(e){if(e.toolId){var t=a.tools[e.toolId],n=t.findIndex((function(t){return t._id===e.toolItemId}));n>-1&&(c.push(t[n]),t.splice(n,1))}})),c.length){var l=r.lesionNamingNumber||c[0].lesionNamingNumber,u=D.a.globalImageIdSpecificToolStateManager.saveToolState();c.forEach((function(n){var r=[],o=e.getToolConfiguration(n.toolType).tool;Array.isArray(o.childTools)?o.childTools.forEach((function(e){var t=n[e];t&&r.push(t)})):r.push(n),r.forEach((function(e){var t=e.imagePath,r=e.toolType,a=L(t);if(a&&u[a]){var o=u[a][r],i=o&&o.data,s=i.find((function(e){return e._id===n._id}));if(s){var c=i.indexOf(s);i.splice(c,1)}}})),a.onMeasurementRemoved(t,n)})),D.a.globalImageIdSpecificToolStateManager.restoreToolState(u);var f=Object.assign({},r);delete f.timepointId,delete f.lesionNamingNumber;var p=Object.keys(f);V(new Set(c.map((function(e){return e.toolType})))).forEach((function(t){a.tools[t].filter((function(e){return e.lesionNamingNumber>l-1&&p.every((function(t){return e[t]===r[t]}))})).forEach((function(t){e.syncMeasurementAndToolData(t)}))}))}}}}]),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}q(W,"Instance",void 0);var J=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.criterionName=n}var t,n,r;return t=e,(n=[{key:"generateResponse",value:function(e,t){return{passed:!e,isGlobal:!t||!t.length,message:e,measurements:t,criterionName:this.criterionName}}},{key:"getNewTargetNumbers",value:function(e){var t=this.options,n=[],r=new Set;return t.newTarget&&(e.targets.forEach((function(e){var t=e.measurement.measurementNumber;"baseline"===e.timepoint.timepointType&&n.push(t)})),e.targets.forEach((function(e){var t=e.measurement.measurementNumber;"followup"===e.timepoint.timepointType&&(n.includes(t)||r.add(t))}))),r}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee={type:"object"},te=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Q(this,(e=Z(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.targets.concat(e.nonTargets),r=[];return n.forEach((function(e){var t=e.measurement;t.location||r.push(t)})),r.length&&(t="All measurements should have a location"),this.generateResponse(t,r)}}])&&X(n.prototype,r),a&&X(n,a),t}(J);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se={type:"object",properties:{limit:{label:"Max targets allowed per organ",type:"integer",minimum:1},newTarget:{label:"Flag to evaluate only new targets",type:"boolean"},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},required:["limit"]},ce=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ae(this,(e=oe(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=this.options,r={},a=[],o=this.getNewTargetNumbers(e);if(e.targets.forEach((function(e){var t=e.measurement,i=t.location,s=t.measurementNumber,c=t.isSplitLesion,l=t.isNodal;c||"boolean"==typeof l&&"boolean"==typeof n.isNodal&&n.isNodal!==l||(r[i]||(r[i]=new Set),n.newTarget&&!o.has(s)||r[i].add(s),r[i].size>n.limit&&a.push(t))})),a.length){var i=n.newTarget?"new ":"";t=n.message||"Each organ should not have more than ".concat(n.limit," ").concat(i,"targets.")}return this.generateResponse(t,a)}}])&&re(n.prototype,r),a&&re(n,a),t}(J);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de={type:"object",properties:{limit:{label:"Max targets allowed in study",type:"integer",minimum:0},newTarget:{label:"Flag to evaluate only new targets",type:"boolean"},locationIn:{label:"Filter to evaluate only measurements with the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationNotIn:{label:"Filter to evaluate only measurements without the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},required:["limit"]},he=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return fe(this,(e=pe(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t=this.options,n=this.getNewTargetNumbers(e),r=[];e.targets.forEach((function(e){var a=e.measurement,o=a.location,i=a.measurementNumber,s=a.isSplitLesion,c=a.isNodal;s||"boolean"==typeof c&&"boolean"==typeof t.isNodal&&t.isNodal!==c||t.newTarget&&!n.has(i)||t.locationIn&&-1===t.locationIn.indexOf(o)||t.locationNotIn&&t.locationNotIn.indexOf(o)>-1||r.push(i)}));var a,o="";if("boolean"==typeof t.isNodal&&(o=t.isNodal?"nodal ":"extranodal "),r.length>t.limit){var i=t.newTarget?"new ":"",s=1===t.limit?"":"s",c=0===t.limit?"":"more than ".concat(t.limit);a=t.message||"The study should not have ".concat(c," ").concat(i).concat(o,"target").concat(s,".")}return this.generateResponse(a)}}])&&ue(n.prototype,r),a&&ue(n,a),t}(J);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee={type:"object",properties:{longAxis:{label:"Minimum length of long axis",type:"number",minimum:0},shortAxis:{label:"Minimum length of short axis",type:"number",minimum:0},longAxisSliceThicknessMultiplier:{label:"Length of long axis multiplier",type:"number",minimum:0},shortAxisSliceThicknessMultiplier:{label:"Length of short axis multiplier",type:"number",minimum:0},modalityIn:{label:"Filter to evaluate only measurements with the specified modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},modalityNotIn:{label:"Filter to evaluate only measurements without the specified modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationIn:{label:"Filter to evaluate only measurements with the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationNotIn:{label:"Filter to evaluate only measurements without the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},anyOf:[{required:["message","longAxis"]},{required:["message","shortAxis"]},{required:["message","longAxisSliceThicknessMultiplier"]},{required:["message","shortAxisSliceThicknessMultiplier"]}]},Se=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ye(this,(e=be(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=[],r=this.options,a=r.longAxisSliceThicknessMultiplier,o=r.shortAxisSliceThicknessMultiplier;return e.targets.forEach((function(e){var t=e.metadata,i=e.measurement,s=i.location,c=i.longestDiameter,l=i.shortestDiameter,u=i.isNodal;if(i.childToolsCount){var f=i.bidirectional;c=f&&f.longestDiameter||0,l=f&&f.shortestDiameter||0}var p=t.SliceThickness,m=t.getTagValue("Modality")||"";"boolean"==typeof u&&"boolean"==typeof r.isNodal&&r.isNodal!==u||r.locationIn&&-1===r.locationIn.indexOf(s)||r.modalityIn&&-1===r.modalityIn.indexOf(m)||r.locationNotIn&&r.locationNotIn.indexOf(s)>-1||r.modalityNotIn&&r.modalityNotIn.indexOf(m)>-1||(r.longAxis&&c<r.longAxis||r.shortAxis&&l<r.shortAxis||a&&!isNaN(p)&&c<a*p||o&&!isNaN(p)&&l<o*p)&&n.push(i)})),n.length&&(t=r.message),this.generateResponse(t,n)}}])&&ve(n.prototype,r),a&&ve(n,a),t}(J);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je={type:"object",properties:{method:{label:'Specify if it\'s goinig to "allow" or "deny" the modalities',type:"string",enum:["allow","deny"]},measurementTypes:{label:"List of measurement types that will be evaluated",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},modalities:{label:"List of allowed/denied modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},required:["method","modalities"]},xe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Pe(this,(e=Ce(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=this.options.measurementTypes||["targets"],r=new Set(this.options.modalities),a=this.options.method,o=[],i=new Set;if(n.forEach((function(t){e[t].forEach((function(e){var t=e.measurement,n=e.metadata.getTagValue("Modality")||"";("allow"===a&&!r.has(n)||"deny"===a&&r.has(n))&&(o.push(t),i.add(n))}))})),o.length){var s=Array.from(i),c=s.join(", "),l=s.length>1?"modalities":"Modality";t="The ".concat(l," ").concat(c," should not be used as a method of measurement")}return this.generateResponse(t,o)}}])&&Ie(n.prototype,r),a&&Ie(n,a),t}(J);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re={type:"object"},Me=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ne(this,(e=_e(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.nonTargets,r=[];return n.forEach((function(e){var t=e.measurement;"present"!==(t.response||"").toLowerCase()&&r.push(t)})),r.length&&(t='Non-targets can only be assessed as "present"'),this.generateResponse(t,r)}}])&&Te(n.prototype,r),a&&Te(n,a),t}(J);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze={type:"object"},He=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Fe(this,(e=Ve(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.targets,r=[];return n.forEach((function(e){var t=e.measurement;"Bidirectional"===t.toolType||t.bidirectional||r.push(t)})),r.length&&(t="Target lesions must have measurements (cannot be assessed as CR, UN/NE, EX)"),this.generateResponse(t,r)}}])&&Ue(n.prototype,r),a&&Ue(n,a),t}(J),qe=n(768),Ge=n.n(qe);function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ye=Object.assign({},a),Je=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this.getCriteriaValidator();if(this.criteria=[],!r(t)){var a="";throw r.errors.forEach((function(e){a+="\noptions".concat(e.dataPath," ").concat(e.message)})),new Error(a)}Object.keys(t).forEach((function(e){var r=t[e],a=Ye["".concat(e,"Criterion")];(r instanceof Array?r:[r]).forEach((function(t){return n.criteria.push(new a(t,e))}))}))}var t,n,r;return t=e,r=[{key:"setCriterion",value:function(e,t){Ye[e]=t}}],(n=[{key:"getMaxTargets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;return this.criteria.forEach((function(n){var r=e===!!n.options.newTarget;if(n instanceof Ye.MaxTargetsCriterion&&r){var a=n.options.limit;a>t&&(t=a)}})),t}},{key:"getCriteriaValidator",value:function(){if(e.criteriaValidator)return e.criteriaValidator;var t={properties:{},definitions:{}};return Object.keys(Ye).forEach((function(e){if(Ye[e].prototype instanceof J){var n=e.replace(/Criterion$/,""),r="#/definitions/".concat(n);t.definitions[n]=Ye["".concat(n,"Schema")],t.properties[n]={oneOf:[{$ref:r},{type:"array",items:{$ref:r}}]}}})),e.criteriaValidator=(new Ge.a).compile(t),e.criteriaValidator}},{key:"evaluate",value:function(e){var t=[];return this.criteria.forEach((function(n){var r=n.evaluate(e);r.passed||t.push(r)})),t}}])&&We(t.prototype,n),r&&We(t,r),e}(),Ke=n(767),Xe=n.t(Ke,2);function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ze(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ze(o,r,a,i,s,"next",e)}function s(e){Ze(o,r,a,i,s,"throw",e)}i(void 0)}))}}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=Object.assign({},o),nt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.measurementApi=t,this.timepointApi=n,this.nonconformities=[],this.groupedNonConformities=[],this.maxTargets=null,this.maxNewTargets=null,this.options=r}var t,n,r,a,o;return t=e,n=[{key:"loadStudy",value:function(e){if("function"!=typeof this.options.loadStudy)throw new Error("loadStudy callback is not defined");return this.options.loadStudy(null,e)}},{key:"validate",value:(o=$e(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,l,u,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getData("baseline"),r=this.getData("followup"),e.next=4,Promise.all([n,r]);case 4:return a=e.sent,o=Qe(a,2),i=o[0],s=o[1],(c={targets:[],nonTargets:[]}).targets=c.targets.concat(i.targets),c.targets=c.targets.concat(s.targets),c.nonTargets=c.nonTargets.concat(i.nonTargets),c.nonTargets=c.nonTargets.concat(s.nonTargets),this.maxTargets=null,this.maxNewTargets=null,l=this.validateTimepoint("both",t,c),u=this.validateTimepoint("baseline",t,i),f=this.validateTimepoint("followup",t,s),p=u.concat(f).concat(l),m=this.groupNonConformities(p),this.nonconformities=p,this.groupedNonConformities=m,console.warn("nonconformities"),console.warn(p),console.warn("groupedNonConformities"),console.warn(m),e.abrupt("return",p);case 27:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"groupNonConformities",value:function(e){var t={},n=this.measurementApi.toolsGroupsMap;return e.forEach((function(e){if(e.isGlobal)return t.globals=t.globals||{messages:[]},void t.globals.messages.push(e.message);e.measurements.forEach((function(r){var a=n[r.toolType];t[a]=t[a]||{measurementNumbers:{}};var o=t[a],i=r.measurementNumber,s=o.measurementNumbers[i];s||(s=o.measurementNumbers[i]={messages:[],measurements:[]}),s.messages.push(e.message),s.measurements.push(r)}))})),t}},{key:"validateTimepoint",value:function(e,t,n){var r=this,a=this.getEvaluators(e,t),o=[];return a.forEach((function(t){var a=t.getMaxTargets(!1),i=t.getMaxTargets(!0);a&&(r.maxTargets=a),i&&(r.maxNewTargets=i);var s=t.evaluate(n);s.length>0&&s.forEach((function(t){t.timepointType=e})),o=o.concat(s)})),o}},{key:"getEvaluators",value:function(e,t){var n=[];console.warn(tt);var r=t.id.toLowerCase(),a=tt[r];if(a){var o=a[e];o&&n.push(new Je(o))}return n}},{key:"getData",value:(a=$e(regeneratorRuntime.mark((function e(t){var n,r,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={targets:[],nonTargets:[]},r=[],(a=function(e){o.measurementApi.fetch(e).forEach((function(a){var i=a.StudyInstanceUID,s=a.timepointId,c=s&&o.timepointApi.timepoints.find((function(e){return e.timepointId===s}));if(c&&("both"===t||c.timepointType===t)){var l=o.loadStudy(i);l.then((function(t){n[e].push({measurement:a,metadata:t.getFirstInstance(),timepoint:c})}),(function(e){throw new Error(e)})),r.push(l)}}))})("targets"),a("nonTargets"),e.next=7,Promise.all(r);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}],r=[{key:"setEvaluationDefinitions",value:function(e,t){tt[e]=t}}],n&&et(t.prototype,n),r&&et(t,r),e}(),rt=n(71),at=function(e,t){t||(t=N.a.getEnabledElement(e).image.imageId);var n=N.a.metaData.get("instance",t),r=n.StudyInstanceUID,a=n.PatientID,o=n.SeriesInstanceUID,i=n.SOPInstanceUID,s=t.split("&frame"),c=void 0!==s[1]?Number(s[1]):0,l=[r,o,i,c].join("_");return{PatientID:a,StudyInstanceUID:r,SeriesInstanceUID:o,SOPInstanceUID:i,frameIndex:c,imagePath:l}};function ot(){N.a.getEnabledElements().forEach((function(e){e.image&&N.a.updateImage(e.element)}))}function it(e){var t=e.eventData,n=e.tool,r=W.Instance;r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=t.toolType;if(r.tools[o]&&a&&!a.cancelled){b.a.info("CornerstoneToolsMeasurementAdded");var i=at(t.element),s=Object.assign({},a,i,{lesionNamingNumber:a.lesionNamingNumber,userId:rt.a.getUserId(),toolType:o}),c=r.addMeasurement(o,s);Object.assign(a,c);var l=_(a);l&&(a.labels=[l]),ot(),W.isToolIncluded(n)}}var st=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,W.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=r.tools[n.parentTool];if(o&&a&&!a.cancelled){b.a.info("CornerstoneToolsMeasurementAdded");var i=at(t.element),s=Object.assign(i,{userId:rt.a.getUserId()}),c=Object.assign({},a,s),l=o.find((function(e){return e.toolType===n.parentTool&&e.PatientID===i.PatientID&&null===e[n.attribute]}));if(l){var u=n.attribute;c.createdAt=new Date,l[u]=c,l.childToolsCount=(l.childToolsCount||0)+1,r.updateMeasurement(n.parentTool,l),a._id=l._id,a.lesionNamingNumber=l.lesionNamingNumber}else{var f={toolType:n.parentTool,lesionNamingNumber:a.lesionNamingNumber,userId:rt.a.getUserId(),PatientID:i.PatientID,StudyInstanceUID:i.StudyInstanceUID};f[n.attribute]=Object.assign({},a,s);var p=r.addMeasurement(n.parentTool,f);Object.assign(a,p)}var m=_(a);m&&(a.labels=[m]),ot(),W.isToolIncluded(n)}},ct=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,W.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=t.toolType,i=r.tools[o];if(i){b.a.info("CornerstoneToolsMeasurementModified");var s=i.find((function(e){return e._id===a._id}));s&&((s=Object.assign(s,a)).viewport=N.a.getViewport(t.element),r.updateMeasurement(o,s),W.isToolIncluded(n))}},lt=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,W.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=r.tools[n.parentTool];if(o){b.a.info("CornerstoneToolsMeasurementModified");var i=o.find((function(e){return e._id===a._id})),s=i&&i[n.attribute];s&&((s=Object.assign(s,a)).viewport=N.a.getViewport(t.element),i[n.attribute]=s,r.updateMeasurement(n.parentTool,i),W.isToolIncluded(n))}};function ut(e){var t=e.eventData,n=e.tool;e.toolGroupId,e.toolGroup;b.a.info("CornerstoneToolsMeasurementRemoved");var r=t.measurementData,a=t.toolType,o=W.Instance;o||b.a.warn("Measurement API is not initialized");var i=o.tools[a];if(i){var s=o.toolsGroupsMap[a],c=i.find((function(e){return e._id===r._id}));if(c){var l=c.lesionNamingNumber,u=c.timepointId;o.deleteMeasurements(a,s,{lesionNamingNumber:l,timepointId:u}),ot(),W.isToolIncluded(n)}}}var ft=function(e){var t=e.eventData,n=e.tool;e.toolGroupId,e.toolGroup;b.a.info("CornerstoneToolsMeasurementRemoved");var r=t.measurementData,a=W.Instance;a||b.a.warn("Measurement API is not initialized");var o=a.tools[n.parentTool];if(o){var i=o.findIndex((function(e){return e._id===r._id})),s=i>-1?o[i]:null;s&&(1===s.childToolsCount?(o.splice(i,1),a.onMeasurementRemoved(n.parentTool,s)):(s[n.attribute]=null,s.childToolsCount=(s.childToolsCount||0)-1,a.updateMeasurement(n.parentTool,s)),ot(),W.isToolIncluded(n))}},pt=function(e){var t=e.detail;return t.toolName&&(t.toolType=t.toolName),t},mt={handleSingleMeasurementAdded:it,handleChildMeasurementAdded:st,handleSingleMeasurementModified:ct,handleChildMeasurementModified:lt,handleSingleMeasurementRemoved:ut,handleChildMeasurementRemoved:ft,onAdded:function(e){var t=pt(e),n=t.toolType,r=W.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?st(s):it(s))},onModified:function(e){var t=pt(e),n=t.toolType,r=W.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?lt(s):ct(s))},onRemoved:function(e){var t=pt(e),n=t.toolType,r=W.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?ft(s):ut(s))}},dt={id:"targets",name:"Targets",childTools:[s,h,v,g],options:{caseProgress:{include:!0,evaluate:!0}}},ht={id:"nonTargets",name:"Non-Targets",childTools:[p],options:{caseProgress:{include:!0,evaluate:!0}}},gt=n(63),vt=n.n(gt),yt=vt()([f,c]);yt.forEach((function(e){e.options=Object.assign({},e.options,{caseProgress:{include:!1,evaluate:!1}})}));var bt={id:"temp",name:"Temporary",childTools:yt,options:{caseProgress:{include:!1,evaluate:!1}}},wt=vt()([dt,ht,bt]);wt.forEach((function(e){e.childTools.forEach((function(t){t.toolGroup=e.id}))}));var Et={TimepointApi:j,MeasurementApi:W,ConformanceCriteria:nt,MeasurementHandlers:mt,ltTools:wt,tools:r,getLabel:_,getDescription:A,getImageAttributes:at,getImageIdForImagePath:L};t.a=Et},258:function(e,t,n){"use strict";var r=n(21),a=n(62),o=n(51);function i(e,t,n){var a={};return n.forEach((function(n){var o=r.a.getString(n["0020000E"]),i=a[o];i||(i={SeriesInstanceUID:o,SeriesNumber:r.a.getString(n["00200011"]),instances:[]},a[o]=i,i.push(i));var s=r.a.getString(n["00080018"]),c=e.wadoUriRoot+"?requestType=WADO&studyUID="+t+"&seriesUID="+o+"&objectUID="+s+"&contentType=application%2Fdicom";i.instances.push({SOPClassUID:r.a.getString(n["00080016"]),SOPInstanceUID:s,uri:c,InstanceNumber:r.a.getString(n["00200013"])})})),[]}var s=n(314),c=n(57);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if(!e)return"";var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),r=e.getDate().toString();return t="0".repeat(4-t.length).concat(t),n="0".repeat(2-n.length).concat(n),r="0".repeat(2-r.length).concat(r),"".concat(t,n,r)}function p(e){var t=[];if(e&&e.length)return e.forEach((function(e){return t.push({StudyInstanceUID:r.a.getString(e["0020000D"]),StudyDate:r.a.getString(e["00080020"]),StudyTime:r.a.getString(e["00080030"]),AccessionNumber:r.a.getString(e["00080050"]),referringPhysicianName:r.a.getString(e["00080090"]),PatientName:r.a.getName(e["00100010"]),PatientID:r.a.getString(e["00100020"]),PatientBirthdate:r.a.getString(e["00100030"]),patientSex:r.a.getString(e["00100040"]),studyId:r.a.getString(e["00200010"]),numberOfStudyRelatedSeries:r.a.getString(e["00201206"]),numberOfStudyRelatedInstances:r.a.getString(e["00201208"]),StudyDescription:r.a.getString(e["00081030"]),modalities:r.a.getString(r.a.getModalities(e["00080060"],e["00080061"]))})})),t}function m(e,t){var n=e.staticWado,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{url:e.qidoRoot,headers:r.a.getAuthorizationHeader(e),errorInterceptor:o.a.getHTTPErrorHandler(),requestHooks:[Object(c.a)()]}),m=n?new s.a(i):new a.a.DICOMwebClient(i);e.qidoSupportsIncludeField=void 0===e.qidoSupportsIncludeField||e.qidoSupportsIncludeField;var d={queryParams:function(e,t){var n=["00081030","00080060"].join(","),r={PatientName:e.PatientName,PatientID:e.PatientID,AccessionNumber:e.AccessionNumber,StudyDescription:e.StudyDescription,ModalitiesInStudy:e.ModalitiesInStudy,limit:e.limit,offset:e.offset,fuzzymatching:e.fuzzymatching,includefield:t?n:"all"};if(e.studyDateFrom||e.studyDateTo){var a=f(new Date(e.studyDateFrom)),o=f(new Date(e.studyDateTo));r.StudyDate="".concat(a,"-").concat(o)}if(e.StudyInstanceUID){var i=e.StudyInstanceUID;i=(i=Array.isArray(i)?i.join():i).replace(/[^0-9.]+/g,"\\"),r.StudyInstanceUID=i}var s={};return Object.keys(r).forEach((function(e){void 0!==r[e]&&""!==r[e]&&(s[e]=r[e])})),s}(t,e.qidoSupportsIncludeField)};return m.searchForStudies(d).then(p)}var d={RetrieveMetadata:n(264).a},h={Studies:m,Instances:function(e,t){var n={url:e.qidoRoot,headers:r.a.getAuthorizationHeader(e),errorInterceptor:o.a.getHTTPErrorHandler()},s=new a.a.DICOMwebClient(n),c=(getQIDOQueryParams(filter,e.qidoSupportsIncludeField),{studyInstanceUID:t});return s.searchForInstances(c).then((function(n){return{wadoUriRoot:e.wadoUriRoot,StudyInstanceUID:t,series:i(e,t,n.data)}}))}},g=n(171),v=n(12);var y=new Map;var b=n(261),w={services:{QIDO:h,WADO:d},loadingDict:{},retrieveStudyMetadata:g.b,deleteStudyMetadataPromise:g.a,retrieveStudiesMetadata:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];t.forEach((function(t){var o=Object(g.b)(e,t,n,r);a.push(o)}));var o=Promise.all(a);return o.catch((function(e){return v.a.warn(e)})),o},getStudyBoxData:!1,searchStudies:function(e,t){var n={qidoRoot:e.qidoRoot,filter:t},r=JSON.stringify(n);if(y.has(r))return y.get(r);var a=m(e,t);return y.set(r,a),a},sortStudy:b.a};t.a=w},259:function(e,t,n){"use strict";function r(e,t){var n=function(e,t){var n=e.wadorsuri;if(n)return null===t?n=n.replace(/frames\/(\d+)/,""):(t=t?parseInt(t)+1:1,n=n.replace(/frames\/(\d+)/,"frames/".concat(t))),n}(e,t);if(n)return"wadors:".concat(n)}n.d(t,"a",(function(){return r}))},260:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(21),a=n(211),o=Symbol("INFO");function i(e){var t=e[o];if(!t){var n=r.a.getString(e["00080060"],"").toUpperCase();t=Object.freeze({Modality:n,isLowPriority:Object(a.a)(n),SeriesInstanceUID:r.a.getString(e["0020000E"]),SeriesNumber:r.a.getNumber(e["00200011"],0)||0}),e[o]=t}return t}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var r=n(260);var a={default:function(e,t){return e.SeriesNumber-t.SeriesNumber},seriesInfoSortingCriteria:function(e,t){var n=Object(r.a)(e),a=Object(r.a)(t);return!n.isLowPriority&&a.isLowPriority?-1:n.isLowPriority&&!a.isLowPriority?1:n.SeriesNumber-a.SeriesNumber}},o={default:function(e,t){return e.InstanceNumber-t.InstanceNumber}},i={seriesSortCriteria:a,instancesSortCriteria:o},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default;return e.sort(t)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return e.sort(t)};function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.default;if(!e||!e.series)throw new Error("Insufficient study data was provided to sortStudy");return s(e.series,n),t&&e.series.forEach((function(e){c(e.instances,r)})),e}},264:function(e,t,n){"use strict";var r=n(62),a=n(21),o=n(118),i=n(259),s=n(29),c=n.n(s),l=function(e){var t=e["00081115"],n=[];return t&&t.Value&&t.Value.forEach((function(e){var t=a.a.getString(e["0020000E"]),r=e["0008114A"],o=[];r.Value.forEach((function(e){o.push({referencedSOPClassUID:a.a.getString(e["00081150"]),referencedSOPInstanceUID:a.a.getString(e["00081155"])})})),n.push({referencedSeriesInstanceUID:t,referencedInstanceSequence:o})})),n};function u(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,s,"next",e)}function s(e){u(o,r,a,i,s,"throw",e)}i(void 0)}))}}function p(e,t){return{series:[],seriesMap:Object.create(null),seriesLoader:null,wadoUriRoot:e.wadoUriRoot,wadoRoot:e.wadoRoot,qidoRoot:e.qidoRoot,PatientName:a.a.getName(t["00100010"]),PatientID:a.a.getString(t["00100020"]),PatientAge:a.a.getNumber(t["00101010"]),PatientSize:a.a.getNumber(t["00101020"]),PatientWeight:a.a.getNumber(t["00101030"]),AccessionNumber:a.a.getString(t["00080050"]),StudyTime:a.a.getString(t["00080030"]),StudyDate:a.a.getString(t["00080020"]),FrameOfReferenceUID:a.a.getString(t["00200052"]),ReferencedSeriesSequence:l(t),modalities:a.a.getString(t["00080061"]),StudyDescription:a.a.getString(t["00081030"]),NumberOfStudyRelatedInstances:a.a.getString(t["00201208"]),StudyInstanceUID:a.a.getString(t["0020000D"]),InstitutionName:a.a.getString(t["00080080"])}}function m(e,t,n,r){var a=[];a.push("requestType=WADO"),a.push("studyUID=".concat(t)),a.push("seriesUID=".concat(n)),a.push("objectUID=".concat(r)),a.push("contentType=application/dicom"),a.push("transferSyntax=*");var o=a.join("&");return"".concat(e.wadoUriRoot,"?").concat(o)}function d(e,t,n,r){return"".concat(e.wadoRoot,"/studies/").concat(t,"/series/").concat(n,"/instances/").concat(r)}function h(e,t,n,r,a){var o=d(e,t,n,r);return a=null!=a||1,"".concat(o,"/frames/").concat(a)}function g(e,t,n){return v.apply(this,arguments)}function v(){return(v=f(regeneratorRuntime.mark((function e(t,n,r){var a,s,l,u,f,p,g,v,y,b,w,E,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.addInstance(r,{server:t});case 2:if(a=e.sent,s=a.StudyInstanceUID,l=a.SeriesInstanceUID,u=a.SOPInstanceUID,(f=n.seriesMap[l])?(void 0===f.SeriesDate&&(f.SeriesDate=a.SeriesDate),void 0===f.SeriesTime&&(f.SeriesTime=a.SeriesTime)):(f={SeriesInstanceUID:l,SeriesDescription:a.SeriesDescription,Modality:a.Modality,SeriesNumber:a.SeriesNumber,SeriesDate:a.SeriesDate,SeriesTime:a.SeriesTime,instances:[]},n.seriesMap[l]=f,n.series.push(f)),p=m(t,s,l,u),g=d(t,s,l,u),v=h(t,s,l,u),y={metadata:a,baseWadoRsUri:g,wadouri:p,wadorsuri:v,wadoRoot:t.wadoRoot,imageRendering:t.imageRendering,thumbnailRendering:t.thumbnailRendering},f.instances.push(y),"wadors"===y.thumbnailRendering||"wadors"===y.imageRendering)if(b=Object.assign(r),w=y.metadata.NumberOfFrames)for(E=0;E<w;E++)S=Object(i.a)(y,E),c.a.wadors.metaDataManager.add(S,b);else O=Object(i.a)(y),c.a.wadors.metaDataManager.add(O,b);return e.abrupt("return",y);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return b.apply(this,arguments)}function b(){return(b=f(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r.map((function(e){return g(t,n,e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=f(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.isArray(n)&&n.length>0)){e.next=6;break}return r=n[0],a=p(t,r),e.next=5,y(t,a,n);case 5:return e.abrupt("return",a);case 6:throw new Error("Failed to create study out of provided SOP instance list");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function E(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){E(o,r,a,i,s,"next",e)}function s(e){E(o,r,a,i,s,"throw",e)}i(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.studyInstanceUID=n,this.filters=r}var t,n,r,a,o,i,s,c,l;return t=e,(n=[{key:"execLoad",value:(l=S(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configLoad();case 2:return e.next=4,this.preLoad();case 4:return t=e.sent,e.next=7,this.load(t);case 7:return n=e.sent,e.next=10,this.posLoad(n);case 10:return r=e.sent,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"runLoaders",value:(c=S(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,a=!1,o=void 0,e.prev=3,i=t[Symbol.iterator]();case 5:if(r=(s=i.next()).done){e.next=21;break}return c=s.value,e.prev=7,e.next=10,c();case 10:if(!(n=e.sent)||!n.length){e.next=13;break}return e.abrupt("break",21);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(7),e.t0;case 18:r=!0,e.next=5;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(3),a=!0,o=e.t1;case 27:e.prev=27,e.prev=28,r||null==i.return||i.return();case 30:if(e.prev=30,!a){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(27);case 35:if(!t.next().done||n){e.next=37;break}throw new Error("RetrieveMetadataLoader failed");case 37:return e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,null,[[3,23,27,35],[7,15],[28,,30,34]])}))),function(e){return c.apply(this,arguments)})},{key:"configLoad",value:(s=S(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"preLoad",value:(i=S(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"load",value:(o=S(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"posLoad",value:(a=S(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}])&&O(t.prototype,n),r&&O(t,r),e}(),P=n(51),C=n(57);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){j(o,r,a,i,s,"next",e)}function s(e){j(o,r,a,i,s,"throw",e)}i(void 0)}))}}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,N(t).apply(this,arguments))}var n,o,i,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(o=[{key:"getOptions",value:function(){var e={studyInstanceUID:this.studyInstanceUID},t=this.filters.seriesInstanceUID;return t&&(e.seriesInstanceUID=t),e}},{key:"getLoaders",value:regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.studyInstanceUID,r=this.filters,a=(r=void 0===r?{}:r).seriesInstanceUID,o=this.client,a&&t.push(o.retrieveSeriesMetadata.bind(o,{studyInstanceUID:n,seriesInstanceUID:a})),t.push(o.retrieveStudyMetadata.bind(o,{studyInstanceUID:n})),e.delegateYield(t,"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"configLoad",value:function(){var e=this.server,t=new r.a.DICOMwebClient({url:e.wadoRoot,headers:a.a.getAuthorizationHeader(e),errorInterceptor:P.a.getHTTPErrorHandler(),requestHooks:[Object(C.a)()]});this.client=t}},{key:"load",value:(c=x(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getLoaders(),r=this.runLoaders(n),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"posLoad",value:(s=x(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.server,e.abrupt("return",w(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})}])&&D(n.prototype,o),i&&D(n,i),t}(I),R=n(314),M=n(47),L=n(261),U=n(260);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,s,"next",e)}function s(e){W(o,r,a,i,s,"throw",e)}i(void 0)}))}}var J=M.b.data.DicomMetaDictionary.naturalizeDataset;function K(e,t,n){var r;t.seriesLoader=Object.freeze({hasNext:function(){return n.hasNext()},next:(r=Y(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.next();case 2:return a=r.sent,r.next=5,y(e,t,a.sopInstances);case 5:return r.abrupt("return",t.seriesMap[a.seriesInstanceUID]);case 6:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})})}function X(e,t,n){return Object.freeze({hasNext:function(){return n.length>0},next:(r=Y(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.shift(),r.next=3,e.retrieveSeriesMetadata({studyInstanceUID:t,seriesInstanceUID:a});case 3:return o=r.sent,r.abrupt("return",{studyInstanceUID:t,seriesInstanceUID:a,sopInstances:o});case 5:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})});var r}var Q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,q(t).apply(this,arguments))}var n,r,o,i,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"configLoad",value:function(){var e=this.server,t=new R.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{url:e.qidoRoot,headers:a.a.getAuthorizationHeader(e),errorInterceptor:P.a.getHTTPErrorHandler(),requestHooks:[Object(C.b)()]}));this.client=t}},{key:"getPreLoaders",value:regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.studyInstanceUID,r=this.filters,a=(r=void 0===r?{}:r).seriesInstanceUID,o=this.client,a&&(i={studyInstanceUID:n,queryParams:{SeriesInstanceUID:a}},t.push(o.searchForSeries.bind(o,i))),t.push(o.searchForSeries.bind(o,{studyInstanceUID:n})),e.delegateYield(t,"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"preLoad",value:(c=Y(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPreLoaders(),e.next=3,this.runLoaders(t);case 3:return n=e.sent,r=Object(L.b)(n,L.c.seriesSortCriteria.seriesInfoSortingCriteria),a=r.map((function(e){return Object(U.a)(e).SeriesInstanceUID})),e.abrupt("return",{seriesInstanceUIDsMap:a,seriesData:n});case 7:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"load",value:(s=Y(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.client,r=this.studyInstanceUID,a=X(n,r,t.seriesInstanceUIDsMap),e.next=4,a.next();case 4:return o=e.sent,e.abrupt("return",{sopInstances:o.sopInstances,asyncLoader:a,seriesData:t.seriesData});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"posLoad",value:(i=Y(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.server,r=t.sopInstances,a=t.asyncLoader,o=t.seriesData,e.next=4,w(n,r);case 4:return i=e.sent,o.map(J).forEach((function(e,t){var n={SeriesInstanceUID:e.SeriesInstanceUID,SeriesDescription:e.SeriesDescription,SeriesNumber:e.SeriesNumber,Modality:e.Modality,instances:[]};i.series[t]?i.series[t]=Object.assign(n,i.series[t]):i.series[t]=n,i.seriesMap[e.SeriesInstanceUID]=i.series[t]})),a.hasNext()&&K(n,i,a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&z(n.prototype,r),o&&z(n,o),t}(I);function Z(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function $(){var e;return e=regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},a=0!=t.enableStudyLazyLoad?Q:A,o=new a(t,n,r),i=o.execLoad(),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})),($=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Z(o,r,a,i,s,"next",e)}function s(e){Z(o,r,a,i,s,"throw",e)}i(void 0)}))}).apply(this,arguments)}t.a=function(e,t){return $.apply(this,arguments)}},268:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(19),c=n(27),l=n(67),u=n(22),f=n(11),p=n(3),m=n.n(p),d=n(4),h=n.n(d),g=n(765),v=n.n(g),y=n(316),b=n.n(y),w=n(104),E=n.n(w),S=u.a.log,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.cornerstoneTools=h.a,h.a.external.cornerstone=m.a,h.a.external.Hammer=b.a,h.a.external.cornerstoneMath=E.a,h.a.init(e),h.a.loadHandlerManager.setErrorLoadingHandler((function(e,t,n){throw S.error(t),n}));var t="Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif";h.a.textStyle.setFont("16px ".concat(t)),h.a.toolStyle.setToolWidth(2),h.a.toolColors.setToolColor("rgb(255, 255, 0)"),h.a.toolColors.setActiveColor("rgb(0, 255, 0)"),h.a.store.state.touchProximity=40,h.a.stackPrefetch.setConfiguration({maxImagesToPrefetch:e.maxImagesToPrefetch,preserveExistingPool:e.preserveExistingPool,maxSimultaneousRequests:e.maxSimultaneousRequests})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=["Length","EllipticalRoi","RectangleRoi","ArrowAnnotate"],k=function(e){var t=function(e){var t=m.a.getEnabledElement(e).image.imageId,n=m.a.metaData.get("instance",t);return{SOPInstanceUID:n.SOPInstanceUID,FrameOfReferenceUID:n.FrameOfReferenceUID,SeriesInstanceUID:n.SeriesInstanceUID}},n=function(t){var n=e.VALUE_TYPES,r=n.POLYLINE;return{Length:r,EllipticalRoi:n.ELLIPSE,RectangleRoi:r,ArrowAnnotate:n.POINT}[t]},r=function(e){var t=[];return Object.keys(e).map((function(n){if(["start","end"].includes(n)){var r={};e[n].x&&(r.x=e[n].x),e[n].y&&(r.y=e[n].y),t.push(r)}})),t},a=function(e){return e.map((function(e,t){return t%10==0?{start:e}:{end:e}})).reduce((function(e,t){return Object.assign(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}),{})};return{toAnnotation:function(e,t){var n=e.id,r=e.label,o=e.description,i=e.points,s=e.unit;return{toolName:t,measurementData:{sopInstanceUid:e.SOPInstanceUID,frameOfReferenceUID:e.FrameOfReferenceUID,SeriesInstanceUID:e.referenceSeriesUID,unit:s,text:r,description:o,handles:a(i),_measurementServiceId:n}}},toMeasurement:function(e){var a,o=e.element,i=e.measurementData,s=e.toolType||e.toolName||i.toolType;if(a=s,!C.includes(a))throw new Error("Tool not supported");var c=t(o),l=c.SOPInstanceUID,u=c.FrameOfReferenceUID,f=c.SeriesInstanceUID;return[].push(i.handles),{id:i._measurementServiceId,SOPInstanceUID:l,FrameOfReferenceUID:u,referenceSeriesUID:f,label:i.text,description:i.description,unit:i.unit,area:i.cachedStats&&i.cachedStats.area,type:n(s),points:r(i.handles)}}}},j={TrackingUniqueIdentifier:null,trackingIdentifiersByEnabledElementUUID:{}};var x={state:j,getters:{trackingUniqueIdentifiersForElement:function(e){var t=m.a.getEnabledElement(e).uuid;return j.trackingIdentifiersByEnabledElementUUID[t]?j.trackingIdentifiersByEnabledElementUUID[t]:{trackingUniqueIdentifiers:[]}}},setters:{trackingUniqueIdentifiersForElement:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=m.a.getEnabledElement(e).uuid;j.trackingIdentifiersByEnabledElementUUID[r]={trackingUniqueIdentifiers:t,activeIndex:n}},activeTrackingUniqueIdentifierForElement:function(e,t){var n=m.a.getEnabledElement(e).uuid,r=j.trackingIdentifiersByEnabledElementUUID[n];if(r){var a=r.trackingUniqueIdentifiers.findIndex((function(e){return e===t}));r.activeIndex=a}}}},D=n(425);function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=e.servicesManager,n=e.configuration,r=t.services,a=r.UIDialogService,o=r.MeasurementService;h.a.register("module",D.a,x);var i=function(e,t,n){if(a)var r=a.create({centralize:!0,isDraggable:!1,content:f.r.InputDialog,useLastPosition:!1,showOverlay:!0,contentProps:{title:"Enter your annotation",label:"New label",measurementData:e?{description:e.text}:{},onClose:function(){return a.dismiss({id:r})},onSubmit:function(e){n(e),a.dismiss({id:r})}}})},s=n.csToolsConfig,c=n.stackPrefetch,l=void 0===c?{maxImagesToPrefetch:1/0,preserveExistingPool:!1,maxSimultaneousRequests:20}:c,p=u.a.cornerstone.metadataProvider;m.a.metaData.addProvider(p.get.bind(p),9999),O(_({},s||{globalToolSyncEnabled:!0,showSVGCursors:!0,autoResizeViewports:!1},{},l));var d={touch:[h.a.PanMultiTouchTool,h.a.ZoomTouchPinchTool],annotations:[h.a.ArrowAnnotateTool,h.a.BidirectionalTool,h.a.LengthTool,h.a.AngleTool,h.a.FreehandRoiTool,h.a.EllipticalRoiTool,h.a.DragProbeTool,h.a.RectangleRoiTool],other:[h.a.PanTool,h.a.ZoomTool,h.a.WwwcTool,h.a.WwwcRegionTool,h.a.MagnifyTool,h.a.StackScrollTool,h.a.StackScrollMouseWheelTool,h.a.OverlayTool]},g=[];Object.keys(d).forEach((function(e){return g.push.apply(g,T(d[e]))})),M(o);var y={ArrowAnnotate:{configuration:{getTextCallback:function(e,t){return i(null,0,e)},changeTextCallback:function(e,t,n){return i(e,0,n)}}}};g.forEach((function(e){var t=e.name.replace("Tool",""),r=(n.tools||{})[t]||{},a=y[t]||{},o=v()(a,function(e,t){var r=d.annotations.filter((function(e){return!["RectangleRoiTool","EllipticalRoiTool"].includes(e.name)})),a=_({},e);return!1!==n.hideHandles&&r.includes(t)&&(e.configuration?a.configuration.drawHandlesOnHover=!0:a.configuration={drawHandlesOnHover:!0}),a}(r,e));h.a.addTool(e,o)}));var b=h.a.importInternal("base/BaseAnnotationTool");g.forEach((function(e){if(e.prototype instanceof b){var t=(new e).name;h.a.setToolPassive(t)}})),h.a.setToolActive("Pan",{mouseButtonMask:4}),h.a.setToolActive("Zoom",{mouseButtonMask:2}),h.a.setToolActive("Wwwc",{mouseButtonMask:1}),h.a.setToolActive("StackScrollMouseWheel",{}),h.a.setToolActive("PanMultiTouch",{pointers:2}),h.a.setToolActive("ZoomTouchPinch",{}),h.a.setToolEnabled("Overlay",{})}var M=function(e){var t=function(e){var t=k(e),n=t.toAnnotation,r=t.toMeasurement,a=e.createSource("CornerstoneTools","4"),o={valueType:e.VALUE_TYPES.POLYLINE,points:2};return e.addMapping(a,"Length",o,n,r),a}(e),n=t.id,r=t.addOrUpdate,a=t.getAnnotation;m.a.events.addEventListener(m.a.EVENTS.ELEMENT_ENABLED,(function(t){var o=e.EVENTS,i=o.MEASUREMENT_ADDED,s=o.MEASUREMENT_UPDATED;e.subscribe(i,(function(e){var t=e.source,r=e.measurement;if(![n].includes(t.id)){var o=a("Length",r.id);console.log("Measurement Service [Cornerstone]: Measurement added",r),console.log("Mapped annotation:",o)}})),e.subscribe(s,(function(e){var t=e.source,r=e.measurement;if(![n].includes(t.id)){var o=a("Length",r.id);console.log("Measurement Service [Cornerstone]: Measurement updated",r),console.log("Mapped annotation:",o)}}));var c=function(e,t){var n=t.measurementData;Object.assign(n,{_measurementServiceId:e})};[h.a.EVENTS.MEASUREMENT_ADDED,h.a.EVENTS.MEASUREMENT_MODIFIED].forEach((function(e){t.detail.element.addEventListener(e,(function(t){var n=t.detail;console.log("Cornerstone Element Event: ".concat(e)),function(e){try{var t=e.toolName,n=e.toolType,a=e.measurementData,o=t||a.toolType||n;e.id=a._measurementServiceId;var i=r(o,e);a._measurementServiceId||c(i,e)}catch(e){console.warn("Failed to add or update measurement:",e)}}(n)}))}))}))},L=n(408),U=L.a.actions.setLayout,F=function(){var e=U({numRows:1,numColumns:1,viewports:[{plugin:"cornerstone"}]});window.store.dispatch(e)},V=n(84),B=n(202),z=function(e){var t=e.onClose,n=e.activeViewportIndex,r=Object(V.a)(n);return a.a.createElement(f.C,{onClose:t,minimumSize:100,maximumSize:1e4,defaultSize:512,canvasClass:"cornerstone-canvas",activeViewport:r,enableViewport:function(e){e&&m.a.enable(e)},disableViewport:function(e){e&&m.a.disable(e)},updateViewportPreview:function(e,t,n){return new Promise((function(r){m.a.fitToWindow(e),e.addEventListener("cornerstoneimagerendered",(function a(o){var i=m.a.getEnabledElement(o.target).element,s="image/"+n,c=t.toDataURL(s,1),l=i.offsetHeight,u=i.offsetWidth;if(l>512||u>512){var f=512/Math.max(l,u);u*=f,l*=f}r({dataUrl:c,width:l,height:u}),e.removeEventListener("cornerstoneimagerendered",a)}))}))},loadImage:function(e,t,n,r){return new Promise((function(a){if(e&&t){var o=m.a.getEnabledElement(e),i=Object.assign({},o.viewport);delete i.scale,i.translation={x:0,y:0},m.a.loadImage(o.image.imageId).then((function(e){m.a.displayImage(t,e),m.a.setViewport(t,i),m.a.resize(t,!0);var o=Math.min(n||e.width,1e4),s=Math.min(r||e.height,1e4);a({image:e,width:o,height:s})}))}}))},toggleAnnotations:function(e,t){h.a.store.state.tools.forEach((function(n){var r=n.name;e?h.a.setToolEnabledForElement(t,r):h.a.setToolDisabledForElement(t,r)}))},downloadBlob:function(e,t,n,r){var a="".concat(e,".").concat(t),o="image/".concat(t);if(r.msToBlob&&"jpeg"===t){var i=r.toDataURL(o,1),s=B.a.b64toBlob(i.replace("data:image/jpeg;base64,",""),o);return window.navigator.msSaveBlob(s,a)}n.querySelector("canvas").toBlob((function(e){var t=window.URL||window.webkitURL,n=document.createElement("a");n.href=t.createObjectURL(e),n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}})};z.propTypes={onClose:i.a.func,activeViewportIndex:i.a.number.isRequired};var H=z,q=h.a.import("util/scroll"),G=u.a.utils.studyMetadataManager,W=u.a.redux.actions.setViewportSpecificData,Y=function(){m.a.getEnabledElements().forEach((function(e){e.image&&m.a.updateImage(e.element)}))},J=function(e){var t=e.servicesManager,n={rotateViewport:function(e){var t=e.viewports,n=e.rotation,r=Object(V.a)(t.activeViewportIndex);if(r){var a=m.a.getViewport(r);a.rotation+=n,m.a.setViewport(r,a)}},flipViewportHorizontal:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);if(n){var r=m.a.getViewport(n);r.hflip=!r.hflip,m.a.setViewport(n,r)}},flipViewportVertical:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);if(n){var r=m.a.getViewport(n);r.vflip=!r.vflip,m.a.setViewport(n,r)}},scaleViewport:function(e){var t=e.direction,n=e.viewports,r=Object(V.a)(n.activeViewportIndex),a=.15*t;if(r)if(a){var o=m.a.getViewport(r);o.scale+=a,m.a.setViewport(r,o)}else m.a.fitToWindow(r)},resetViewport:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);n&&m.a.reset(n)},invertViewport:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);if(n){var r=m.a.getViewport(n);r.invert=!r.invert,m.a.setViewport(n,r)}},setToolActive:function(e){var t=e.toolName;t||console.warn("No toolname provided to setToolActive command"),h.a.setToolActive(t,{mouseButtonMask:1})},clearAnnotations:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);if(n){var r=m.a.getEnabledElement(n);if(r&&r.image){var a=h.a.globalImageIdSpecificToolStateManager.toolState;if(a&&!1!==a.hasOwnProperty(r.image.imageId)){var o=a[r.image.imageId],i=[];Object.keys(o).forEach((function(e){o[e].data.forEach((function(t){var n=t._id,r=t.lesionNamingNumber,a=t.measurementNumber;n&&i.push({toolType:e,_id:n,lesionNamingNumber:r,measurementNumber:a})}))})),i.forEach((function(e){u.a.measurements.MeasurementHandlers.onRemoved({detail:{toolType:e.toolType,measurementData:e}})}))}}}},nextImage:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);q(n,1)},previousImage:function(e){var t=e.viewports,n=Object(V.a)(t.activeViewportIndex);q(n,-1)},getActiveViewportEnabledElement:function(e){var t=e.viewports;return Object(V.a)(t.activeViewportIndex)},showDownloadViewportModal:function(e){var n=e.title,r=e.viewports.activeViewportIndex,a=t.services.UIModalService;a&&a.show({content:H,title:n,contentProps:{activeViewportIndex:r,onClose:a.hide}})},updateTableWithNewMeasurementData:function(e){var t=e.toolType,n=e.measurementNumber,r=e.location,a=e.description,o=u.a.measurements.MeasurementApi.Instance;o.tools[t].filter((function(e){return e.measurementNumber===n})).forEach((function(e){e.location=r,e.description=a,o.updateMeasurement(e.toolType,e)})),o.syncMeasurementsAndToolData(),Y()},getNearbyToolData:function(e){var t=e.element,n=e.canvasCoordinates,r=e.availableToolTypes,a={},o=!1;return r.forEach((function(e){var r=h.a.getToolState(t,e);if(r)return r.data.forEach((function(r,i){var s=h.a.getToolForElement(t,e);s||(s=h.a.getToolForElement(t,"".concat(e,"Tool"))),s?s.pointNearTool(t,r,n)&&(o=!0,a.tool=r,a.index=i,a.toolType=e):console.warn("Tool not found.")})),!o&&void 0})),o?a:void 0},removeToolState:function(e){var t=e.element,n=e.toolType,r=e.tool;h.a.removeToolState(t,n,r),m.a.updateImage(t)},setCornerstoneLayout:function(){F()},setWindowLevel:function(e){var t=e.viewports,n=e.window,r=e.level,a=Object(V.a)(t.activeViewportIndex);if(a){var o=m.a.getViewport(a);o.voi={windowWidth:Number(n),windowCenter:Number(r)},m.a.setViewport(a,o)}},jumpToImage:function(e){var t=e.StudyInstanceUID,n=e.SOPInstanceUID,r=e.frameIndex,a=e.activeViewportIndex,o=e.refreshViewports,i=void 0===o||o,s=G.get(t).findDisplaySet((function(e){return e.images&&e.images.find((function(e){return e.getSOPInstanceUID()===n}))}));s&&(s.SOPInstanceUID=n,s.frameIndex=r,window.store.dispatch(W(a,s)),i&&Y())}};return{actions:n,definitions:{jumpToImage:{commandFn:n.jumpToImage,storeContexts:[],options:{}},getNearbyToolData:{commandFn:n.getNearbyToolData,storeContexts:[],options:{}},removeToolState:{commandFn:n.removeToolState,storeContexts:[],options:{}},updateTableWithNewMeasurementData:{commandFn:n.updateTableWithNewMeasurementData,storeContexts:[],options:{}},showDownloadViewportModal:{commandFn:n.showDownloadViewportModal,storeContexts:["viewports"],options:{}},getActiveViewportEnabledElement:{commandFn:n.getActiveViewportEnabledElement,storeContexts:["viewports"],options:{}},rotateViewportCW:{commandFn:n.rotateViewport,storeContexts:["viewports"],options:{rotation:90}},rotateViewportCCW:{commandFn:n.rotateViewport,storeContexts:["viewports"],options:{rotation:-90}},invertViewport:{commandFn:n.invertViewport,storeContexts:["viewports"],options:{}},flipViewportVertical:{commandFn:n.flipViewportVertical,storeContexts:["viewports"],options:{}},flipViewportHorizontal:{commandFn:n.flipViewportHorizontal,storeContexts:["viewports"],options:{}},scaleUpViewport:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:1}},scaleDownViewport:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:-1}},fitViewportToWindow:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:0}},resetViewport:{commandFn:n.resetViewport,storeContexts:["viewports"],options:{}},clearAnnotations:{commandFn:n.clearAnnotations,storeContexts:["viewports"],options:{}},nextImage:{commandFn:n.nextImage,storeContexts:["viewports"],options:{}},previousImage:{commandFn:n.previousImage,storeContexts:["viewports"],options:{}},setToolActive:{commandFn:n.setToolActive,storeContexts:[],options:{}},setZoomTool:{commandFn:n.setToolActive,storeContexts:[],options:{toolName:"Zoom"}},setCornerstoneLayout:{commandFn:n.setCornerstoneLayout,storeContexts:[],options:{},context:"VIEWER"},setWindowLevel:{commandFn:n.setWindowLevel,storeContexts:["viewports"],options:{}}},defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"}},K={COMMAND:"command",SET_TOOL_ACTIVE:"setToolActive",BUILT_IN:"builtIn"},X={CINE:"CINE",DOWNLOAD_SCREEN_SHOT:"DOWNLOAD_SCREEN_SHOT"},Q={definitions:[{id:"StackScroll",label:"Stack Scroll",icon:"bars",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"StackScroll"}},{id:"Zoom",label:"Zoom",icon:"search-plus",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Zoom"}},{id:"Wwwc",label:"Levels",icon:"level",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Wwwc"}},{id:"Pan",label:"Pan",icon:"arrows",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Pan"}},{id:"Length",label:"Length",icon:"measure-temp",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Length"}},{id:"ArrowAnnotate",label:"Annotate",icon:"measure-non-target",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"ArrowAnnotate"}},{id:"Angle",label:"Angle",icon:"angle-left",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Angle"}},{id:"Reset",label:"Reset",icon:"reset",type:K.COMMAND,commandName:"resetViewport"},{id:"Cine",label:"CINE",icon:"youtube",type:K.BUILT_IN,options:{behavior:X.CINE}},{id:"More",label:"More",icon:"ellipse-circle",buttons:[{id:"Magnify",label:"Magnify",icon:"circle",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Magnify"}},{id:"WwwcRegion",label:"ROI Window",icon:"stop",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"WwwcRegion"}},{id:"DragProbe",label:"Probe",icon:"dot-circle",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"DragProbe"}},{id:"EllipticalRoi",label:"Ellipse",icon:"circle-o",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"EllipticalRoi"}},{id:"RectangleRoi",label:"Rectangle",icon:"square-o",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"RectangleRoi"}},{id:"Invert",label:"Invert",icon:"adjust",type:K.COMMAND,commandName:"invertViewport"},{id:"RotateRight",label:"Rotate Right",icon:"rotate-right",type:K.COMMAND,commandName:"rotateViewportCW"},{id:"FlipH",label:"Flip H",icon:"ellipse-h",type:K.COMMAND,commandName:"flipViewportHorizontal"},{id:"FlipV",label:"Flip V",icon:"ellipse-v",type:K.COMMAND,commandName:"flipViewportVertical"},{id:"Clear",label:"Clear",icon:"trash",type:K.COMMAND,commandName:"clearAnnotations"},{id:"Bidirectional",label:"Bidirectional",icon:"measure-target",type:K.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Bidirectional"}},{id:"Download",label:"Download",icon:"create-screen-capture",type:K.BUILT_IN,options:{behavior:X.DOWNLOAD_SCREEN_SHOT,togglable:!0}}]},{id:"Exit2DMPR",label:"Exit 2D MPR",icon:"times",type:K.COMMAND,commandName:"setCornerstoneLayout",context:"ACTIVE_VIEWPORT::VTK"}],defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"},Z=n(769);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ee=a.a.lazy((function(){return Promise.all([n.e(18),n.e(8)]).then(n.bind(null,1468))})),te=function(e){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(ee,e))},ne={id:"cornerstone",version:Z.a,preRegistration:function(e){var t=e.servicesManager,n=e.configuration;R({servicesManager:t,configuration:void 0===n?{}:n})},getViewportModule:function(e){var t=e.commandsManager,n=e.appConfig;return function(e){var r=n.studyPrefetcher,o=r&&!r.enabled;return a.a.createElement(te,$({},e,{onNewImage:function(e){e.refreshViewports=!1,t.runCommand("jumpToImage",e)},isStackPrefetchEnabled:o}))}},getToolbarModule:function(){return Q},getCommandsModule:function(e){var t=e.servicesManager;return J({servicesManager:t})}},re=n(404),ae=n(1417),oe=n(1418),ie=n(1419),se=n(1420),ce=n(1430),le=n(1421),ue=n(1416),fe=n(32),pe=n(31),me=n(329),de=n.n(me);function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge=Object(s.b)((function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated,isInvestigatorAuthenticated:e.auth.isInvestigatorAuthenticated,isHealthProfessionalAuthenticated:e.auth.isHealthProfessionalAuthenticated,isSuperuserAuthenticated:e.auth.isSuperuserAuthenticated}}),{logout:fe.k})((function(e){var t=e.logout,n=e.isAuthenticated,o=e.isInvestigatorAuthenticated,i=e.isHealthProfessionalAuthenticated,s=e.isSuperuserAuthenticated,u=e.user,p=he(Object(r.useState)(!1),2),m=p[0],d=p[1],h=function(){t(),pe.b.success("Logged out!",{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),d(!0),localStorage.clear()},g=function(){t()};return n&&o?a.a.createElement(r.Fragment,null,a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#ffffff"}},a.a.createElement(f.g,{style:{color:"#00BFFF",height:"30px",width:"40px"},name:"brain",className:"header-logo-image"}),a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},a.a.createElement("ul",{className:"navbar-nav"},a.a.createElement("li",{className:"nav-item active"},a.a.createElement(c.b,{className:"nav-link",to:"/"},"Home ",a.a.createElement("span",{className:"sr-only"},"(current)"))),a.a.createElement(r.Fragment,null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/model"},"Add AI Algorithm")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/modelList"},"Model List")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/studylist"},"Study List")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/local"},"View Local Studies")),u&&!u.social_apps?a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/twoFA"},a.a.createElement(f.g,{name:"check",style:{marginRight:"5px",marginTop:"-5px"}}),"2 Factor Authentication")):null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/view_groups"},a.a.createElement(f.g,{name:"user",style:{marginRight:"5px",marginTop:"-5px"}}),"Research Groups"))))),a.a.createElement("div",{style:{float:"right"}},a.a.createElement("button",{style:{backgroundColor:"#ffffff",color:"#00BFFF",borderRadius:"5px",padding:"6px 6px"},className:"btn btn-info btn-lg",onClick:h},a.a.createElement("span",{className:"glyphicon glyphicon-log-out"}),"Log out",a.a.createElement(de.a,{style:{marginLeft:"4px"}})))),m?a.a.createElement(l.a,{to:"/"}):a.a.createElement(r.Fragment,null)):n&&i?a.a.createElement(r.Fragment,null,a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#ffffff"}},a.a.createElement(f.g,{style:{color:"#00BFFF",height:"30px",width:"40px"},name:"brain",className:"header-logo-image"}),a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},a.a.createElement("ul",{className:"navbar-nav"},a.a.createElement("li",{className:"nav-item active"},a.a.createElement(c.b,{className:"nav-link",to:"/"},"Home ",a.a.createElement("span",{className:"sr-only"},"(current)"))),a.a.createElement(r.Fragment,null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/studylist"},"Study List")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/local"},"View Local Studies")),u&&!u.social_apps?a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/twoFA"},a.a.createElement(f.g,{name:"check",style:{marginRight:"5px",marginTop:"-5px"}}),"2 Factor Authentication")):null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/view_groups"},a.a.createElement(f.g,{name:"user",style:{marginRight:"5px",marginTop:"-5px"}}),"Study Groups"))))),a.a.createElement("div",{style:{float:"right"}},a.a.createElement("button",{style:{backgroundColor:"#ffffff",color:"#00BFFF",borderRadius:"5px",padding:"6px 6px"},className:"btn btn-info btn-lg",onClick:h},a.a.createElement("span",{className:"glyphicon glyphicon-log-out"}),"Log out",a.a.createElement(de.a,{style:{marginLeft:"4px"}})))),m?a.a.createElement(l.a,{to:"/"}):a.a.createElement(r.Fragment,null)):n&&s?a.a.createElement(r.Fragment,null,a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#ffffff"}},a.a.createElement(f.g,{style:{color:"#00BFFF",height:"30px",width:"40px"},name:"brain",className:"header-logo-image"}),a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},a.a.createElement("ul",{className:"navbar-nav"},a.a.createElement("li",{className:"nav-item active"},a.a.createElement(c.b,{className:"nav-link",to:"/"},"Home ",a.a.createElement("span",{className:"sr-only"},"(current)"))),a.a.createElement(r.Fragment,null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/superuser"},"View Medical Certificates")),u&&!u.social_apps?a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/twoFA"},a.a.createElement(f.g,{name:"check",style:{marginRight:"5px",marginTop:"-5px"}}),"2 Factor Authentication")):null))),a.a.createElement("div",{style:{float:"right"}},a.a.createElement("button",{style:{backgroundColor:"#ffffff",color:"#00BFFF",borderRadius:"5px",padding:"6px 6px"},className:"btn btn-info btn-lg",onClick:h},a.a.createElement("span",{className:"glyphicon glyphicon-log-out"}),"Log out",a.a.createElement(de.a,{style:{marginLeft:"4px"}})))),m?a.a.createElement(l.a,{to:"/"}):a.a.createElement(r.Fragment,null)):a.a.createElement(r.Fragment,null,m?a.a.createElement(l.a,{to:"/"}):a.a.createElement(r.Fragment,null),a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#ffffff"}},a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},a.a.createElement("ul",{className:"navbar-nav"},a.a.createElement(f.g,{style:{color:"#00BFFF",height:"30px",width:"40px"},name:"brain",className:"header-logo-image"}),a.a.createElement("li",{className:"nav-item active"},a.a.createElement(c.b,{className:"nav-link",to:"/"},"Home ",a.a.createElement("span",{className:"sr-only"},"(current)"))),a.a.createElement(r.Fragment,null,a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/login",onClick:g},"Log In")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(c.b,{className:"nav-link",to:"/signup"},"Sign Up"))))),a.a.createElement(pe.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})))})),ve=(n(386),n(387),n(9)),ye=n.n(ve),be=n(206),we=n.n(be);function Ee(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Ce=we.a.get("csrftoken"),ke=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:fe.k})((function(e){var t=e.match,n=Pe(Object(r.useState)({profession:"",isbeingApproved:!1,hasMedicalCertificate:!1}),2),o=n[0],i=n[1],s=o.profession,c=o.isbeingApproved,l=o.hasMedicalCertificate,u=Pe(Object(r.useState)(),2),f=u[0],p=u[1],m=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"multipart/form-data"}},a=t.params.email,(c=new FormData).append("email",a),c.append("profession",s),"Investigator"!==s&&c.append("medical_certificate",f,f.name),e.next=10,ye.a.post("/api/add_description",c,r);case 10:return l=e.sent,u={headers:{"Content-Type":"application/json",Accept:"application/json",HTTP_X_CSRFTOKEN:Ce}},e.prev=12,e.next=15,ye.a.post("/api/encrypt_db/".concat(a),u);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),alert(e.t0.message);case 20:!0===l.data.Status?i(Oe({},o,{isbeingApproved:!0})):i(Oe({},o,{hasMedicalCertificate:!0})),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),alert(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23],[12,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ee(o,r,a,i,s,"next",e)}function s(e){Ee(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();if(l)return Object(fe.k)(),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"150px"}},a.a.createElement("h1",null,"Your account was successfully created, but your medical certificate is under evaluation. We will reach to you soon!")));if(c)return Object(fe.k)(),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h2",{className:"display-6",style:{textAlign:"center"}},"Account successfully created with the email"," ",a.a.createElement("b",null,t.params.email),". You can now Log In!"),a.a.createElement("hr",{className:"my-4"})));return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",null,"Add description"),a.a.createElement("br",null),a.a.createElement("p",null,"Please, choose the description that matches your role."),a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("select",{name:"profession",value:s,onChange:function(e){return function(e){return i(Oe({},o,Ie({},e.target.name,e.target.value)))}(e)},required:!0},a.a.createElement("option",{key:""}),["Investigator","Health Professional"].map((function(e){return a.a.createElement("option",{key:e},e)})))),"Health Professional"===s?a.a.createElement("div",{className:"form-group"},a.a.createElement("br",null),a.a.createElement("p",null,a.a.createElement("b",null,"Upload medical certificate")),a.a.createElement("input",{type:"file",name:"file",onChange:function(e){return function(e){p(e.target.files[0])}(e)},required:!0})):null,a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Register")),a.a.createElement("hr",{className:"my-4"})))})),je=(n(388),n(389),n(403),n(390),n(391),n(392),n(393),n(394),n(395),n(82)),xe=n.n(je);function De(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){De(o,r,a,i,s,"next",e)}function s(e){De(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(n,!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Me=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user_apps:fe.h,facebookAuthenticate:fe.c})((function(e){var t=e.user,n=e.load_user_apps,o=e.facebookAuthenticate,i=Object(l.g)(),s=Re(Object(r.useState)({login:!1,hasSecret:!1,notMedicalCertificate:!1,pin:""}),2),c=s[0],u=s[1],f=c.login,p=(c.hasSecret,c.notMedicalCertificate);c.pin;Object(r.useEffect)((function(){var e=xe.a.parse(i.search),t=e.state?e.state:null,n=e.code?e.code:null;console.log(e),console.log("State: "+t),console.log("Code: "+n),t&&n&&o(t,n)}),[o,i]);var m=function(){var e=Te(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=5,ye.a.get("/api/check_medical_certificate?email=".concat(t.email),r);case 5:a=e.sent,console.log(a.data.Status),!0===a.data.Status?u(_e({},c,{login:!0})):u(_e({},c,{notMedicalCertificate:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();if(p){var d="/add_description/"+t.email;return a.a.createElement(l.a,{to:d})}return f?(n(t.email),a.a.createElement(l.a,{to:"/"})):a.a.createElement("div",{className:"container"},a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Almost there..."),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Press here to continue"),a.a.createElement("hr",{className:"my-4"}))))}));function Le(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,s,"next",e)}function s(e){Le(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(n,!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var He=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user_apps:fe.h,githubAuthenticate:fe.d})((function(e){var t=e.user,n=e.load_user_apps,o=e.githubAuthenticate,i=Object(l.g)(),s=ze(Object(r.useState)({login:!1,hasSecret:!1,notMedicalCertificate:!1,pin:""}),2),c=s[0],u=s[1],f=c.login,p=(c.hasSecret,c.notMedicalCertificate);c.pin;Object(r.useEffect)((function(){var e=xe.a.parse(i.search),t=e.state?e.state:null,n=e.code?e.code:null;console.log(e),console.log("State: "+t),console.log("Code: "+n),t&&n&&o(t,n)}),[o,i]);var m=function(){var e=Ue(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=5,ye.a.get("/api/check_medical_certificate?email=".concat(t.email),r);case 5:a=e.sent,console.log(a.data.Status),!0===a.data.Status?u(Ve({},c,{login:!0})):u(Ve({},c,{notMedicalCertificate:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();if(p){var d="/add_description/"+t.email;return a.a.createElement(l.a,{to:d})}return f?(n(t.email),a.a.createElement(l.a,{to:"/"})):a.a.createElement("div",{className:"container"},a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Almost there..."),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Press here to continue"),a.a.createElement("hr",{className:"my-4"}))))}));function qe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){qe(o,r,a,i,s,"next",e)}function s(e){qe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Xe=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user_apps:fe.h,spotifyAuthenticate:fe.o})((function(e){var t=e.user,n=e.load_user_apps,o=e.spotifyAuthenticate,i=Object(l.g)(),s=Ke(Object(r.useState)({login:!1,hasSecret:!1,notMedicalCertificate:!1,pin:""}),2),c=s[0],u=s[1],f=c.login,p=(c.hasSecret,c.notMedicalCertificate);c.pin;Object(r.useEffect)((function(){var e=xe.a.parse(i.search),t=e.state?e.state:null,n=e.code?e.code:null;console.log(e),console.log("State: "+t),console.log("Code: "+n),t&&n&&o(t,n)}),[i,o]);var m=function(){var e=Ge(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=5,ye.a.get("/api/check_medical_certificate?email=".concat(t.email),r);case 5:a=e.sent,console.log(a.data.Status),!0===a.data.Status?u(Ye({},c,{login:!0})):u(Ye({},c,{notMedicalCertificate:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();if(p){var d="/add_description/"+t.email;return a.a.createElement(l.a,{to:d})}return f?(n(t.email),a.a.createElement(l.a,{to:"/"})):a.a.createElement("div",{className:"container"},a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Almost there..."),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Press here to continue"),a.a.createElement("hr",{className:"my-4"}))))}));function Qe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qe(o,r,a,i,s,"next",e)}function s(e){Qe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var rt=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user_apps:fe.h,linkedinAuthenticate:fe.f})((function(e){var t=e.user,n=e.load_user_apps,o=e.linkedinAuthenticate,i=Object(l.g)(),s=nt(Object(r.useState)({login:!1,hasSecret:!1,notMedicalCertificate:!1,pin:""}),2),c=s[0],u=s[1],f=c.login,p=(c.hasSecret,c.notMedicalCertificate);c.pin;Object(r.useEffect)((function(){var e=xe.a.parse(i.search),t=e.state?e.state:null,n=e.code?e.code:null;console.log(e),console.log("State: "+t),console.log("Code: "+n),t&&n&&o(t,n)}),[o,i]);var m=function(){var e=Ze(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=5,ye.a.get("/api/check_medical_certificate?email=".concat(t.email),r);case 5:a=e.sent,console.log(a.data.Status),!0===a.data.Status?u(et({},c,{login:!0})):u(et({},c,{notMedicalCertificate:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();if(p){var d="/add_description/"+t.email;return a.a.createElement(l.a,{to:d})}return f?(n(t.email),a.a.createElement(l.a,{to:"/"})):a.a.createElement("div",{className:"container"},a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Almost there..."),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Press here to continue"),a.a.createElement("hr",{className:"my-4"}))))})),at=n(155),ot=n(154),it=Object(s.b)((function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated,isInvestigatorAuthenticated:e.auth.isInvestigatorAuthenticated,isSuperuserAuthenticated:e.auth.isSuperuserAuthenticated,isHealthProfessionalAuthenticated:e.auth.isHealthProfessionalAuthenticated}}),null)((function(e){var t=e.user,n=e.isAuthenticated,r=e.isInvestigatorAuthenticated,o=e.isSuperuserAuthenticated,i=e.isHealthProfessionalAuthenticated;return null!==t&&n&&r?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Hello, ",a.a.createElement("b",null,t.email),"!"),a.a.createElement("br",null),a.a.createElement("p",{className:"lead"},"You can browse studies from Orthanc, upload and view local images, and add AI algorithms."),a.a.createElement("hr",{className:"my-4"}))):null!==t&&n&&o?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Hello, admin ",a.a.createElement("b",null,t.email),"!"),a.a.createElement("br",null),a.a.createElement("hr",{className:"my-4"}))):null!==t&&n&&i?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Hello, Dr. ",a.a.createElement("b",null,t.email),"!"),a.a.createElement("br",null),a.a.createElement("p",{className:"lead"},"You can browse studies from Orthanc, upload, share and view local images."),a.a.createElement("hr",{className:"my-4"}))):a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Welcome!"),a.a.createElement("p",{className:"lead"},"This is a DICOM Image Tool with AI features!"),a.a.createElement("br",null),a.a.createElement("p",null,"For more information, visit our"," ",a.a.createElement(at.a,{icon:ot.b,size:"2x",style:{color:"black",cursor:"pointer"},onClick:function(){return window.open("https://github.com/Joao231/Medical-app-authentication?fbclid=IwAR1FHWLY4_B6lQtei5vtYacTtxFKp9tqwJYnaCNQyBKYjudHaUNuIlATcUY","_blank")}})," "," repository."),a.a.createElement("hr",{className:"my-4"})))})),st=(n(1269),n(139),n(1425)),ct=n(262),lt=n.n(ct),ut=n(1431),ft=n(263),pt=n.n(ft),mt=n(1429);function dt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ht(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dt(o,r,a,i,s,"next",e)}function s(e){dt(o,r,a,i,s,"throw",e)}i(void 0)}))}}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(n,!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var wt=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,isSuperuserAuthenticated:e.auth.isSuperuserAuthenticated}}),{login:fe.i,loginSuperuser:fe.j})((function(e){var t,n=e.login,o=e.loginSuperuser,i=e.isAuthenticated,s=e.isSuperuserAuthenticated,l=we.a.get("csrftoken"),u=bt(Object(r.useState)({hasSecret:!1,pin:"",email:""}),2),f=u[0],p=u[1],m=f.hasSecret,d=f.pin,h=f.email,g=bt(a.a.useState({password:"",showPassword:!1}),2),v=g[0],y=g[1],b=function(){var e=ht(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={headers:{"Content-Type":"application/json",Authorization:"Basic am9hbzpmMWRyaXZlcjE5OTk=",Accept:"application/json",HTTP_X_CSRFTOKEN:l},body:JSON.stringify({pin:d,email:h})},e.prev=2,e.next=5,ye.a.post("/api/2FA_login_login",r);case 5:if(!0!==e.sent.data.Status){e.next=11;break}return e.next=9,ye.a.get("/api/check_superuser/".concat(h),r);case 9:!0===e.sent.data.Status?o(h,v.password):n(h,v.password);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=ht(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={headers:{"Content-Type":"multipart/form-data",Authorization:"Basic am9hbzpmMWRyaXZlcjE5OTk=",apikey:"9jcoFNyj/XR2ipwhdMVuwYnT"}},e.prev=2,e.next=5,ye.a.get("/api/check_secret_login/".concat(h),r);case 5:if(!0!==e.sent.data.Status){e.next=10;break}p(vt({},f,{hasSecret:!0})),e.next=14;break;case 10:return e.next=12,ye.a.get("/api/check_superuser/".concat(h));case 12:!0===e.sent.data.Status?o(h,v.password):n(h,v.password);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),pe.b.error("User Account does not exist!",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return",a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),E={headers:{"Content-Type":"multipart/form-data",apikey:"9jcoFNyj/XR2ipwhdMVuwYnT",Authorization:"Basic am9hbzpmMWRyaXZlcjE5OTk="}},S=function(){var e=ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ye.a.defaults.withCredentials=!0,e.next=4,ye.a.get("/auth/o/google-oauth2/?redirect_uri=http://localhost/google",E);case 4:t=e.sent,window.location.replace(t.data.authorization_url),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.get("/auth/o/facebook/?redirect_uri=http://localhost/facebook",E);case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.get("/auth/o/github/?redirect_uri=http://localhost/complete/github/",E);case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.get("/auth/o/linkedin-oauth2/?redirect_uri=http://localhost/complete/linkedin/",E);case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.get("/auth/o/spotify/?redirect_uri=http://localhost/callback/spotify/",E);case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return s||i?a.a.createElement(it,null):m?a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",null,"Enter the code from Google Authenticator"),a.a.createElement("form",{onSubmit:function(e){return b(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{className:"form-control",type:"pin",placeholder:"Pin",name:"pin",value:d,onChange:function(e){return function(e){p(vt({},f,yt({},e.target.name,e.target.value)))}(e)},required:!0})))):a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",null,"Sign In"),a.a.createElement("p",null,"Sign into your account"),a.a.createElement("form",{onSubmit:function(e){return w(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{className:"form-control",type:"email",placeholder:"Email",name:"email",value:h,onChange:function(e){return function(e){var t=document.getElementById("password"),n=document.getElementById("message");t.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?n.textContent="Caps lock is on":n.textContent=""})),p(vt({},f,yt({},e.target.name,e.target.value)))}(e)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{id:"password",className:"form-control",type:v.showPassword?"text":"password",placeholder:"Password",name:"password",value:v.password,onChange:(t="password",function(e){var n=document.getElementById("password"),r=document.getElementById("message");n.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?r.textContent="Caps lock is on":r.textContent=""})),y(vt({},v,yt({},t,e.target.value)))}),minLength:"6",endAdornment:a.a.createElement(ut.a,{position:"end"},a.a.createElement(st.a,{onClick:function(){y(vt({},v,{showPassword:!v.showPassword}))},onMouseDown:function(e){e.preventDefault()}},v.showPassword?a.a.createElement(lt.a,null):a.a.createElement(pt.a,null))),required:!0}),a.a.createElement("div",{className:"message",id:"message",style:{color:"red"}})),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Sign In")),a.a.createElement("p",{className:"mt-3"},"Or sign with:"),a.a.createElement("div",{className:"social-container"},a.a.createElement("a",{className:"google social",onClick:S},a.a.createElement(at.a,{icon:ot.c,size:"3x"})),a.a.createElement("a",{className:"facebook social",onClick:O},a.a.createElement(at.a,{icon:ot.a,size:"3x"})),a.a.createElement("a",{className:"linkedin social",onClick:P},a.a.createElement(at.a,{icon:ot.d,size:"3x"})),a.a.createElement("a",{className:"github social",onClick:I},a.a.createElement(at.a,{icon:ot.b,size:"3x"})),a.a.createElement("a",{className:"spotify social",onClick:C},a.a.createElement(at.a,{icon:ot.e,size:"3x"}))),a.a.createElement("p",{className:"mt-3"},"Do not have an account? ",a.a.createElement(c.b,{to:"/signup"},"Sign Up")),a.a.createElement("p",{className:"mt-3"},"Forgot your password? ",a.a.createElement(c.b,{to:"/reset-password"},"Reset Password")))}));function Et(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(n,!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Ct=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{signup:fe.n})((function(e){var t=e.signup,n=e.isAuthenticated,o=Pt(Object(r.useState)(!1),2),i=o[0],s=(o[1],Pt(Object(r.useState)({profession:"",first_name:"",last_name:"",email:""}),2)),u=s[0],f=s[1],p=Pt(Object(r.useState)(),2),m=p[0],d=p[1],h=u.profession,g=u.first_name,v=u.last_name,y=u.email,b=Pt(a.a.useState({password:"",showPassword:!1,re_password:"",showRe_Password:!1}),2),w=b[0],E=b[1],S=function(e){return function(t){var n=document.getElementById("password"),r=document.getElementById("confirm_password"),a=document.getElementById("message1"),o=document.getElementById("message2");r.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?o.textContent="Caps lock is on":o.textContent=""})),n.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?a.textContent="Caps lock is on":a.textContent=""})),E(Ot({},w,It({},e,t.target.value)))}},O=function(e){var t=document.getElementById("password"),n=document.getElementById("confirm_password"),r=document.getElementById("message1"),a=document.getElementById("message2");n.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?a.textContent="Caps lock is on":a.textContent=""})),t.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?r.textContent="Caps lock is on":r.textContent=""})),f(Ot({},u,It({},e.target.name,e.target.value)))},I=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w.password!==w.re_password){e.next=5;break}t(g,v,y,w.password,w.re_password,h,m),e.next=7;break;case 5:return pe.b.error("Password fields do not match.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return",a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Et(o,r,a,i,s,"next",e)}function s(e){Et(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n?a.a.createElement(l.a,{to:"/"}):i?a.a.createElement(l.a,{to:"/login"}):a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",null,"Sign Up"),a.a.createElement("p",null,"Create your account"),a.a.createElement("form",{onSubmit:function(e){return I(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{className:"form-control",type:"text",placeholder:"First Name*",name:"first_name",value:g,onChange:function(e){return O(e)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{className:"form-control",type:"text",placeholder:"Last Name*",name:"last_name",value:v,onChange:function(e){return O(e)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{className:"form-control",type:"email",placeholder:"Email*",name:"email",value:y,onChange:function(e){return O(e)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{id:"password",className:"form-control",type:w.showPassword?"text":"password",placeholder:"Password",name:"password",value:w.password,onChange:S("password"),minLength:"6",endAdornment:a.a.createElement(ut.a,{position:"end"},a.a.createElement(st.a,{onClick:function(){E(Ot({},w,{showPassword:!w.showPassword}))},onMouseDown:function(e){e.preventDefault()}},w.showPassword?a.a.createElement(lt.a,null):a.a.createElement(pt.a,null))),required:!0}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("div",{className:"form-group"},a.a.createElement(mt.a,{id:"confirm_password",className:"form-control",type:w.showRe_Password?"text":"password",placeholder:"Confirm Password*",name:"re_password",value:w.re_password,onChange:S("re_password"),minLength:"6",endAdornment:a.a.createElement(ut.a,{position:"end"},a.a.createElement(st.a,{onClick:function(){E(Ot({},w,{showRe_Password:!w.showRe_Password}))},onMouseDown:function(e){e.preventDefault()}},w.showRe_Password?a.a.createElement(lt.a,null):a.a.createElement(pt.a,null))),required:!0}),a.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("p",null,"Please choose the description that matches your role."),a.a.createElement("select",{name:"profession",value:h,onChange:function(e){return O(e)}},a.a.createElement("option",{key:""}),["Investigator","Health Professional"].map((function(e){return a.a.createElement("option",{key:e},e)})))),"Health Professional"===h?a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{type:"file",name:"file",onChange:function(e){return function(e){d(e.target.files[0])}(e)},required:!0})):null,a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Register")),a.a.createElement("p",{className:"mt-3"},"Already have an account? ",a.a.createElement(c.b,{to:"/login"},"Sign In")))}));function kt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(n,!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Nt=Object(s.b)(null,{verify:fe.q})((function(e){var t=e.verify,n=e.match,o=Tt(Object(r.useState)(!1),2),i=o[0],s=o[1],c=Tt(Object(r.useState)({hasMedicalCertificate:!1,notMedicalCertificate:!1,email:""}),2),u=c[0],f=c[1],p=u.hasMedicalCertificate,m=u.notMedicalCertificate,d=u.email,h={headers:{"Content-Type":"multipart/form-data",apikey:"9jcoFNyj/XR2ipwhdMVuwYnT",Authorization:"Basic am9hbzpmMWRyaXZlcjE5OTk="}},g=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ye.a.get("/api/check_medical_certificate_login/".concat(d),h);case 4:!0===e.sent.data.Status?f(xt({},u,{hasMedicalCertificate:!0})):f(xt({},u,{notMedicalCertificate:!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kt(o,r,a,i,s,"next",e)}function s(e){kt(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return i?a.a.createElement(l.a,{to:"/login"}):p?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"}},a.a.createElement("h1",null,"Please, verify your account."),a.a.createElement("button",{onClick:function(){var e=n.params.uid,r=n.params.token;return t(e,r),pe.b.success("Your account has been created and is ready to use!",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s(!0),a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})},style:{marginTop:"50px"},type:"button",className:"btn btn-primary"},"Verify"))):m?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"}},a.a.createElement("h1",null,"Your account is being evaluated. We will reach to you soon!"))):a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",null,"Please, enter your email."),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:function(e){return g(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{className:"form-control",type:"text",placeholder:"Email*",name:"email",value:d,onChange:function(e){return function(e){return f(xt({},u,Dt({},e.target.name,e.target.value)))}(e)},required:!0})),a.a.createElement("br",null),a.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Verify")),a.a.createElement("hr",{className:"my-4"})))}));function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Mt=Object(s.b)(null,{reset_password:fe.l})((function(e){var t=e.reset_password,n=Rt(Object(r.useState)(!1),2),o=n[0],i=n[1],s=Rt(Object(r.useState)({email:""}),2),c=s[0],u=s[1],f=c.email,p=function(e){return u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(n,!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,At({},e.target.name,e.target.value)))};return o?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",null,"Request Password Reset"),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:function(e){return function(e){return e.preventDefault(),t(f),i(!0),pe.b.success("An verification email was sent to "+f+". Please, check it!",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})}(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email",name:"email",value:f,onChange:function(e){return p(e)},required:!0})),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Reset")),a.a.createElement("hr",{className:"my-4"})))}));function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Vt=Object(s.b)(null,{reset_password_confirm:fe.m})((function(e){var t=e.match,n=e.reset_password_confirm,o=Ft(Object(r.useState)(!1),2),i=o[0],s=o[1],c=Ft(Object(r.useState)({new_password:"",re_new_password:""}),2),u=c[0],f=c[1],p=u.new_password,m=u.re_new_password,d=function(e){var t=document.getElementById("password"),n=document.getElementById("confirm_password"),r=document.getElementById("message1"),a=document.getElementById("message2");n.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?a.textContent="Caps lock is on":a.textContent=""})),t.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?r.textContent="Caps lock is on":r.textContent=""})),f(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(n,!0).forEach((function(t){Ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,Ut({},e.target.name,e.target.value)))};return i?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"container mt-5"},a.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var r=t.params.uid,o=t.params.token;return p!==m?(pe.b.error("Password fields do not match.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})):(n(r,o,p,m),s(!0),pe.b.success("Your password has been successfully changed!",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),a.a.createElement(pe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{id:"password",className:"form-control",type:"password",placeholder:"New Password",name:"new_password",value:p,onChange:function(e){return d(e)},minLength:"6",required:!0}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{id:"confirm_password",className:"form-control",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:m,onChange:function(e){return d(e)},minLength:"6",required:!0}),a.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}})),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Reset Password")))}));function Bt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bt(o,r,a,i,s,"next",e)}function s(e){Bt(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(n,!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ye.a.defaults.xsrfHeaderName="X-CSRFTOKEN",ye.a.defaults.xsrfCookieName="csrftoken",ye.a.defaults.withCredentials=!0;var Yt=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user_apps:fe.h,googleAuthenticate:fe.e})((function(e){var t=e.user,n=e.load_user_apps,o=e.googleAuthenticate,i=Object(l.g)(),s=Wt(Object(r.useState)({login:!1,hasSecret:!1,notMedicalCertificate:!1,pin:""}),2),c=s[0],u=s[1],f=c.login,p=(c.hasSecret,c.notMedicalCertificate);c.pin;Object(r.useEffect)((function(){var e=xe.a.parse(i.search),t=e.state?e.state:null,n=e.code?e.code:null;t&&n&&o(t,n)}),[o,i]);var m=function(){var e=zt(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=5,ye.a.get("/api/check_medical_certificate?email=".concat(t.email),r);case 5:!0===e.sent.data.Status?u(qt({},c,{login:!0})):u(qt({},c,{notMedicalCertificate:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();if(p){var d="/add_description/"+t.email;return a.a.createElement(l.a,{to:d})}return f?(n(t.email),a.a.createElement(l.a,{to:"/"})):a.a.createElement("div",{className:"container"},t?a.a.createElement("form",{onSubmit:function(e){return m(e)}},a.a.createElement("div",{className:"jumbotron mt-5"},a.a.createElement("h1",{className:"display-4"},"Almost there..."),a.a.createElement("br",null),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Press here to continue"),a.a.createElement("hr",{className:"my-4"}))):null)})),Jt=n(90),Kt=n(773),Xt=n(318),Qt=n(18);function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach((function(t){en(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tn={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),superuser_authenticated:localStorage.getItem("Superuser_Authenticated"),isSuperuserAuthenticated:null,authenticated:localStorage.getItem("Authenticated"),isAuthenticated:null,investigator_authenticated:localStorage.getItem("Investigator_Authenticated"),isInvestigatorAuthenticated:null,healthProfessional_authenticated:localStorage.getItem("HealthProfessional_Authenticated"),isHealthProfessionalAuthenticated:null,user:null};var nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Qt.D:return localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),$t({},e,{access:r.access,refresh:r.refresh});case Qt.l:return localStorage.setItem("Investigator_Authenticated",!0),$t({},e,{isInvestigatorAuthenticated:!0,isAuthenticated:!0});case Qt.k:return localStorage.setItem("HealthProfessional_Authenticated",!0),$t({},e,{isHealthProfessionalAuthenticated:!0,isAuthenticated:!0});case Qt.A:return $t({},e,{isSuperuserAuthenticated:!0,isAuthenticated:!0});case Qt.d:return $t({},e,{isAuthenticated:!0});case Qt.C:return localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),localStorage.setItem("Superuser_Authenticated",!0),$t({},e,{isSuperuserAuthenticated:!0,access:r.access,refresh:r.refresh});case Qt.p:return localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),localStorage.setItem("Authenticated",!0),$t({},e,{isAuthenticated:!0,access:r.access,refresh:r.refresh});case Qt.j:case Qt.f:case Qt.h:case Qt.n:case Qt.y:return localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),$t({},e,{isAuthenticated:!1,access:r.access,refresh:r.refresh});case Qt.w:return $t({},e,{isAuthenticated:!1});case Qt.H:return $t({},e,{user:r});case Qt.F:return localStorage.setItem("Authenticated",!0),$t({},e,{isAuthenticated:!0});case Qt.z:return $t({},e,{isSuperuserAuthenticated:!1});case Qt.E:case Qt.c:return $t({},e,{isAuthenticated:!1});case Qt.G:return $t({},e,{user:null});case Qt.B:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("Superuser_Authenticated"),$t({},e,{access:null,refresh:null,isSuperuserAuthenticated:!1,user:null});case Qt.o:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("Authenticated"),$t({},e,{access:null,refresh:null,isAuthenticated:!1,user:null});case Qt.i:case Qt.e:case Qt.g:case Qt.m:case Qt.x:case Qt.v:case Qt.q:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("Authenticated"),localStorage.removeItem("Superuser_Authenticated"),localStorage.removeItem("Investigator_Authenticated"),localStorage.removeItem("HealthProfessional_Authenticated"),$t({},e,{access:null,refresh:null,isSuperuserAuthenticated:!1,isAuthenticated:!1,isInvestigatorAuthenticated:!1,isHealthProfessionalAuthenticated:!1,user:null});case Qt.u:case Qt.t:case Qt.s:case Qt.r:case Qt.b:case Qt.a:return $t({},e);default:return e}},rn=[Xt.a],an=(Object(Jt.createStore)(nn,{},Object(Kt.composeWithDevTools)(Jt.applyMiddleware.apply(void 0,rn))),Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,isSuperuserAuthenticated:e.auth.isSuperuserAuthenticated}}),{checkAuthenticated_Superuser:fe.b,checkAuthenticated:fe.a,load_user:fe.g})((function(e){var t=e.isAuthenticated,n=e.isSuperuserAuthenticated,o=e.checkAuthenticated_Superuser,i=e.checkAuthenticated,s=e.load_user,c=e.children;return Object(r.useEffect)((function(){console.log(t),console.log(n),localStorage.getItem("Superuser_Authenticated")?o():i(),s()}),[i,o,t,n,s]),a.a.createElement("div",null,a.a.createElement(ge,null),c)})));function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sn=Object(s.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,isSuperuserAuthenticated:e.auth.isSuperuserAuthenticated}}),{checkAuthenticated_Superuser:fe.b,checkAuthenticated:fe.a,load_user:fe.g,updateToken:fe.p})((function(e){var t=e.updateToken,n=e.children,o=on(Object(r.useState)(),2),i=o[0],s=o[1],c=on(Object(r.useState)(!0),2),l=c[0],u=c[1];return Object(r.useEffect)((function(){l&&(console.log("updatetoken"),t(),u(!1));var e=setInterval((function(){localStorage.getItem("access")&&localStorage.getItem("refresh")&&(t(),s(localStorage.getItem("access")))}),24e4);return function(){return clearInterval(e)}}),[i,l,t]),a.a.createElement("div",null,n)})),cn=n(29),ln=n.n(cn),un=n(116),fn=n.n(un),pn="0.0.50";var mn=!1,dn=6;function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vn=L.a.reducers,yn=L.a.localStorage,bn=L.a.sessionStorage,wn=[Xt.a],En=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Jt.compose;vn.auth=nn;var Sn=Object(Jt.combineReducers)(vn),On=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(n,!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},yn.loadState(),{},bn.loadState());window.config&&!0===window.config.disableServersCache&&delete On.servers;var In=Object(Jt.createStore)(Sn,On,En(Jt.applyMiddleware.apply(void 0,wn)));In.subscribe((function(){bn.saveState({servers:In.getState().servers})}));var Pn=In;function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=function(e){var t=e.commandsManager,n=L.a.actions,r=n.setViewportActive,a=n.setActiveViewportSpecificData,o={updateActiveViewport:function(e){var t=e.viewports,n=e.direction,a=t.viewportSpecificData,o=t.activeViewportIndex,i=Object.keys(a).length-1,s=o+n;s=(s=s>i?0:s)<0?i:s,Pn.dispatch(r(s))},setWindowLevelPreset:function(e){var n=e.viewports,r=e.preset,a=Pn.getState().preferences,o=void 0===a?{}:a,i=o.windowLevelData&&o.windowLevelData[r],s=i.window,c=i.level;s&&c&&t.runCommand("setWindowLevel",{viewports:n,window:s,level:c})},updateViewportDisplaySet:function(e){var t=e.viewports,n=e.direction,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(n,!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.viewportSpecificData)[t.activeViewportIndex],o=utils.studyMetadataManager.get(r.StudyInstanceUID);if(o){var i=o.getDisplaySets(),s=i.findIndex((function(e){return e.displaySetInstanceUID===r.displaySetInstanceUID}));if(!(s<0)){var c=i[s+n];c&&Pn.dispatch(a(c))}}}};return{definitions:{incrementActiveViewport:{commandFn:o.updateActiveViewport,storeContexts:["viewports"],options:{direction:1}},decrementActiveViewport:{commandFn:o.updateActiveViewport,storeContexts:["viewports"],options:{direction:-1}},windowLevelPreset1:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:1}},windowLevelPreset2:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:2}},windowLevelPreset3:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:3}},windowLevelPreset4:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:4}},windowLevelPreset5:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:5}},windowLevelPreset6:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:6}},windowLevelPreset7:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:7}},windowLevelPreset8:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:8}},windowLevelPreset9:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:9}},nextViewportDisplaySet:{commandFn:o.updateViewportDisplaySet,storeContexts:["viewports"],options:{direction:1}},previousViewportDisplaySet:{commandFn:o.updateViewportDisplaySet,storeContexts:["viewports"],options:{direction:-1}}},defaultContext:"VIEWER"}},xn={id:"generic-viewer-commands",get version(){return window.version},getCommandsModule:function(e){var t=e.commandsManager;return jn({commandsManager:t})}};n(1273),n(1274);function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Nn(t).call(this,e),n=!i||"object"!==Dn(i)&&"function"!=typeof i?_n(o):i,Rn(_n(n),"getActionButton",(function(e,t){return a.a.createElement("button",{key:e,className:"btnAction",onClick:t},a.a.createElement("span",{style:{marginRight:"4px"}},a.a.createElement(f.g,{name:"edit",width:"14px",height:"14px"})),e)})),Rn(_n(n),"measurementDelete",(function(e){n.props.onMeasurementDelete(e),n.setState({delete:!1})})),Rn(_n(n),"getTableListItem",(function(){var e=[];if("function"==typeof n.props.onRelabel){var t=n.getActionButton("Relabel",n.onRelabelClick);(n.props.measurementData.created_by&&n.props.canEditStudy||!n.props.measurementData.created_by)&&e.push(t)}if("function"==typeof n.props.onDelete){var o=n.getActionButton("Clear",n.onDeleteClick);n.props.measurementData.created_by||e.push(o)}return n.state.delete?a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement("p",{style:{backgroundColor:"transparent",color:"red",textAlign:"center"}},"Are you sure you want do delete this measurement?"),a.a.createElement("div",{className:"footer"},a.a.createElement("div",null,a.a.createElement("div",{onClick:function(){return n.setState({delete:!1})},"data-cy":"cancel-btn",className:"btn btn-default"},"No"),a.a.createElement("button",{className:"btn btn-primary","data-cy":"save-btn",onClick:function(){return n.measurementDelete(n.props.measurementData.measurement_number)}},"Yes")))):a.a.createElement(f.w,{itemKey:n.props.measurementData.measurementNumber,itemClass:"measurementItem ".concat(n.props.itemClass," "),itemIndex:n.props.itemIndex,onItemClick:n.onItemClick},a.a.createElement("div",null,a.a.createElement("div",{className:"measurementLocation"},n.props.measurementData.created_by&&n.props.canEditStudy?a.a.createElement("button",{className:"btn btn-danger",title:"Delete Measurement",onClick:function(){return n.setState({delete:!0})},style:{float:"right",borderRadius:"6px",fontSize:"11px"}},"x"):a.a.createElement(r.Fragment,null),n.props.measurementData.label," ",n.props.measurementData.description?"(".concat(n.props.measurementData.description,")"):"",a.a.createElement("p",null)),a.a.createElement("div",{className:"djangoData"},n.props.measurementData.created_by?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("i",null,"Created By:")," ",n.props.measurementData.created_by),a.a.createElement("p",null,a.a.createElement("i",null,"Created At:")," ",n.props.measurementData.created_at),a.a.createElement("p",null,a.a.createElement("i",null,"Last Modification By:")," ",n.props.measurementData.last_modification_by),a.a.createElement("p",null,a.a.createElement("i",null,"Last Modification At:")," ",n.props.measurementData.last_modification_at)):null),a.a.createElement("div",{className:"displayTexts"},n.props.measurementData.toolType," ",n.getDataDisplayText()),a.a.createElement("div",{className:"rowActions"},e,n.props.measurementData.created_by?a.a.createElement("button",{key:"Report",className:"btnAction",onClick:function(){return n.props.onReport(n.props.measurementData.measurementNumber,!0)}},a.a.createElement("span",{style:{marginRight:"4px"}},a.a.createElement(f.g,{name:"edit",width:"14px",height:"14px"})),"Report"):a.a.createElement("button",{key:"Report",className:"btnAction",onClick:function(){return n.props.onReport(n.props.measurementData.measurementNumber,!1)}},a.a.createElement("span",{style:{marginRight:"4px"}},a.a.createElement(f.g,{name:"edit",width:"14px",height:"14px"})),"Report"))))})),Rn(_n(n),"onItemClick",(function(e){n.props.onItemClick(e,n.props.measurementData)})),Rn(_n(n),"onRelabelClick",(function(e){e.stopPropagation(),n.props.onRelabel(e,n.props.measurementData)})),Rn(_n(n),"onEditDescriptionClick",(function(e){e.stopPropagation(),n.props.onEditDescription(e,n.props.measurementData)})),Rn(_n(n),"onDeleteClick",(function(e){e.stopPropagation(),n.props.onDelete(e,n.props.measurementData)})),Rn(_n(n),"getDataDisplayText",(function(){return n.props.measurementData.data.map((function(e,t){return a.a.createElement("div",{key:"displayText_".concat(t),className:"measurementDisplayText"},e.displayText?e.displayText:"")}))})),n.state={delete:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Fragment,null,this.getTableListItem()))}}])&&Tn(n.prototype,o),i&&Tn(n,i),t}(r.Component);Rn(Mn,"propTypes",{measurementData:i.a.object.isRequired,onItemClick:i.a.func.isRequired,onRelabel:i.a.func,onDelete:i.a.func,onEditDescription:i.a.func,itemClass:i.a.string,itemIndex:i.a.number,onMeasurementDelete:i.a.func,onReport:i.a.func,canEditStudy:i.a.bool});var Ln=Mn,Un=function(e){var t=e.getFirstInstance().getData().metadata.SOPClassUID;return["1.2.840.10008.5.1.4.1.1.88.22","1.2.840.10008.5.1.4.1.1.11.1","1.2.840.10008.5.1.4.1.1.88.34"].includes(t)},Fn=function(e,t){return e._data.SeriesDate>t._data.SeriesDate||e._data.SeriesDate===t._data.SeriesDate&&e._data.SeriesTime>t._data.SeriesTime},Vn=function(e){var t;return e.forEach((function(e){(e.getSeries?e.getSeries():[]).forEach((function(e){e&&0!==e.getInstanceCount()&&Un(e)&&(t&&!Fn(e,t)||(t=e))}))})),t},Bn=n(331),zn=n(726),Hn=n.n(zn),qn=(n(801),n(802),n(803),n(804),n(1280),n(1426));function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qn=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Yn(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Gn(a)&&"function"!=typeof a?Jn(r):a,Xn(Jn(n),"state",{report:n.props.report}),Xn(Jn(n),"onClose",(function(){n.props.hide()})),Xn(Jn(n),"onSubmit",(function(){n.props.saveReport(n.state.report,n.props.measurementNumber,n.props.isEditingDjango),n.props.hide()})),Xn(Jn(n),"onReset",(function(){n.setState({report:n.props.report})})),Xn(Jn(n),"handleChange",(function(e){n.setState({report:e})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"ReportContent"},a.a.createElement(Bn.a,{initialValues:{report:""},render:function(t){return a.a.createElement(a.a.Fragment,null,a.a.createElement(qn.a,{style:{width:575},className:"formReport"},a.a.createElement("fieldset",{className:"k-form-fieldset"},a.a.createElement(Hn.a,{mode:"python",theme:"dracula",name:"editor",onChange:e.handleChange,value:e.state.report,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,fontSize:14,width:"150%",height:"500px",showPrintMargin:!1,highlightActiveLine:!0}))),a.a.createElement("div",{className:"footer"},a.a.createElement("div",null,a.a.createElement("div",{onClick:function(){return e.onReset()},"data-cy":"cancel-btn",className:"btn btn-default"},"Reset to default"),a.a.createElement("button",{"data-cy":"cancel-btn",className:"btn btn-default",onClick:e.onClose,style:{marginRight:"5px"}},"Cancel")),e.props.isEditingDjango&&e.props.canEditStudy?a.a.createElement("button",{className:"btn btn-primary","data-cy":"save-btn",onClick:function(){return e.onSubmit()}},"Ok"):e.props.isEditingDjango?null:a.a.createElement("button",{className:"btn btn-primary","data-cy":"save-btn",onClick:function(){return e.onSubmit()}},"Ok")))}})))}}])&&Wn(n.prototype,r),o&&Wn(n,o),t}(r.Component),Zn=Object(s.b)((function(e){return{user:e.auth.user}}),null)(Qn);function $n(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function er(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$n(o,r,a,i,s,"next",e)}function s(e){$n(o,r,a,i,s,"throw",e)}i(void 0)}))}}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function nr(e){var t,n=e.measurementCollection,o=e.selectedMeasurementNumber,i=e.timepoints,s=e.onItemClick,c=e.onDeleteClick,l=e.onRelabelClick,u=e.onEditDescriptionClick,p=e.saveFunction,m=e.onSaveComplete,d=e.user,h=e.modal,g=h.show,v=h.hide,y=e.studies,b=tr(Object(r.useState)(null),2),w=b[0],E=b[1],S=tr(Object(r.useState)(null),2),O=S[0],I=S[1],P=tr(Object(r.useState)(!1),2),C=P[0],k=P[1];function j(e,t){var r="";if(t){var a=O.filter((function(t){return t.measurement_number===e}));0!==a.length&&(r=a[0].report)}else{r=n[0].measurements.filter((function(e){return e.measurementNumber===w}))[0].report}g({content:Zn,contentProps:{report:r,measurementNumber:e,isEditingDjango:t,canEditStudy:C,saveReport:x,hide:v},title:"Measurement Report"})}function x(e,t,r){if(r){var a=O.filter((function(e){return e.measurement_number===t}));0!==a.length&&(a[0].report=e)}else{var o=n[0].measurements.filter((function(e){return e.measurementNumber===w}));o[0].report=e;var i=o[0],s=n[0].measurements.indexOf(o[0]);-1!==s&&(n[0].measurements[s]=i)}}return Object(r.useEffect)((function(){(function(){var e=er(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rr(d,y[0].StudyInstanceUID);case 3:(t=e.sent).forEach((function(e){var t=n[0].measurements.filter((function(t){return void 0!==t.wadorsURI&&t.data[0].displayText===e.displayText&&t.toolType===e.toolType}));if(0!==t.length)if(t[0].measurementNumber=e.measurement_number,"..."===t[0].label&&void 0===t[0].description)Object.keys(t[0]).forEach((function(n){["label","description"].includes(n)||(e[n]=t[0][n])}));else if(2===t[0].label.split(" ").length){e.label=t[0].label.split(" ")[0];var r=t[0].label.split(" ")[1];r=(r=r.replace("(","")).replace(")",""),e.description=r,Object.keys(t[0]).forEach((function(n){["label","description"].includes(n)||(e[n]=t[0][n])}))}else Object.keys(t[0]).forEach((function(n){e[n]=t[0][n]}))})),I(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()();var e=localStorage.getItem("studyEditControl");0===JSON.parse(e)[y[0].StudyInstanceUID]&&k(!0)}),[n,y,d]),null===O?a.a.createElement("div",{className:"measurementTable"},a.a.createElement("div",{className:"measurementTableHeader"},a.a.createElement("div",{className:"measurementTableHeaderItem"},a.a.createElement("div",{className:"timepointLabel"},i[0].key),a.a.createElement("div",{className:"timepointDate"},i[0].date))),a.a.createElement(f.o,null,a.a.createElement("div",null,a.a.createElement(f.v,{customHeader:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"tableListHeaderTitle"},"Study Measurements"),a.a.createElement("div",{className:"numberOfItems"},n[0].measurements.length))},a.a.createElement(r.Fragment,null))))):a.a.createElement("div",{className:"measurementTable"},a.a.createElement("div",{className:"measurementTableHeader"},a.a.createElement("div",{className:"measurementTableHeaderItem"},a.a.createElement("div",{className:"timepointLabel"},i[0].key),a.a.createElement("div",{className:"timepointDate"},i[0].date))),a.a.createElement(f.o,null,a.a.createElement("div",null,a.a.createElement(f.v,{customHeader:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"tableListHeaderTitle"},"Study Measurements"),a.a.createElement("div",{className:"numberOfItems"},n[0].measurements.length))},(t=o||w,n[0].measurements.map((function(e,r){var o=e.measurementNumber,i=r+1,s=t===o?"selected":"";if(void 0!==e.wadorsURI){if(0===O.length)return;console.log("\n--------------- Est guardada no Django ----------------------");var f=O.filter((function(t){return t.toolType===e.toolType&&t.displayText===e.data[0].displayText&&void 0!==t.wadorsURI&&t.measurement_number===e.measurementNumber}));if(!f[0])return;(e=f[0]).created_by=f[0].user}else{console.log("\n---------------- NO est guardada no Django ------------------");var p=n[0].measurements.filter((function(t){return t.toolType===e.toolType&&t.data[0].displayText===e.data[0].displayText&&void 0===t.wadorsURI&&t.label===e.label}));if(p.length>1)return console.log("\n---------------- A eliminar repetidos... ------------------"),void p.forEach((function(e){var t=n[0].measurements.indexOf(e);n[0].measurements.splice(t,1)}))}return a.a.createElement(Ln,{key:o,itemIndex:i,itemClass:s,measurementData:e,onItemClick:T,onRelabel:l,onDelete:c,onEditDescription:u,onMeasurementDelete:N,onReport:j,canEditStudy:C})})))))),a.a.createElement("div",{className:"measurementTableFooter"},p&&C&&0!==n[0].measurements.length&&localStorage.getItem("HealthProfessional_Authenticated")?a.a.createElement("button",{onClick:function(){return D.apply(this,arguments)},className:"saveBtn","data-cy":"save-measurements-btn"},a.a.createElement(f.g,{name:"save",width:"14px",height:"14px"}),"Save measurements"):null));function D(){return(D=er(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=26;break}return t=oe.a.create({}),r=new FormData,n[0].measurements.map((function(e,t){var n={};if(void 0!==e.wadorsURI){if(0===O.length)return;console.log("\n--------------- Medio guardada no Django. A editar... ----------------------");var a=O.filter((function(t){return t.toolType===e.toolType&&t.displayText===e.data[0].displayText&&void 0!==t.wadorsURI&&t.measurement_number===e.measurementNumber}));if(n.measurement_number=a[0].measurement_number,n.instance_uid=a[0].instance_uid,n.study=a[0].study,n.displayText=a[0].data[0].displayText,n.toolType=a[0].toolType,n.report=a[0].report,2===e.label.split(" ").length){n.label=e.label.split(" ")[0];var o=e.label.split(" ")[1];o=(o=o.replace("(","")).replace(")",""),n.description=o}else n.label=a[0].label,n.description=a[0].description}else{if(console.log("\n--------------- Medio nova. A guardar... ----------------------"),n.measurement_number=e.measurementNumber,n.instance_uid=e.SOPInstanceUID,n.study=e.StudyInstanceUID,n.displayText=e.data[0].displayText,n.toolType=e.toolType,2===e.label.split(" ").length){n.label=e.label.split(" ")[0];var i=e.label.split(" ")[1];i=(i=i.replace("(","")).replace(")",""),n.description=i}else n.label=e.label,n.description="";void 0!==e.report?n.report=e.report:n.report=""}r.append(t,JSON.stringify(n))})),e.next=6,ye.a.post("/api/measurement/?user=".concat(d.email),r,{headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"multipart/form-data"}}).then((function(e){return e})).catch((function(e){return e.response}));case 6:if(201!==(a=e.sent).status){e.next=25;break}if(0!==O.filter((function(e){return e.measurement_number===w})).length){e.next=22;break}return e.prev=10,e.next=13,p();case 13:o=e.sent,m&&(localStorage.setItem("saved",!0),location.reload(!1),m({title:"Measurements - Success!",message:o.message,type:"success"})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),m&&m({title:"Measurements - Failure!",message:e.t0.message,type:"error"});case 20:e.next=23;break;case 22:201===a.status?(location.reload(!1),t.show({title:"Measurements - Success!",message:"Measurement edited - Success",type:"success",duration:8e3})):t.show({title:"Measurements - Failure!",message:"Measurement edited - Failure",type:"error",duration:8e3});case 23:e.next=26;break;case 25:t.show({title:"Measurements - Failure!",message:"Measurement saved - Failure",type:"error",duration:8e3});case 26:case"end":return e.stop()}}),e,null,[[10,17]])})))).apply(this,arguments)}function T(e,t){E(t.measurementNumber),s&&s(e,t)}function N(e){return _.apply(this,arguments)}function _(){return(_=er(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=B.a.studyMetadataManager.all(),r=Vn(n),a=r.getFirstInstance(),o=oe.a.create({}),i=new FormData,0===O.length){e.next=22;break}if(console.log("\n--------------- Medio guardada no Django. A eliminar... ----------------------"),1!==(s=O.filter((function(e){return void 0!==e.wadorsURI&&e.measurement_number===t}))).length){e.next=19;break}(c={}).created_by=s[0].created_by,c.measurement_number=s[0].measurement_number,c.patient_id=a._instance.metadata.PatientID||"",c.instance_uid=s[0].instance_uid,c.study=s[0].study,c.wadorsURI=s[0].wadorsURI,i.append("measurement",JSON.stringify(c)),e.next=20;break;case 19:return e.abrupt("return");case 20:e.next=23;break;case 22:return e.abrupt("return");case 23:return e.next=25,ye.a.post("/api/measurement_delete/?user=".concat(d.email),i,{headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"multipart/form-data"}}).then((function(e){return e})).catch((function(e){return e.response}));case 25:200===e.sent.status?(location.reload(!1),o.show({title:"Measurements - Success!",message:"Measurement deleted - Success",type:"success",duration:8e3})):o.show({title:"Measurements - Failure!",message:"Measurement deleted - Failure",type:"error",duration:8e3});case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}function rr(e,t){return ar.apply(this,arguments)}function ar(){return(ar=er(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe.a.create({}),e.next=3,ye.a.get("/api/measurement/?user=".concat(t.email,"&study=").concat(n),{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 3:if(200===(a=e.sent).status){e.next=8;break}r.show({title:"Measurements - Failure!",message:"Failed to Connect to Server",type:"error",duration:6e3}),e.next=9;break;case 8:return e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}nr.propTypes={measurementCollection:i.a.array.isRequired,timepoints:i.a.array.isRequired,onItemClick:i.a.func,onDeleteClick:i.a.func,selectedMeasurementNumber:i.a.number,saveFunction:i.a.func,onSaveComplete:i.a.func,user:i.a.object.isRequired};var or=Object(f.K)(nr),ir=n(407),sr=n(6),cr=n.n(sr),lr=n(257).a.MeasurementApi,ur=B.a.studyMetadataManager;function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mr=u.a.redux.actions.setViewportSpecificData,dr=u.a.measurements.MeasurementApi;function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.location,n=void 0===t?"":t,r=e.description,a=void 0===r?"":r;return n+(a?" (".concat(a,")"):"")||"..."}function gr(e,t,n){var r=[];return e.forEach((function(e){t.forEach((function(t){var a={displayText:"..."};e.timepointId===t.timepointId&&(a.displayText=n(e)),r.push(a)}))})),r}function vr(e,t){var n=u.a.measurements.MeasurementApi.getConfiguration().measurementTools,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){return t=t.concat(e.childTools)})),t}(n),a=n.map((function(e){return{groupName:e.name,groupId:e.id,measurements:[]}}));return Object.keys(e).forEach((function(n){var o,i=e[n],s=r.find((function(e){return e.id===n})),c=s.options.measurementTable.displayFunction,l=(o="measurementNumber",i.reduce((function(e,t){return(e[t[o]]=e[t[o]]||[]).push(t),e}),{}));Object.keys(l).forEach((function(e){var n,r,o=l[e],i=o[0],u=i.measurementNumber,f=i.lesionNamingNumber,p=i.toolType,m=i.SOPInstanceUID,d=i.StudyInstanceUID,h=i.SeriesInstanceUID,g=i.wadorsURI,v=i.isReadOnly,y=i._id,b=(n=p,{hasWarnings:!(r=ir.a.isToolSupported(n)),warningTitle:r?"":"Unsupported Tool",warningList:r?[]:["".concat(n," cannot be persisted at this time")]}),w=b.hasWarnings,E=b.warningTitle,S=b.warningList,O={itemNumber:f,label:hr(i),measurementId:y,measurementNumber:u,lesionNamingNumber:f,SOPInstanceUID:m,StudyInstanceUID:d,SeriesInstanceUID:h,wadorsURI:g,toolType:p,hasWarnings:w,isReadOnly:v,warningTitle:E,warningList:S,isSplitLesion:!1,data:gr(o,t,c)};a.find((function(e){return e.groupId===s.toolGroup})).measurements.push(O)}))})),a.forEach((function(e){e.measurements.sort((function(e,t){return e.lesionNamingNumber>t.lesionNamingNumber?1:-1}))})),a}function yr(e){return e&&e.length?[{label:"Study date:",key:"StudyDate",date:cr()(e[0].latestDate).format("DD-MMM-YY")}]:[]}var br=Object(s.b)((function(e){var t=e.timepointManager,n=e.servers,r=t.timepoints,a=t.measurements,o=function(e){if("dicomWeb"===e)return function(){return u.a.measurements.MeasurementApi.Instance.storeMeasurements()}}(n.servers.find((function(e){return!0===e.active})).type);return{timepoints:yr(r),measurementCollection:vr(a,r),timepointManager:e.timepointManager,viewports:e.viewports,saveFunction:o,user:e.auth.user}}),(function(e,t){return{dispatchRelabel:function(e,n,r){e.persist();var a=r&&r.activeViewportIndex||0,o=m.a.getEnabledElements();if(!o||o.length<=a)u.a.log.error("Failed to find the enabled element");else{var i=n.toolType,s=n.measurementId,c=dr.Instance.tools[i].find((function(e){return e._id===s})),l=Object.assign({},c,{location:null});t.onRelabel&&t.onRelabel(l)}},dispatchEditDescription:function(e,n,r){e.persist();var a=r&&r.activeViewportIndex||0,o=m.a.getEnabledElements();if(!o||o.length<=a)u.a.log.error("Failed to find the enabled element");else{var i=n.toolType,s=n.measurementId,c=dr.Instance.tools[i].find((function(e){return e._id===s}));t.onEditDescription&&t.onEditDescription(c)}},dispatchJumpToRowItem:function(t,n,r,a){(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{invertViewportTimepointsOrder:!1,childToolKey:null},a=t.layout.viewports.length,o=n.timepoints.length,i=n.measurements,s=n.timepoints,c=Math.min(o,a),l=e.toolType,u=e.measurementNumber;r.invertViewportTimepointsOrder&&s.reverse();for(var f=i[l],p=[],m=function(e){var t=s[e].timepointId,n=f.find((function(e){return e.timepointId===t&&e.measurementNumber===u}));if(!n)return p.push(null),"continue";var a=n,o=lr.getToolConfiguration(l).tool;if(r.childToolKey)a=n[r.childToolKey];else if(Array.isArray(o.childTools)){var i=o.childTools.find((function(e){return!!n[e]}));a=n[i]}p.push(a)},d=0;d<c;d++)m(d);var h=[];return p.forEach((function(e,n){if(e){var r=ur.get(e.StudyInstanceUID);if(!r)throw new Error("Study not found.");var o=r.findDisplaySet((function(t){return function(e,t){if(e.images&&e.images.length)return e.images.find((function(e){return e.getSOPInstanceUID()===t}))}(t,e.SOPInstanceUID)}));if(!o)throw new Error("Display set not found.");o.SOPInstanceUID=e.SOPInstanceUID,e.frameIndex&&(o.frameIndex=e.frameIndex),n=(n+t.activeViewportIndex)%a,h.push({viewportIndex:n,displaySet:o})}})),{viewportSpecificData:h,layout:[]}})(t,n,r,e,a).viewportSpecificData.forEach((function(t){var n=t.viewportIndex,r=t.displaySet;e(mr(n,r))}));var o=t.toolType,i=t.measurementNumber,s=dr.Instance;Object.keys(s.tools).forEach((function(e){s.tools[e].forEach((function(e){e.active=!1}))})),s.tools[o].filter((function(e){return e.measurementNumber===i})).forEach((function(e){e.active=!0})),s.syncMeasurementsAndToolData(),m.a.getEnabledElements().forEach((function(e){e.image&&m.a.updateImage(e.element)}))}}}),(function(e,t,n){var r=e.timepoints,a=e.saveFunction,o=e.measurementCollection;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(n,!0).forEach((function(t){pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({timepoints:r,saveFunction:a,user:e.user,measurementCollection:o,onSaveComplete:n.onSaveComplete,selectedMeasurementNumber:n.selectedMeasurementNumber,studies:n.studies,canEditStudy:n.canEditStudy},t,{onItemClick:function(n,r){var a=e.viewports,o=e.timepointManager;t.dispatchJumpToRowItem(r,a,o,{invertViewportTimepointsOrder:!1,childToolKey:null})},onRelabelClick:function(n,r){var a=e.viewports;t.dispatchRelabel(n,r,a)},onEditDescriptionClick:function(n,r){var a=e.viewports;t.dispatchEditDescription(n,r,a)},onDeleteClick:function(e,t){u.a.measurements.MeasurementHandlers.onRemoved({detail:{toolType:t.toolType,measurementData:{_id:t.measurementId,lesionNamingNumber:t.lesionNamingNumber,measurementNumber:t.measurementNumber}}})}})}))(or),wr=n(305),Er=n.n(wr),Sr=n(63),Or=n.n(Sr),Ir=n(209);n(1281);function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dr,Tr,Nr,_r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kr(this,jr(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(Ir.CSSTransition,{in:this.props.displayComponent,appear:!0,timeout:500,classNames:"labelling",onExited:this.props.onTransitionExit},this.props.children)}}])&&Cr(n.prototype,r),o&&Cr(n,o),t}(r.Component);Dr=_r,Tr="propTypes",Nr={children:i.a.node.isRequired,displayComponent:i.a.bool.isRequired,onTransitionExit:i.a.func.isRequired},Tr in Dr?Object.defineProperty(Dr,Tr,{value:Nr,enumerable:!0,configurable:!0,writable:!0}):Dr[Tr]=Nr;var Ar=["Abdomen/Chest_Wall","Adrenal","Bladder","Bone","Brain","Breast","Colon","Esophagus","Extremities","Gallbladder","Kidney","Knee","Liver","Lung","Lymph_Node","Mediastinum/Hilum","Muscle","Neck","Other_Soft_Tissue","Ovary","Pancreas","Pelvis","Peritoneum/Omentum","Prostate","Retroperitoneum","Small_Bowel","Spleen","Stomach","Subcutaneous"].map((function(e){return{label:e,value:e}}));n(1282);function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lr(this,Ur(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"simpleDialog ".concat(this.props.rootClass),ref:this.props.componentRef,style:this.props.componentStyle},a.a.createElement("form",{onSubmit:this.props.onConfirm},a.a.createElement("div",{className:"header"},a.a.createElement("span",{className:"closeBtn",onClick:this.props.onClose},a.a.createElement("span",{className:"closeIcon"},"x")),a.a.createElement("h4",{className:"title"},this.props.headerTitle)),a.a.createElement("div",{className:"content"},this.props.children),a.a.createElement("div",{className:"footer"},a.a.createElement("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClose},"Cancel"),a.a.createElement("button",{type:"button",className:"btn btn-confirm",onClick:this.props.onConfirm},"Confirm"))))}}])&&Mr(n.prototype,r),o&&Mr(n,o),t}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vr,"defaultProps",{componentStyle:{},rootClass:""}),Vr.propTypes={headerTitle:i.a.string.isRequired,onClose:i.a.func.isRequired,onConfirm:i.a.func.isRequired};var Br=Vr;n(1283);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=qr(t).call(this,e),n=!a||"object"!==zr(a)&&"function"!=typeof a?Gr(r):a,Yr(Gr(n),"onClose",(function(){n.props.onCancel()})),Yr(Gr(n),"onConfirm",(function(e){e.preventDefault(),n.props.onUpdate(n.state.description)})),Yr(Gr(n),"handleChange",(function(e){n.setState({description:e.target.value})})),n.state={description:e.measurementData.description||""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.description!==e.description&&this.setState({description:this.props.description})}},{key:"render",value:function(){return a.a.createElement(Br,{headerTitle:"Edit Description",onClose:this.onClose,onConfirm:this.onConfirm,rootClass:"editDescriptionDialog"},a.a.createElement("input",{value:this.state.description,className:"simpleDialogInput",id:"description",autoComplete:"off",autoFocus:!0,onChange:this.handleChange}))}}])&&Hr(n.prototype,r),o&&Hr(n,o),t}(r.Component);Yr(Jr,"propTypes",{description:i.a.string,measurementData:i.a.object.isRequired,onCancel:i.a.func.isRequired,onUpdate:i.a.func.isRequired});n(1284);function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(n,!0).forEach((function(t){Qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $r=function(e){var t=e.measurementData,n=e.editLocation,o=e.editDescription,i=e.skipAddLabelButton,s=e.updateLabelling,c=e.labellingDoneCallback,l=e.editDescriptionOnDialog,u=Zr(Object(r.useState)(),2),p=u[0],m=u[1],d=Zr(Object(r.useState)(!0),2),h=d[0],g=d[1],v=Object(r.useRef)(),y=Zr(Object(r.useState)({measurementData:t,editLocation:n,editDescription:o,skipAddLabelButton:i}),2),b=y[0],w=y[1];Object(r.useEffect)((function(){var e=Or()(t);o&&(e.description=void 0),n&&(e.location=void 0);var r=n;o||n||(r=!0),w((function(t){return Xr({},t,{editLocation:r,measurementData:e})}))}),[o,n,t]),Object(r.useEffect)((function(){v.current&&v.current.focus()}),[b]);var E=function(e){return w((function(e){return Xr({},e,{editLocation:!0})}))},S=function(){v.current.focus(),w((function(e){return Xr({},e,{editDescription:!0})}))},O=function(){var e=Or()(b).description,t=void 0===e?"":e;v.current.value=t,w((function(e){return Xr({},e,{editDescription:!1})}))},I=function(e){"Enter"===e.key&&P()},P=function(){var e=v.current.value;s({description:e}),w((function(t){return Xr({},t,{description:e,editDescription:!1})}))},C=function(e,t){var n=t.value,r=t.label;s({location:n}),w((function(e){return Xr({},e,{editLocation:!1,measurementData:Xr({},e.measurementData,{location:n,locationLabel:r})})}))},k=function(){w((function(e){return Xr({},e,{skipAddLabelButton:!0,editLocation:!1})}))},j=function(){return g(!1)};return l?a.a.createElement(Jr,{onCancel:c,onUpdate:function(e){s({description:e}),c()},measurementData:b.measurementData}):a.a.createElement(_r,{displayComponent:h,onTransitionExit:c},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"labellingComponent ".concat(b.editDescription&&"editDescription"),onMouseLeave:function(){return m(setTimeout(j,1e3))},onMouseEnter:function(){p&&(clearTimeout(p),m(null))}},function(){var e=b.skipAddLabelButton,t=b.editLocation,n=b.measurementData,r=n.description,o=n.locationLabel,i=n.location;return e?t?a.a.createElement(f.q,{items:Ar,columns:1,onSelected:C,selectTreeFirstTitle:"Assign Label"}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"checkIconWrapper",onClick:j},a.a.createElement(f.g,{name:"check",className:"checkIcon"})),a.a.createElement("div",{className:"locationDescriptionWrapper"},a.a.createElement("div",{className:"location"},o),a.a.createElement("div",{className:"description"},a.a.createElement("input",{id:"descriptionInput",ref:v,defaultValue:r||"",autoComplete:"off",onKeyPress:I}))),a.a.createElement("div",{className:"commonButtons"},a.a.createElement("button",{type:"button",className:"commonButton left",onClick:E},"Relabel"),a.a.createElement("button",{type:"button",className:"commonButton right",onClick:S},r?"Edit ":"Add ","Description")),a.a.createElement("div",{className:"editDescriptionButtons"},a.a.createElement("button",{type:"button",className:"commonButton left",onClick:O},"Cancel"),a.a.createElement("button",{type:"button",className:"commonButton right",onClick:P},"Save"))):a.a.createElement("button",{type:"button",className:"addLabelButton",onClick:k},i?"Edit":"Add"," Label")}())))};$r.propTypes={measurementData:i.a.object.isRequired,labellingDoneCallback:i.a.func.isRequired,updateLabelling:i.a.func.isRequired,initialTopDistance:i.a.number,skipAddLabelButton:i.a.bool,editLocation:i.a.bool,editDescription:i.a.bool,editDescriptionOnDialog:i.a.bool},$r.defaultProps={skipAddLabelButton:!1,editLocation:!1,editDescription:!1,editDescriptionOnDialog:!1};var ea=$r,ta=["Angle","Bidirectional","Length","FreehandMouse","EllipticalRoi","CircleRoi","RectangleRoi"],na=function(e){var t=e.onSetLabel,n=e.onSetDescription,r=e.isTouchEvent,o=e.eventData,i=e.onClose,s=e.onDelete,c=[{label:"Delete measurement",actionType:"Delete",action:function(e){var t=e.nearbyToolData,n=e.eventData;return s(t,n)}},{label:"Relabel",actionType:"setLabel",action:function(e){var n=e.nearbyToolData,r=e.eventData,a=n.tool;t(r,a)}},{actionType:"setDescription",action:function(e){var t=e.nearbyToolData,r=e.eventData,a=t.tool;n(r,a)}}],l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ha.runCommand("getNearbyToolData",{element:e.element,canvasCoordinates:e.currentPoints.canvas,availableToolTypes:ta});if(!t||!n||"arrowAnnotate"!==n.toolType){var r=[];return n&&c.forEach((function(t){t.params={eventData:e,nearbyToolData:n},"setDescription"===t.actionType&&(t.label="".concat(n.tool.description?"Edit":"Add"," Description")),r.push(t)})),r}}(o,r);return a.a.createElement("div",{className:"ToolContextMenu"},a.a.createElement(f.b,{items:l,onClick:function(e){(0,e.action)(e.params),i&&i()}}))};na.propTypes={isTouchEvent:i.a.bool.isRequired,eventData:i.a.object,onClose:i.a.func,onSetDescription:i.a.func,onSetLabel:i.a.func,onDelete:i.a.func},na.defaultProps={isTouchEvent:!1};var ra=na;function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(n,!0).forEach((function(t){ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sa=u.a.measurements.MeasurementHandlers,ca=sa.onAdded,la=sa.onRemoved,ua=sa.onModified,fa={added:ca,removed:la,modified:Er()((function(e){return ua(e)}),300)};function pa(e){var t=e.servicesManager,n=e.commandsManager,r=(e.configuration,t.services.UIDialogService),a=function(e,t){return fa[e](t)},o=a.bind(this,"added"),i=a.bind(this,"removed"),s=a.bind(this,"modified"),c=a.bind(this,"labelmapModified"),l=function(e){return{x:e&&e.currentPoints.client.x||0,y:e&&e.currentPoints.client.y||0}},u=function(e,t,a){r?r.create(oa({id:"labelling",isDraggable:!1,showOverlay:!0,centralize:!0,content:ea,contentProps:oa({measurementData:a,labellingDoneCallback:function(){return r.dismiss({id:"labelling"})},updateLabelling:function(e){return function(e,t){var r=e.location,a=e.description,o=e.response;r&&(t.location=r),t.description=a||"",o&&(t.response=o),n.runCommand("updateTableWithNewMeasurementData",t)}(e,a)}},t)},e)):console.warn("Unable to show dialog; no UI Dialog Service available.")},f=function(e){r?r.create({eventData:e.detail,content:ra,contentProps:{isTouchEvent:!0}}):console.warn("Unable to show dialog; no UI Dialog Service available.")},p=function(){return d()},d=function(){r?(r.dismiss({id:"context-menu"}),r.dismiss({id:"labelling"})):console.warn("Unable to show dialog; no UI Dialog Service available.")},g=function(e){var t;3===e.detail.event.which?(t=e,r?(r.dismiss({id:"context-menu"}),r.create({id:"context-menu",isDraggable:!1,preservePosition:!1,defaultPosition:l(t.detail),content:ra,contentProps:{eventData:t.detail,onDelete:function(e,t){var r=t.element;n.runCommand("removeToolState",{element:r,toolType:e.toolType,tool:e.tool})},onClose:function(){return r.dismiss({id:"context-menu"})},onSetLabel:function(e,t){u({centralize:!0,isDraggable:!1},{skipAddLabelButton:!0,editLocation:!0},t)},onSetDescription:function(e,t){u({defaultPosition:l(e)},{editDescriptionOnDialog:!0},t)}}})):console.warn("Unable to show dialog; no UI Dialog Service available.")):d()};m.a.events.addEventListener(m.a.EVENTS.ELEMENT_ENABLED,(function(e){var t=e.detail.element;t.addEventListener(h.a.EVENTS.MEASUREMENT_ADDED,o),t.addEventListener(h.a.EVENTS.MEASUREMENT_REMOVED,i),t.addEventListener(h.a.EVENTS.MEASUREMENT_MODIFIED,s),t.addEventListener(h.a.EVENTS.LABELMAP_MODIFIED,c),t.addEventListener(h.a.EVENTS.TOUCH_PRESS,f),t.addEventListener(h.a.EVENTS.MOUSE_CLICK,g),t.addEventListener(h.a.EVENTS.TOUCH_START,p)})),m.a.events.addEventListener(m.a.EVENTS.ELEMENT_DISABLED,(function(e){var t=e.detail.element;t.removeEventListener(h.a.EVENTS.MEASUREMENT_ADDED,o),t.removeEventListener(h.a.EVENTS.MEASUREMENT_REMOVED,i),t.removeEventListener(h.a.EVENTS.MEASUREMENT_MODIFIED,s),t.removeEventListener(h.a.EVENTS.LABELMAP_MODIFIED,c),t.removeEventListener(h.a.EVENTS.TOUCH_PRESS,f),t.removeEventListener(h.a.EVENTS.MOUSE_CLICK,g),t.removeEventListener(h.a.EVENTS.TOUCH_START,p)}))}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(n,!0).forEach((function(t){ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ga={id:"measurements-table",get version(){return window.version},preRegistration:function(e){var t=e.servicesManager,n=e.commandsManager,r=e.configuration;pa({servicesManager:t,commandsManager:n,configuration:void 0===r?{}:r})},getPanelModule:function(e){var t=e.servicesManager,n=e.commandsManager,r=t.services,o=r.UINotificationService,i=r.UIDialogService,s=function(e,t){i&&(i.dismiss({id:"labelling"}),i.create({id:"labelling",centralize:!0,isDraggable:!0,showOverlay:!0,content:ea,contentProps:da({measurementData:t,labellingDoneCallback:function(){return i.dismiss({id:"labelling"})},updateLabelling:function(e){var r=e.location,a=e.description,o=e.response;t.location=r||t.location,t.description=a||"",t.response=o||t.response,n.runCommand("updateTableWithNewMeasurementData",t)}},e)}))};return{menuOptions:[{icon:"measure-target",label:"Measurements",target:"measurement-panel"}],components:[{id:"measurement-panel",component:function(e){return a.a.createElement(br,{onRelabel:function(e){return s({editLocation:!0,skipAddLabelButton:!0},e)},studies:e.studies,onEditDescription:function(e){return s({editDescriptionOnDialog:!0},e)},onSaveComplete:function(e){o&&o.show(e)}})}}],defaultContext:["VIEWER"]}}},va=n(774),ya=n(207),ba=n(426),wa=function(e){var t=e.progress,n=e.animationDuration;return a.a.createElement("div",{style:{background:"#29d",height:2,left:0,marginLeft:"".concat(100*(-1+t),"%"),position:"fixed",top:0,transition:"margin-left ".concat(n,"ms linear"),width:"100%",zIndex:1031}},a.a.createElement("div",{style:{boxShadow:"0 0 10px #29d, 0 0 5px #29d",display:"block",height:"100%",opacity:1,position:"absolute",right:0,transform:"rotate(3deg) translate(0px, -4px)",width:100}}))},Ea=function(e){var t=e.children,n=e.isFinished,r=e.animationDuration;return a.a.createElement("div",{style:{opacity:n?0:1,pointerEvents:"none",transition:"opacity ".concat(r,"ms linear")}},t)},Sa=(n(1286),n(1287),n(1288),n(114));function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pa(e){return(Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xa=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=Pa(t)).call.apply(e,[this].concat(i)))||"object"!==Oa(a)&&"function"!=typeof a?Ca(r):a,ja(Ca(n),"state",{isLoading:!1}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(){e.props.setContext&&e.props.setContext(window.location.pathname)}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.isAuthenticated,o=this.context.appConfig,i=void 0===o?{}:o;if(null!=n&&r){var s=ya.a(i),c=this.props.location.pathname,u=!s.find((function(e){return Object(l.f)(c,{path:e.path,exact:!0})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(va.a,{isAnimating:this.state.isLoading},(function(e){var t=e.isFinished,n=e.progress,r=e.animationDuration;return a.a.createElement(Ea,{isFinished:t,animationDuration:r},a.a.createElement(wa,{progress:n,animationDuration:r}))})),a.a.createElement(l.b,{exact:!0,path:"/silent-refresh.html",onEnter:ya.c}),a.a.createElement(l.b,{exact:!0,path:"/logout-redirect.html",onEnter:ya.c}),!u&&s.map((function(t){var n=t.path,r=t.Component;return a.a.createElement(l.b,{key:n,exact:!0,path:n},(function(t){var n=t.match;return a.a.createElement(Ir.CSSTransition,{in:null!==n,timeout:300,classNames:"fade",unmountOnExit:!0,onEnter:function(){e.setState({isLoading:!0})},onEntered:function(){e.setState({isLoading:!1})}},null===n?a.a.createElement(a.a.Fragment,null):a.a.createElement(f.d,{context:n.url},a.a.createElement(r,{match:n,location:e.props.location})))}))})),u&&a.a.createElement(ba.a,null))}return null}}])&&Ia(n.prototype,r),o&&Ia(n,o),t}(r.Component);ja(xa,"contextType",Sa.c),ja(xa,"propTypes",{history:i.a.object.isRequired,user:i.a.object,isAuthenticated:i.a.bool,setContext:i.a.func,userManager:i.a.object,location:i.a.object});var Da=Object(s.b)((function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated}}),null)(xa),Ta=Object(f.B)(Object(l.h)(Da)),Na=n(317);function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ua(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t){return(Fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return Ha})),n.d(t,"c",(function(){return Ba})),n.d(t,"d",(function(){return qa})),localStorage.setItem("debug","cornerstoneTools");var Ba,za={getAppState:function(){return Pn.getState()},getActiveContexts:function(){return Object(Na.a)(Pn.getState())}},Ha=new re.a(za),qa=new ae.a;window.store=Pn,window.ohif=window.ohif||{},window.ohif.app={commandsManager:Ha,servicesManager:qa,extensionManager:Ba};var Ga=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=La(t).call(this,e))||"object"!==_a(a)&&"function"!=typeof a?Ua(r):a,Va(Ua(n),"_appConfig",void 0);var o=e.config,i=e.defaultExtensions;n._appConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(n,!0).forEach((function(t){Va(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{showStudyList:!0,cornerstoneExtensionConfig:{},extensions:[],routerBasename:"/"},{},"function"==typeof o?o({servicesManager:qa}):o);var s,c,l,f,p=n._appConfig,d=p.servers,h=p.cornerstoneExtensionConfig,g=p.extensions;return s=n._appConfig,(l=window.process)&&l.env&&l.env.PUBLIC_URL&&(c=l.env.PUBLIC_URL),window.info={version:pn,homepage:c},window.cornerstone=m.a,window.cornerstoneWADOImageLoader=ln.a,ln.a.external.cornerstone=m.a,ln.a.external.dicomParser=fn.a,u.a.user.getAccessToken=function(){var e=window.store.getState();if(e.oidc&&e.oidc.user)return e.oidc.user.access_token},u.a.errorHandler.getHTTPErrorHandler=function(){return s.httpErrorHandler},ln.a.configure({beforeSend:function(e){var t=u.a.DICOMWeb.getAuthorizationHeader();t.Authorization&&e.setRequestHeader("Authorization",t.Authorization)},errorInterceptor:function(e){"function"==typeof s.httpErrorHandler&&s.httpErrorHandler(e)}}),f=[oe.a,ie.a,se.a,ce.a,le.a],qa.registerServices(f),function(e,t,n){Ba=new ue.a({commandsManager:Ha,servicesManager:qa,appConfig:n,api:{contexts:Sa.b,hooks:{useAppContext:Sa.d}}});var r=[xn,[ne,t]];r.push(ga);var a=r.concat(e);Ba.registerExtensions(a)}([].concat(Aa(i),Aa(g)),h,n._appConfig),function(e){e&&B.a.addServers(e,Pn)}(d),function(){var e={maxWebWorkers:Math.max(Math.min(navigator.hardwareConcurrency-1,dn),1),startWebWorkersOnDemand:!0,taskConfiguration:{decodeTask:{initializeCodecsOnStartup:!1,usePDFJS:!1,strict:!1}}};mn||(ln.a.webWorkerManager.initialize(e),mn=!0)}(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fa(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this._appConfig.routerBasename,t=qa.services,n=t.UINotificationService,r=t.UIDialogService,o=t.UIModalService,i=t.LoggerService;return a.a.createElement(f.d,{context:"App"},a.a.createElement(s.a,{store:Pn},a.a.createElement(Sa.a,{config:this._appConfig},a.a.createElement(c.a,{basename:e},a.a.createElement(f.i,{service:i},a.a.createElement(f.s,{service:n},a.a.createElement(f.c,{service:r},a.a.createElement(f.j,{modal:f.k,service:o},a.a.createElement(sn,null,a.a.createElement(an,null,a.a.createElement(l.d,null,a.a.createElement(l.b,{exact:!0,path:"/",component:it}),a.a.createElement(l.b,{exact:!0,path:"/login",component:wt}),a.a.createElement(l.b,{exact:!0,path:"/signup",component:Ct}),a.a.createElement(l.b,{exact:!0,path:"/add_description/:email",component:ke}),a.a.createElement(l.b,{exact:!0,path:"/facebook",component:Me}),a.a.createElement(l.b,{exact:!0,path:"/google",component:Yt}),a.a.createElement(l.b,{exact:!0,path:"/complete/github/",component:He}),a.a.createElement(l.b,{exact:!0,path:"/complete/linkedin/",component:rt}),a.a.createElement(l.b,{exact:!0,path:"/callback/spotify/",component:Xe}),a.a.createElement(l.b,{exact:!0,path:"/reset-password",component:Mt}),a.a.createElement(l.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:Vt}),a.a.createElement(l.b,{exact:!0,path:"/activate/:uid/:token",component:Nt})),a.a.createElement(Ta,null)))))))))))}}])&&Ma(n.prototype,r),o&&Ma(n,o),t}(r.Component);Va(Ga,"propTypes",{config:i.a.oneOfType([i.a.func,i.a.shape({routerBasename:i.a.string.isRequired,extensions:i.a.array})]).isRequired,defaultExtensions:i.a.array}),Va(Ga,"defaultProps",{config:{showStudyList:!0,extensions:[]},defaultExtensions:[]});var Wa=Ga;t.b=Wa},312:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(67),c=n(28),l=n.n(c),u=n(6),f=n.n(u),p=n(150);n(650),n(685),n(1265);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e){var t=e.onDatesChange,n=e.startDate,r=e.endDate,o=(e.presets,d(e,["onDatesChange","startDate","endDate","presets"]));return a.a.createElement(p.DateRangePicker,m({},o,{startDate:n,endDate:r,renderCalendarInfo:function(){var o=e.presets;return a.a.createElement("div",{className:"PresetDateRangePicker_panel"},o.map((function(e){var o=e.text,i=e.start,s=e.end,c=n===i&&r===s;return a.a.createElement("button",{key:o,type:"button",className:"PresetDateRangePicker_button ".concat(c?"PresetDateRangePicker_button__selected":""),onClick:function(){return t({startDate:i,endDate:s,preset:!0})}},o)})))},onDatesChange:t,renderMonthElement:function e(t){var n=t.month,r=t.onMonthSelect,o=t.onYearSelect,s={margin:"0 5px"};return e.propTypes={onMonthSelect:i.a.func,onYearSelect:i.a.func},a.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.a.createElement("div",{style:s},a.a.createElement("select",{className:"DateRangePicker_select",value:n.month(),onChange:function(e){return r(n,e.target.value)}},f.a.months().map((function(e,t){return a.a.createElement("option",{key:t,value:t},e)})))),a.a.createElement("div",{style:s},a.a.createElement("select",{className:"DateRangePicker_select",value:n.year(),onChange:function(e){return o(n,e.target.value)}},function(){for(var e=[],t=0;t<20;t++){var n=f()().year()-t;e.push(a.a.createElement("option",{value:n},n))}return e}())))},startDatePlaceholderText:"Start Date",endDatePlaceholderText:"End Date",phrases:{closeDatePicker:"Common:Close",clearDates:"Clear dates"}}))}h.propTypes={presets:i.a.arrayOf(i.a.shape({text:i.a.string,start:i.a.required,end:i.a.required})),onDatesChange:i.a.func.isRequired,startDate:i.a.instanceOf(Date),endDate:i.a.instanceOf(Date),month:i.a.instanceOf(Date)};var g=h,v=n(11);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=function(e,t){return t||e||null},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";if("number"==typeof t)return"end"===n?e:void e.subtract(t,"days")};function E(e){var t=e.meta,n=e.values,o=e.onSort,i=e.onValueChange,s=e.sortFieldName,c=e.sortDirection,l=e.studyListDateFilterNumDays,u=n||{},m=u.modelDateTo,d=u.modelDateFrom,h=y(Object(r.useState)(null),2),E=h[0],S=h[1],O=["sort","sort-up","sort-down"],I="asc"===c?O[1]:O[2],P=f()(),C=f()().subtract(7,"day"),k=f()().subtract(1,"month"),j=w(P,l,"start"),x=w(P,l,"end"),D=[{text:"Today",start:P,end:P},{text:"Last 7 days",start:C,end:P},{text:"Last 30 days",start:k,end:P}];return t.map((function(e,t){var r=e.displayText,c=e.fieldName,l=e.inputType,u=s===c?I:O[0];return a.a.createElement("th",{key:"".concat(c,"-").concat(t)},a.a.createElement("label",{htmlFor:"filter-".concat(c),onClick:function(){return o(c)}},"".concat(r),a.a.createElement(v.g,{name:u,style:{fontSize:"12px"}})),"text"===l&&a.a.createElement("input",{type:"text",id:"filter-".concat(c),className:"form-control studylist-search",value:n[c],onChange:function(e){return i(c,e.target.value)}}),"date-range"===l&&a.a.createElement(g,{startDate:b(d,j),startDateId:"start-date",endDate:b(m,x),endDateId:"end-date",onDatesChange:function(e){var t=e.startDate,n=e.endDate;e.preset;i("modelDateFrom",t),i("modelDateTo",n)},focusedInput:E,onFocusChange:function(e){return S(e)},numberOfMonths:1,showClearDates:!0,anchorDirection:"left",presets:D,hideKeyboardShortcutsPanel:!0,isOutsideRange:function(e){return!Object(p.isInclusivelyBeforeDay)(e,f()())}}))}))}E.propTypes={meta:i.a.arrayOf(i.a.shape({displayText:i.a.string.isRequired,fieldName:i.a.string.isRequired,inputType:i.a.oneOf(["text","date-range"]).isRequired,size:i.a.number.isRequired})).isRequired,values:i.a.object.isRequired,onSort:i.a.func.isRequired,sortFieldName:i.a.string,sortDirection:i.a.oneOf([null,"asc","desc"])},E.defaultProps={};var S=E,O=n(315);n(1266);function I(e){var t=e.isLoading,n=e.hasError,r=e.models,o=e.sort,i=e.onSort,s=e.filterValues,c=e.onFilterChange,l=e.onSelectItem,u=e.studyListDateFilterNumDays,f=e.displaySize,p=[{displayText:"ModelName",fieldName:"name",inputType:"text",size:200},{displayText:"Version",fieldName:"version",inputType:"text",size:100},{displayText:"Task",fieldName:"task",inputType:"text",size:200},{displayText:"CreatedAt",fieldName:"created_at",inputType:"date-range",size:200}],m=p.map((function(e){return e.size})).reduce((function(e,t){return e+t}));return a.a.createElement("table",{className:"modeltable table--striped table--hoverable"},a.a.createElement("colgroup",null,p.map((function(e,t){var n=e.size/m*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%")}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(S,{meta:p,values:s,onSort:i,onValueChange:c,sortFieldName:o.fieldName,sortDirection:o.direction,studyListDateFilterNumDays:u}))),a.a.createElement("tbody",{className:"table-body"},t&&a.a.createElement("tr",{className:"no-hover"},a.a.createElement("td",{colSpan:p.length},a.a.createElement(O.a,null))),!t&&n&&a.a.createElement("tr",{className:"no-hover"},a.a.createElement("td",{colSpan:p.length},a.a.createElement("div",{className:"notFound"},"There was an error fetching models"))),!t&&!r.length&&a.a.createElement("tr",{className:"no-hover"},a.a.createElement("td",{colSpan:p.length},a.a.createElement("div",{className:"notFound"},"No matching results"))),!t&&r.map((function(e,t){return a.a.createElement(P,{key:"".concat(e.name,"-").concat(t),onClick:function(e){return l(e)},name:e.name,version:e.version,port:e.port||"",created_at:e.created_at,task:e.task,displaySize:f})}))))}function P(e){var t=e.name,n=e.version,r=e.created_at,o=e.task,i=e.isHighlighted,s=e.onClick;return a.a.createElement("tr",{onClick:function(){return s(t)},className:l()({active:i})},a.a.createElement("td",{style:{textAlign:"center"}},t),a.a.createElement("td",null,a.a.createElement("div",{style:{textAlign:"center",display:"flex",justifyContent:"space-between"}},a.a.createElement("div",{className:"hide-xs",style:{whiteSpace:"pre-wrap",flexGrow:1}},n))),a.a.createElement("td",null,a.a.createElement("div",{style:{textAlign:"center",display:"flex",justifyContent:"space-between"}},a.a.createElement("div",{className:"hide-xs",style:{whiteSpace:"pre-wrap",flexGrow:1}},o))),a.a.createElement("td",{style:{textAlign:"center"}},r))}P.defaultProps={isHighlighted:!1};n(1267);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=j(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==C(a)&&"function"!=typeof a?x(r):a,T(x(n),"nextPage",(function(){n.props.nextPageFunc(n.props.currentPage)})),T(x(n),"prevPage",(function(){n.props.prevPageFunc(n.props.currentPage)})),T(x(n),"onRowsPerPageChange",(function(e){n.props.onRowsPerPageChange(parseInt(e.target.value))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"renderPaginationButtons",value:function(){return a.a.createElement("div",{className:"col-xs-8 col-sm-9 col-md-9"},a.a.createElement("div",{className:"form-inline form-group page-buttons noselect"},a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"pagination-control no-margins"},a.a.createElement("li",{className:"page-item prev"},a.a.createElement("button",{onClick:this.prevPage,disabled:0===this.props.currentPage,className:"btn page-link"},"Previous")),a.a.createElement("li",{className:"page-item next"},a.a.createElement("button",{onClick:this.nextPage,disabled:0===this.props.recordCount||this.props.rowsPerPage>this.props.recordCount,className:"btn page-link"},"Next"))))))}},{key:"renderRowsPerPageDropdown",value:function(){return a.a.createElement("div",{className:"form-inline form-group rows-per-page"},a.a.createElement("span",null,"Show"),a.a.createElement("select",{onChange:this.onRowsPerPageChange,defaultValue:this.props.rowsPerPage},this.props.pageOptions.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))))}},{key:"render",value:function(){return a.a.createElement("div",{className:"modelpagination-area"},a.a.createElement("div",{className:"rows-dropdown"},this.renderRowsPerPageDropdown()),a.a.createElement("div",{className:"pagination-buttons"},a.a.createElement("div",{className:"form-inline form-group page-number pull-right"},this.renderPaginationButtons())))}}])&&k(n.prototype,r),o&&k(n,o),t}(r.PureComponent);T(N,"defaultProps",{pageOptions:[5,10,25,50,100],rowsPerPage:25,currentPage:0}),T(N,"propTypes",{pageOptions:i.a.array,rowsPerPage:i.a.number.isRequired,currentPage:i.a.number.isRequired,nextPageFunc:i.a.func,prevPageFunc:i.a.func,onRowsPerPageChange:i.a.func,recordCount:i.a.number.isRequired});var _=N,A=n(114),R=n(9),M=n.n(R),L=n(19),U=n(331),F=n(797),V=n(1428),B=n(1377),z=n(1418);n(1268);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,s,"next",e)}function s(e){q(o,r,a,i,s,"throw",e)}i(void 0)}))}}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){function t(e){var n,r,o,i=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=K(t).call(this,e),n=!o||"object"!==H(o)&&"function"!=typeof o?X(r):o,Z(X(n),"FormTextArea",(function(e){var t=e.max,n=e.value,r=Y(e,["max","value"]);return a.a.createElement("div",{className:"k-form-field-wrap"},a.a.createElement(V.a,W({autoSize:!0,value:n,maxLength:t,rows:3},r)),a.a.createElement("div",{className:"counter"},n.length," / ",t))})),Z(X(n),"CustomInput",(function(e){var t=e.fieldType,n=Y(e,["fieldType"]);return a.a.createElement("div",null,a.a.createElement(B.a,W({type:t},n)),a.a.createElement(i.ValidationMessage,n))})),Z(X(n),"ValidationMessage",(function(e){var t=e.valid,n=e.visited,r=e.validationMessage;return a.a.createElement(a.a.Fragment,null,!t&&n&&a.a.createElement("div",{className:"required"},r))})),Z(X(n),"requiredValidator",(function(e){return e?"":"This field is required"})),Z(X(n),"onResetPreferences",(function(){n.setState({redirect:!1,name:n.props.info[0].name,version:n.props.info[0].version,port:n.props.info[0].port,algorithm_overview:n.props.info[0].algorithm_overview,model_architecture:n.props.info[0].model_architecture,model_performance:n.props.info[0].model_performance,data_description:n.props.info[0].data_description,input:n.props.info[0].input,inputModality:n.props.info[0].inputModality,output:n.props.info[0].output,references:n.props.info[0].references,additional_info:n.props.info[0].additional_info,user:n.props.info[0].user,task:n.props.info[0].task,created_at:n.props.info[0].created_at,visibility:n.props.info[0].visibility,last_modification_at:n.props.info[0].last_modification_at,last_modification_by:n.props.info[0].last_modification_by,bodyPart:n.props.info[0].bodyPart})})),Z(X(n),"onClose",(function(){n.props.onClose()})),Z(X(n),"goToEditor",(function(){n.setState({redirect:!0})})),Z(X(n),"deleteRecord",G(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.a.create({}),e.next=3,M.a.get("/api/model_delete/?algorithm=".concat(n.state.name),{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 3:200===(r=e.sent).status?(t.show({title:"Delete Algorithm",message:"Algorithm deleted - Success!",type:"success",duration:6e3}),n.props.onClose()):500===r.status&&t.show({title:"Delete Algorithm",message:"Failed to delete algorithm!",type:"error",duration:1e4});case 5:case"end":return e.stop()}}),e)})))),Z(X(n),"onSave",function(){var e=G(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z.a.create({}),a="/api/model/?user=".concat(n.props.user.email),(o=new FormData).append("name",t.name),o.append("port",t.port),o.append("version",t.version),o.append("algorithm_overview",t.algorithm_overview),o.append("model_architecture",t.model_architecture),o.append("model_performance",t.model_performance),o.append("data_description",t.data_description),o.append("input",t.input),o.append("inputModality",t.inputModality),o.append("output",t.output),o.append("references",t.references),o.append("additional_info",t.additional_info),o.append("bodyPart",t.bodyPart),e.next=18,M.a.put(a,o,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 18:200===(i=e.sent).status?r.show({title:"Edit Algorithm",message:"Algorithm edited - Success!",type:"success",duration:6e3}):500===i.status&&r.show({title:"Edit Algorithm",message:"Failed to edit algorithm!",type:"error",duration:1e4});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.state={redirect:!1,name:n.props.info[0].name,version:n.props.info[0].version,port:n.props.info[0].port,algorithm_overview:n.props.info[0].algorithm_overview,model_architecture:n.props.info[0].model_architecture,model_performance:n.props.info[0].model_performance,data_description:n.props.info[0].data_description,input:n.props.info[0].input,inputModality:n.props.info[0].inputModality,output:n.props.info[0].output,references:n.props.info[0].references,additional_info:n.props.info[0].additional_info,user:n.props.info[0].user,task:n.props.info[0].task,created_at:n.props.info[0].created_at,last_modification_at:n.props.info[0].last_modification_at,last_modification_by:n.props.info[0].last_modification_by,visibility:n.props.info[0].visibility,file:n.props.info[0].file,bodyPart:n.props.info[0].bodyPart},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state.visibility,n="";return!0===t?n="Public":!1===t&&(n="Private"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"ModelContent","data-cy":"about-modal"},a.a.createElement(U.a,{initialValues:{name:this.state.name,version:this.state.version,bodyPart:this.state.bodyPart,algorithm_overview:this.state.algorithm_overview,model_architecture:this.state.model_architecture,model_performance:this.state.model_performance,data_description:this.state.data_description,input:this.state.input,inputModality:this.state.inputModality,output:this.state.output,references:this.state.references,additional_info:this.state.additional_info,user:this.state.user,task:this.state.task,created_at:this.state.created_at,visibility:this.state.visibility,last_modification_at:this.state.last_modification_at,last_modification_by:this.state.last_modification_by},onSubmit:this.onSave,render:function(t){return a.a.createElement("form",{className:"formModel",onSubmit:t.onSubmit},a.a.createElement("div",{className:"header"},a.a.createElement("button",{className:"btn btn-danger pull-left",onClick:e.goToEditor,title:"Go to Code Editor"},"Edit code"),a.a.createElement("button",{className:"btn btn-default",onClick:e.deleteRecord,title:"Delete Algorithm"},"Delete")),a.a.createElement("table",{className:"table table-responsive"},a.a.createElement("tbody",null,a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Algorithm Name"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("name"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Task"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("task"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Body Part Examined"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("bodyPart"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Visibility"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:n,className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Created At"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("created_at"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Last Modification At"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("last_modification_at"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Last Modification By"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("last_modification_by"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Created By"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("user"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Version"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("version"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Algorithm Overview"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"algorithm_overview",max:500,value:t.valueGetter("algorithm_overview"),component:e.FormTextArea,validator:[e.requiredValidator]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Model Architecture"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"model_architecture",max:500,value:t.valueGetter("model_architecture"),component:e.FormTextArea,validator:[e.requiredValidator]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Model Performance"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"model_performance",max:500,value:t.valueGetter("model_performance"),component:e.FormTextArea,validator:[e.requiredValidator]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Data Description"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"data_description",max:500,value:t.valueGetter("data_description"),component:e.FormTextArea,validator:[e.requiredValidator]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Input"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"input",max:500,value:t.valueGetter("input"),component:e.FormTextArea,validator:[e.requiredValidator]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Input Modality"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("inputModality"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"References"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"references",max:500,optional:!0,value:t.valueGetter("references"),component:e.FormTextArea,validator:[]}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Additional Information"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"additional_info",max:500,optional:!0,value:t.valueGetter("additional_info"),component:e.FormTextArea,validator:[]}))))),a.a.createElement(v.u,{onResetPreferences:t.onFormReset,onSave:t.onSubmit,hasErrors:!t.allowSubmit,onCancel:e.onClose}),e.state.redirect?e.props.history.push({pathname:"/editor",state:{name:t.valueGetter("name"),port:e.state.port,version:t.valueGetter("version"),algorithm_overview:t.valueGetter("algorithm_overview"),model_architecture:t.valueGetter("model_architecture"),model_performance:t.valueGetter("model_performance"),data_description:t.valueGetter("data_description"),input:t.valueGetter("input"),output:t.valueGetter("output"),references:t.valueGetter("references"),additional_info:t.valueGetter("additional_info"),user:e.props.user.email,task:t.valueGetter("task"),visibility:t.valueGetter("visibility"),file:e.state.file,inputModality:t.valueGetter("inputModality"),bodyPart:t.valueGetter("bodyPart")}}):null)}})))}}])&&J(n.prototype,r),o&&J(n,o),t}(r.Component);Z($,"propTypes",{user:i.a.object,info:i.a.array,onClose:i.a.func,history:i.a.object});var ee=Object(L.b)((function(e){return{user:e.auth.user}}),null)($);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=oe(t).call(this,e),n=!o||"object"!==te(o)&&"function"!=typeof o?ie(r):o,ce(ie(n),"onClose",(function(){n.props.onClose()})),ce(ie(n),"FormTextArea",(function(e){var t=e.max,n=e.value,r=re(e,["max","value"]);return a.a.createElement("div",{className:"k-form-field-wrap"},a.a.createElement(V.a,ne({readOnly:!0,autoSize:!0,value:n,maxLength:t,rows:3},r)),a.a.createElement("div",{className:"counter"},n.length," / ",t))})),n.state={redirect:!1,name:n.props.info[0].name,version:n.props.info[0].version,port:n.props.info[0].port,algorithm_overview:n.props.info[0].algorithm_overview,model_architecture:n.props.info[0].model_architecture,model_performance:n.props.info[0].model_performance,data_description:n.props.info[0].data_description,input:n.props.info[0].input,output:n.props.info[0].output,references:n.props.info[0].references,additional_info:n.props.info[0].additional_info,user:n.props.info[0].user,task:n.props.info[0].task,created_at:n.props.info[0].created_at,last_modification_at:n.props.info[0].last_modification_at,last_modification_by:n.props.info[0].last_modification_by,visibility:n.props.info[0].visibility,file:n.props.info[0].file},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state.visibility,n="";return!0===t?n="Public":!1===t&&(n="Private"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"ModelContent","data-cy":"about-modal"},a.a.createElement(U.a,{initialValues:{name:this.state.name,version:this.state.version,port:this.state.port,algorithm_overview:this.state.algorithm_overview,model_architecture:this.state.model_architecture,model_performance:this.state.model_performance,data_description:this.state.data_description,input:this.state.input,output:this.state.output,references:this.state.references,additional_info:this.state.additional_info,user:this.state.user,task:this.state.task,created_at:this.state.created_at,visibility:this.state.visibility,last_modification_at:this.state.last_modification_at,last_modification_by:this.state.last_modification_by},render:function(t){return a.a.createElement("table",{className:"table table-responsive"},a.a.createElement("tbody",null,a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Algorithm Name"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("name"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Task"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("task"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Visibility"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:n,className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Created At"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("created_at"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Last Modification At"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("last_modification_at"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Last Modification By"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("last_modification_by"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Created By"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("user"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Port"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("port"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"title"},"Version"),a.a.createElement("td",null,a.a.createElement("input",{style:{textAlign:"center"},readOnly:!0,type:"text",value:t.valueGetter("version"),className:"preferencesInput"}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Algorithm Overview"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"algorithm_overview",max:500,value:t.valueGetter("algorithm_overview"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Model Architecture"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"model_architecture",max:500,value:t.valueGetter("model_architecture"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Model Performance"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"model_performance",max:500,value:t.valueGetter("model_performance"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Data Description"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"data_description",max:500,value:t.valueGetter("data_description"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Input"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"input",max:500,value:t.valueGetter("input"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"References"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"references",max:500,optional:!0,value:t.valueGetter("references"),component:e.FormTextArea}))),a.a.createElement("tr",{style:{backgroundColor:"transparent"}},a.a.createElement("td",{className:"titleText"},"Additional Information"),a.a.createElement("td",null,a.a.createElement(F.a,{name:"additional_info",max:500,optional:!0,value:t.valueGetter("additional_info"),component:e.FormTextArea})))))}})))}}])&&ae(n.prototype,r),o&&ae(n,o),t}(r.Component);ce(le,"propTypes",{user:i.a.object,info:i.a.array,onClose:i.a.func,history:i.a.object});var ue=Object(L.b)((function(e){return{user:e.auth.user}}),null)(le);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){me(o,r,a,i,s,"next",e)}function s(e){me(o,r,a,i,s,"throw",e)}i(void 0)}))}}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ge(e){var t=e.title,n=e.group,o=e.history,i=e.user,s=e.modal,c=s.show,l=s.hide,u=he(Object(r.useState)({fieldName:"name",direction:"desc"}),2),f=u[0],p=u[1],m=he(Object(r.useState)({modelDateTo:null,modelDateFrom:null,name:"",version:"",task:"",group:n}),2),d=m[0],h=m[1],g=he(Object(r.useState)([]),2),y=g[0],b=g[1],w=he(Object(r.useState)({isSearchingForModels:!1,error:null}),2),E=w[0],S=w[1],O=he(Object(r.useState)(25),2),P=O[0],C=O[1],k=he(Object(r.useState)(0),2),j=k[0],x=k[1],D=Object(r.useContext)(A.c),T=Object(v.H)(["(min-width: 1750px)","(min-width: 1000px) and (max-width: 1749px)","(max-width: 999px)"],["large","medium","small"],"medium"),N=Object(v.F)(f,200),R=Object(v.F)(d,250),L=D.appConfig,U=void 0===L?{}:L;if(Object(r.useEffect)((function(){(function(){var e=de(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S({error:null,isSearchingForModels:!0}),e.next=4,ve(i,R,N,P);case 4:t=e.sent,b(t),S({error:null,isSearchingForModels:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S({error:!0,isFetching:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[R,N,P,j,T,i]),E.error)return a.a.createElement("div",null,"Error: ",JSON.stringify(E.error));if(y===[])return a.a.createElement("div",null,"Loading...");function F(){l()}function V(){return(V=de(regeneratorRuntime.mark((function e(t){var n,r,a,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/model/?user=".concat(i.email,"&name=").concat(t),e.next=3,M.a.get(n,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 3:r=e.sent,a=r.data,console.log(a),s=a[0].user,l=a[0].user_permissions,s===i.email||l.includes("Edit Models")?c({content:ee,contentProps:{info:a,onClose:F,history:o},title:"".concat(t)}):c({content:ue,contentProps:{info:a,onClose:F,history:o},title:"".concat(t)});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"model-list-header"},a.a.createElement("div",{className:"header"},t?a.a.createElement("h1",{style:{fontWeight:300,fontSize:"22px"}},t," ",a.a.createElement("b",null,a.a.createElement("i",null,n))):a.a.createElement("h1",{style:{fontWeight:300,fontSize:"22px"}},a.a.createElement("b",null,i.email),"'s ModelList")),a.a.createElement("div",{className:"actions"},a.a.createElement("span",{className:"model-count"},y.length))),a.a.createElement("div",{className:"table-head-background"}),a.a.createElement("div",{className:"model-list-container"},a.a.createElement(I,{isLoading:E.isSearchingForModels,hasError:!0===E.error,models:y,onSelectItem:function(e){!function(e){V.apply(this,arguments)}(e)},sort:f,onSort:function(e){var t=e,n="asc";e===f.fieldName&&("asc"===f.direction?n="desc":(t=null,n=null)),p({fieldName:t,direction:n})},filterValues:d,onFilterChange:function(e,t){h((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,pe({},e,t))}))},modelListDateFilterNumDays:U.studyListDateFilterNumDays,displaySize:T}),a.a.createElement(_,{currentPage:j,nextPageFunc:function(){return x(j+1)},prevPageFunc:function(){return x(j-1)},onRowsPerPageChange:function(e){return C(e)},rowsPerPage:P,recordCount:y.length})))}function ve(e,t,n,r){return ye.apply(this,arguments)}function ye(){return(ye=de(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,l,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.fieldName||"name",i=r.direction||"desc",s={name:n.name,version:n.version,task:n.task,modelDateFrom:n.modelDateFrom,modelDateTo:n.modelDateTo,group:n.group},e.next=5,we(t,s);case 5:return c=e.sent,l=be(c,o,i),u=l.length<a?l.length:a,f=l.slice(0,u),e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,n){var r=e.map((function(e){return f()(e.created_at,"MMM DD, YYYY",!0).isValid()||(e.created_at=f()(e.created_at,"YYYY-MM-DD").format("MMM DD, YYYY")),e}));return r.sort((function(e,r){var a=e[t],o=r[t];return"created_at"===t&&(a=f()(a).toISOString(),o=f()(o).toISOString()),"desc"===n?a<o?-1:a>o?1:0:a>o?-1:a<o?1:0})),r}function we(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=de(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/model/?user=".concat(t.email),Object.keys(n).forEach((function(e){if(null!==n[e]&&""!==n[e]&&void 0!==n[e]){var t=n[e];"modelDateTo"!==e&&"modelDateFrom"!==e||(t=f()(t,"MMM DD, YYYY").format("YYYY-MM-DD")),r+="&".concat(e,"=").concat(t)}})),e.next=4,M.a.get(r,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.d(t,"b",(function(){return ve})),ge.propTypes={filters:i.a.object,group:i.a.string,user:i.a.object,history:i.a.object,modal:i.a.object,title:i.a.string},ge.defaultProps={group:""};t.a=Object(s.h)(Object(v.K)(ge))},313:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(305),c=n.n(s),l=n(311),u=n(203),f=(n(821),n(202)),p=n(28),m=n.n(p);function d(e){return a.a.createElement("div",{className:"loadingIndicator",style:{position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto",textAlign:"center",pointerEvents:"none"}},a.a.createElement("p",null,"Error"),a.a.createElement("p",{className:"description"},"An error has occurred."),a.a.createElement("p",{className:"details"},e.details))}d.propTypes={details:i.a.string};var h=d;function g(e){return a.a.createElement("div",{className:"loading-indicator",style:{position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto",textAlign:"center",pointerEvents:"none"}},"Loading ",e.percentComplete)}g.propTypes={percentComplete:i.a.number};var v=g;function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){var t,n,o=e.active,i=e.width,s=e.height,c=e.imageSrc,l=e.imageId,u=e.stackPercentComplete,p=e.error,d=e.showProgressBar,g=y(Object(r.useState)(!1),2),b=g[0],w=g[1],E=y(Object(r.useState)(!1),2),S=E[0],O=(E[1],y(Object(r.useState)({}),2)),I=O[0],P=O[1],C=Object(r.createRef)();p||S?t=a.a.createElement(h,null):b&&(t=a.a.createElement(v,null));var k=d&&void 0!==u,j=function(){return l&&!c},x=function(){n&&(w(!0),n.then((function(e){P(e)})).catch((function(e){e.isCanceled})))},D=function(){j()&&(n=f.a.makeCancelable(cornerstone.loadAndCacheImage(l)))},T=Object(r.useCallback)((function(){n&&n.cancel()}));return Object(r.useEffect)((function(){return function(){T()}}),[T]),Object(r.useEffect)((function(){I.imageId&&(cornerstone.renderToCanvas(C.current,I),w(!1))}),[C,I,I.imageId]),Object(r.useEffect)((function(){I.imageId&&I.imageId===l||(T(),D(),x())}),[x,I.imageId,l,T,D]),a.a.createElement("div",{className:m()("ImageThumbnail",{active:o})},a.a.createElement("div",{className:"image-thumbnail-canvas"},j()?a.a.createElement("canvas",{ref:C,width:i,height:s}):a.a.createElement("img",{className:"static-image",src:c,height:s,alt:""})),t,k&&a.a.createElement("div",{className:"image-thumbnail-progress-bar"},a.a.createElement("div",{className:"image-thumbnail-progress-bar-inner",style:{width:"".concat(u,"%")}})),b&&a.a.createElement("div",{className:"image-thumbnail-loading-indicator"}))}b.propTypes={active:i.a.bool,imageSrc:i.a.string,imageId:i.a.string,error:i.a.bool,width:i.a.number,height:i.a.number,stackPercentComplete:i.a.number.isRequired,showProgressBar:i.a.bool},b.defaultProps={active:!1,error:!1,stackPercentComplete:0,width:217,height:123,showProgressBar:!0};var w=b,E=n(34),S=n(200),O=n(168);n(876);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return k}));var P=u.a.StudyLoadingListener;function C(e){var t=e.SeriesDescription,n=e.SeriesNumber,o=e.numImageFrames,i=e.hasWarnings,s=e.hasDerivedDisplaySets,c=I(Object(r.useState)([]),2),l=c[0],u=c[1],f=I(Object(r.useState)([]),2),p=f[0],d=f[1];Object(r.useEffect)((function(){var e=!1;return i.then((function(t){e||u(t)})),s.then((function(t){e||d(t)})),function(){e=!0}}),[i,s]);var h=!t,g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.a.createElement("div",{className:m()("item item-series",n)},a.a.createElement("div",{className:"icon"},t),a.a.createElement("div",{className:"value"},e))},v=function(e){if(Array.isArray(e)){var t=e.map((function(e,t){return a.a.createElement("li",{key:t},e)}));return a.a.createElement("ol",null,t)}return a.a.createElement(a.a.Fragment,null,e)};return a.a.createElement("div",{className:m()("series-details",{"info-only":h})},a.a.createElement("div",{className:"series-description"},t),function(e,t,n,r){if(e||t)return a.a.createElement("div",{className:"series-information"},a.a.createElement(a.a.Fragment,null,void 0!==e?g(e,"S:"):a.a.createElement(a.a.Fragment,null)),a.a.createElement(a.a.Fragment,null,void 0!==t?g(t,"","image-frames"):a.a.createElement(a.a.Fragment,null)),function(e){return a.a.createElement(a.a.Fragment,null,e?a.a.createElement("div",{className:"derived"},a.a.createElement(E.a,{name:"link"})):a.a.createElement(a.a.Fragment,null))}(r),function(e,t){return a.a.createElement(a.a.Fragment,null,t&&0!=t.length?a.a.createElement(O.a,{key:e,placement:"left",overlay:a.a.createElement(S.a,{placement:"left",className:"in tooltip-warning",id:"tooltip-left"},a.a.createElement("div",{className:"warningTitle"},"Series Inconsistencies"),a.a.createElement("div",{className:"warningContent"},v(t)))},a.a.createElement("div",{className:m()("warning")},a.a.createElement("span",{className:"warning-icon"},a.a.createElement(E.a,{name:"exclamation-triangle"})))):a.a.createElement(a.a.Fragment,null))}(e,n))}(n,o,l,p))}function k(e){var t=e.active,n=e.altImageText,o=e.error,i=e.displaySetInstanceUID,s=e.imageId,u=e.imageSrc,f=e.StudyInstanceUID,p=e.onClick,d=e.onDoubleClick,h=e.onMouseDown,g=e.supportsDrag,v=e.showProgressBar,y=I(Object(r.useState)(0),2),b=y[0],E=y[1];Object(r.useEffect)((function(){var e=c()((function(e){var t=e.detail,n=t.progressId,r=t.progressData;if("StackProgress:".concat(i)===n){var a=r?r.percentComplete:0;a>b&&E(a)}}),100);return document.addEventListener(P.events.OnProgress,e),function(){document.removeEventListener(P.events.OnProgress,e)}}),[i]);var S=I(Object(l.c)({item:{StudyInstanceUID:f,displaySetInstanceUID:i,type:"thumbnail"},canDrag:function(e){return g}}),3),O=(S[0],S[1]),k=(S[2],u||s),j=void 0!==n;return a.a.createElement("div",{ref:O,className:m()("thumbnail",{active:t}),onClick:p,onDoubleClick:d,onMouseDown:h},k&&a.a.createElement(w,{active:t,imageSrc:u,imageId:s,error:o,stackPercentComplete:b,showProgressBar:v}),!k&&j&&a.a.createElement("div",{className:"alt-image-text p-x-1"},a.a.createElement("h1",null,n)),C(e))}var j=function(){};k.propTypes={supportsDrag:i.a.bool,id:i.a.string.isRequired,displaySetInstanceUID:i.a.string.isRequired,StudyInstanceUID:i.a.string.isRequired,imageSrc:i.a.string,imageId:i.a.string,error:i.a.bool,active:i.a.bool,stackPercentComplete:i.a.number,altImageText:i.a.string,SeriesDescription:i.a.string,SeriesNumber:i.a.oneOfType([i.a.string,i.a.number]),hasWarnings:i.a.instanceOf(Promise),hasDerivedDisplaySets:i.a.instanceOf(Promise),numImageFrames:i.a.number,onDoubleClick:i.a.func,onClick:i.a.func,onMouseDown:i.a.func,showProgressBar:i.a.bool},k.defaultProps={supportsDrag:!1,active:!1,error:!1,stackPercentComplete:0,onDoubleClick:j,onClick:j,onMouseDown:j}},314:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return m}));var u,f,p,m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this,e))).staticWado=e.staticWado,n}var n,r,u,f,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"searchForStudies",value:(f=regeneratorRuntime.mark((function e(n){var r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.staticWado){e.next=2;break}return e.abrupt("return",s(c(t.prototype),"searchForStudies",this).call(this,n));case 2:return e.next=4,s(c(t.prototype),"searchForStudies",this).call(this,n);case 4:if(r=e.sent,a=n.queryParams){e.next=8;break}return e.abrupt("return",r);case 8:return o=r.filter((function(e){for(var n=0,r=Object.keys(t.filterKeys);n<r.length;n++){var o=r[n];if(!i.filterItem(o,a,e))return!1}return!0})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})),p=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=f.apply(e,t);function i(e){a(o,n,r,i,s,"next",e)}function s(e){a(o,n,r,i,s,"throw",e)}i(void 0)}))},function(e){return p.apply(this,arguments)})},{key:"compareValues",value:function(e,t){var n=this;if(Array.isArray(e))return e.find((function(e){return n.compareValues(e,t)}));if(Array.isArray(t))return t.find((function(t){return n.compareValues(e,t)}));if(t&&t.Alphabetic&&(t=t.Alphabetic),"string"==typeof t){if(0===t.length)return!0;if(0===e.length||"*"===e)return!0;if("*"===e[0]&&"*"===e[e.length-1])return console.log("Comparing ".concat(t," to ").concat(e.substring(1,e.length-1))),-1!=t.indexOf(e.substring(1,e.length-1));if("*"===e[e.length-1])return-1!=t.indexOf(e.substring(0,e.length-1));if("*"===e[0])return t.indexOf(e.substring(1))===t.length-e.length+1}return e===t}},{key:"compareDateRange",value:function(e,t){if(!t)return!0;var n=e.indexOf("-");if(-1===n)return this.compareValues(e,t);var r=e.substring(0,n),a=e.substring(n+1);return(!r||t>=r)&&(!a||t<=a)}},{key:"filterItem",value:function(e,n,r){var a=t.filterKeys[e]||e;if(!n)return!0;var o=n[e]||n[a];if(!o)return!0;var i=r[e]||r[a];if(!i)return!1;if("DA"==i.vr)return this.compareDateRange(o,i.Value[0]);var s=i.Value;return this.compareValues(o,s)&&!0}}])&&o(n.prototype,r),u&&o(n,u),t}(n(62).a.DICOMwebClient);p={StudyInstanceUID:"0020000D",PatientName:"00100010","00100020":"mrn",PatientID:"00100020",StudyDescription:"00081030",StudyDate:"00080020",ModalitiesInStudy:"00080061",AccessionNumber:"00080050"},(f="filterKeys")in(u=m)?Object.defineProperty(u,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[f]=p},315:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),o=n(34);var i=function(){return a.a.createElement("div",{className:"loading-text"},"Loading... ",a.a.createElement(o.a,{name:"circle-notch",animation:"pulse"}))}},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(771),a=Object(r.createSelector)([function(e){return e.viewports.activeViewportIndex},function(e){return e.viewports.layout.viewports},function(e){return e.viewports.viewportSpecificData}],(function(e,t,n){var r=["VIEWER"],a=t[e]||{},o=n[e]||{},i=a.plugin||o.plugin;if(i){var s="ACTIVE_VIEWPORT::".concat(i.toUpperCase());r.push(s)}return r}))},32:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"p",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return w})),n.d(t,"o",(function(){return E})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return O})),n.d(t,"j",(function(){return I})),n.d(t,"i",(function(){return k})),n.d(t,"n",(function(){return j})),n.d(t,"q",(function(){return x})),n.d(t,"l",(function(){return D})),n.d(t,"m",(function(){return T})),n.d(t,"k",(function(){return N}));var r=n(0),a=n.n(r),o=n(9),i=n.n(o),s=n(18),c=n(206),l=n.n(c),u=n(31);n(139);function f(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,s,"next",e)}function s(e){f(o,r,a,i,s,"throw",e)}i(void 0)}))}}i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.xsrfCookieName="csrftoken",i.a.defaults.withCredentials=!0;var m=l.a.get("csrftoken"),d=function(){return function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,i.a.get("/auth/users/me/",n);case 5:r=e.sent,t({type:s.H,payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:s.G});case 12:e.next=15;break;case 14:t({type:s.G});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")||!localStorage.getItem("refresh")){e.next=13;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=JSON.stringify({refresh:localStorage.getItem("refresh")}),e.prev=3,e.next=6,i.a.post("/auth/jwt/refresh/",r,n);case 6:200===(a=e.sent).status?t({type:s.D,payload:a.data}):t(N()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},g=function(e){return function(){var t=p(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},!localStorage.getItem("access")){t.next=24;break}return n({type:s.F}),t.prev=3,t.next=6,i.a.get("/api/check_main_group?email=".concat(e),r);case 6:if("investigators"==t.sent.data.Group)try{console.log("Sou investigator"),n(P()),n(d())}catch(e){console.log(e)}else try{console.log("Sou mdico"),n(C()),n(d())}catch(e){console.log(e.message)}return t.prev=8,a={headers:{"Content-Type":"application/json",Accept:"application/json",HTTP_X_CSRFTOKEN:m}},t.next=12,i.a.post("/api/set_social_apps/".concat(e),a);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.log(t.t0.message);case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(3),console.log(t.t1.message);case 22:t.next=25;break;case 24:n({type:s.E});case 25:case"end":return t.stop()}}),t,null,[[3,19],[8,14]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={state:e,code:t},c=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&"),n.prev=4,n.next=7,i.a.post("/auth/o/google-oauth2/?".concat(c),a);case 7:l=n.sent,r({type:s.j,payload:l.data}),r(d()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),r({type:s.i});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={state:e,code:t},c=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&"),n.prev=4,n.next=7,i.a.post("/auth/o/facebook/?".concat(c),a);case 7:l=n.sent,r({type:s.f,payload:l.data}),r(d()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),r({type:s.e});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={state:e,code:t},c=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&"),n.prev=4,n.next=7,i.a.post("/auth/o/github/?".concat(c),a);case 7:l=n.sent,r({type:s.h,payload:l.data}),r(d()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),r({type:s.g});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()},w=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={state:e,code:t},c=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&"),n.prev=4,n.next=7,i.a.post("/auth/o/linkedin-oauth2/?".concat(c),a);case 7:l=n.sent,r({type:s.n,payload:l.data}),r(d()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),r({type:s.m});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()},E=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return a={headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={state:e,code:t},c=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&"),n.prev=4,n.next=7,i.a.post("/auth/o/spotify/?".concat(c),a);case 7:l=n.sent,r({type:s.y,payload:l.data}),r(d()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),r({type:s.x});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()},S=function(){return function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(localStorage.getItem("access")&&localStorage.getItem("Authenticated")&&localStorage.getItem("Investigator_Authenticated"))){e.next=15;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,i.a.post("/auth/jwt/verify/",r,n);case 6:"token_not_valid"!==e.sent.data.code?(t({type:s.d}),t(P())):t({type:s.c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:s.c});case 13:e.next=31;break;case 15:if(!(localStorage.getItem("access")&&localStorage.getItem("Authenticated")&&localStorage.getItem("HealthProfessional_Authenticated"))){e.next=30;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},o=JSON.stringify({token:localStorage.getItem("access")}),e.prev=18,e.next=21,i.a.post("/auth/jwt/verify/",o,a);case 21:"token_not_valid"!==e.sent.data.code?(t({type:s.d}),t(C())):t({type:s.c}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),t({type:s.c});case 28:e.next=31;break;case 30:t({type:s.c});case 31:case"end":return e.stop()}}),e,null,[[3,10],[18,25]])})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")||!localStorage.getItem("Superuser_Authenticated")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,i.a.post("/auth/jwt/verify/",r,n);case 6:"token_not_valid"!==e.sent.data.code?t({type:s.A}):t({type:s.z}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:s.z});case 13:e.next=16;break;case 15:t({type:s.z});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},I=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,i.a.post("/auth/jwt/create/",c,o);case 5:l=n.sent,r({type:s.C,payload:l.data}),r(d()),n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(2),r({type:s.B}),u.b.error("Incorrect password! Please, try again.",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:1e4,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()},P=function(){return function(e){e({type:s.l})}},C=function(){return function(e){e({type:s.k})}},k=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var o,c,l,f,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,i.a.get("/api/check_main_group_login/".concat(e),o);case 5:if(l=n.sent,console.log("Perteno ao grupo dos",l.data.Group),"investigators"!=l.data.Group){n.next=24;break}return n.prev=8,n.next=11,i.a.post("/auth/jwt/create/",c,o);case 11:f=n.sent,r(P()),r({type:s.p,payload:f.data}),r(d()),n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(8),r({type:s.o}),u.b.error("Incorrect password! Please, try again.",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:1e4,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 22:n.next=38;break;case 24:return n.prev=24,n.next=27,i.a.post("/auth/jwt/create/",c,o);case 27:p=n.sent,r({type:s.p,payload:p.data}),r(C()),r(d()),n.next=38;break;case 33:return n.prev=33,n.t1=n.catch(24),r({type:s.o}),u.b.error("Incorrect password! Please, try again.",{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:1e4,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 38:n.next=43;break;case 40:n.prev=40,n.t2=n.catch(2),console.log(n.t2.message);case 43:case"end":return n.stop()}}),n,null,[[2,40],[8,17],[24,33]])})));return function(e){return n.apply(this,arguments)}}()},j=function(e,t,n,r,o,c,l){return function(){var f=p(regeneratorRuntime.mark((function f(p){var d,h,g,v,y;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return d={headers:{"Content-Type":"multipart/form-data"}},(h=new FormData).append("first_name",e),h.append("last_name",t),h.append("email",n),h.append("password",r),h.append("re_password",o),h.append("profession",c),"Health Professional"===c&&h.append("medical_certificate",l,l.name),f.prev=9,f.next=12,i.a.post("/auth/users/",h,d);case 12:if(g=f.sent,console.log("Post to Djoser users status:",g.status),201!==g.status){f.next=38;break}return v={headers:{"Content-Type":"application/json",Accept:"application/json",HTTP_X_CSRFTOKEN:m},body:JSON.stringify({email:n,profession:c})},y={headers:{"Content-Type":"application/json",Accept:"application/json",HTTP_X_CSRFTOKEN:m}},f.prev=17,f.next=20,i.a.post("/api/add_main_group",v);case 20:f.next=25;break;case 22:f.prev=22,f.t0=f.catch(17),alert(f.t0.message);case 25:return f.prev=25,f.next=28,i.a.post("/api/encrypt_db/".concat(n),y);case 28:f.next=33;break;case 30:f.prev=30,f.t1=f.catch(25),alert(f.t1.message);case 33:return p({type:s.w,payload:g.data}),u.b.success("An account verification email was sent to "+n+". Please, check it!",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 38:return p({type:s.v}),u.b.error("Failed to create an account with the email "+n+".",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 41:f.next=49;break;case 43:return f.prev=43,f.t2=f.catch(9),alert(f.t2),p({type:s.v}),u.b.error("Failed to create an account with the email "+n+".",{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f.abrupt("return",a.a.createElement(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}));case 49:case"end":return f.stop()}}),f,null,[[9,43],[17,22],[25,30]])})));return function(e){return f.apply(this,arguments)}}()},x=function(e,t){return function(){var n=p(regeneratorRuntime.mark((function n(r){var a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={headers:{"Content-Type":"application/json"}},o=JSON.stringify({uid:e,token:t}),n.prev=2,n.next=5,i.a.post("/auth/users/activation/",o,a);case 5:r({type:s.b}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),r({type:s.a});case 11:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}()},D=function(e){return function(){var t=p(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},a=JSON.stringify({email:e}),t.prev=2,t.next=5,i.a.post("/auth/users/reset_password/",a,r);case 5:n({type:s.u}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),n({type:s.t});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e,t,n,r){return function(){var a=p(regeneratorRuntime.mark((function a(o){var c,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={headers:{"Content-Type":"application/json"}},l=JSON.stringify({uid:e,token:t,new_password:n,re_new_password:r}),a.prev=2,a.next=5,i.a.post("/auth/users/reset_password_confirm/",l,c);case 5:o({type:s.s}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),o({type:s.r});case 11:case"end":return a.stop()}}),a,null,[[2,8]])})));return function(e){return a.apply(this,arguments)}}()},N=function(){return function(e){e({type:s.q})}}},34:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Adjust"),a.a.createElement("path",{d:"M12 22.5v-17c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5zM24 14c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"}))};o.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var i=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Double Down"),a.a.createElement("path",{d:"M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"}))};i.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 350 512",width:"1em",height:"1em",fill:"currentColor"};var s=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Double Up"),a.a.createElement("path",{d:"M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"}))};s.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 350 512",width:"1em",height:"1em",fill:"currentColor"};var c=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Left"),a.a.createElement("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"}))};c.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",width:"1em",height:"1em",fill:"currentColor"};var l=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows"),a.a.createElement("path",{d:"M9 1v16M1 9h16M7 3l2-2 2 2M15 11l2-2-2-2M11 15l-2 2-2-2M3 7L1 9l2 2"}))};l.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",stroke:"currentColor",width:"1em",height:"1em",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};var u=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows Alt H"),a.a.createElement("path",{d:"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"}))};u.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var f=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows Alt V"),a.a.createElement("path",{d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))};f.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",width:"1em",height:"1em",fill:"currentColor"};var p=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Bars"),a.a.createElement("path",{d:"M1664 1344v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V832q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V320q0-26 19-45t45-19h1408q26 0 45 19t19 45z"}))};p.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1792 1792",width:"1em",height:"1em",fill:"currentColor"};var m=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Brain"),a.a.createElement("path",{d:"M9.477 17.251A3.251 3.251 0 0 0 6.227 14c-.053 0-.1.013-.153.016"}),a.a.createElement("path",{d:"M9.139 4.388A2 2 0 1 0 6.5 2.5a2 2 0 0 0 .081.534C6.47 3.025 6.363 3 6.25 3a3.732 3.732 0 0 0-2.965 6.023 2.985 2.985 0 0 0 0 5.957A3.731 3.731 0 0 0 6.25 21c.113 0 .22-.023.331-.033a2 2 0 1 0 2.558-1.353"}),a.a.createElement("path",{d:"M6.074 9.986c.052 0 .1.015.153.015a3.251 3.251 0 0 0 3.25-3.25M14.523 17.251A3.251 3.251 0 0 1 17.773 14c.053 0 .1.013.153.016"}),a.a.createElement("path",{d:"M14.861 4.388A2 2 0 1 1 17.5 2.5a2 2 0 0 1-.081.534c.111-.01.218-.034.331-.034a3.732 3.732 0 0 1 2.965 6.022 2.985 2.985 0 0 1 0 5.957A3.731 3.731 0 0 1 17.75 21c-.113 0-.22-.023-.331-.033a2 2 0 1 1-2.558-1.353"}),a.a.createElement("path",{d:"M17.926 9.986c-.052 0-.1.015-.153.015a3.251 3.251 0 0 1-3.25-3.25M10.5 2.4a3 3 0 0 1 3 0M10.409 22.1c.993.536 2.19.536 3.183 0M12 7.001v10.5"}))};m.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.25",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"};var d=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Brush"),a.a.createElement("path",{d:"M167.02 309.34c-40.12 2.58-76.53 17.86-97.19 72.3-2.35 6.21-8 9.98-14.59 9.98-11.11 0-45.46-27.67-55.25-34.35C0 439.62 37.93 512 128 512c75.86 0 128-43.77 128-120.19 0-3.11-.65-6.08-.97-9.13l-88.01-73.34zM457.89 0c-15.16 0-29.37 6.71-40.21 16.45C213.27 199.05 192 203.34 192 257.09c0 13.7 3.25 26.76 8.73 38.7l63.82 53.18c7.21 1.8 14.64 3.03 22.39 3.03 62.11 0 98.11-45.47 211.16-256.46 7.38-14.35 13.9-29.85 13.9-45.99C512 20.64 486 0 457.89 0z"}))};d.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var h=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Caret Down"),a.a.createElement("path",{d:"M286.935 69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952 0-9.233 1.807-12.85 5.424C1.807 72.998 0 77.279 0 82.228c0 4.948 1.807 9.229 5.424 12.847l127.907 127.907c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428L286.935 95.074c3.613-3.617 5.427-7.898 5.427-12.847 0-4.948-1.814-9.229-5.427-12.85z"}))};h.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.362 292.362",width:"1em",height:"1em",fill:"currentColor"};var g=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Caret Up"),a.a.createElement("path",{d:"M44.68 29.383L26.728 11.52a5.377 5.377 0 0 0-7.585 0L1.19 29.383C.03 30.538-.319 32.09.306 33.605c.624 1.512 2.099 2.311 3.735 2.311h37.786c1.638 0 3.112-.799 3.736-2.312.626-1.514.277-3.065-.883-4.221z"}))};g.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.871 45.871",width:"1em",height:"1em",fill:"currentColor"};var v=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check"),a.a.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}))};v.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var y=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check Circle"),a.a.createElement("path",{d:"M13.5 0a13.5 13.5 0 0 1 0 27 13.5 13.5 0 0 1 0-27M23 8l-2-2-10 10-5-5-2 2 7 7z"}))};y.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27",width:"1em",height:"1em",fill:"currentColor"};var b=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check Circle"),a.a.createElement("path",{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"}))};b.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var w=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Chevron Down"),a.a.createElement("path",{d:"M12 1.4L10.6 0 6 4.6 1.4 0 0 1.4l6 6z"}))};w.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 9",width:"1em",height:"1em",fill:"currentColor"};var E=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle"),a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}))};E.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var S=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle Notch"),a.a.createElement("path",{d:"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"}))};S.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var O=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle Outline"),a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}))};O.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var I=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Clipboard"),a.a.createElement("path",{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm144 418c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V118c0-3.3 2.7-6 6-6h42v36c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-36h42c3.3 0 6 2.7 6 6z"}))};I.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"1em",height:"1em",fill:"currentColor"};var P=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Cog"),a.a.createElement("path",{d:"M12.85 8.25c0-.22.08-.45.08-.75s0-.52-.08-.75l1.58-1.27c.15-.15.15-.3.07-.45L13 2.4c-.07-.07-.22-.15-.45-.07l-1.87.75c-.38-.3-.83-.53-1.28-.75L9.1.38C9.18.15 8.95 0 8.8 0h-3c-.15 0-.37.15-.37.3l-.3 2.03c-.45.15-.83.45-1.28.75l-1.8-.75c-.22-.08-.37 0-.52.15L.03 5.1c-.08.08 0 .3.15.45l1.57 1.2c0 .23-.07.45-.07.75s0 .53.07.75L.18 9.53c-.15.15-.15.29-.08.45l1.5 2.62c.08.08.23.15.45.08l1.88-.75c.37.3.82.52 1.27.75l.3 1.95c0 .15.15.3.38.3h3c.15 0 .37-.15.37-.3l.3-1.95c.45-.23.9-.45 1.28-.75l1.87.75c.15.07.38 0 .45-.15l1.5-2.63c.08-.15.08-.37-.07-.45l-1.73-1.2zM7.3 10.13c-1.42 0-2.62-1.2-2.62-2.63 0-1.42 1.2-2.62 2.62-2.62 1.43 0 2.63 1.2 2.63 2.62 0 1.43-1.2 2.63-2.63 2.63z"}))};P.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",width:"1em",height:"1em",fill:"currentColor"};var C=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Create Comment"),a.a.createElement("path",{d:"M22.32 14H35c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H21l-4 4V20.39c2.45-1.42 4.36-3.68 5.32-6.39zM10 0C4.5 0 0 4.5 0 10s4.5 10 10 10 10-4.5 10-10S15.5 0 10 0zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2z"}))};C.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37 34",width:"1em",height:"1em",fill:"currentColor"};var k=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Create Screen Capture"),a.a.createElement("path",{d:"M27 30c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"}),a.a.createElement("path",{d:"M24 17l-1.8 2H19c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V21c0-1.1-.9-2-2-2h-3.2L30 17h-6zm3 15c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zM10 0C4.5 0 0 4.5 0 10s4.5 10 10 10 10-4.5 10-10S15.5 0 10 0zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2z"}))};k.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37 35",width:"1em",height:"1em",fill:"currentColor"};var j=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Crosshairs"),a.a.createElement("path",{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"}))};j.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var x=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Cube"),a.a.createElement("path",{d:"M-115.1 280.3c0-.1.1-.1.1-.2v-.1-.3l.1-45c0-.5-.3-.9-.7-1.2L-154 211c-.1 0-.1 0-.2-.1-.4-.2-.8-.1-1.2.1l-38.8 22.1c-.4.2-.7.7-.7 1.2l-.3 44.6c0 .5.3.9.7 1.2l38.7 22.9c.2.1.5.2.7.2.2 0 .5-.1.7-.2l38.8-22.1c.1 0 .1-.1.2-.1s.1-.1.1-.1c0-.1.1-.1.1-.2.1-.1.1-.1.1-.2zm-45.6 16.6c1.5-1.5 3-3 4.5-4.6v2.4l-3 3-1.5-.8zm-3.2-1.9c2.5-2.6 5.1-5.1 7.6-7.7v2.4c-2 2.1-4.1 4.1-6.1 6.2l-1.5-.9zm-3.1-1.8c3.6-3.6 7.1-7.2 10.7-10.8v2.4c-2.6 2.6-5.2 5.2-7.7 7.8l-1.5 1.5-1.5-.9zm-3.1-1.9c4.6-4.7 9.2-9.3 13.8-14v2.4c-4.1 4.2-8.2 8.3-12.3 12.5l-1.5-.9zm-3.2-1.8c.1-.1.1-.1 0 0 5.7-5.7 11.3-11.4 17-17.1v2.4c-5.1 5.2-10.3 10.4-15.4 15.6l-1.6-.9zm-3.1-1.9c6.7-6.8 13.4-13.6 20.1-20.3v2.4c-6.1 6.2-12.3 12.4-18.4 18.6-.1.1-.1.1-.1.2l-1.6-.9zm-3.1-1.9c7.7-7.8 15.5-15.6 23.2-23.4v2.4c-7.2 7.3-14.4 14.5-21.5 21.8l-.1.1-1.6-.9zm-3.2-1.8c.1 0 .1-.1 0 0 8.7-8.9 17.4-17.6 26.1-26.4l.2.1v2.1l-24.7 25-.1.1-1.5-.9zm-3.1-1.8c.1-.1.1-.2.2-.2L-160 256l.3-.3 1.5.9-25.9 26.2s-.1.1-.1.2l-1.6-.9zm-3.1-1.9c0-.1.1-.1.1-.2l25.9-26.2 1.5.9-25.9 26.2-.2.2-1.4-.9zm-3.2-1.9l.2-.2c8.6-8.7 17.2-17.4 25.8-26.2l1.5.9-25.7 26-.4.4-1.4-.9zm37.4-64.5l35.8 20.9-36 20.5-35.8-20.9 36-20.5zm-36.5 23.4l1.5.9-2.5 2.5v-2.4c.4-.3.7-.6 1-1zm-1.1 16.2c3.5-3.5 7-7.1 10.5-10.6l1.5.9c-4 4.1-8 8.1-12.1 12.2l.1-2.5zm.1-2.6v-2.4c.9-.9 1.8-1.9 2.8-2.8 1.5-1.6 3.1-3.1 4.6-4.7l1.5.9c-3 3-6 6-8.9 9zm0-5.1v-2.4l4.2-4.2 1.5.9-5.7 5.7zm13.6-1.1l1.5.9c-5.1 5.1-10.1 10.3-15.2 15.4v-2.4c4.6-4.7 9.1-9.3 13.7-13.9zm-13.7 18.9c5.6-5.7 11.2-11.4 16.9-17.1l1.5.9c-6.1 6.2-12.3 12.4-18.4 18.6v-2.4zm-.1 5.1c6.7-6.8 13.4-13.5 20.1-20.3l1.5.9c-7.2 7.3-14.4 14.6-21.6 21.8v-2.4zm0 5l23.2-23.5 1.5.9-24.8 25.1.1-2.5zm36.2 23.7v2.3l-1.4-.8c.5-.6.9-1.1 1.4-1.5zm2.6-39.7l36-20.5-.1 41.8-35.8 20.4-.1-41.7z"}),a.a.createElement("path",{d:"M-154.9 232.7c.1 0 .1 0 0 0 .8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4.1.8.7 1.4 1.4 1.4zM-154.9 239.1c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .7.6 1.4 1.4 1.4zM-155 249.1c-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4.7 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4zM-154.9 245.4c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4zM-154.8 219.9c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.7 1.4 1.4 1.4zM-154.8 226.3c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4zM-148.8 258.9c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.2-1.5-.5-1.9zM-121.1 275.3c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.1-1.5-.5-1.9zM-126.6 272c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.3-.7.1-1.5-.5-1.9zM-143.2 262.2c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.3-.7.1-1.5-.5-1.9zM-132.2 268.7c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.6.2-1.5-.5-1.9zM-137.7 265.5c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.1-1.6-.5-1.9z"}))};x.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"-205 207 100 100",width:"1em",height:"1em",fill:"currentColor"};var D=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"3D Rotate"),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.856 11.409l-.013-.335-.01-.195a6.21 6.21 0 0 1-.008-.14l-.004-.06-1.214.08v.004l.013.209.025.731.001.025-.001-.01.001.029v.021-.01.03-.009.03-.01l.001.035-.001-.01.001.04v-.01.045-.01.06-.009.06c0 .925-.066 1.891-.214 2.85.443-.125.877-.272 1.288-.444.097-.8.143-1.604.143-2.405l-.004-.381-.004-.211zm-12.47 5.265L2 15.691l.658-.711C1.817 14.19 1.2 13.182 1.2 12c.006-.916.35-1.691.912-2.399.83-1.011 2.014-1.758 3.339-2.293-.116.484-.212.973-.289 1.466a7.583 7.583 0 0 0-1.57 1.038c-.563.5-1.035 1.118-1.149 1.862-.076.5.027.975.259 1.417.197.374.478.711.782.995l.657-.711 1.245 3.299zM9.6 6.283c.84-.103 1.656-.148 2.4-.148 1.765 0 3.552.222 5.246.722 2.32.685 5.537 2.332 5.554 5.143-.006.915-.349 1.69-.911 2.398-2.151 2.622-6.685 3.467-9.889 3.467-.89 0-1.822-.054-2.697-.182l.165-1.205c.82.12 1.699.17 2.533.17 2.71 0 6.298-.621 8.408-2.46.644-.572 1.167-1.297 1.175-2.188-.013-1.455-1.41-2.516-2.574-3.134-2.086-1.093-4.677-1.515-7.01-1.515-.884 0-1.862.066-2.852.219.127-.442.277-.873.452-1.287zm5.624 12.551c.486-.076.975-.169 1.459-.283-.85 2.063-2.374 4.235-4.683 4.249-.916-.006-1.691-.349-2.399-.911C6.979 19.737 6.135 15.204 6.135 12c0-1.764.222-3.552.722-5.246C7.542 4.434 9.189 1.217 12 1.2c1.454 0 2.627.926 3.466 2.038l.778-.577.61 3.471-3.144-1.593.778-.577c-.581-.787-1.465-1.545-2.488-1.545-1.455.013-2.516 1.411-3.134 2.575C7.773 7.076 7.351 9.667 7.351 12c0 2.71.621 6.298 2.461 8.408.572.644 1.296 1.167 2.188 1.175 1.455-.013 2.516-1.41 3.134-2.574l.09-.175z"}))};D.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 30",width:"1em",height:"1em",fill:"currentColor"};var T=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Database"),a.a.createElement("path",{d:"M12 12c4.703 0 9.422-.844 12-2.656V12c0 2.203-5.375 4-12 4S0 14.203 0 12V9.344C2.578 11.157 7.297 12 12 12zm0 12c4.703 0 9.422-.844 12-2.656V24c0 2.203-5.375 4-12 4S0 26.203 0 24v-2.656C2.578 23.157 7.297 24 12 24zm0-6c4.703 0 9.422-.844 12-2.656V18c0 2.203-5.375 4-12 4S0 20.203 0 18v-2.656C2.578 17.157 7.297 18 12 18zm0-18c6.625 0 12 1.797 12 4v2c0 2.203-5.375 4-12 4S0 8.203 0 6V4c0-2.203 5.375-4 12-4z"}))};T.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var N=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Dot Circle"),a.a.createElement("path",{d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z"}))};N.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var _=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Edit"),a.a.createElement("path",{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}))};_.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"1em",height:"1em",fill:"currentColor"};var A=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Circle"),a.a.createElement("path",{d:"M9 0a9 9 0 0 1 0 18A9 9 0 0 1 9 0M4.5 8a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3M9 8a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3m4.5 0a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3"}))};A.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor"};var R=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Horizontal"),a.a.createElement("path",{d:"M6 11.5v3A1.5 1.5 0 0 1 4.5 16h-3A1.5 1.5 0 0 1 0 14.5v-3A1.5 1.5 0 0 1 1.5 10h3A1.5 1.5 0 0 1 6 11.5zm8 0v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 8 14.5v-3A1.5 1.5 0 0 1 9.5 10h3a1.5 1.5 0 0 1 1.5 1.5zm8 0v3a1.5 1.5 0 0 1-1.5 1.5h-3a1.5 1.5 0 0 1-1.5-1.5v-3a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5z"}))};R.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 28",width:"1em",height:"1em",fill:"currentColor"};var M=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Vertical"),a.a.createElement("path",{d:"M6 19.5v3A1.5 1.5 0 0 1 4.5 24h-3A1.5 1.5 0 0 1 0 22.5v-3A1.5 1.5 0 0 1 1.5 18h3A1.5 1.5 0 0 1 6 19.5zm0-8v3A1.5 1.5 0 0 1 4.5 16h-3A1.5 1.5 0 0 1 0 14.5v-3A1.5 1.5 0 0 1 1.5 10h3A1.5 1.5 0 0 1 6 11.5zm0-8v3A1.5 1.5 0 0 1 4.5 8h-3A1.5 1.5 0 0 1 0 6.5v-3A1.5 1.5 0 0 1 1.5 2h3A1.5 1.5 0 0 1 6 3.5z"}))};M.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 28",width:"1em",height:"1em",fill:"currentColor"};var L=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Exclamation Circle"),a.a.createElement("path",{d:"M10 1a9 9 0 0 1 0 18 9 9 0 0 1 0-18m0 4v2m0 2v6"}))};L.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeWidth:"2"};var U=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Exclamation Triangle"),a.a.createElement("path",{d:"M11 0l11 20H0zm1 7h-2v6h2zm0 8h-2v2h2z"}))};U.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 20",width:"1em",height:"1em",fill:"currentColor"};var F=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M0 436V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v151.9L235.5 71.4C256.1 54.3 288 68.6 288 96v131.9L459.5 71.4C480.1 54.3 512 68.6 512 96v320c0 27.4-31.9 41.7-52.5 24.6L288 285.3V416c0 27.4-31.9 41.7-52.5 24.6L64 285.3V436c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12z"}))};F.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var V=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M512 76v360c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V284.1L276.5 440.6c-20.6 17.2-52.5 2.8-52.5-24.6V284.1L52.5 440.6C31.9 457.8 0 443.4 0 416V96c0-27.4 31.9-41.7 52.5-24.6L224 226.8V96c0-27.4 31.9-41.7 52.5-24.6L448 226.8V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12z"}))};V.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var B=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Stop"),a.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}))};B.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var z=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Info"),a.a.createElement("path",{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}))};z.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"1em",height:"1em",fill:"currentColor"};var H=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Inline Edit"),a.a.createElement("path",{d:"M11 2L12.85.15a1 1 0 0 1 1 0l2 2a1 1 0 0 1 0 1L14 5zm-1 1L0 13v3h3L13 6zm6 13v-2H7l-2 2z"}))};H.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor"};var q=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Level"),a.a.createElement("path",{d:"M14.5 3.5a1 1 0 0 1-11 11z",opacity:".8",stroke:"none"}),a.a.createElement("circle",{cx:"9",cy:"9",r:"8",fill:"none",strokeWidth:"2"}))};q.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor"};var G=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Link"),a.a.createElement("path",{d:"M5.364 28.917a5.357 5.357 0 0 0 3.797 1.57 5.347 5.347 0 0 0 3.798-1.572l7.552-7.554a5.325 5.325 0 0 0 1.574-3.797 5.336 5.336 0 0 0-1.574-3.796l-2.297-2.298-2.009 2.009 2.297 2.298c.478.478.741 1.113.741 1.788 0 .674-.264 1.309-.741 1.786l-7.553 7.555a2.533 2.533 0 0 1-3.576 0l-2.297-2.298a2.53 2.53 0 0 1 0-3.576l3.775-3.776-2.009-2.009-3.776 3.776a5.378 5.378 0 0 0 0 7.595l2.299 2.3zM26.695 2.992"}),a.a.createElement("path",{d:"M26.695 2.992a5.328 5.328 0 0 0-3.797-1.575h-.002a5.34 5.34 0 0 0-3.798 1.573l-7.551 7.553a5.331 5.331 0 0 0-1.576 3.799c0 1.434.558 2.784 1.574 3.797l2.297 2.297 2.01-2.009-2.298-2.297a2.515 2.515 0 0 1-.741-1.788c0-.676.265-1.311.742-1.788l7.553-7.555a2.51 2.51 0 0 1 1.789-.74h.001c.674 0 1.309.264 1.786.74l2.297 2.299a2.51 2.51 0 0 1 .74 1.788 2.52 2.52 0 0 1-.74 1.788l-3.776 3.777 2.009 2.009 3.776-3.777a5.34 5.34 0 0 0 1.574-3.797c0-1.435-.56-2.784-1.574-3.797l-2.295-2.296z"}))};G.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"1em",height:"1em",fill:"currentColor"};var W=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Link Circles"),a.a.createElement("g",{transform:"translate(1 1)"},a.a.createElement("circle",{opacity:".8",cx:"7.5",cy:"7.5",r:"7.5"}),a.a.createElement("circle",{opacity:".6",cx:"15.5",cy:"7.5",r:"7.5"})))};W.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 15",stroke:"currentColor",width:"1em",height:"1em",fill:"none"};var Y=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"List"),a.a.createElement("path",{d:"M0 0h2v2H0zm4 0h14v2H4zM0 4h2v2H0zm4 0h14v2H4zM0 8h2v2H0zm4 0h14v2H4z"}))};Y.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 10",width:"1em",height:"1em",fill:"currentColor"};var J=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Liver"),a.a.createElement("path",{d:"M15.188 1.427c.82-.385 1.764-.428 2.675-.427 2.433.003 4.933.267 7.366.268.403 0 .63.13.733.414.099.274.009.497-.306.739-1.45 1.113-2.074 2.596-2.097 4.343a5.524 5.524 0 0 1-3.862 5.188c-1.45.453-2.87.372-4.257-.24l-.094-.04c-.334.472-.626.956-.989 1.382-1.555 1.83-3.59 2.695-6.034 2.715-1.405.011-2.727.338-3.946 1.017-.86.478-1.612 1.078-2.207 1.852-.195.254-.45.331-.74.237-.284-.093-.417-.274-.417-.603-.001-3.31-.034-6.622.01-9.932.047-3.461 2.913-6.49 6.453-6.913 1.713-.205 4.21.303 5.65 1.545.24.206.643.617.943 1.073.242.368.567.852.683 1.057.116.205-1.692-2.182-1.625-2.13.53-.566 1.365-1.218 2.061-1.545z"}))};J.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 20",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.65",fill:"none",fillRule:"evenodd"};var K=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lock"),a.a.createElement("path",{d:"M5 12h8V9c0-2.203-1.797-4-4-4S5 6.797 5 9v3zm13 1.5v9a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 0 22.5v-9A1.5 1.5 0 0 1 1.5 12H2V9c0-3.844 3.156-7 7-7s7 3.156 7 7v3h.5a1.5 1.5 0 0 1 1.5 1.5z"}))};K.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 28",width:"1em",height:"1em",fill:"currentColor"};var X=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lock"),a.a.createElement("path",{d:"M14 7h-1V5c0-2.8-2.2-5-5-5S3 2.2 3 5v2H2C.9 7 0 7.9 0 9v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-2.9 0H4.9V5c0-1.7 1.4-3.1 3.1-3.1 1.7 0 3.1 1.4 3.1 3.1v2z"}))};X.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 21",width:"1em",height:"1em",fill:"currentColor"};var Q=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lung"),a.a.createElement("path",{d:"M5.55 23.068h.668a4.55 4.55 0 0 0 4.55-4.55v-2.85c0-1.104-.353-2.18-1.007-3.07A5.185 5.185 0 0 1 8.755 9.53V6.944a1.54 1.54 0 0 0-.939-1.418c-1.558-.355-2.235.185-2.97 1.222-.65.916-1.726 2.902-3.23 5.957A6 6 0 0 0 1 15.354v3.164a4.55 4.55 0 0 0 4.55 4.55z"}),a.a.createElement("path",{d:"M11.465 0v7.633a2 2 0 0 1-.75 1.561L8.582 10.9M15.083 0v7.633a2 2 0 0 0 .75 1.561l2.132 1.705"}),a.a.createElement("path",{d:"M21.384 23.068h-.667a4.55 4.55 0 0 1-4.55-4.55v-2.85c0-1.104.352-2.18 1.006-3.07a5.185 5.185 0 0 0 1.006-3.069V6.944c0-.618.37-1.177.939-1.418 1.558-.355 2.235.185 2.97 1.222.65.916 1.726 2.902 3.23 5.957a6 6 0 0 1 .616 2.649v3.164a4.55 4.55 0 0 1-4.55 4.55z"}))};Q.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 24",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",fill:"none"};var Z=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Non-Target"),a.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),a.a.createElement("path",{d:"M6.5 3v7M3 6.5h7"}),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};Z.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var $=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target"),a.a.createElement("path",{d:"M9.5 26l2-2-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 2-2-4-4a2 2 0 0 0-2.5 0l-14 14a2 2 0 0 0 0 2.5l4 4zM6 0a6 6 0 0 1 0 12A6 6 0 0 1 6 0m.5 3a.5.5 0 0 0-1 0v2.5H3a.5.5 0 0 0 0 1h2.5V9a.5.5 0 0 0 1 0V6.5H9a.5.5 0 0 0 0-1H6.5z"}))};$.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",width:"1em",height:"1em",fill:"currentColor",strokeWidth:"0"};var ee=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target CR"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10"},"CR"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};ee.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var te=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target NE"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10",fontFamily:"sans-serif"},"NE"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};te.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var ne=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target UN"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10"},"UN"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};ne.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var re=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Temp"),a.a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),a.a.createElement("path",{d:"M6.5 3v7M3 6.5h7"}),a.a.createElement("path",{d:"M22.5 6L6 22.5",strokeWidth:"3",strokeDasharray:"0.6666,5"})))};re.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none"};var ae=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Object Group"),a.a.createElement("path",{d:"M14.5 2.75h2a2.5 2.5 0 0 1 2.5 2.5V18.5a2.5 2.5 0 0 1-2.5 2.5H5a2.5 2.5 0 0 1-2.5-2.5v-1"}),a.a.createElement("path",{d:"M.5 2v14A1.5 1.5 0 0 0 2 17.5h12a1.5 1.5 0 0 0 1.5-1.5V2M2 2h12M4.4 7.5h7.2m0 3H4.4m0 3h7.2"}))};ae.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22",width:"1em",height:"1em",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};var oe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"OHIF Logo"),a.a.createElement("rect",{x:"1.25",y:"1.25",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"26",y:"1.25",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"1.25",y:"26",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"26",y:"26",width:"18.8",height:"18.8",rx:"1",ry:"1"}))};oe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47 47",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeWidth:"2.5"};var ie=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M10.416 5.932c0 1.53-.462 2.777-1.386 3.738-.915.952-2.072 1.428-3.472 1.428-1.39 0-2.553-.48-3.486-1.442-.933-.97-1.4-2.217-1.4-3.738 0-1.53.48-2.753 1.442-3.668.961-.924 2.11-1.386 3.444-1.386 1.335 0 2.478.462 3.43 1.386.952.915 1.428 2.142 1.428 3.682zM3.052 8.9c.719.71 1.554 1.064 2.506 1.064.952 0 1.783-.355 2.492-1.064.71-.719 1.064-1.699 1.064-2.94 0-1.25-.364-2.226-1.092-2.926-.719-.71-1.54-1.064-2.464-1.064-.924 0-1.75.355-2.478 1.064-.728.7-1.092 1.675-1.092 2.926 0 1.241.355 2.221 1.064 2.94zm11.578 5.25h-2.814c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.784V5.05h-.756c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.12 0 .182.056.182.168l-.014 1.106h.014a2.34 2.34 0 0 1 .854-.966c.4-.27.89-.406 1.47-.406.942 0 1.703.322 2.282.966.578.635.868 1.484.868 2.548 0 1.055-.285 1.913-.854 2.576-.57.663-1.33.994-2.282.994-.58 0-1.064-.13-1.456-.392a2.359 2.359 0 0 1-.826-.98h-.042c.028.299.042.513.042.644v2.842h.91c.12 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm-.938-6.566c0 .812.21 1.437.63 1.876.429.439.942.658 1.54.658.606 0 1.11-.233 1.512-.7.41-.476.616-1.097.616-1.862 0-.775-.206-1.395-.616-1.862a1.911 1.911 0 0 0-1.512-.7c-.607 0-1.12.229-1.54.686-.42.457-.63 1.092-.63 1.904zm12.69.112h-5.04c.037.775.28 1.372.727 1.792.457.42.97.63 1.54.63.57 0 1.055-.121 1.456-.364.41-.243.686-.48.826-.714.075-.093.159-.107.252-.042l.378.378c.056.056.084.107.084.154 0 .037-.023.089-.07.154a2.014 2.014 0 0 1-.252.308c-.13.14-.317.299-.56.476-.233.177-.541.327-.924.448a3.874 3.874 0 0 1-1.204.182c-.98 0-1.801-.322-2.464-.966-.653-.644-.98-1.507-.98-2.59 0-1.092.327-1.95.98-2.576.654-.635 1.451-.952 2.394-.952.952 0 1.699.308 2.24.924.541.607.812 1.428.812 2.464v.112c0 .121-.065.182-.196.182zm-.967-.854c-.028-.579-.21-1.04-.546-1.386-.336-.345-.784-.518-1.344-.518s-1.04.159-1.442.476c-.401.317-.64.793-.714 1.428h4.046zM35.132 11h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.718 0-1.278.294-1.68.882a1.765 1.765 0 0 0-.182.308v3.85h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.638c.122 0 .182.056.182.168l-.028.952h.042c.486-.812 1.237-1.218 2.254-1.218.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm15.744 0h-3.374c-.112 0-.168-.056-.168-.168v-.714c0-.112.056-.168.168-.168h1.078V6.52h-5.208v3.43h1.078c.122 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-3.36c-.121 0-.182-.056-.182-.168v-.714c0-.112.061-.168.182-.168h1.064V1.998H41.09c-.121 0-.182-.056-.182-.168v-.714c0-.112.061-.168.182-.168h3.36c.122 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-1.078v3.5h5.208v-3.5h-1.078c-.112 0-.168-.056-.168-.168v-.714c0-.112.056-.168.168-.168h3.374c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168h-1.078V9.95h1.078c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168zm7.17-3.304h-5.04c.036.775.28 1.372.727 1.792.458.42.97.63 1.54.63.57 0 1.055-.121 1.456-.364.41-.243.686-.48.826-.714.075-.093.159-.107.252-.042l.378.378c.056.056.084.107.084.154 0 .037-.023.089-.07.154a2.014 2.014 0 0 1-.252.308c-.13.14-.317.299-.56.476-.233.177-.541.327-.924.448a3.874 3.874 0 0 1-1.204.182c-.98 0-1.801-.322-2.464-.966-.653-.644-.98-1.507-.98-2.59 0-1.092.327-1.95.98-2.576.654-.635 1.451-.952 2.394-.952.952 0 1.699.308 2.24.924.541.607.812 1.428.812 2.464v.112c0 .121-.065.182-.196.182zm-.967-.854c-.028-.579-.21-1.04-.546-1.386-.336-.345-.784-.518-1.344-.518s-1.04.159-1.442.476c-.401.317-.64.793-.714 1.428h4.046zM66.21 11H64.99c-.402 0-.602-.196-.602-.588v-.714h-.028c-.682.943-1.592 1.414-2.73 1.414-.672 0-1.223-.173-1.652-.518-.43-.355-.644-.83-.644-1.428 0-.765.331-1.325.994-1.68.672-.364 1.591-.546 2.758-.546h1.176v-.168c0-1.167-.607-1.75-1.82-1.75-.57 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252c-.103.065-.182.117-.238.154-.14.112-.243.121-.308.028l-.392-.49c-.066-.075-.056-.15.028-.224.158-.205.485-.406.98-.602.494-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-1.946-3.22h-1.106c-.542 0-.99.028-1.344.084a2.036 2.036 0 0 0-.91.364c-.243.187-.364.443-.364.77s.13.597.392.812c.27.205.62.308 1.05.308.905 0 1.666-.401 2.282-1.204V7.78zM70.23 11h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V1.886h-.77c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.554c.252 0 .378.117.378.35v8.764h.742c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm5.853-.714c.037.037.056.08.056.126 0 .037-.028.084-.084.14-.41.364-.929.546-1.554.546-.616 0-1.125-.2-1.526-.602-.392-.41-.588-1.003-.588-1.778V5.05h-.784c-.13 0-.196-.06-.196-.182v-.574c0-.121.065-.182.196-.182h.784V2.698c0-.13.065-.196.196-.196h.784c.121 0 .182.065.182.196v1.414h1.778c.13 0 .196.06.196.182v.574c0 .121-.065.182-.196.182h-1.778v3.64c0 .467.103.821.308 1.064.215.233.495.35.84.35.355 0 .62-.089.798-.266.093-.084.177-.08.252.014l.336.434zm8.268.714h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.383 0-.677.06-.882.182a2.598 2.598 0 0 0-.448.308 1.6 1.6 0 0 0-.252.252c-.112.15-.205.303-.28.462v3.836h.742c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V1.886h-.77c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.764c.112 0 .168.056.168.168v3.122c0 .308-.019.593-.056.854h.028c.457-.719 1.185-1.078 2.184-1.078.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm9.318 0h-3.36c-.121 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h1.064V1.998H90.31c-.121 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h3.36c.121 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-1.078V9.95h1.078c.121 0 .182.056.182.168v.714c0 .112-.06.168-.182.168zm13.124 0h-1.33c-.215 0-.374-.042-.476-.126-.094-.093-.14-.247-.14-.462V6.73c0-.541-.131-.961-.392-1.26-.252-.299-.63-.448-1.134-.448-.738 0-1.316.322-1.736.966.056.168.084.355.084.56v3.514h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.742V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.383 0-.677.06-.882.182a2.594 2.594 0 0 0-.448.308 1.6 1.6 0 0 0-.252.252c-.112.15-.206.303-.28.462v3.836h.686c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-2.618c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.372c.158 0 .27.033.336.098.074.056.112.163.112.322l-.028.7h.042c.485-.812 1.236-1.218 2.254-1.218 1.026 0 1.726.387 2.1 1.162.532-.775 1.283-1.162 2.254-1.162.746 0 1.325.22 1.736.658.42.439.63 1.031.63 1.778l.014 3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm7.978 0h-1.218c-.401 0-.602-.196-.602-.588v-.714h-.028c-.681.943-1.591 1.414-2.73 1.414-.672 0-1.222-.173-1.652-.518-.429-.355-.644-.83-.644-1.428 0-.765.332-1.325.994-1.68.672-.364 1.592-.546 2.758-.546h1.176v-.168c0-1.167-.606-1.75-1.82-1.75-.569 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252l-.238.154c-.14.112-.242.121-.308.028l-.392-.49c-.065-.075-.056-.15.028-.224.159-.205.486-.406.98-.602.495-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-1.946-3.22h-1.106c-.541 0-.989.028-1.344.084a2.039 2.039 0 0 0-.91.364c-.242.187-.364.443-.364.77s.131.597.392.812c.271.205.621.308 1.05.308.906 0 1.666-.401 2.282-1.204V7.78zm6.236 6.496c-.467 0-.822-.033-1.064-.098a7.108 7.108 0 0 1-.574-.182 2.224 2.224 0 0 1-.364-.154 2.853 2.853 0 0 1-.294-.154c-.411-.27-.565-.467-.462-.588l.364-.518c.056-.084.135-.089.238-.014.009 0 .037.019.084.056.056.047.107.089.154.126.056.037.126.08.21.126.093.056.196.103.308.14.112.047.233.089.364.126.308.084.648.126 1.022.126.672 0 1.208-.163 1.61-.49.41-.317.616-.821.616-1.512V9.67c-.168.392-.448.728-.84 1.008-.383.28-.864.42-1.442.42-.952 0-1.718-.331-2.296-.994-.57-.663-.854-1.521-.854-2.576 0-1.055.289-1.904.868-2.548.588-.644 1.348-.966 2.282-.966.578 0 1.064.135 1.456.406.401.261.69.583.868.966h.028l-.014-1.106c0-.112.056-.168.168-.168h1.652c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-.756v6.216c0 .999-.308 1.75-.924 2.254-.607.504-1.41.756-2.408.756zm-2.072-6.72c0 .765.205 1.386.616 1.862.41.467.924.7 1.54.7s1.124-.233 1.526-.7c.41-.467.616-1.092.616-1.876 0-.784-.206-1.405-.616-1.862a1.943 1.943 0 0 0-1.526-.686c-.616 0-1.13.233-1.54.7-.411.467-.616 1.087-.616 1.862zM127.255 11h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.764c.112 0 .168.056.168.168v5.782h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm-.798-8.96a.765.765 0 0 1 .238.56.72.72 0 0 1-.238.546.742.742 0 0 1-.546.224.792.792 0 0 1-.56-.224.744.744 0 0 1-.224-.546.792.792 0 0 1 .784-.798.72.72 0 0 1 .546.238zm9.492 8.96h-1.33c-.402 0-.602-.196-.602-.588V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.719 0-1.279.294-1.68.882a1.697 1.697 0 0 0-.182.308v3.85h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.121 0 .182.056.182.168l-.028.952h.042c.485-.812 1.236-1.218 2.254-1.218.746 0 1.33.22 1.75.658.42.439.634 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm4.207 3.276c-.466 0-.821-.033-1.064-.098a7.377 7.377 0 0 1-.574-.182 2.263 2.263 0 0 1-.364-.154 3.075 3.075 0 0 1-.294-.154c-.41-.27-.564-.467-.462-.588l.364-.518c.056-.084.136-.089.238-.014.01 0 .038.019.084.056l.154.126c.056.037.126.08.21.126.094.056.196.103.308.14.112.047.234.089.364.126.308.084.649.126 1.022.126.672 0 1.209-.163 1.61-.49.411-.317.616-.821.616-1.512V9.67c-.168.392-.448.728-.84 1.008-.382.28-.863.42-1.442.42-.952 0-1.717-.331-2.296-.994-.569-.663-.854-1.521-.854-2.576 0-1.055.29-1.904.868-2.548.588-.644 1.349-.966 2.282-.966.579 0 1.064.135 1.456.406.402.261.691.583.868.966h.028l-.014-1.106c0-.112.056-.168.168-.168h1.652c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-.756v6.216c0 .999-.308 1.75-.924 2.254-.606.504-1.409.756-2.408.756zm-2.072-6.72c0 .765.206 1.386.616 1.862.411.467.924.7 1.54.7s1.125-.233 1.526-.7c.411-.467.616-1.092.616-1.876 0-.784-.205-1.405-.616-1.862a1.941 1.941 0 0 0-1.526-.686c-.616 0-1.129.233-1.54.7-.41.467-.616 1.087-.616 1.862zM154.07 11h-3.864c-.122 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h1.064V1.998h-1.064c-.122 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h7.182c.121 0 .182.056.182.168V3.37c0 .121-.061.182-.182.182h-.756c-.112 0-.168-.06-.168-.182V1.998h-3.976V5.47h3.29c.121 0 .182.056.182.168v.714c0 .112-.061.168-.182.168h-3.29v3.43h1.582c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168zm9.612-.882c-.653.653-1.488.98-2.506.98-1.017 0-1.852-.322-2.506-.966-.653-.653-.98-1.517-.98-2.59 0-1.083.332-1.941.994-2.576.663-.635 1.494-.952 2.492-.952 1.008 0 1.839.322 2.492.966.663.635.994 1.489.994 2.562 0 1.064-.326 1.923-.98 2.576zm-4.816-2.576c0 .765.224 1.386.672 1.862.448.476.994.714 1.638.714.654 0 1.204-.238 1.652-.714.448-.476.672-1.097.672-1.862 0-.765-.228-1.381-.686-1.848a2.168 2.168 0 0 0-1.624-.7c-.634 0-1.18.233-1.638.7-.457.467-.686 1.083-.686 1.848zM172.763 11h-1.218c-.401 0-.602-.196-.602-.588v-.518h-.042c-.383.803-1.111 1.204-2.184 1.204-.747 0-1.339-.22-1.778-.658-.429-.448-.649-1.04-.658-1.778V5.05h-.798c-.112 0-.168-.056-.168-.168V4.28c0-.112.056-.168.168-.168h1.344c.401 0 .602.196.602.588v3.682c0 .541.131.961.392 1.26.261.299.644.448 1.148.448.681 0 1.218-.252 1.61-.756.168-.215.252-.36.252-.434V5.05h-.756c-.112 0-.168-.056-.168-.168V4.28c0-.112.056-.168.168-.168h1.736c.112 0 .168.056.168.168v5.782h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm8.658 0h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.718 0-1.278.294-1.68.882a1.824 1.824 0 0 0-.182.308v3.85h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.638c.122 0 .182.056.182.168l-.028.952h.042c.486-.812 1.237-1.218 2.254-1.218.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm8.215 0h-1.218c-.215 0-.374-.042-.476-.126-.094-.093-.14-.247-.14-.462v-.784h-.014c-.15.392-.43.737-.84 1.036-.411.29-.91.434-1.498.434-.934 0-1.694-.327-2.282-.98-.579-.653-.868-1.507-.868-2.562 0-1.064.289-1.918.868-2.562.588-.653 1.353-.98 2.296-.98.578 0 1.059.135 1.442.406.382.261.658.583.826.966h.014a8.784 8.784 0 0 1-.014-.462V1.886h-.784c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.736c.112 0 .168.056.168.168v8.946h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-6.188-3.472c0 .775.2 1.4.602 1.876.41.476.928.714 1.554.714.625 0 1.138-.233 1.54-.7.401-.476.602-1.106.602-1.89 0-.784-.206-1.4-.616-1.848a1.97 1.97 0 0 0-1.526-.686c-.607 0-1.12.229-1.54.686-.411.457-.616 1.073-.616 1.848zM197.746 11h-1.218c-.401 0-.602-.196-.602-.588v-.714h-.028c-.681.943-1.591 1.414-2.73 1.414-.672 0-1.223-.173-1.652-.518-.429-.355-.644-.83-.644-1.428 0-.765.331-1.325.994-1.68.672-.364 1.591-.546 2.758-.546h1.176v-.168c0-1.167-.607-1.75-1.82-1.75-.569 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252c-.103.065-.182.117-.238.154-.14.112-.243.121-.308.028l-.392-.49c-.065-.075-.056-.15.028-.224.159-.205.485-.406.98-.602.495-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zM195.8 7.78h-1.106c-.541 0-.989.028-1.344.084a2.034 2.034 0 0 0-.91.364c-.243.187-.364.443-.364.77s.131.597.392.812c.271.205.621.308 1.05.308.905 0 1.666-.401 2.282-1.204V7.78zm7.459 2.506c.037.037.056.08.056.126 0 .037-.028.084-.084.14-.411.364-.929.546-1.554.546-.616 0-1.125-.2-1.526-.602-.392-.41-.588-1.003-.588-1.778V5.05h-.784c-.131 0-.196-.06-.196-.182v-.574c0-.121.065-.182.196-.182h.784V2.698c0-.13.065-.196.196-.196h.784c.121 0 .182.065.182.196v1.414h1.778c.13 0 .196.06.196.182v.574c0 .121-.066.182-.196.182h-1.778v3.64c0 .467.102.821.308 1.064.214.233.494.35.84.35.354 0 .62-.089.798-.266.093-.084.177-.08.252.014l.336.434zm3.69.714h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.764c.112 0 .168.056.168.168v5.782h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm-.798-8.96a.769.769 0 0 1 .238.56c0 .215-.08.397-.238.546a.745.745 0 0 1-.546.224.789.789 0 0 1-.56-.224.74.74 0 0 1-.224-.546.788.788 0 0 1 .784-.798c.214 0 .396.08.546.238zm7.871 8.078c-.653.653-1.489.98-2.506.98-1.017 0-1.853-.322-2.506-.966-.653-.653-.98-1.517-.98-2.59 0-1.083.331-1.941.994-2.576s1.493-.952 2.492-.952c1.008 0 1.839.322 2.492.966.663.635.994 1.489.994 2.562 0 1.064-.327 1.923-.98 2.576zm-4.816-2.576c0 .765.224 1.386.672 1.862.448.476.994.714 1.638.714a2.18 2.18 0 0 0 1.652-.714c.448-.476.672-1.097.672-1.862 0-.765-.229-1.381-.686-1.848a2.168 2.168 0 0 0-1.624-.7c-.635 0-1.181.233-1.638.7-.457.467-.686 1.083-.686 1.848zM223.49 11h-1.33c-.402 0-.602-.196-.602-.588V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.719 0-1.279.294-1.68.882a1.697 1.697 0 0 0-.182.308v3.85h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.121 0 .182.056.182.168l-.028.952h.042c.485-.812 1.236-1.218 2.254-1.218.746 0 1.33.22 1.75.658.42.439.634 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168z",fill:"#fff"}))};ie.defaultProps={viewBox:"0 0 224 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var se=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Oval"),a.a.createElement("path",{d:"M12 5.5c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5zM24 14c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"}))};se.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var ce=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Pallete"),a.a.createElement("path",{d:"M17.484 12c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-3-3.984c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-4.968 0c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-3 3.984c.844 0 1.5-.656 1.5-1.5S7.36 9 6.516 9s-1.5.656-1.5 1.5.656 1.5 1.5 1.5zM12 3c4.969 0 9 3.609 9 8.016 0 2.766-2.25 4.969-5.016 4.969H14.25c-.844 0-1.5.656-1.5 1.5 0 .375.141.703.375.984s.375.656.375 1.031c0 .844-.656 1.5-1.5 1.5-4.969 0-9-4.031-9-9s4.031-9 9-9z"}))};ce.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var le=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))};le.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var ue=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Add"),a.a.createElement("path",{d:"M6.5 7v5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7h-5C.22 7 0 6.78 0 6.5S.22 6 .5 6h5V1c0-.28.22-.5.5-.5s.5.22.5.5v5h5c.28 0 .5.22.5.5s-.22.5-.5.5h-5z"}))};ue.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"};var fe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Power Off"),a.a.createElement("path",{d:"M24 14c0 6.609-5.391 12-12 12S0 20.609 0 14c0-3.797 1.75-7.297 4.797-9.578a1.979 1.979 0 0 1 2.797.391 1.995 1.995 0 0 1-.391 2.797C5.172 9.141 4 11.469 4 14.001c0 4.406 3.594 8 8 8s8-3.594 8-8c0-2.531-1.172-4.859-3.203-6.391a1.995 1.995 0 0 1-.391-2.797 1.981 1.981 0 0 1 2.797-.391A11.877 11.877 0 0 1 24 14zM14 2v10c0 1.094-.906 2-2 2s-2-.906-2-2V2c0-1.094.906-2 2-2s2 .906 2 2z"}))};fe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var pe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Reset"),a.a.createElement("path",{d:"M24 14c0 6.609-5.391 12-12 12a11.972 11.972 0 0 1-9.234-4.328.52.52 0 0 1 .031-.672l2.141-2.156a.599.599 0 0 1 .391-.141.51.51 0 0 1 .359.187A7.91 7.91 0 0 0 12 21.999c4.406 0 8-3.594 8-8s-3.594-8-8-8A7.952 7.952 0 0 0 6.563 8.14l2.141 2.156a.964.964 0 0 1 .219 1.078 1.002 1.002 0 0 1-.922.625h-7c-.547 0-1-.453-1-1v-7c0-.406.25-.766.625-.922a.964.964 0 0 1 1.078.219l2.031 2.016c2.203-2.078 5.187-3.313 8.266-3.313 6.609 0 12 5.391 12 12z"}))};pe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var me=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Rotate"),a.a.createElement("path",{d:"M24 4v7c0 .547-.453 1-1 1h-7c-.406 0-.766-.25-.922-.625a.964.964 0 0 1 .219-1.078l2.156-2.156A8.026 8.026 0 0 0 12 6c-4.406 0-8 3.594-8 8s3.594 8 8 8a7.91 7.91 0 0 0 6.312-3.109.508.508 0 0 1 .359-.187.6.6 0 0 1 .391.141l2.141 2.156c.187.172.187.469.031.672A11.972 11.972 0 0 1 12 26.001c-6.609 0-12-5.391-12-12s5.391-12 12-12c3.078 0 6.062 1.234 8.266 3.313l2.031-2.016a.984.984 0 0 1 1.094-.219c.359.156.609.516.609.922z"}))};me.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var de=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Rotate Right"),a.a.createElement("path",{d:"M16.875 15.469a5.509 5.509 0 0 0 1.031-2.484h2.016a8.11 8.11 0 0 1-1.594 3.891zm-3.891 2.437a5.527 5.527 0 0 0 2.484-1.031l1.453 1.453c-1.172.891-2.531 1.406-3.938 1.594v-2.016zm6.938-6.89h-2.016a5.527 5.527 0 0 0-1.031-2.484l1.453-1.406a8.107 8.107 0 0 1 1.594 3.891zm-4.359-5.485l-4.547 4.453V6.093C8.157 6.562 6 9.046 6 11.999s2.156 5.438 5.016 5.906v2.016c-3.938-.469-7.031-3.844-7.031-7.922s3.094-7.453 7.031-7.922V.983z"}))};de.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var he=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"}))};he.defaultProps={"data-icon":"save",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};var ge=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Scissors"),a.a.createElement("path",{d:"M278.06 256L444.48 89.57c4.69-4.69 4.69-12.29 0-16.97-32.8-32.8-85.99-32.8-118.79 0L210.18 188.12l-24.86-24.86c4.31-10.92 6.68-22.81 6.68-35.26 0-53.02-42.98-96-96-96S0 74.98 0 128s42.98 96 96 96c4.54 0 8.99-.32 13.36-.93L142.29 256l-32.93 32.93c-4.37-.61-8.83-.93-13.36-.93-53.02 0-96 42.98-96 96s42.98 96 96 96 96-42.98 96-96c0-12.45-2.37-24.34-6.68-35.26l24.86-24.86L325.69 439.4c32.8 32.8 85.99 32.8 118.79 0 4.69-4.68 4.69-12.28 0-16.97L278.06 256zM96 160c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32zm0 256c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"}))};ge.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var ve=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Search"),a.a.createElement("path",{d:"M9.516 14.016c2.484 0 4.5-2.016 4.5-4.5s-2.016-4.5-4.5-4.5-4.5 2.016-4.5 4.5 2.016 4.5 4.5 4.5zm6 0l4.969 4.969-1.5 1.5-4.969-4.969v-.797l-.281-.281c-1.125.984-2.625 1.547-4.219 1.547C5.907 15.985 3 13.126 3 9.516S5.906 3 9.516 3s6.469 2.906 6.469 6.516c0 1.594-.563 3.094-1.547 4.219l.281.281h.797z"}))};ve.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var ye=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Search Plus"),a.a.createElement("g",{fill:"none",strokeWidth:"2",strokeLinecap:"round"},a.a.createElement("path",{d:"M11.5 11.5L16 16"}),a.a.createElement("circle",{cx:"7",cy:"7",r:"6"})))};ye.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"1em",height:"1em",stroke:"currentColor"};var be=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Soft Tissue"),a.a.createElement("path",{d:"M14.968 4.345c.287.06.474.11.524.13l3.5 1.4a3 3 0 0 1 1.824 2.16l2.108 4.816a.5.5 0 0 1-.489.605H19.83a.5.5 0 0 1-.487-.386c-.922-1.726-1.395-2.634-1.417-2.725-.033-.137-1.326-.08-1.466-.064a.279.279 0 0 0-.247.275l.788 9.812a.504.504 0 0 1-.005.073l.343 3.766a.51.51 0 0 1-.51.533h-2.873a.51.51 0 0 1-.51-.465l-.599-3.407h-2.702L9.49 24.28a.51.51 0 0 1-.51.464H6.11a.51.51 0 0 1-.51-.532l.549-8.384.17-5.208a.279.279 0 0 0-.246-.275c-.14-.016-1.218-.049-1.252.088L3.8 13.071a.5.5 0 0 1-.49.385H.71a.5.5 0 0 1-.49-.605l1.966-4.813c.21-.98.895-1.79 1.827-2.16l3.5-1.4c.051-.02.235-.068.52-.126L8.618.988c.941.408 1.845.612 2.711.612.867 0 1.694-.204 2.48-.612l1.159 3.357z"}))};be.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 26",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"};var we=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort"),a.a.createElement("path",{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}))};we.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var Ee=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort Down"),a.a.createElement("path",{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}))};Ee.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var Se=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort Up"),a.a.createElement("path",{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"}))};Se.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var Oe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sphere"),a.a.createElement("path",{d:"M256 0C114.837 0 0 114.837 0 256s114.837 256 256 256 256-114.837 256-256S397.163 0 256 0zm0 21.333c129.387 0 234.667 105.28 234.667 234.667 0 40.363-96.384 85.333-234.667 85.333-28.629 0-55.339-2.005-79.893-5.44-3.435-24.555-5.44-51.264-5.44-79.893 0-138.283 44.97-234.667 85.333-234.667zm-47.488 4.843C173.184 67.435 149.333 153.707 149.333 256c0 26.688 1.621 52.309 4.651 76.309C72.683 317.205 21.333 285.419 21.333 256c0-113.131 80.491-207.808 187.179-229.824zM26.176 303.488c27.072 23.168 73.429 41.429 131.136 51.2 9.792 57.707 28.032 104.064 51.2 131.136-91.349-18.859-163.477-90.987-182.336-182.336zM256 490.667c-29.419 0-61.205-51.349-76.309-132.651 24 3.029 49.621 4.651 76.309 4.651 102.293 0 188.565-23.851 229.824-59.179C463.808 410.176 369.131 490.667 256 490.667z"}))};Oe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var Ie=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Square Outline"),a.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"}))};Ie.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Pe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Star"),a.a.createElement("path",{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}))};Pe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"1em",height:"1em",fill:"currentColor"};var Ce=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}))};Ce.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var ke=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}))};ke.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var je=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sun"),a.a.createElement("path",{d:"M494.2 221.9l-59.8-40.5 13.7-71c2.6-13.2-1.6-26.8-11.1-36.4-9.6-9.5-23.2-13.7-36.2-11.1l-70.9 13.7-40.4-59.9c-15.1-22.3-51.9-22.3-67 0l-40.4 59.9-70.8-13.7C98 60.4 84.5 64.5 75 74.1c-9.5 9.6-13.7 23.1-11.1 36.3l13.7 71-59.8 40.5C6.6 229.5 0 242 0 255.5s6.7 26 17.8 33.5l59.8 40.5-13.7 71c-2.6 13.2 1.6 26.8 11.1 36.3 9.5 9.5 22.9 13.7 36.3 11.1l70.8-13.7 40.4 59.9C230 505.3 242.6 512 256 512s26-6.7 33.5-17.8l40.4-59.9 70.9 13.7c13.4 2.7 26.8-1.6 36.3-11.1 9.5-9.5 13.6-23.1 11.1-36.3l-13.7-71 59.8-40.5c11.1-7.5 17.8-20.1 17.8-33.5-.1-13.6-6.7-26.1-17.9-33.7zm-112.9 85.6l17.6 91.2-91-17.6L256 458l-51.9-77-90.9 17.6 17.6-91.2-76.8-52 76.8-52-17.6-91.2 91 17.6L256 53l51.9 76.9 91-17.6-17.6 91.1 76.8 52-76.8 52.1zM256 152c-57.3 0-104 46.7-104 104s46.7 104 104 104 104-46.7 104-104-46.7-104-104-104zm0 160c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z"}))};je.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var xe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH"),a.a.createElement("path",{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"}))};xe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var De=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH Large"),a.a.createElement("path",{d:"M0 0h7v6H0zm8 0h7v6H8zM0 7h7v6H0zm8 0h7v6H8z"}))};De.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 13",width:"1em",height:"1em",fill:"currentColor"};var Te=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH List"),a.a.createElement("path",{d:"M9 5.016h12V9H9V5.016zm0 13.968V15h12v3.984H9zm0-4.968V9.985h12v4.031H9zM3.984 9V5.016h4.031V9H3.984zm0 9.984V15h4.031v3.984H3.984zm0-4.968V9.985h4.031v4.031H3.984z"}))};Te.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var Ne=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Times"),a.a.createElement("path",{d:"M1 1l12 12M1 13L13 1"}))};Ne.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.75"};var _e=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Trash"),a.a.createElement("path",{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}))};_e.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Ae=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Unlink"),a.a.createElement("path",{d:"M304.083 388.936c4.686 4.686 4.686 12.284 0 16.971l-65.057 65.056c-54.709 54.711-143.27 54.721-197.989 0-54.713-54.713-54.719-143.27 0-197.989l65.056-65.057c4.686-4.686 12.284-4.686 16.971 0l22.627 22.627c4.686 4.686 4.686 12.284 0 16.971L81.386 311.82c-34.341 34.341-33.451 88.269.597 120.866 32.577 31.187 84.788 31.337 117.445-1.32l65.057-65.056c4.686-4.686 12.284-4.686 16.971 0l22.627 22.626zm-56.568-243.245l64.304-64.304c34.346-34.346 88.286-33.453 120.882.612 31.18 32.586 31.309 84.785-1.335 117.43l-65.056 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.686 4.686 12.284 4.686 16.971 0l65.056-65.057c54.711-54.709 54.721-143.271 0-197.99-54.71-54.711-143.27-54.72-197.989 0l-65.057 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.685 4.685 12.283 4.685 16.97-.001zm238.343 362.794l22.627-22.627c4.686-4.686 4.686-12.284 0-16.971L43.112 3.515c-4.686-4.686-12.284-4.686-16.971 0L3.515 26.142c-4.686 4.686-4.686 12.284 0 16.971l465.373 465.373c4.686 4.686 12.284 4.686 16.97-.001z"}))};Ae.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var Re=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"User"),a.a.createElement("path",{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}))};Re.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Me=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"YouTube Logo"),a.a.createElement("path",{d:"M11.109 17.625l7.562-3.906-7.562-3.953v7.859zM14 4.156c5.891 0 9.797.281 9.797.281.547.063 1.75.063 2.812 1.188 0 0 .859.844 1.109 2.781.297 2.266.281 4.531.281 4.531v2.125s.016 2.266-.281 4.531c-.25 1.922-1.109 2.781-1.109 2.781-1.062 1.109-2.266 1.109-2.812 1.172 0 0-3.906.297-9.797.297-7.281-.063-9.516-.281-9.516-.281-.625-.109-2.031-.078-3.094-1.188 0 0-.859-.859-1.109-2.781C-.016 17.327 0 15.062 0 15.062v-2.125s-.016-2.266.281-4.531C.531 6.469 1.39 5.625 1.39 5.625 2.452 4.5 3.656 4.5 4.202 4.437c0 0 3.906-.281 9.797-.281z"}))};Me.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"1em",height:"1em",fill:"currentColor"};var Le=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}))};Le.defaultProps={"data-prefix":"fas","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"};var Ue=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}))};Ue.defaultProps={"data-prefix":"fas","data-icon":"eye-slash",className:"svg-inline--fa fa-eye-slash fa-w-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"};var Fe=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM178.117 262.104C87.429 196.287 88.353 196.121 64 177.167V152c0-13.255 10.745-24 24-24h272c13.255 0 24 10.745 24 24v25.167c-24.371 18.969-23.434 19.124-114.117 84.938-10.5 7.655-31.392 26.12-45.883 25.894-14.503.218-35.367-18.227-45.883-25.895zM384 217.775V360c0 13.255-10.745 24-24 24H88c-13.255 0-24-10.745-24-24V217.775c13.958 10.794 33.329 25.236 95.303 70.214 14.162 10.341 37.975 32.145 64.694 32.01 26.887.134 51.037-22.041 64.72-32.025 61.958-44.965 81.325-59.406 95.283-70.199z"}))};Fe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Ve={eye:Le,"eye-closed":Ue,brush:d,scissors:ge,user:Re,sort:we,th:xe,star:Pe,"sort-up":Se,sphere:Oe,"sort-down":Ee,info:z,cube:x,crosshairs:j,"dot-circle":N,"angle-left":c,"3d-rotate":D,plus:ue,"chevron-down":w,"angle-double-down":i,"angle-double-up":s,"arrows-alt-h":u,"arrows-alt-v":f,bars:p,"caret-down":h,"caret-up":g,"check-circle-o":b,check:v,circle:E,"circle-o":O,times:Ne,"create-comment":C,"create-screen-capture":k,edit:_,"fast-backward":F,"fast-forward":V,"object-group":ae,search:ve,"power-off":fe,"inline-edit":H,list:Y,"ohif-logo":oe,"ohif-text-logo":ie,lock:K,play:le,database:T,cog:P,"circle-notch":S,"square-o":Ie,"check-circle":y,"lock-alt":X,"step-backward":Ce,"step-forward":ke,clipboard:I,stop:B,"th-large":De,"th-list":Te,sun:je,palette:ce,youtube:Me,oval:se,"ellipse-h":R,"ellipse-v":M,adjust:o,level:q,"link-circles":W,"search-plus":ye,"measure-non-target":Z,"measure-target":$,"measure-target-cr":ee,"measure-target-un":ne,"measure-target-ne":te,"measure-temp":re,"ellipse-circle":A,arrows:l,reset:pe,rotate:me,"rotate-right":de,trash:_e,unlink:Ae,"exclamation-circle":L,link:G,"exclamation-triangle":U,brain:m,"soft-tissue":be,lung:Q,liver:J,save:he,"envelope-square":Fe};n(828);var Be=n(1),ze=function(e){return function(e,t){return e&&Ve[e]?a.a.createElement(Ve[e],t):a.a.createElement("div",null,"Missing Icon")}(e.name,e)};ze.propTypes={name:n.n(Be).a.string.isRequired};var He=ze;n.d(t,"a",(function(){return He}))},386:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),i=n.n(o);function s(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.xsrfCookieName="csrftoken",i.a.defaults.withCredentials=!0;t.default=function(){var e=p(a.a.useState(""),2),t=e[0],n=e[1],o=p(Object(r.useState)({img_data:"",hasMedicalCertificate:!1,email:""}),2),s=o[0],l=o[1],m=s.img_data,d=s.hasMedicalCertificate,h=s.email,g=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.prev=2,e.next=5,i.a.get("/api/get_url_medicalcertificate?email=".concat(h),n);case 5:(r=e.sent)&&l(u({},s,{hasMedicalCertificate:!0,img_data:r.data.Img})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=c(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(a=new FormData).append("email",h),a.append("approval",t),e.prev=5,e.next=8,i.a.post("/api/change_approval",a,r);case 8:o=e.sent,alert(o.data.Status),location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return d?a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"User ",h," medical certificate:"),a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"80px"}},a.a.createElement("img",{src:m}),a.a.createElement("form",{onSubmit:function(e){return v(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{style:{marginTop:"20px"}},"Medical certificate is:"),a.a.createElement("select",{className:"selectAlgorithm",name:"task",value:t,onChange:function(e){return n(e.target.value)},required:!0},a.a.createElement("option",{key:""}),["Approved","Not Approved"].map((function(e){return a.a.createElement("option",{key:e},e)})))),a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Register")))):a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"150px"}},a.a.createElement("h1",null,"Please, enter the email of the user."),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:function(e){return g(e)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{className:"form-control",type:"text",placeholder:"Email*",name:"email",value:h,onChange:function(e){return function(e){l(u({},s,f({},e.target.name,e.target.value)))}(e)},required:!0})),a.a.createElement("button",{style:{marginTop:"30px"},type:"submit",className:"btn btn-primary"},"Verify"))))}},387:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n(9),s=n.n(i);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.withCredentials=!0;t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.user,n=p(Object(r.useState)({status:!1,secret_key:""}),2),o=n[0],i=n[1],c=o.status,u=o.secret_key,m=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(r=new FormData).append("email",t.email),e.prev=3,e.next=6,s.a.post("/api/change_to2FA",r,n);case 6:!0===(a=e.sent).data.Status?i(l({},o,{status:!0})):i(l({},o,{secret_key:a.data.secret_key})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,s,"next",e)}function s(e){f(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return c?a.a.createElement("h1",{style:{textAlign:"center"}},"You already have a code!"):""!==u?a.a.createElement("h1",{style:{textAlign:"center"}},"This is your secret key: ",u,". You must put it on Google Authenticator. Save it in a ",a.a.createElement("b",null,"safe place"),", because it will not appear again!"):a.a.createElement("div",{style:{margin:"auto",padding:"10px"},className:"container mt-5"},a.a.createElement("h1",null,"Change to 2 Factor Authentication?"),a.a.createElement("button",{style:{margin:"auto",padding:"10px"},className:"btn btn-danger mt-3",onClick:m},"Yes, get secret."))}))},388:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(67),i=n(27),s=n(19),c=n(9),l=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.xsrfCookieName="csrftoken",l.a.defaults.withCredentials=!0;t.default=Object(s.b)((function(e){return{user:e.auth.user}}),null)((function(e){var t=e.user,n=d(Object(r.useState)({seeGroups:!0,groupName:""}),2),s=n[0],c=n[1],u=d(Object(r.useState)([]),2),p=u[0],h=u[1],g=s.groupName;Object(r.useEffect)((function(){v()}),[t,v]);var v=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=3,l.a.get("/api/check_user_groups?email=".concat(t.email),n);case 3:r=e.sent,h(r.data.Groups),c(f({},s,{seeGroups:!1}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){m(o,r,a,i,s,"next",e)}function s(e){m(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();if(g){var y="/group_details/"+g+"/"+t.email;return a.a.createElement(o.a,{to:y})}return a.a.createElement("div",{className:"container mt-5"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},a.a.createElement("h1",null,t.email,"'s Groups"),a.a.createElement("br",null),a.a.createElement(i.b,{title:"Create New Group",className:"nav-link",to:"/add_group"},"Add Group"),a.a.createElement("br",null),p&&p.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignItems:"center",margin:"20px 40px"}},a.a.createElement("button",{className:"btn btn-primary",title:"View Group Details",onClick:function(){return t=e.name,void c(f({},s,{groupName:t}));var t}},e.name))}))))}))},389:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(27),i=n(67),s=n(19),c=n(9),l=n.n(c),u=n(31);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){d(o,r,a,i,s,"next",e)}function s(e){d(o,r,a,i,s,"throw",e)}i(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.xsrfCookieName="csrftoken",l.a.defaults.withCredentials=!0;t.default=Object(s.b)((function(e){return{user:e.auth.user}}),null)((function(e){var t=e.match,n=e.user,s=g(Object(r.useState)({seeDetails:!0,badUser:!1,userName:"",mainUser:"",groupName:t.params.name,appUser:t.params.userName}),2),c=s[0],f=s[1],m=c.seeDetails,d=c.badUser,v=c.userName,y=c.mainUser,b=c.groupName,w=c.appUser,E=g(Object(r.useState)([]),2),S=E[0],O=E[1],I=g(Object(r.useState)([]),2),P=I[0],C=I[1],k=g(Object(r.useState)([]),2),j=k[0],x=k[1],D=g(Object(r.useState)(!1),2),T=D[0],N=D[1];Object(r.useEffect)((function(){n&&m&&(A(),"health_professionals"!==b&&"investigators"!==b&&_())}),[n,m,A,_]);var _=function(){var e=h(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=4,l.a.get("/api/see_permissions?group=".concat(b,"&email=").concat(n.email,"&user=").concat(n.email),t);case 4:"You don't belong to this group!"===(r=e.sent).data.Perms?alert("You don't belong to this group!"):x(r.data.Perms),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=h(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=4,l.a.get("/api/group_details?group=".concat(b,"&user=").concat(n.email),t);case 4:"You don't belong to this group!"===(r=e.sent).data?f(p({},c,{badUser:!0})):("health_professionals"!==b&&"investigators"!==b||(O(r.data.Users),f(p({},c,{seeDetails:!1}))),"health_professionals"!==b&&"investigators"!==b&&r.data.mainUser!==w&&(O(r.data.Users),C(r.data.Permissions),f(p({},c,{seeDetails:!1,mainUser:r.data.mainUser}))),"health_professionals"!==b&&"investigators"!==b&&r.data.mainUser===w&&(O(r.data.Users),C(r.data.Permissions),f(p({},c,{seeDetails:!1,mainUser:r.data.mainUser})))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();if(!0===d)return null;var R=function(){var e=h(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.email!==y){e.next=17;break}return e.prev=1,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(a=new FormData).append("groupName",t),a.append("mainUser",y),e.next=8,l.a.post("/api/remove_group",a,r);case 8:!0===e.sent.data.Status?(alert("Group ".concat(t," was eliminated!")),N(!0)):alert("You can't delete this group!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0);case 15:e.next=18;break;case 17:alert("You can't delete this group!");case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=h(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(a=new FormData).append("groupName",b),a.append("users",JSON.stringify([t])),a.append("appUser",JSON.stringify(n.email)),e.next=8,l.a.post("/api/remove_elements",a,r);case 8:!0===e.sent.data.Status?(alert("User ".concat(t," was/were eliminated!")),window.location.reload(!1)):u.b.error("You don't belong to this group!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();if(v){var L="/see_permissions/"+b+"/"+v;return a.a.createElement(i.a,{to:L})}var U=function(e){var t=e.closeToast,n=e.email;return a.a.createElement(r.Fragment,null,a.a.createElement("div",{style:{fontSize:"14px",fontFamily:"Helvetica"}},"Are you sure you want to remove user ",a.a.createElement("b",null,n)," from group"," ",a.a.createElement("b",null,b),"?"),a.a.createElement("div",null,a.a.createElement("button",{style:{fontSize:"14px",fontFamily:"Helvetica",display:"inline-block",marginTop:"10px",margin:"7px",background:"#FFD700",borderRadius:"6px",padding:"8px 16px"},onClick:function(){return M(n)}},"Yes"),a.a.createElement("button",{style:{fontSize:"14px",fontFamily:"Helvetica",display:"inline-block",marginTop:"10px",margin:"7px",background:"#FFD700",borderRadius:"6px",padding:"8px 16px"},onClick:t},"No")))},F=function(e){var t=e.closeToast,n=e.group;return a.a.createElement(r.Fragment,null,a.a.createElement("div",{style:{fontSize:"14px",fontFamily:"Helvetica"}},"Are you sure you want to remove group ",a.a.createElement("b",null,n),"?"),a.a.createElement("div",null,a.a.createElement("button",{style:{fontSize:"14px",fontFamily:"Helvetica",display:"inline-block",marginTop:"10px",margin:"7px",background:"#FFD700",borderRadius:"6px",padding:"8px 16px"},onClick:function(){return R(n)}},"Yes"),a.a.createElement("button",{style:{fontSize:"14px",fontFamily:"Helvetica",display:"inline-block",marginTop:"10px",margin:"7px",background:"#FFD700",borderRadius:"6px",padding:"8px 16px"},onClick:t},"No")))},V=function(e){u.b.warn(a.a.createElement(F,{group:e}),{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return a.a.createElement("div",{className:"container mt-5"},T?a.a.createElement(i.a,{to:"/view_groups"}):a.a.createElement(r.Fragment,null),a.a.createElement("div",null,a.a.createElement("h1",{style:{display:"inline-block",marginTop:"-12px"}},a.a.createElement("span",{style:{fontFamily:"Georgia",color:"#708090"}},"Details of Group:"," "),a.a.createElement("span",{style:{fontFamily:"Georgia"}},b," ")),"health_professionals"!==b&&"investigators"!==b&&y===w?a.a.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups",style:{display:"inline-block",float:"right",marginTop:"-10px"}},a.a.createElement("div",{className:"btn-group btn-group-sm",role:"group"},a.a.createElement("button",{type:"button",className:"btn btn-outline-primary",style:{borderRadius:"4px",backgroundColor:"white"}},localStorage.getItem("Investigator_Authenticated")?a.a.createElement(o.b,{className:"nav-link",to:{pathname:"/add_models/"+b,state:b}},"Add/Remove models"):localStorage.getItem("HealthProfessional_Authenticated")?a.a.createElement(o.b,{className:"nav-link",to:{pathname:"/add_remove_studies/"+b,state:b}},"Add/Remove studies"):null),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary",style:{borderRadius:"4px",backgroundColor:"white",marginRight:"15px"}},a.a.createElement(o.b,{className:"nav-link",to:{pathname:"/add_elements/"+b,state:S}},"Add users")),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary",style:{borderRadius:"4px",paddingTop:"12px",paddingBottom:"12px",paddingRight:"10px",paddingLeft:"10px",borderColor:"#708090"},onClick:function(){return V(b)}},"Remove Group"," "))):null),a.a.createElement("hr",null),"health_professionals"!==b&&"investigators"!==b&&y===w?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("h5",{style:{fontFamily:"Georgia",display:"inline-block",color:"dodgerblue"}},"Group Permissions:"),P&&P.map((function(e,t){return a.a.createElement("b",{style:{display:"inline-block",marginLeft:"10px"},key:t},e.name,P.length>1&&t!==P.length-1?",":".")}))):"health_professionals"!==b&&"investigators"!==b&&y!==w?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("h5",{style:{fontFamily:"Georgia",display:"inline-block",color:"dodgerblue"}},"User Permissions:"),j&&j.map((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("b",{style:{display:"inline-block",marginLeft:"10px"},key:t},e.name," ")," ",e.givenByGroup?"(Group Permission)":"(Individual Permission)",j.length>1&&t!==j.length-1?",":".")}))):null,a.a.createElement("br",null),localStorage.getItem("Investigator_Authenticated")?a.a.createElement(o.b,{to:"/view_models/"+b},"Models shared"):a.a.createElement(o.b,{to:"/view_studies/"+b},"Studies shared"),a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"210px",alignItems:"center",margin:"20px 60px"}},a.a.createElement("div",null,a.a.createElement("h3",{style:{fontFamily:"Georgia",textAlign:"center"}},"Users:"),a.a.createElement("br",null),a.a.createElement("table",{className:"table table-responsive"},a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement("th",{style:{textAlign:"center"}},a.a.createElement("label",null,"Name")),a.a.createElement("th",{style:{textAlign:"center"}},a.a.createElement("label",null,"Email")),"health_professionals"!==b&&"investigators"!==b?a.a.createElement(a.a.Fragment,null,a.a.createElement("th",{style:{textAlign:"center"}},a.a.createElement("label",null,"Main User")),y===w&&S.length>1?a.a.createElement("th",{style:{textAlign:"center"}},a.a.createElement("label",null,"Manage")):null):null)),S&&S.map((function(e){return!y&&e.email!==w||"health_professionals"===b||"investigators"===b?a.a.createElement("tbody",null,a.a.createElement("tr",{style:{fontFamily:"Georgia",backgroundColor:"#708090"}},a.a.createElement("td",{className:"title"},e.first_name," ",e.last_name),a.a.createElement("td",null,e.email))):a.a.createElement("tbody",{style:{textAlign:"center"}},e.email===y?a.a.createElement("tr",{style:{fontFamily:"Georgia",backgroundColor:"#708090"}},a.a.createElement("td",{className:"title"},e.first_name," ",e.last_name),a.a.createElement("td",null,y),a.a.createElement("td",null,"Yes")):a.a.createElement("tr",{style:{fontFamily:"Georgia",backgroundColor:"#708090"}},a.a.createElement("td",{className:"title"},e.first_name," ",e.last_name),a.a.createElement("td",null,e.email),a.a.createElement("td",null,"No"),y===w?a.a.createElement("td",{style:{backgroundColor:"white"}},a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#ffffff",marginTop:"-35px"}},a.a.createElement("li",{className:"nav-item"},a.a.createElement("button",{style:{marginTop:"15px",marginRight:"5px"},onClick:function(){return function(e){u.b.warn(a.a.createElement(U,{email:e}),{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}(e.email)}},"Remove from group")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(o.b,{className:"nav-link",to:"/add_permissions/"+b+"/"+e.email},"Add permissions")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(o.b,{className:"nav-link",to:"/remove_permissions/"+b+"/"+e.email},"Remove permissions"," ")))):null))})),";"))),a.a.createElement(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}))},390:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n(9),s=n.n(i),c=n(724);s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.withCredentials=!0;t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.match;return a.a.createElement(c.a,{title:"Models Shared By Group: ",group:t.params.name})}))},391:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n(9),s=n.n(i);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,s,"next",e)}function s(e){f(o,r,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.withCredentials=!0;t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.match,n=e.user,o=m(Object(r.useState)({seeDetails:!0,badUser:!1,userName:"",name:t.params.name,userEmail:t.params.user}),2),i=o[0],c=o[1],u=i.seeDetails,f=i.badUser,d=i.name,h=i.userEmail,g=m(Object(r.useState)([]),2),v=g[0],y=g[1],b=m(Object(r.useState)([]),2),w=b[0],E=b[1];function S(){return O.apply(this,arguments)}function O(){return(O=p(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=w.length){e.next=5;break}document.getElementById("message1").textContent="At least one permission must be selected!",e.next=21;break;case 5:return e.prev=5,t={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(r=new FormData).append("groupName",d),r.append("user",h),r.append("permissions",JSON.stringify(w)),r.append("appUser",JSON.stringify(n.email)),e.next=14,s.a.post("/api/add_permissions",r,t);case 14:!0===e.sent.data.Status?(window.location.reload(!1),alert(h+" has now more permissions!")):alert("You don't belong to this group!"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),alert(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}function I(e,t){var n=null,r=null;if("permissions"===e.target.name){for(n=document.getElementsByClassName("permissions"),r=0;n[r];++r){if(n[r].checked&&!w.includes(t)){w.push(t);break}var a=w.indexOf(t);a>-1&&w.splice(a,1)}E(w),console.log(w)}}Object(r.useEffect)((function(){n&&u&&P(d,h)}),[u,n,P]);var P=function(){var e=p(regeneratorRuntime.mark((function e(t,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},console.log(n.email),e.next=5,s.a.get("/api/see_permissions?group=".concat(t,"&email=").concat(r,"&user=").concat(n.email),a);case 5:o=e.sent,console.log(o.data.Perms),"You don't belong to this group!"===o.data.Perms?c(l({},i,{badUser:!0})):y(o.data.Perms),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}();if(!0===f)return null;if(localStorage.getItem("Investigator_Authenticated")){var C=[];v.forEach((function(e){C.push(e.name)}));return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"20px"}},a.a.createElement("h2",{style:{fontFamily:"Georgia",color:"dodgerblue"}},"User Permissions:"),h&&v&&v.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignItems:"center",margin:"10px 40px"}},a.a.createElement("p",null,a.a.createElement("b",null,e.name," "),e.givenByGroup?"(Group permission)":null))})),a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"Add permission/s to user: ",a.a.createElement("i",null,h)),a.a.createElement("hr",null),a.a.createElement("div",null,h&&["Test Models","Edit Models"].map((function(e,t){return C.includes(e)?null:a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){I(t,e)}}))})),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return S()}},"Add"))))}if(localStorage.getItem("HealthProfessional_Authenticated")){var k=[];v.forEach((function(e){k.push(e.name)}));return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"20px"}},a.a.createElement("h2",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"User Permissions:"),h&&v&&v.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignItems:"center",margin:"10px 40px"}},a.a.createElement("p",null,a.a.createElement("b",null,e.name," "),e.givenByGroup?"(Group permission)":null))})),a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"Add permission/s to user: ",a.a.createElement("i",null,h)),a.a.createElement("hr",null),a.a.createElement("div",null,h&&["View Studies Metadata","Edit Studies"].map((function(e,t){return k.includes(e)?null:a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){I(t,e)}}))})),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return S()}},"Add"))))}return null}))},392:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n(9),s=n.n(i);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,s,"next",e)}function s(e){f(o,r,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.withCredentials=!0;t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.match,n=e.user,o=m(Object(r.useState)({seeDetails:!0,badUser:!1,userName:""}),2),i=o[0],c=o[1],u=i.seeDetails,f=i.badUser,d=m(Object(r.useState)([]),2),h=d[0],g=d[1],v=m(Object(r.useState)([]),2),y=v[0],b=v[1];function w(){return E.apply(this,arguments)}function E(){return(E=p(regeneratorRuntime.mark((function e(){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=y.length){e.next=5;break}document.getElementById("message1").textContent="At least one permission must be selected!",e.next=23;break;case 5:return r=t.params.name,a=t.params.user,e.prev=7,o={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(i=new FormData).append("groupName",r),i.append("user",a),i.append("permissions",JSON.stringify(y)),i.append("appUser",JSON.stringify(n.email)),e.next=16,s.a.post("/api/remove_permissions",i,o);case 16:!0===e.sent.data.Status?(window.location.reload(!1),alert(a+" has now less permissions!")):alert("You don't belong to this group!"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),alert(e.t0);case 23:case"end":return e.stop()}}),e,null,[[7,20]])})))).apply(this,arguments)}function S(e,t){var n=null,r=null;if("permissions"===e.target.name){for(n=document.getElementsByClassName("permissions"),r=0;n[r];++r){if(n[r].checked&&!y.includes(t)){y.push(t);break}var a=y.indexOf(t);a>-1&&y.splice(a,1)}b(y),console.log(y)}}Object(r.useEffect)((function(){var e=t.params.name,n=t.params.user;u&&O(e,n)}),[t.params.name,t.params.user,u,n,O]);var O=function(){var e=p(regeneratorRuntime.mark((function e(t,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},console.log(n.email),e.next=5,s.a.get("/api/see_permissions?group=".concat(t,"&email=").concat(r,"&user=").concat(n.email),a);case 5:o=e.sent,console.log(o.data.Perms),"You don't belong to this group!"===o.data.Perms?c(l({},i,{badUser:!0})):g(o.data.Perms),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}();if(!0===f)return a.a.createElement("div",null,a.a.createElement("h1",null,"You do not belong to this group!"));var I=t.params.user;if(localStorage.getItem("Investigator_Authenticated")){var P=[];h.forEach((function(e){e.givenByGroup||P.push(e.name)})),console.log(P);return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"20px"}},a.a.createElement("h2",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"User Permissions:"),h&&h.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignItems:"center",margin:"10px 40px"}},a.a.createElement("p",null,a.a.createElement("b",null,e.name," "),e.givenByGroup?"(Group permission)":null))})),a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"Remove permission/s of user: ",a.a.createElement("i",null,I)),a.a.createElement("hr",null),a.a.createElement("div",null,["Test Models","Edit Models"].map((function(e,t){return P.includes(e)?a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){S(t,e)}})):null})),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return w()}},"Remove"))))}if(localStorage.getItem("HealthProfessional_Authenticated")){var C=[];h.forEach((function(e){e.givenByGroup||C.push(e.name)})),console.log(C);return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"20px"}},a.a.createElement("h2",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"User Permissions:"),h&&h.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignItems:"center",margin:"10px 40px"}},a.a.createElement("p",null,a.a.createElement("b",null,e.name," "),e.givenByGroup?"(Group permission)":null))})),a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",{style:{fontFamily:"Georgia",color:"dodgerblue "}},"Remove permission/s of user: ",a.a.createElement("i",null,I)),a.a.createElement("hr",null),a.a.createElement("div",null,["View Studies Metadata","Edit Studies"].map((function(e,t){return C.includes(e)?a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){S(t,e)}})):null})),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return w()}},"Remove"))))}return null}))},393:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(67),c=n(19),l=n(9),u=n.n(l),f=n(331),p=n(797),m=n(1377),d=n(31),h=(n(139),n(11)),g=(n(422),n(312));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function S(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)}))}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e){var t=e.user,n=I(Object(r.useState)([]),2),o=n[0],i=n[1],c=I(Object(r.useState)([]),2),l=c[0],v=c[1],S=I(Object(r.useState)([]),2),P=S[0],k=S[1],x=I(Object(r.useState)([]),2),D=x[0],T=x[1],N=I(Object(r.useState)([]),2),_=N[0],A=N[1],R=I(Object(r.useState)([]),2),M=R[0],L=R[1],U=I(Object(r.useState)([]),2),F=U[0],V=U[1],B=I(Object(r.useState)([]),2),z=B[0],H=B[1],q=I(Object(r.useState)(!1),2),G=q[0],W=q[1],Y=I(Object(r.useState)({patient_name:"",patient_id:"",study_date:""}),2),J=Y[0],K=Y[1],X=I(Object(r.useState)({email:"",first_name:"",last_name:""}),2),Q=X[0],Z=X[1],$=I(Object(r.useState)({fieldName:"name",direction:"desc"}),1)[0],ee=I(Object(r.useState)({name:"",version:"",task:""}),2),te=ee[0],ne=ee[1],re=I(Object(r.useState)(5),2),ae=re[0],oe=re[1],ie=I(Object(r.useState)(0),2),se=ie[0],ce=ie[1],le=Object(h.F)($,200),ue=Object(h.F)(te,250);Object(r.useEffect)((function(){var e=function(){var e=O(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t,J);case 3:n=e.sent,r=[],n.forEach((function(e){r.includes(e)||e.user!==t.email||r.push(e)})),k(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=O(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.b)(t,ue,le,ae);case 3:n=e.sent,r=[],n.forEach((function(e){r.includes(e)||e.user!==t.email||r.push(e)})),i(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=O(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t,n,Q);case 3:r=e.sent,a=[],o=t.email,r.forEach((function(e){var t={email:e.email,first_name:e.first_name,last_name:e.last_name};e.email===o||a.includes(t)||a.push(t)})),A(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),a="";t&&localStorage.getItem("HealthProfessional_Authenticated")?(a="health_professionals",e(),r(a),V(["View Studies Metadata","Edit Studies"])):t&&localStorage.getItem("Investigator_Authenticated")&&(a="investigators",n(),r(a),V(["Test Models","Edit Models"]))}),[ue,le,J,te,Q,ae,t]);var fe=[{displayText:"PatientName",fieldName:"patient_name",inputType:"text",size:50},{displayText:"PatientId",fieldName:"patient_id",inputType:"text",size:50},{displayText:"StudyDate",fieldName:"study_date",inputType:"text",size:100}],pe=[{displayText:"First Name",fieldName:"first_name",inputType:"text",size:80},{displayText:"Last Name",fieldName:"last_name",inputType:"text",size:80},{displayText:"Email",fieldName:"email",inputType:"text",size:100}],me=[{displayText:"ModelName",fieldName:"name",inputType:"text",size:200},{displayText:"Version",fieldName:"version",inputType:"text",size:100},{displayText:"Task",fieldName:"task",inputType:"text",size:200}],de=me.map((function(e){return e.size})).reduce((function(e,t){return e+t})),he=fe.map((function(e){return e.size})).reduce((function(e,t){return e+t})),ge=pe.map((function(e){return e.size})).reduce((function(e,t){return e+t}));function ve(e){var t=e.fieldType,n=E(e,["fieldType"]);return a.a.createElement("div",null,a.a.createElement(m.a,w({type:t},n)),a.a.createElement(Ee,n))}function ye(e,t){K((function(n){return y({},n,b({},e,t))}))}function be(e,t){ne((function(n){return y({},n,b({},e,t))}))}function we(e,t){Z((function(n){return y({},n,b({},e,t))}))}function Ee(e){var t=e.valid,n=e.visited,r=e.validationMessage;return a.a.createElement(a.a.Fragment,null,!t&&n&&a.a.createElement("div",{className:"required"},r))}function Se(e){return e?"":a.a.createElement("div",{className:"required"},"This field is required.")}function Oe(e,t){var n=null,r=null;if("permissions"===e.target.name){for(n=document.getElementsByClassName("permissions"),r=0;n[r];++r){if(n[r].checked&&!z.includes(t)){z.push(t);break}var a=z.indexOf(t);a>-1&&z.splice(a,1)}H(z)}}function Ie(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=O(regeneratorRuntime.mark((function e(n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=M.length&&0!=z.length){e.next=4;break}0==M.length?document.getElementById("message1").textContent="At least one user must be selected!":document.getElementById("message3").textContent="At least one permission must be selected!",e.next=55;break;case 4:if(!localStorage.getItem("HealthProfessional_Authenticated")){e.next=29;break}if(0!=D.length){e.next=10;break}document.getElementById("message2").textContent="At least one study must be selected!",e.next=27;break;case 10:return e.prev=10,r={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(a=new FormData).append("groupName",n.groupName),a.append("mainUser",t.email),a.append("users",JSON.stringify(M)),a.append("permissions",JSON.stringify(z)),a.append("studies",JSON.stringify(D)),e.next=20,u.a.post("/api/health_professional_add_group",a,r);case 20:!0===e.sent.data.Status?(d.b.success("Group ".concat(n.groupName," was created!"),{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),W(!0)):d.b.error("You have no permissions on the studies selected!",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),d.b.error("Error creating group! Please, try again.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 27:e.next=55;break;case 29:if(!localStorage.getItem("Investigator_Authenticated")){e.next=54;break}if(0!=l.length){e.next=35;break}document.getElementById("message2").textContent="At least one model must be selected!",e.next=52;break;case 35:return e.prev=35,o={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(i=new FormData).append("groupName",n.groupName),i.append("mainUser",t.email),i.append("users",JSON.stringify(M)),i.append("permissions",JSON.stringify(z)),i.append("models",JSON.stringify(l)),e.next=45,u.a.post("/api/investigator_add_group",i,o);case 45:!0===e.sent.data.Status?(W(!0),d.b.success("Group ".concat(n.groupName," was created!"),{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):d.b.error("You have no permissions on the models selected!",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=52;break;case 49:e.prev=49,e.t1=e.catch(35),d.b.error("Error creating group! Please, try again.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 52:e.next=55;break;case 54:return e.abrupt("return",null);case 55:case"end":return e.stop()}}),e,null,[[10,24],[35,49]])})))).apply(this,arguments)}var Ce=function(e){var t=e.target.value;M.includes(t)?L(M.filter((function(e){return e!==t}))):M.push(t)},ke=function(){M.length<_.length?L(_.map((function(e){return e.email}))):L([])},je=function(e){var t=e.target.value;l.includes(t)?v(l.filter((function(e){return e!==t}))):l.push(t)},xe=function(){l.length<o.length?v(o.map((function(e){return e.name}))):v([])},De=function(e){var t=e.target.value;D.includes(t)?T(D.filter((function(e){return e!==t}))):D.push(t)},Te=function(){D.length<P.length?T(P.map((function(e){return e.study_uid}))):T([])};return localStorage.getItem("Investigator_Authenticated")&&_&&o?a.a.createElement(a.a.Fragment,null,G?a.a.createElement(s.a,{to:"/view_groups"}):a.a.createElement(r.Fragment,null),a.a.createElement("div",{className:"content"},a.a.createElement(f.a,{initialValues:{groupName:""},className:"addGroup",onSubmit:Ie,render:function(e){return a.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},a.a.createElement("fieldset",{className:"k-form-fieldset"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"15px",marginTop:"15px"}},a.a.createElement("b",null,"Please fill in the fields:")),a.a.createElement("div",{className:"mb-3"},a.a.createElement(p.a,{className:"addGroup_input",name:"groupName",fieldType:"text",component:ve,value:e.valueGetter("groupName"),placeholder:"Group Name",validator:[Se]})),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Add investigators:")),a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"responsive-table"},a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,pe.map((function(e,t){var n=e.size/ge*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(h.y,{meta:pe,values:Q,onValueChange:we,sortFieldName:"first_name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:M.length===_.length,onChange:ke})))),a.a.createElement("tbody",null,!_.length&&a.a.createElement("tr",{style:{backgroundColor:"rgba(54, 156, 199, 0.9)"},className:"no-hover"},a.a.createElement("td",{colSpan:pe.length},a.a.createElement("div",{className:"notFound"},"No matching results"))),_.map((function(e){var t=e.email,n=e.first_name,r=e.last_name;return a.a.createElement("tr",{style:{backgroundColor:"rgba(54, 156, 199, 0.9)"},key:t},a.a.createElement("td",{className:"text-center"},n),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{className:"text-center"},t),a.a.createElement("td",{style:{paddingLeft:"8px"}},a.a.createElement("input",{type:"checkbox",value:t,checked:M.includes(t),onChange:Ce})))})))),a.a.createElement(h.x,{currentPage:se,pageOptions:[5,10,15],nextPageFunc:function(){return ce(se+1)},prevPageFunc:function(){return ce(se-1)},onRowsPerPageChange:function(e){return oe(e)},rowsPerPage:ae,recordCount:_.length}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})))),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"10px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Share models:")),a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,me.map((function(e,t){var n=e.size/de*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(h.y,{meta:me,values:te,onValueChange:be,sortFieldName:"name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:l.length===o.length,onChange:xe})))),a.a.createElement("tbody",{className:"table-body"},!o.length&&a.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"}},a.a.createElement("td",{colSpan:me.length},a.a.createElement("div",null,"No matching results"))),o.map((function(e){var t=e.name,n=e.version,r=e.task;return a.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"},key:t},a.a.createElement("td",{className:"text-center"},t),a.a.createElement("td",{className:"text-center"},n),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{style:{paddingLeft:"8px"}},a.a.createElement("input",{type:"checkbox",value:t,checked:l.includes(t),onChange:je})))})))),a.a.createElement(h.x,{currentPage:se,pageOptions:[5,10,15],nextPageFunc:function(){return ce(se+1)},prevPageFunc:function(){return ce(se-1)},onRowsPerPageChange:function(e){return oe(e)},rowsPerPage:ae,recordCount:o.length}),a.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}})),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Group permissions:")),F.map((function(e,t){return a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){Oe(t,e)}}))})),a.a.createElement("div",{className:"message",id:"message3",style:{color:"red"}}))),a.a.createElement("div",{className:"k-form-buttons"},a.a.createElement("button",{type:"submit",className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",disabled:!e.allowSubmit},"Submit")))}})),a.a.createElement(d.a,{position:"top-right",autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})):localStorage.getItem("HealthProfessional_Authenticated")&&_&&P?a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{position:"top-right",autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),a.a.createElement("div",{className:"content"},a.a.createElement(f.a,{initialValues:{groupName:""},className:"addGroup",onSubmit:Ie,render:function(e){return a.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},a.a.createElement("fieldset",{className:"k-form-fieldset"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"15px",marginTop:"15px"}},a.a.createElement("b",null,"Please fill in the fields:")),a.a.createElement("div",{className:"mb-3"},a.a.createElement(p.a,{className:"addGroup_input",name:"groupName",fieldType:"text",component:ve,value:e.valueGetter("groupName"),placeholder:"Group Name",validator:[Se]})),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Add health professionals:")),a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"responsive-table"},a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,pe.map((function(e,t){var n=e.size/ge*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(h.y,{meta:pe,values:Q,onValueChange:we,sortFieldName:"first_name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:M.length===_.length,onChange:ke})))),a.a.createElement("tbody",null,!_.length&&a.a.createElement("tr",{style:{backgroundColor:"#FF8C00"},className:"no-hover"},a.a.createElement("td",{colSpan:pe.length},a.a.createElement("div",{className:"notFound"},"No matching results"))),_.map((function(e){var t=e.email,n=e.first_name,r=e.last_name;return a.a.createElement("tr",{style:{backgroundColor:"#FF8C00"},key:t},a.a.createElement("td",{className:"text-center"},n),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{className:"text-center"},t),a.a.createElement("td",{style:{paddingLeft:"8px"}},a.a.createElement("input",{type:"checkbox",value:t,checked:M.includes(t),onChange:Ce})))})))),a.a.createElement(h.x,{currentPage:se,pageOptions:[5,10,15],nextPageFunc:function(){return ce(se+1)},prevPageFunc:function(){return ce(se-1)},onRowsPerPageChange:function(e){return oe(e)},rowsPerPage:ae,recordCount:_.length}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}})))),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Share studies:")),a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,fe.map((function(e,t){var n=e.size/he*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(h.y,{meta:fe,values:J,onValueChange:ye,sortFieldName:"patient_name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"8px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:D.length===P.length,onChange:Te})))),a.a.createElement("tbody",{className:"table-body"},!P.length&&a.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"}},a.a.createElement("td",{colSpan:fe.length},a.a.createElement("div",null,"No matching results"))),P.map((function(e){var t=e.study_uid,n=e.patient_name,r=e.patient_id,o=e.study_date;return a.a.createElement("tr",{style:{backgroundColor:"#5F9EA0"},key:t},a.a.createElement("td",{className:"text-center"},n||"Empty"),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{className:"text-center"},o||"Invalid date"),a.a.createElement("td",{style:{paddingLeft:"8px"}},a.a.createElement("input",{type:"checkbox",value:t,checked:D.includes(t),onChange:De})))})))),a.a.createElement(h.x,{currentPage:se,pageOptions:[5,10,15],nextPageFunc:function(){return ce(se+1)},prevPageFunc:function(){return ce(se-1)},onRowsPerPageChange:function(e){return oe(e)},rowsPerPage:ae,recordCount:P.length}),a.a.createElement("div",{className:"message",id:"message2",style:{color:"red"}})),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Group permissions:")),F.map((function(e,t){return a.a.createElement("div",{className:"form-group",key:t},a.a.createElement("label",null,e),a.a.createElement("input",{className:"permissions",name:"permissions",id:"permissions",type:"checkbox",onChange:function(t){Oe(t,e)}}))})),a.a.createElement("div",{className:"message",id:"message3",style:{color:"red"}}))),a.a.createElement("div",{className:"k-form-buttons"},a.a.createElement("button",{type:"submit",className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",disabled:!e.allowSubmit},"Submit")))}})),G?a.a.createElement(s.a,{to:"/view_groups"}):a.a.createElement(r.Fragment,null)):null}function C(e,t,n){return k.apply(this,arguments)}function k(){return(k=O(regeneratorRuntime.mark((function e(t,n,r){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},o="/api/group_details?group=".concat(n,"&user=").concat(t.email),Object.keys(r).forEach((function(e){if(null!==r[e]&&""!==r[e]){var t=r[e];o+="&".concat(e,"=").concat(t)}})),e.next=5,u.a.get(o,a);case 5:if("You don't belong to this group!"===(i=e.sent).data){e.next=8;break}return e.abrupt("return",i.data.Users);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return x.apply(this,arguments)}function x(){return(x=O(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/image/?user=".concat(t.email),Object.keys(n).forEach((function(e){if(null!==n[e]&&""!==n[e]){var t=n[e];r+="&".concat(e,"=").concat(t)}})),e.next=4,u.a.get(r,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 4:return a=e.sent,o=[],a.data.forEach((function(e){o.push(e)})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.defaults.xsrfHeaderName="X-CSRFTOKEN",u.a.defaults.xsrfCookieName="csrftoken",u.a.defaults.withCredentials=!0,P.propTypes={user:i.a.object};t.default=Object(c.b)((function(e){return{user:e.auth.user}}),null)(P)},394:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(19),c=n(9),l=n.n(c),u=n(331),f=(n(139),n(11)),p=n(67),m=n(32);n(422);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,s,"next",e)}function s(e){g(o,r,a,i,s,"throw",e)}i(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){var t=e.user,n=[];e.location.state.forEach((function(e){n.includes(e.email)||n.push(e.email)}));var o=y(Object(r.useState)(n),1)[0],i=y(Object(r.useState)(!1),2),s=i[0],c=i[1],m=y(Object(r.useState)([]),2),g=m[0],b=m[1],E=y(Object(r.useState)([]),2),S=E[0],O=E[1],I=y(Object(r.useState)({user:""}),2),P=I[0],C=I[1],k=y(Object(r.useState)(5),2),j=k[0],x=k[1],D=y(Object(r.useState)(0),2),T=D[0],N=D[1];Object(r.useEffect)((function(){var e=function(){var e=v(regeneratorRuntime.mark((function e(r){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t,r,P);case 3:a=e.sent,o=[],i=t.email,a.forEach((function(e){var t={email:e.email,first_name:e.first_name,last_name:e.last_name};e.email===i||o.includes(t)||n.includes(e.email)||o.push(t)})),b(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();t&&localStorage.getItem("HealthProfessional_Authenticated")?e("health_professionals"):t&&localStorage.getItem("Investigator_Authenticated")&&e("investigators")}),[P,o,n,T,j,t]);var _=[{displayText:"First Name",fieldName:"first_name",inputType:"text",size:80},{displayText:"Last Name",fieldName:"last_name",inputType:"text",size:80},{displayText:"Email",fieldName:"email",inputType:"text",size:100}],A=_.map((function(e){return e.size})).reduce((function(e,t){return e+t}));function R(e,t){C((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,h({},e,t))}))}function M(){return L.apply(this,arguments)}function L(){return(L=v(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.match.params.name,0!=S.length){n.next=6;break}document.getElementById("message1").textContent="At least one user must be selected!",n.next=40;break;case 6:if(!localStorage.getItem("HealthProfessional_Authenticated")){n.next=24;break}return n.prev=7,a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(o=new FormData).append("groupName",r),o.append("users",JSON.stringify(S)),o.append("appUser",JSON.stringify(t.email)),n.next=15,l.a.post("/api/add_elements",o,a);case 15:!0===n.sent.data.Status?(alert(JSON.stringify(S)+" were added to group ".concat(r,"!")),c(!0)):alert("You don't belong to this group!"),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(7),alert(n.t0);case 22:n.next=40;break;case 24:if(!localStorage.getItem("Investigator_Authenticated")){n.next=40;break}return n.prev=25,i={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},(s=new FormData).append("groupName",r),s.append("users",JSON.stringify(S)),s.append("appUser",JSON.stringify(t.email)),n.next=33,l.a.post("/api/add_elements",s,i);case 33:!0===n.sent.data.Status?(alert(JSON.stringify(S)+" were added to group ".concat(r,"!")),c(!0)):alert("You don't belong to this group!"),n.next=40;break;case 37:n.prev=37,n.t1=n.catch(25),alert(n.t1);case 40:case"end":return n.stop()}}),n,null,[[7,19],[25,37]])})))).apply(this,arguments)}var U=function(e){var t=e.target.value;S.includes(t)?O(S.filter((function(e){return e!==t}))):S.push(t)},F=function(){S.length<g.length?O(g.map((function(e){return e.email}))):O([])};return localStorage.getItem("Investigator_Authenticated")?a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"content"},a.a.createElement(u.a,{className:"addGroup",onSubmit:M,render:function(e){return a.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},a.a.createElement("fieldset",{className:"k-form-fieldset"},a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Add investigators:")),a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"responsive-table"},a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,_.map((function(e,t){var n=e.size/A*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(f.y,{meta:_,values:P,onValueChange:R,sortFieldName:"first_name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"5px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:S.length===g.length,onChange:F})))),a.a.createElement("tbody",null,!g.length&&a.a.createElement("tr",{style:{backgroundColor:"rgba(54, 156, 199, 0.9)"},className:"no-hover"},a.a.createElement("td",{colSpan:_.length},a.a.createElement("div",{className:"notFound"},"No matching results"))),g.map((function(e){var t=e.email,n=e.first_name,r=e.last_name;return a.a.createElement("tr",{style:{backgroundColor:"rgba(54, 156, 199, 0.9)"},key:t},a.a.createElement("td",{className:"text-center"},n),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{className:"text-center"},t),a.a.createElement("td",null,a.a.createElement("input",{type:"checkbox",value:t,checked:S.includes(t),onChange:U})))})))),a.a.createElement(f.x,{currentPage:T,pageOptions:[5,10,15],nextPageFunc:function(){return N(T+1)},prevPageFunc:function(){return N(T-1)},onRowsPerPageChange:function(e){return x(e)},rowsPerPage:j,recordCount:g.length}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}}))))),a.a.createElement("div",{className:"k-form-buttons"},a.a.createElement("button",{className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",onClick:function(){return M()}},"Add")))}}),s?a.a.createElement(p.a,{to:"/group_details/".concat(e.match.params.name,"/").concat(t.email)}):a.a.createElement(r.Fragment,null))):localStorage.getItem("HealthProfessional_Authenticated")?a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"content"},a.a.createElement(u.a,{className:"addGroup",onSubmit:M,render:function(e){return a.a.createElement("form",{className:"addGroup",style:{maxWidth:650},onSubmit:e.onSubmit},a.a.createElement("fieldset",{className:"k-form-fieldset"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"15px",marginTop:"15px"}},a.a.createElement("b",null,"Please fill in the fields:")),a.a.createElement("div",{className:"mb-3"},a.a.createElement("legend",{className:"k-form-legend",style:{marginBottom:"5px",marginTop:"5px",fontSize:"14px"}},a.a.createElement("b",null,"Add health professionals:")),a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"responsive-table"},a.a.createElement("table",{className:"table"},a.a.createElement("colgroup",null,_.map((function(e,t){var n=e.size/A*100;return a.a.createElement("col",{key:t,style:{width:"".concat(n,"%"),textAlign:"center"}})}))),a.a.createElement("thead",{className:"table-head"},a.a.createElement("tr",{className:"filters"},a.a.createElement(f.y,{meta:_,values:P,onValueChange:R,sortFieldName:"first_name",sortDirection:"asc"}),a.a.createElement("th",{style:{color:"black",paddingBottom:"15px",paddingLeft:"5px"},className:"text-left"},a.a.createElement("input",{type:"checkbox",checked:S.length===g.length,onChange:F})))),a.a.createElement("tbody",null,!g.length&&a.a.createElement("tr",{style:{backgroundColor:"#FF8C00"},className:"no-hover"},a.a.createElement("td",{colSpan:_.length},a.a.createElement("div",{className:"notFound"},"No matching results"))),g.map((function(e){var t=e.email,n=e.first_name,r=e.last_name;return a.a.createElement("tr",{style:{backgroundColor:"rgba(54, 156, 199, 0.9)"},key:t},a.a.createElement("td",{className:"text-center"},n),a.a.createElement("td",{className:"text-center"},r),a.a.createElement("td",{className:"text-center"},t),a.a.createElement("td",null,a.a.createElement("input",{type:"checkbox",value:t,checked:S.includes(t),onChange:U})))})))),a.a.createElement(f.x,{currentPage:T,pageOptions:[5,10,15],nextPageFunc:function(){return N(T+1)},prevPageFunc:function(){return N(T-1)},onRowsPerPageChange:function(e){return x(e)},rowsPerPage:j,recordCount:g.length}),a.a.createElement("div",{className:"message",id:"message1",style:{color:"red"}}))))),a.a.createElement("div",{className:"k-form-buttons"},a.a.createElement("button",{className:"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base",onClick:function(){return M()}},"Add")))}}),s?a.a.createElement(p.a,{to:"/group_details/".concat(e.match.params.name,"/").concat(t.email)}):a.a.createElement(r.Fragment,null))):null}function w(e,t,n){return E.apply(this,arguments)}function E(){return(E=v(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},o="/api/group_details?group=".concat(n,"&user=").concat(t.email),null!==r.user&&""!==r.user&&(i=r.user,o+="&filter=".concat(i)),e.next=5,l.a.get(o,a);case 5:if("You don't belong to this group!"===(s=e.sent).data){e.next=8;break}return e.abrupt("return",s.data.Users);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.xsrfCookieName="csrftoken",l.a.defaults.withCredentials=!0,b.propTypes={user:i.a.object};t.default=Object(s.b)((function(e){return{user:e.auth.user}}),{load_user:m.g})(b)},395:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var r=n(0),a=n.n(r),o=n(32);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=c(t).call(this,e))||"object"!==i(a)&&"function"!=typeof a?l(r):a).state={pin:""},n.pinChange=n.pinChange.bind(l(n)),n.verify_pin=n.verify_pin.bind(l(n)),n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"pinChange",value:function(e){this.setState({pin:e.target.value})}},{key:"verify_pin",value:function(){var e=this,t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic am9hbzpmMWRyaXZlcjE5OTk="},body:JSON.stringify({email:this.props.email,pin:this.props.pin})};fetch("/api/2FA_login",t).then((function(t){!0===t.data.status&&Object(o.n)(e.props.email,e.props.first_name,e.props.last_name,e.props.password,e.props.secret_key)}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",null,"Put the pin which is on the Google Authenticator"),a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{className:"form-control",type:"text",placeholder:"Pin*",name:"pin",value:this.state.pin,onChange:this.pinChange,required:!0})),a.a.createElement("button",{className:"btn btn-primary",onClick:this.verify_pin},"Register"))}}])&&s(n.prototype,r),f&&s(n,f),t}(r.Component)},403:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n(9),s=n.n(i),c=n(1),l=n.n(c),u=n(22),f=n(67),p=n(11),m=n(753),d=n(207),h=n(6),g=n.n(h),v=n(752),y=n(114);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){E(o,r,a,i,s,"next",e)}function s(e){E(o,r,a,i,s,"throw",e)}i(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e){var t=e.history,n=e.server,o=e.studyListFunctionsEnabled,i=e.user,s=O(Object(r.useState)({fieldName:"PatientName",direction:"desc"}),2),c=s[0],l=s[1],u=O(Object(r.useState)({studyDateTo:null,studyDateFrom:null,PatientName:"",PatientID:"",AccessionNumber:"",StudyDate:"",modalities:"",StudyDescription:"",patientNameOrId:"",accessionOrModalityOrDescription:"",allFields:""}),2),f=u[0],h=u[1],g=O(Object(r.useState)([]),2),E=g[0],I=g[1],C=O(Object(r.useState)({isSearchingForStudies:!1,error:null}),2),k=C[0],j=C[1],x=O(Object(r.useState)(null),2),D=x[0],T=x[1],N=O(Object(r.useState)(25),2),_=N[0],A=N[1],R=O(Object(r.useState)(0),2),M=R[0],L=R[1],U=Object(r.useContext)(y.c),F=Object(p.H)(["(min-width: 1750px)","(min-width: 1000px) and (max-width: 1749px)","(max-width: 999px)"],["large","medium","small"],"small"),V=Object(p.F)(c,200),B=Object(p.F)(f,250),z=U.appConfig,H=void 0===z?{}:z;if(Object(r.useEffect)((function(){n&&function(){var t=S(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j({error:null,isSearchingForStudies:!0}),t.next=4,P(i,e.group,n,B,V,_,M,F);case 4:r=t.sent,I(r),j({error:null,isSearchingForStudies:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),j({error:!0,isFetching:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[B,V,_,M,F,n,i,e.group]),k.error)return a.a.createElement("div",null,"Error: ",JSON.stringify(k.error));if(E===[]&&!D)return a.a.createElement("div",null,"Loading...");return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{isOpen:"DicomFilesUploader"===D,onClose:function(){return T(null)}}),a.a.createElement(m.a,{useLargeLogo:!0}),a.a.createElement("div",{className:"study-list-header"},a.a.createElement("div",{className:"header"},e.group?a.a.createElement("h1",{style:{fontWeight:300,fontSize:"22px"}},a.a.createElement("b",null,e.group),"'s StudyList"):a.a.createElement("h1",{style:{fontWeight:300,fontSize:"22px"}},a.a.createElement("b",null,i.email),"'s StudyList")),a.a.createElement("div",{className:"actions"},!e.group&&o&&a.a.createElement(p.l,{onImport:function(){return T("DicomFilesUploader")}}),a.a.createElement("span",{className:"study-count"},E.length))),a.a.createElement("div",{className:"table-head-background"}),a.a.createElement("div",{className:"study-list-container"},a.a.createElement(p.t,{isLoading:k.isSearchingForStudies,hasError:!0===k.error,studies:E,onSelectItem:function(e){var r=d.b(H,n,{studyInstanceUIDs:e});t.push({pathname:r})},sort:c,onSort:function(e){var t=e,n="asc";e===c.fieldName&&("asc"===c.direction?n="desc":(t=null,n=null)),l({fieldName:t,direction:n})},filterValues:f,onFilterChange:function(e,t){h((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,w({},e,t))}))},studyListDateFilterNumDays:H.studyListDateFilterNumDays,displaySize:F}),a.a.createElement(p.x,{currentPage:M,nextPageFunc:function(){return L(M+1)},prevPageFunc:function(){return L(M-1)},onRowsPerPageChange:function(e){return A(e)},rowsPerPage:_,recordCount:E.length})))}function P(e,t,n,r,a,o,i,s){return C.apply(this,arguments)}function C(){return(C=S(regeneratorRuntime.mark((function e(t,n,r,a,o,i,s,c){var l,u,f,p,m,d,h,g,v,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.allFields,u=a.patientNameOrId,f=a.accessionOrModalityOrDescription,p=o.fieldName||"PatientName",m=o.direction||"desc",d={PatientID:a.PatientID,PatientName:a.PatientName,AccessionNumber:a.AccessionNumber,StudyDescription:a.StudyDescription,ModalitiesInStudy:a.modalities,studyDateFrom:a.studyDateFrom,studyDateTo:a.studyDateTo,limit:i,offset:s*i,fuzzymatching:!0===r.supportsFuzzyMatching},e.next=6,j(t,n,r,d,c,{allFields:l,patientNameOrId:u,accessionOrModalityOrDescription:f});case 6:return h=e.sent,g=h.map((function(e){var t="string"==typeof e.PatientName?e.PatientName:void 0;return{AccessionNumber:e.AccessionNumber,modalities:e.modalities,PatientID:e.PatientID,PatientName:t,StudyDate:e.StudyDate,StudyDescription:e.StudyDescription,StudyInstanceUID:e.StudyInstanceUID}})),v=k(g,{allFields:"PatientName",patientNameOrId:"PatientName",accessionOrModalityOrDescription:"modalities"}[p]||p,m),y=v.length<i?v.length:i,b=v.slice(0,y),e.abrupt("return",b);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){var r=e.map((function(e){return g()(e.StudyDate,"MMM DD, YYYY",!0).isValid()||(e.StudyDate=g()(e.StudyDate,"YYYYMMDD").format("MMM DD, YYYY")),e}));return r.sort((function(e,r){var a=e[t],o=r[t];return"StudyDate"===t&&(a=g()(a).toISOString(),o=g()(o).toISOString()),"desc"===n?a<o?-1:a>o?1:0:a>o?-1:a<o?1:0})),r}function j(e,t,n,r,a,o){return x.apply(this,arguments)}function x(){return(x=S(regeneratorRuntime.mark((function e(t,n,r,a,o,i){var c,l,f,p,m,d,h,g,v,y,b,w,E,S,O,I,P,C,k,j,x,T,N,_,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.allFields,l=i.patientNameOrId,f=i.accessionOrModalityOrDescription,p=[a],"small"===o?(m=D(a,["PatientID","PatientName","AccessionNumber","StudyDescription","ModalitiesInStudy"],c)).length&&(p=m):"medium"===o&&(d=D(a,["PatientID","PatientName"],l),h=D(a,["AccessionNumber","StudyDescription","ModalitiesInStudy"],f),(d.length||h.length)&&(p=d.concat(h))),g=[],p.forEach((function(e){var t=u.a.studies.searchStudies(r,e);g.push(t)})),e.next=7,Promise.all(g);case 7:if(v=e.sent,y=[],b=[],""===n){e.next=18;break}return w={headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json",Accept:"application/json"}},e.next=14,s.a.get("/api/view_studies?groupName=".concat(n,"&user=").concat(t.email),w);case 14:"You don't belong to this group!"===(E=e.sent).data.Studies?alert("You don't belong to this group!"):(S=Object.keys(E.data.Studies),v.forEach((function(e){e&&e.forEach((function(e){!y.some((function(t){return t.StudyInstanceUID===e.StudyInstanceUID}))&&S.includes(e.StudyInstanceUID)&&"SR"!==e.modalities&&(e.user_permissions=E.data.Studies[e.StudyInstanceUID].user_permissions,e.user=E.data.Studies[e.StudyInstanceUID].user,y.push(e),b.push(e.StudyInstanceUID))}))}))),e.next=25;break;case 18:return e.next=20,s.a.get("/api/image/?user=".concat(t.email),{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(e){return e})).catch((function(e){return e.response}));case 20:O=e.sent,I=[],P={},O.data.forEach((function(e){P[e.study_uid]={user:e.user,user_permissions:e.user_permissions},I.push(e.study_uid)})),v.forEach((function(e){e&&e.forEach((function(e){!y.some((function(t){return t.StudyInstanceUID===e.StudyInstanceUID}))&&I.includes(e.StudyInstanceUID)&&"SR"!==e.modalities&&(e.user_permissions=P[e.StudyInstanceUID].user_permissions,e.user=P[e.StudyInstanceUID].user,y.push(e),b.push(e.StudyInstanceUID))}))}));case 25:return C=localStorage.getItem("studyAccessControl"),(k=localStorage.getItem("studyEditControl"))?(x=JSON.parse(k),T=Object.keys(x),y.forEach((function(e){var n=e.StudyInstanceUID;T.includes(n)||(localStorage.getItem("HealthProfessional_Authenticated")&&!e.user_permissions.includes("Edit Studies")&&e.user!==t.email?x[n]=-1:x[n]=0)})),T.forEach((function(e){b.includes(e)||delete x[e]})),localStorage.setItem("studyEditControl",JSON.stringify(x))):(j={},y.forEach((function(e){var n=e.StudyInstanceUID;localStorage.getItem("HealthProfessional_Authenticated")&&!e.user_permissions.includes("Edit Studies")&&e.user!==t.email?j[n]=-1:j[n]=0})),localStorage.setItem("studyEditControl",JSON.stringify(j))),C?(_=JSON.parse(C),A=Object.keys(_),y.forEach((function(e){var n=e.StudyInstanceUID;A.includes(n)||(localStorage.getItem("HealthProfessional_Authenticated")&&!e.user_permissions.includes("View Studies Metadata")&&e.user!==t.email?_[n]=-1:_[n]=0)})),A.forEach((function(e){b.includes(e)||delete _[e]})),localStorage.setItem("studyAccessControl",JSON.stringify(_))):(N={},y.forEach((function(e){var n=e.StudyInstanceUID;localStorage.getItem("HealthProfessional_Authenticated")&&!e.user_permissions.includes("View Studies Metadata")&&e.user!==t.email?N[n]=-1:N[n]=0})),localStorage.setItem("studyAccessControl",JSON.stringify(N))),e.abrupt("return",y);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n){var r=[];return""!==n&&n?(t.forEach((function(t){var a=Object.assign({PatientID:"",PatientName:"",AccessionNumber:"",StudyDescription:"",ModalitiesInStudy:""},e);a[t]=n,r.push(a)})),r):r}I.propTypes={filters:l.a.object,PatientID:l.a.string,server:l.a.object,user:l.a.object,history:l.a.object,studyListFunctionsEnabled:l.a.bool,group:l.a.string},I.defaultProps={studyListFunctionsEnabled:!0,group:""};var T=Object(f.h)(I),N=function(e){return!0===e.active},_=Object(o.b)((function(e){return{server:e.servers.servers.find(N),user:e.auth.user}}),null)(T);s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.withCredentials=!0;t.default=Object(o.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.match;return a.a.createElement(_,{group:t.params.name})}))},404:function(e,t,n){"use strict";var r=n(12);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getAppState,a=t.getActiveContexts;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contexts={},n&&a||r.a.warn("CommandsManager was instantiated without getAppState() or getActiveContexts()"),this._getAppState=n,this._getActiveContexts=a}var t,n,i;return t=e,(n=[{key:"createContext",value:function(e){if(e)return this.contexts[e]?this.clearContext(e):void(this.contexts[e]={})}},{key:"getContext",value:function(e){var t=this.contexts[e];if(t)return t}},{key:"clearContext",value:function(e){e&&(this.contexts[e]={})}},{key:"registerCommand",value:function(e,t,n){if("object"===a(n)){var r=this.getContext(e);r&&(r[t]=n)}}},{key:"getCommand",value:function(e,t){var n,r=this,a=[];if(t){var o=this.getContext(t);o&&a.push(o)}else this._getActiveContexts().forEach((function(e){var t=r.getContext(e);t&&a.push(t)}));if(0!==a.length)return a.forEach((function(t){t[e]&&(n=t[e])})),n}},{key:"runCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=this.getCommand(e,n);if(a){var o=a.commandFn,i=a.storeContexts,s=void 0===i?[]:i,c=a.options,l={},u=this._getAppState();return s.forEach((function(e){l[e]=u[e]})),l=Object.assign({},l,c,t),"function"!=typeof o?void r.a.warn('No commandFn was defined for command "'.concat(e,'"')):o(l)}r.a.warn('Command "'.concat(e,'" not found in current context'))}}])&&o(t.prototype,n),i&&o(t,i),e}();t.a=i},405:function(e,t,n){"use strict";var r=n(119),a=n(12);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hotkeyDefinitions={},this.hotkeyDefaults=[],this.isEnabled=!0,t||a.a.warn("HotkeysManager instantiated without a commandsManager. Hotkeys will be unable to find and run commands."),this._servicesManager=n,this._commandsManager=t}var t,n,o;return t=e,(n=[{key:"record",value:function(e){return r.a.record(e)}},{key:"disable",value:function(){this.isEnabled=!1,r.a.pause()}},{key:"enable",value:function(){this.isEnabled=!0,r.a.unpause()}},{key:"setHotkeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var n=this._getValidDefinitions(t);n.forEach((function(t){return e.registerHotkeys(t)}))}catch(e){var r=this._servicesManager.services,a=r.UINotificationService,o=r.LoggerService,i="Erro while setting hotkeys";o.error({error:e,message:i}),a.show({title:"Hotkeys Manager",message:i,type:"error"})}}},{key:"setDefaultHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._getValidDefinitions(e);this.hotkeyDefaults=t}},{key:"_getValidDefinitions",value:function(e){return Array.isArray(e)?c(e):this._parseToArrayLike(e)}},{key:"_parseToArrayLike",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i({},t);return Object.entries(n).map((function(t){return e._parseToHotKeyObj(t[0],t[1])}))}},{key:"_parseToHotKeyObj",value:function(e,t){return i({commandName:e},t)}},{key:"registerHotkeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.commandName,n=e.keys,r=e.label;if(arguments.length>1&&arguments[1],t){var o=this.hotkeyDefinitions[t];if(o){var i=o.keys;this._unbindHotkeys(t,i),a.a.info("Unbinding ".concat(t," from ").concat(i))}this.hotkeyDefinitions[t]={keys:n,label:r},this._bindHotkeys(t,n),a.a.info("Binding ".concat(t," to ").concat(n))}else a.a.warn('No command was defined for hotkey "'.concat(n,'"'))}},{key:"restoreDefaultBindings",value:function(){this.setHotkeys(this.hotkeyDefaults)}},{key:"destroy",value:function(){this.hotkeyDefaults=[],this.hotkeyDefinitions={},r.a.reset()}},{key:"_bindHotkeys",value:function(e,t){var n=this;if(""!==t&&void 0!==t){var a=t instanceof Array?t.join("+"):t;r.a.bind(a,(function(t){t.preventDefault(),t.stopPropagation(),n._commandsManager.runCommand(e,{evt:t})}))}}},{key:"_unbindHotkeys",value:function(e,t){if(""!==t&&void 0!==t)if(t instanceof Array){var n=t.join("+");this._unbindHotkeys(e,n)}else r.a.unbind(t)}}])&&l(t.prototype,n),o&&l(t,o),e}();t.a=u},406:function(e,t,n){"use strict";t.a={Abdomen:"ABDOMEN","Abdomen and Pelvis":"ABDOMENPELVIS","Adrenal gland":"ADRENAL","Ankle joint":"ANKLE",Aorta:"AORTA",Axilla:"AXILLA",Back:"BACK",Bladder:"BLADDER",Brain:"BRAIN",Breast:"BREAST",Bronchus:"BRONCHUS",Buttock:"BUTTOCK",Calcaneus:"CALCANEUS","Calf of leg":"CALF","Carotid Artery":"CAROTID",Cerebellum:"CEREBELLUM","Cervical spine":"CSPINE","Cervico-thoracic spine":"CTSPINE",Cervix:"CERVIX",Cheek:"CHEEK",Chest:"CHEST","Chest, Abdomen and Pelvis":"CHESTABDPELVIS","Chest and Abdomen":"CHESTABDOMEN","Circle of Willis":"CIRCLEOFWILLIS",Clavicle:"CLAVICLE",Coccyx:"COCCYX",Colon:"COLON",Cornea:"CORNEA","Coronary artery":"CORONARYARTERY",Duodenum:"DUODENUM",Ear:"EAR","Elbow joint":"ELBOW","Entire body":"WHOLEBODY",Esophagus:"ESOPHAGUS",Extremity:"EXTREMITY",Eye:"EYE",Eyelid:"EYELID",Face:"FACE",Femur:"FEMUR",Finger:"FINGER",Foot:"FOOT",Gallbladder:"GALLBLADDER",Hand:"HAND",Head:"HEAD","Head and Neck":"HEADNECK",Heart:"HEART","Hip joint":"HIP",Humerus:"HUMERUS",Ileum:"ILEUM",Ilium:"ILIUM","Internal Auditory Canal":"IAC","Jaw region":"JAW",Jejunum:"JEJUNUM",Kidney:"KIDNEY",Knee:"KNEE",Larynx:"LARYNX",Liver:"LIVER","Lower leg":"LEG","Lumbar spine":"LSPINE","Lumbo-sacral spine":"LSSPINE",Lung:"LUNG",Mandible:"JAW",Maxilla:"MAXILLA",Mediastinum:"MEDIASTINUM",Mouth:"MOUTH",Neck:"NECK","Neck, Chest, Abdomen and Pelvis":"NECKCHESTABDPELV","Neck, Chest and Abdomen":"NECKCHESTABDOMEN","Neck and Chest":"NECKCHEST",Nose:"NOSE","Orbital structure":"ORBIT",Ovary:"OVARY",Pancreas:"PANCREAS","Parotid gland":"PAROTID",Patella:"PATELLA",Pelvis:"PELVIS",Penis:"PENIS",Pharynx:"PHARYNX",Prostate:"PROSTATE",Radius:"RADIUS","Radius and ulna":"RADIUSULNA",Rectum:"RECTUM",Rib:"RIB",Sacrum:"SSPINE",Scalp:"SCALP",Scapula:"SCAPULA",Sclera:"SCLERA",Scrotum:"SCROTUM",Shoulder:"SHOULDER",Skull:"SKULL",Spine:"SPINE",Spleen:"SPLEEN",Sternum:"STERNUM",Stomach:"STOMACH","Submandibular gland":"SUBMANDIBULAR","Temporomandibular joint":"TMJ",Testis:"TESTIS",Thigh:"THIGH","Thoracic spine":"TSPINE","Thoraco-lumbar spine":"TLSPINE",Thumb:"THUMB",Thymus:"THYMUS",Thyroid:"THYROID",Tibia:"TIBIA","Tibia and fibula":"TIBIAFIBULA",Toe:"TOE",Tongue:"TONGUE",Trachea:"TRACHEA",Ulna:"ULNA","Upper arm":"ARM",Ureter:"URETER",Urethra:"URETHRA",Uterus:"UTERUS",Vagina:"VAGINA",Vulva:"VULVA","Wrist joint":"WRIST",Zygoma:"ZYGOMA"}},407:function(e,t,n){"use strict";var r=n(12),a=n(258),o=n(202),i=n(47),s=n(62),c=n(21),l=n(203),u=n(138),f={ImagingMeasurementReport:"126000",ImageLibrary:"111028",ImagingMeasurements:"126010",MeasurementGroup:"125007",ImageLibraryGroup:"126200",TrackingUniqueIdentifier:"112040",TrackingIdentifier:"112039",Finding:"121071",FindingSite:"G-C0E3",CornerstoneFreeText:"CORNERSTONEFREETEXT",Score:"246262008"},p={INFERRED_FROM:"INFERRED FROM",SELECTED_FROM:"SELECTED FROM"},m={SRT:"SRT",cornerstoneTools4:"CST4"},d=function(e){return Array.isArray(e)?e:[e]};function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g=function(e){var t={};return e.forEach((function(e){var n=d(e.ContentSequence),r=n.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.TrackingUniqueIdentifier}));r||console.warn("No Tracking Unique Identifier, skipping ambiguous measurement.");var a=r.UID;void 0===t[a]?t[a]=h(n):n.forEach((function(e){e.ConceptNameCodeSequence.CodeValue!==f.TrackingUniqueIdentifier&&t[a].push(e)}))})),t},v=function(e,t){var n=e.CodeMeaning,r=t.NumericValue,a=t.MeasurementUnitsCodeSequence.CodeValue,o=r?Number(r).toFixed(1):"";return{label:n,value:"".concat(o," ").concat(a)}},y=function(e,t){var n=e.ValueType,r=(e.RelationshipType,{ValueType:n,GraphicType:e.GraphicType,GraphicData:e.GraphicData});if("SCOORD"===n){var a=e.ContentSequence.ReferencedSOPSequence;r.ReferencedSOPSequence=a}else if("SCOORD3D"===n)if(e.ReferencedFrameOfReferenceUID)r.ReferencedFrameOfReferenceSequence=e.ReferencedFrameOfReferenceUID;else if(e.ContentSequence){var o=e.ContentSequence.ReferencedFrameOfReferenceSequence;r.ReferencedFrameOfReferenceSequence=o}return r},b=function(e,t){var n=e.find((function(e){return"SCOORD"===e.ValueType||"SCOORD3D"===e.ValueType}));if(n){var r=e.find((function(e){return"UIDREF"===e.ValueType})),a=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.TrackingIdentifier})),o=e.filter((function(e){return"NUM"===e.ValueType})),i={loaded:!1,labels:[],coords:[y(n,t)],TrackingUniqueIdentifier:r.UID,TrackingIdentifier:a.TextValue};return o.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.ContentSequence,r=e.MeasuredValueSequence;e.ConceptNameCodeSequence.CodeValue===f.Score&&n.forEach((function(e){[p.SELECTED_FROM,p.INFERRED_FROM].includes(e.RelationshipType)&&e.ReferencedSOPSequence&&i.coords.forEach((function(t){t.ReferencedSOPSequence=e.ReferencedSOPSequence}))})),r&&i.labels.push(v(t,r))})),i}console.warn("graphic ValueType ".concat(n.ValueType," not currently supported, skipping annotation."))},w=function(e){var t=e.filter((function(e){return"NUM"===e.ValueType})),n=e.find((function(e){return"UIDREF"===e.ValueType})),r=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.TrackingIdentifier})),a=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.Finding})),o=e.filter((function(e){return e.ConceptNameCodeSequence.CodingSchemeDesignator===m.SRT&&e.ConceptNameCodeSequence.CodeValue===f.FindingSite})),i={loaded:!1,labels:[],coords:[],TrackingUniqueIdentifier:n.UID,TrackingIdentifier:r.TextValue};if(a&&a.ConceptCodeSequence.CodingSchemeDesignator===m.cornerstoneTools4&&a.ConceptCodeSequence.CodeValue===f.CornerstoneFreeText&&i.labels.push({label:"CORNERSTONEFREETEXT",value:a.ConceptCodeSequence.CodeMeaning}),o.length){var s=o.find((function(e){return e.ConceptCodeSequence.CodingSchemeDesignator===m.cornerstoneTools4&&e.ConceptCodeSequence.CodeValue===f.CornerstoneFreeText}));s&&i.labels.push({label:"CORNERSTONEFREETEXT",value:s.ConceptCodeSequence.CodeMeaning})}return t.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.ContentSequence,r=e.MeasuredValueSequence;if(n){var a=n.ValueType;if("SCOORD"!==!a||"SCOORD3D"!==!a){var o=y(n);o&&i.coords.push(o),r&&i.labels.push(v(t,r))}else console.warn("Graphic ".concat(a," not currently supported, skipping annotation."))}else console.warn("Graphic ".concat(n," missing, skipping annotation."))})),i},E=function(e,t){return e.some((function(e){return"SCOORD"===e.ValueType||"SCOORD3D"===e.ValueType}))?b(e,t):w(e)},S=function(e,t){var n=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.ImagingMeasurements})),r=d(n.ContentSequence).filter((function(e){return e.ConceptNameCodeSequence.CodeValue===f.MeasurementGroup})),a=g(r),o=[];return Object.keys(a).forEach((function(e){var n=a[e],r=E(n,t);r&&o.push(r)})),o},O=function(e){var t=[],n=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.ImageLibrary}));if(!n.ContentSequence)return t;var r=d(n.ContentSequence).find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.ImageLibraryGroup}));return d(r.ContentSequence).forEach((function(e){var n=e.ReferencedSOPSequence;if(n){var r=n.ReferencedSOPClassUID,a=n.ReferencedSOPInstanceUID;t.push({ReferencedSOPClassUID:r,ReferencedSOPInstanceUID:a})}})),t};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=i.a.Cornerstone;var C=n(4),k=n.n(C),j=n(22),x={DICOM_SR_DISPLAY_TOOL:"DICOMSRDisplayTool"},D=n(104),T=n.n(D),N="POINT",_="MULTIPOINT",A="POLYLINE",R="CIRCLE",M="ELLIPSE",L="POLYGON",U=n(1427),F=function(e,t,n,r){var a,o=r.ImageOrientationPatient,i=r.ImagePositionPatient,s=r.PixelSpacing,c=r.SliceThickness?r.SliceThickness:1,l=[[o[0]*s[0],o[3]*s[1],c,i[0]],[o[1]*s[0],o[4]*s[1],c,i[1]],[o[2]*s[0],o[5]*s[1],c,i[2]],[0,0,0,1]],u=Object(U.a)(l),f=function(e,t){return{x:t[0][0]*e.x+t[0][1]*e.y+t[0][2]*e.z+t[0][3],y:t[1][0]*e.x+t[1][1]*e.y+t[1][2]*e.z+t[1][3],z:t[2][0]*e.x+t[2][1]*e.y+t[2][2]*e.z+t[2][3]}};switch(e){case N:if(a=[],"SCOORD3D"===n)for(var p=0;p<t.length;p+=3){var m={x:t[p],y:t[p+1],z:t[p+2]};a.push(f(m,u))}else for(var d=0;d<t.length;d+=2)a.push({x:t[d],y:t[d+1]});break;case _:if(a=[],"SCOORD3D"===n)for(var h=0;h<t.length;h+=3){var g={x:t[h],y:t[h+1],z:t[h+2]};a.push(f(g,u))}else for(var v=0;v<t.length;v+=2)a.push({x:t[v],y:t[v+1]});break;case A:if(a=[],"SCOORD3D"===n)for(var y=0;y<t.length;y+=3){var b={x:t[y],y:t[y+1],z:t[y+2]};a.push(f(b,u))}else for(var w=0;w<t.length;w+=2)a.push({x:t[w],y:t[w+1]});break;case L:a=[];for(var E=0;E<t.length;E+=3){var S={x:t[E],y:t[E+1],z:t[E+2]};a.push(f(S,u))}break;case R:var O={x:t[0],y:t[1]},I={x:t[2],y:t[3]};a={center:O,radius:T.a.point.distance(O,I)};break;case M:console.warn("ROTATED ELLIPSE NOT YET SUPPORTED!");var P=[{x:t[0],y:t[1]},{x:t[2],y:t[3]}],C=[{x:t[4],y:t[5]},{x:t[6],y:t[7]}],k=T.a.point.distance(C[0],C[1]),j={x:(C[1].x-C[0].x)/k,y:(C[1].y-C[0].y)/k},x=k/2;a={corner1:{x:P[0].x+j.x*x,y:P[0].y+j.y*x},corner2:{x:P[1].x-j.x*x,y:P[1].y-j.y*x}}}return a},V=k.a.globalImageIdSpecificToolStateManager;var B=function(e){var t=e.measurementData,n=e.toolName,r=e.imageId,a=j.a.measurements.MeasurementApi.Instance,o=n;if(a.tools[o]&&t&&!t.cancelled){var i=j.a.measurements.getImageAttributes(null,r),s=Object.assign({},t,i,{lesionNamingNumber:t.lesionNamingNumber,userId:j.a.user.getUserId(),toolType:o}),c=a.addMeasurement(o,s);Object.assign(t,c);var l=j.a.measurements.getLabel(t);l&&(t.labels=[l])}},z=function(e,t){var n=e.measurements;if(t instanceof u.a){var r=t.sopClassUIDs,a=t.images;if(0!==(n=n.filter((function(e){return e.coords.some((function(e){if(void 0===e.ReferencedSOPSequence){for(var t=0;t<a.length;++t){var n=a[t].getData().metadata;if(n.FrameOfReferenceUID===e.ReferencedFrameOfReferenceSequence){var o=[0,0,0],i=n.ImageOrientationPatient;o[0]=i[1]*i[5]-i[2]*i[4],o[1]=i[2]*i[3]-i[0]*i[5],o[2]=i[0]*i[4]-i[1]*i[3];for(var s=0,c=0;c<3;++c)s+=o[c]*n.ImagePositionPatient[c];if(!(Math.abs(s-e.GraphicData[2])>1)){e.ReferencedSOPSequence={ReferencedSOPClassUID:n.SOPClassUID,ReferencedSOPInstanceUID:n.SOPInstanceUID};break}}}if(void 0===e.ReferencedSOPSequence)return!1}return r.includes(e.ReferencedSOPSequence.ReferencedSOPClassUID)}))}))).length){var o=a.map((function(e){return e.getImageId()})),i=a.map((function(e){return e.SOPInstanceUID}));n.forEach((function(e){e.coords.forEach((function(n){if(void 0!==n.ReferencedSOPSequence){var r=i.findIndex((function(e){return e===n.ReferencedSOPSequence.ReferencedSOPInstanceUID}));if(r>-1){var s=o[r],c=a[r].getData().metadata;!function(e,t,n,r){var a=x.DICOM_SR_DISPLAY_TOOL,o={TrackingUniqueIdentifier:e.TrackingUniqueIdentifier,renderableData:{},labels:e.labels};e.coords.forEach((function(e){var t=e.GraphicType,r=e.GraphicData,a=e.ValueType;void 0===o.renderableData[t]&&(o.renderableData[t]=[]),o.renderableData[t].push(F(t,r,a,n))}));var i=V.saveToolState();void 0===i[t]&&(i[t]={});var s=i[t];void 0===s[a]&&(s[a]={data:[]});var c=s[a];o.description="Read-only annotation",o.isReadOnly=!0,c.data.push(o),B({measurementData:o,toolName:a,imageId:t}),e.loaded=!0,e.imageId=t,e.displaySetInstanceUID=r,e.ReferencedSOPInstanceUID=e.coords[0].ReferencedSOPSequence.ReferencedSOPInstanceUID}(e,s,c,t.displaySetInstanceUID)}}}))}))}}},H=function(e){var t=e.servicesManager,n=e.displaySets,r=t.services.MeasurementService;n.filter((function(e){return"SR"===e.Modality})).forEach((function(e){var t=e.metadata;if(t){var a=t.ContentSequence;e.referencedImages=O(a),e.measurements=S(a,e);var o=r.getSourceMappings("CornerstoneTools","4");e.isHydrated=!1,e.isRehydratable=function(e,t){if(!t||!t.length)return!1;var n=t.map((function(e){return e.definition})),r=e.measurements,a=Object.keys(P).filter((function(e){return"function"==typeof P[e].isValidCornerstoneTrackingIdentifier})),o=[];a.forEach((function(e){n.includes(e)&&o.push(P[e])}));for(var i=function(e){var t=r[e].TrackingIdentifier;if(o.some((function(e){return e.isValidCornerstoneTrackingIdentifier(t)})))return{v:!0}},s=0;s<r.length;s++){var c=i(s);if("object"===I(c))return c.v}return!1}(e,o),e.isLoaded=!0,n.filter((function(e){return"SR"!==e.Modality&&"SEG"!==e.Modality&&"RTSTRUCT"!==e.Modality&&"RTDOSE"!==e.Modality})).forEach((function(t){z(e,t)}))}}))},q=function(e,t){var n;return e.find((function(e){return!!e.images&&!!(n=e.images.find((function(e){return e.getSOPInstanceUID()===t})))})),n},G=l.a.LogManager,W=function(e,t,n,r){return[e,t,n,r].join("_")},Y=function(e,t,n,r){n&&n.servicesManager&&H({servicesManager:n.servicesManager,displaySets:t});var a,o=i.b.data.DicomMessage.readFile(e),s=i.b.data.DicomMetaDictionary.naturalizeDataset(o.dict),c=i.b.adapters.Cornerstone.MeasurementReport;try{a=c.generateToolState(s)}catch(e){var l=s.SeriesDescription||"";return void G.publish(G.EVENTS.OnLog,{title:"Failed to parse ".concat(l," measurement report"),type:"warning",message:e.message||"",notify:!0})}var u=0,f={};return Object.keys(a).forEach((function(e){a[e].forEach((function(n){var a=q(t,n.sopInstanceUid),o=a._study,i=a._series,s=o.StudyInstanceUID,c=o.PatientID,l=i.SeriesInstanceUID,p=n.sopInstanceUid,m=n.frameIndex,d=W(s,l,p,m),h=a.getImageId();if(h){f=Object.assign({},n,{wadorsURI:r,imageId:h,imagePath:d,SOPInstanceUID:p,SeriesInstanceUID:l,StudyInstanceUID:s,PatientID:c,measurementNumber:++u,timepointId:"TimepointId",toolType:e,_id:h+u})}}))})),[f,a]},J=n(3),K=n.n(J),X=n(257),Q=function(e){return!!i.b.adapters.Cornerstone[e]},Z=function(e){var t=i.b.adapters.Cornerstone.MeasurementReport,n=X.a.getImageIdForImagePath,a={},o=[];return Object.keys(e).forEach((function(t){e[t].forEach((function(e){var t=e.toolType,r=e.imagePath;if(Q(t)){var i=n(r);a[i]=a[i]||{},a[i][t]=a[i][t]||{data:[]},a[i][t].data.push(e)}else o.push(t)}))})),o.length>0&&r.a.warn("[DICOMSR] Tooltypes not supported: ".concat(o.join(", "))),{dataset:t.generateReport(a,K.a.metaData).dataset}},$=function(e){var t=[];return e.forEach((function(e){e.getDisplaySets&&(t=t.concat(e.getDisplaySets()))})),t},ee=n(51),te=n(57);function ne(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ne(o,r,a,i,s,"next",e)}function s(e){ne(o,r,a,i,s,"throw",e)}i(void 0)}))}}var ae=function(){var e=re(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,l,u,f,p,m,d,h,g,v,y,b,w,E,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={url:r,headers:c.a.getAuthorizationHeader(),errorInterceptor:ee.a.getHTTPErrorHandler(),requestHooks:[Object(te.a)()]},i=new s.a.DICOMwebClient(o),l=t[0].getFirstInstance(),u={studyInstanceUID:l.getStudyInstanceUID(),seriesInstanceUID:l.getSeriesInstanceUID(),sopInstanceUID:l.getSOPInstanceUID()},e.next=6,i.retrieveInstance(u);case 6:f=e.sent,p=$(n),m=Y(f,p,a,l._data.baseWadoRsUri),d=m[1],h=m[0].toolType,d[h].splice(0,1),d[h].push(m[0]),g=1;case 14:if(!(g<t.length)){e.next=27;break}return v=t[g].getFirstInstance(),y={studyInstanceUID:v.getStudyInstanceUID(),seriesInstanceUID:v.getSeriesInstanceUID(),sopInstanceUID:v.getSOPInstanceUID()},e.next=19,i.retrieveInstance(y);case 19:b=e.sent,w=$(n),E=Y(b,w,a,v._data.baseWadoRsUri),S=E[0].toolType,d[S].push(E[0]);case 24:g++,e.next=14;break;case 27:return e.abrupt("return",d);case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),oe=function(){var e=re(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.allTools.forEach(function(){var e=re(regeneratorRuntime.mark((function e(t){var r,a,o,l,u,f,p,m,d,h,g,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={allTools:[]},void 0!==t.wadorsURI){e.next=15;break}return r.allTools.push(t),a=Z(r),o=a.dataset,l=i.b.data,u=l.DicomMetaDictionary,f=l.DicomDict,p={FileMetaInformationVersion:o._meta.FileMetaInformationVersion.Value,MediaStorageSOPClassUID:o.SOPClassUID,MediaStorageSOPInstanceUID:o.SOPInstanceUID,TransferSyntaxUID:"1.2.840.10008.1.2.1",ImplementationClassUID:u.uid(),ImplementationVersionName:"dcmjs-0.0"},m=u.denaturalizeDataset(p),(d=new f(m)).dict=u.denaturalizeDataset(o),h=d.write(),g={url:n,headers:c.a.getAuthorizationHeader(),errorInterceptor:ee.a.getHTTPErrorHandler(),requestHooks:[Object(te.a)()]},v=new s.a.DICOMwebClient(g),y={datasets:[h]},e.next=15,v.storeInstances(y);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ie(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var se={retrieveMeasurements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.a.info("[DICOMSR] retrieveMeasurements"),!e||"dicomWeb"!==e.type)return r.a.error("[DICOMSR] DicomWeb server is required!"),Promise.reject({});var n=e.wadoRoot,a=o.a.studyMetadataManager.all(),i=[];return a.forEach((function(e){(e.getSeries?e.getSeries():[]).forEach((function(e){if(e&&0!==e.getInstanceCount()){var t=e.getFirstInstance().getData().metadata.SOPClassUID;["1.2.840.10008.5.1.4.1.1.88.22","1.2.840.10008.5.1.4.1.1.11.1","1.2.840.10008.5.1.4.1.1.88.34"].includes(t)&&i.push(e)}}))})),0===i.length?Promise.resolve({}):ae(i,a,n,t)},storeMeasurements:function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,o){var i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.a.info("[DICOMSR] storeMeasurements"),o&&"dicomWeb"===o.type){e.next=4;break}return r.a.error("[DICOMSR] DicomWeb server is required!"),e.abrupt("return",Promise.reject({}));case 4:return i=o.wadoRoot,s=Object.keys(t)[0],c=t[s][0],l=c&&c.StudyInstanceUID,e.prev=8,e.next=11,oe(t,i);case 11:return l&&a.a.deleteStudyMetadataPromise(l),e.abrupt("return",{message:"Measurements saved successfully"});case 15:throw e.prev=15,e.t0=e.catch(8),r.a.error("[DICOMSR] Error while saving the measurements: ".concat(e.t0.message)),new Error("Error while saving the measurements.");case 19:case"end":return e.stop()}}),e,null,[[8,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ie(o,r,a,i,s,"next",e)}function s(e){ie(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),isToolSupported:Q};t.a=se},408:function(e,t,n){"use strict";var r={setViewportActive:function(e){return{type:"VIEWPORT::SET_ACTIVE",viewportIndex:e}},setViewportSpecificData:function(e,t){return{type:"VIEWPORT::SET",viewportIndex:e,viewportSpecificData:t}},setViewportLayoutAndData:function(e,t){return{type:"VIEWPORT::SET_VIEWPORT_LAYOUT_AND_DATA",numRows:e.numRows,numColumns:e.numColumns,viewports:e.viewports,viewportSpecificData:t}},setLayout:function(e){return{type:"VIEWPORT::SET_LAYOUT",numRows:e.numRows,numColumns:e.numColumns,viewports:e.viewports}},clearViewportSpecificData:function(e){return{type:"VIEWPORT::CLEAR",viewportIndex:e}},setActiveViewportSpecificData:function(e){return{type:"VIEWPORT::SET_ACTIVE_SPECIFIC_DATA",viewportSpecificData:e}},setUserPreferences:function(e){return{type:"SET_USER_PREFERENCES",state:e}},setExtensionData:function(e,t){return{type:"SET_EXTENSION_DATA",extension:e,data:t}},setTimepoints:function(e){return{type:"SET_TIMEPOINTS",state:e}},setMeasurements:function(e){return{type:"SET_MEASUREMENTS",state:e}},setStudyData:function(e,t){return{type:"SET_STUDY_DATA",StudyInstanceUID:e,data:t}},setServers:function(e){return{type:"SET_SERVERS",servers:e}}};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EXTENSION_DATA":var n=t.extension,r=e[n]||{},a=t.data,c=i({},n,o({},r,{},a));return o({},e,{},c);default:return e}},l={windowLevelData:{1:{description:"Soft tissue",window:"550",level:"40"},2:{description:"Lung",window:"150",level:"-600"},3:{description:"Liver",window:"150",level:"90"},4:{description:"Bone",window:"2500",level:"480"},5:{description:"Brain",window:"80",level:"40"},6:{description:"Trest",window:"1",level:"1"},7:{description:"",window:"",level:""},8:{description:"",window:"",level:""},9:{description:"",window:"",level:""},10:{description:"",window:"",level:""}},generalPreferences:{}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PREFERENCES":return Object.assign({},e,t.state);default:return e}},f=n(413),p=n.n(f);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v={servers:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SERVER":var n=p()([].concat(g(e.servers),[t.server]),"id");return n.forEach((function(e){return e.active=!0})),d({},e,{servers:n});case"ACTIVATE_SERVER":var r=d({},t.server,{active:!0}),a=e.servers;return a.forEach((function(e){return e.active=!1})),d({},e,{servers:p()([].concat(g(a),[r]),"wadoRoot")});case"SET_SERVERS":return d({},e,{servers:t.servers});default:return e}},b=n(63),w=n.n(b),E={studyData:{}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STUDY_DATA":var n=w()(e.studyData);return n[t.StudyInstanceUID]=w()(t.data),Object.assign({},e,{studyData:n});default:return e}},O={timepoints:[],measurements:[]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TIMEPOINTS":return Object.assign({},e,{timepoints:t.state});case"SET_MEASUREMENTS":return Object.assign({},e,{measurements:t.state});default:return e}},P=n(328);function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(P.b)(!1);var D={numRows:1,numColumns:1,activeViewportIndex:0,layout:{viewports:[{}]},viewportSpecificData:{}},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e*t,a=w()(n);return r<Object.keys(a).length&&Object.keys(a).forEach((function(e){e>r-1&&delete a[e]})),a},N=function(e,t,n){return n>e*t-1?D.activeViewportIndex:n},_={extensions:c,preferences:u,servers:y,studies:S,timepointManager:I,viewports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=!1;switch(t.type){case"VIEWPORT::SET_ACTIVE":return Object(P.a)(e,(function(e){e.activeViewportIndex=N(e.numRows,e.numColumns,t.viewportIndex)}));case"VIEWPORT::SET_LAYOUT":var r=t.numRows,a=t.numColumns,o=T(r,a,e.viewportSpecificData),i=N(r,a,e.activeViewportIndex);return j({},e,{numRows:t.numRows,numColumns:t.numColumns,layout:{viewports:C(t.viewports)},viewportSpecificData:o,activeViewportIndex:i});case"VIEWPORT::SET_VIEWPORT_LAYOUT_AND_DATA":var s=t.numRows,c=t.numColumns,l=T(s,c,t.viewportSpecificData),u=N(s,c,e.activeViewportIndex);return j({},e,{numRows:t.numRows,numColumns:t.numColumns,layout:{viewports:C(t.viewports)},viewportSpecificData:l,activeViewportIndex:u});case"VIEWPORT::SET":return Object(P.a)(e,(function(e){e.viewportSpecificData[t.viewportIndex]=e.viewportSpecificData[t.viewportIndex]||{},Object.keys(t.viewportSpecificData).forEach((function(n){e.viewportSpecificData[t.viewportIndex][n]=t.viewportSpecificData[n]})),t.viewportSpecificData&&t.viewportSpecificData.plugin&&(e.layout.viewports[t.viewportIndex].plugin=t.viewportSpecificData.plugin)}));case"VIEWPORT::SET_ACTIVE_SPECIFIC_DATA":n=!0;case"VIEWPORT::SET_SPECIFIC_DATA":var f=w()(e.layout),p=n?e.activeViewportIndex:t.viewportIndex,m=w()(e.viewportSpecificData);return m[p]=j({},t.viewportSpecificData),t.viewportSpecificData&&t.viewportSpecificData.plugin&&(f.viewports[p].plugin=t.viewportSpecificData.plugin),j({},e,{layout:f,viewportSpecificData:m});case"VIEWPORT::CLEAR":var d=w()(e.viewportSpecificData);return t.viewportIndex?(d[t.viewportIndex]={},j({},e,{viewportSpecificData:d})):D;default:return e}}},A=window.localStorage,R={saveState:function(e){try{var t=JSON.stringify(e);A.setItem("state",t)}catch(e){}},loadState:function(){try{var e=A.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}},M=window.sessionStorage,L={reducers:_,actions:r,localStorage:R,sessionStorage:{saveState:function(e){try{var t=JSON.stringify(e);M.setItem("state",t)}catch(e){}},loadState:function(){try{var e=M.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}}};t.a=L},409:function(e,t,n){"use strict";var r=n(118),a=n(3),o=n.n(a),i=n(4),s=n.n(i);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={metadataProvider:r.a,getBoundingBox:function(e,t,n,r,a){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var o=s.a.textStyle.getFont(),i=s.a.textStyle.getFontSize();e.save(),e.font=o,e.textBaseline="top";var c=0;t.forEach((function(t){var n=e.measureText(t).width;c=Math.max(c,n)}));var l={width:c+10,height:5+t.length*(i+5)};return a&&a.centering&&!0===a.centering.x&&(n-=l.width/2),a&&a.centering&&!0===a.centering.y&&(r-=l.height/2),l.left=n,l.top=r,e.restore(),l},pixelToPage:function(e,t){var n=o.a.getEnabledElement(e),r={x:0,y:0};if(!n||"object"!==c(t))return r;var a=n.canvas,i=$(a).offset();r.x+=i.left,r.y+=i.top;var s=o.a.pixelToCanvas(e,t);return r.x+=s.x,r.y+=s.y,r},repositionTextBox:function(e,t,n){if(t.isCreating){var r=e.element,a=o.a.getEnabledElement(r),i=a.image,s=OHIF.uiSettings.autoPositionMeasurementsTextCallOuts,c={T:!s||s.includes("T"),R:!s||s.includes("R"),B:!s||s.includes("B"),L:!s||s.includes("L")},l=function(e,t){var n={};n.x=e.x/2,n.y=e.y/2;var r={};r.x=t.x<n.x?-1:1,r.y=t.y<n.y?-1:1;for(var a=r.x<0?t.x:e.x-t.x,o=(r.y<0?t.y:e.y-t.y)<a?"y":"x",i={"x-1":"L","y-1":"T",x1:"R",y1:"B"},s=0;s<4&&!c[i[o+r[o]]];)r[o]*=-1,o="x"===o?"y":"x",s++;return{directions:r,cornerAxis:o}},u=function(e,t,n){var r=t[e],a=n[e],o=Math.min(r,a);return o+(Math.max(r,a)-o)/2},f=t.handles,p=f.textBox,m=$(a.canvas),d=m.outerWidth(),h=m.outerHeight(),g=m.offset(),v={x:d,y:h},y={};y.x=p.boundingBox.width,y.y=p.boundingBox.height;var b=function(e){var t=f[e];return{x:t.x,y:t.y}},w=b("start"),E=b("end"),S={};S.x=u("x",w,E),S.y=u("y",w,E);var O={};O.x=i.width,O.y=i.height;for(var I,P=l(O,S),C=P.directions,k=P.cornerAxis,j=function(e,t,n){var r=e.element,a=e.canvas,i=e.image,s=o.a.pixelToCanvas(r,{x:0,y:0}),l=o.a.pixelToCanvas(r,{x:i.width,y:i.height}),u=$(a),f=u.outerWidth(),p=u.outerHeight(),m={};return m["x-1"]=c.L&&s.x>t,m["y-1"]=c.T&&s.y>n,m.x1=c.R&&f-l.x>t,m.y1=c.B&&p-l.y>n,m}(a,y.x,y.y),x=Object.assign({},C),D=k,T=!1,N=0;N<4;){if(j[D+x[D]]){T=!0;break}x[D]*=-1,D="x"===D?"y":"x",N++}if(T)I=(C=Object.assign({},C,x))[k=D]<0?0:O[k];else{var _=l(O=Object.assign({},O,v),o.a.pixelToCanvas(r,S));C=_.directions,k=_.cornerAxis;var A={x:C.x<0?g.left:g.left+d,y:C.y<0?g.top:g.top+h};I=o.a.pageToPixel(r,A.x,A.y)[k]}var R="x"===k?"y":"x",M=function(e,t){var n=o.a.pageToPixel(e,0,0),r=o.a.pageToPixel(e,t.x,t.y);return{x:r.x-n.x,y:r.y-n.y}}(r,y);p[k]=I,p[R]=S[R];var L=function(e,t,n,r){var a=(e=e||{}).centering||{},o=!!a.x,i=!!a.y,s=r.x/2,c=r.y/2,l={x:[],y:[]};if("x"===t){var u=i?0:c;l.x[-1]=o?s:0,l.x[1]=o?-s:-r.x,l.y[-1]=u,l.y[1]=u}else{var f=o?0:s;l.x[-1]=f,l.x[1]=f,l.y[-1]=i?c:0,l.y[1]=i?-c:-r.y}return l}(n,k,0,M);p[k]+=L[k][C[k]];var U=o.a.pixelToCanvas(r,p),F={x:U.x+y.x,y:U.y+y.y},V={x0:g.left,y0:g.top,x1:g.left+d,y1:g.top+h};if(U[R]<0){var B=V.x0,z=V.y0,H=o.a.pageToPixel(r,B,z);p[R]=H[R]}else if(F[R]>v[R]){var q=V.x1-y.x,G=V.y1-y.y,W=o.a.pageToPixel(r,q,G);p[R]=W[R]}}}};t.a=l},422:function(e,t,n){},424:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(313);n(877);function c(e){var t=e.studies,n=e.onThumbnailClick,r=e.onThumbnailDoubleClick,o=e.supportsDrag,i=e.showThumbnailProgressBar;return a.a.createElement("div",{className:"study-browser"},a.a.createElement("div",{className:"scrollable-study-thumbnails"},t.map((function(e,t){var c=e.StudyInstanceUID;return e.thumbnails.map((function(e,l){var u=e.active,f=e.altImageText,p=e.displaySetInstanceUID,m=e.imageId,d=e.derivedDisplaySetsNumber,h=e.numImageFrames,g=e.SeriesDescription,v=e.SeriesNumber,y=e.hasWarnings,b=e.hasDerivedDisplaySets;return a.a.createElement("div",{key:e.displaySetInstanceUID,className:"thumbnail-container","data-cy":"thumbnail-list"},a.a.createElement(s.a,{active:u,supportsDrag:o,key:"".concat(t,"_").concat(l),id:"".concat(t,"_").concat(l),StudyInstanceUID:c,altImageText:f,imageId:m,derivedDisplaySetsNumber:d,displaySetInstanceUID:p,numImageFrames:h,SeriesDescription:g,SeriesNumber:v,hasWarnings:y,hasDerivedDisplaySets:b,onClick:n.bind(void 0,p),onDoubleClick:r,showProgressBar:i}))}))})).flat()))}var l=function(){};c.propTypes={studies:i.a.arrayOf(i.a.shape({StudyInstanceUID:i.a.string.isRequired,thumbnails:i.a.arrayOf(i.a.shape({altImageText:i.a.string,displaySetInstanceUID:i.a.string.isRequired,imageId:i.a.string,derivedDisplaySetsNumber:i.a.number,numImageFrames:i.a.number,SeriesDescription:i.a.string,SeriesNumber:i.a.number,stackPercentComplete:i.a.number}))})).isRequired,supportsDrag:i.a.bool,onThumbnailClick:i.a.func,onThumbnailDoubleClick:i.a.func,showThumbnailProgressBar:i.a.bool},c.defaultProps={studies:[],supportsDrag:!0,onThumbnailClick:l,onThumbnailDoubleClick:l,showThumbnailProgressBar:!0}},425:function(e,t,n){"use strict";var r="org.ohif.dicom-sr";t.a=r;"".concat(r,".sopClassHandlerModule.").concat("dicom-sr")},426:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(1285);function r(){return null}},48:function(e,t,n){"use strict";t.a=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},51:function(e,t,n){"use strict";t.a={getHTTPErrorHandler:function(){return null}}},53:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&s(a,n.prototype),a}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,c(t).call(this))).message=e,n.stack=(new Error).stack,n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),t}(o(Error));t.a=l},57:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(756),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={retries:5,factor:3,minTimeout:1e3,maxTimeout:6e4,randomize:!0,retryableStatusCodes:[429,500]},l=i({},c),u=function(e,t){var n=t.url,r=t.method;var o=e.send;return e.send=function(){var t=a.a.operation(l);t.attempt((function(a){var o=e.onreadystatechange;e.onreadystatechange=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];if(o.apply(e,a),l.retryableStatusCodes.includes(e.status)){var s="Attempt to request ".concat(n," failed."),c=new Error(s);t.retry(c)}},a>1&&(console.warn("Requesting ".concat(n,"... (attempt: ").concat(a,")")),e.open(r,n,!0))}));for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];o.apply(e,s)},e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l=i({},c),"retries"in e&&(l.retries=e.retries),"factor"in e&&(l.factor=e.factor),"minTimeout"in e&&(l.minTimeout=e.minTimeout),"maxTimeout"in e&&(l.maxTimeout=e.maxTimeout),"randomize"in e&&(l.randomize=e.randomize),"retryableStatusCodes"in e&&(l.retryableStatusCodes=e.retryableStatusCodes),u};t.a=f},59:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"_data",{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(this,"_uid",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(this,"_custom",{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)})}var t,n,o;return t=e,o=[{key:"isValidUID",value:function(e){return"string"===r(e)&&e.length>0}},{key:"isValidIndex",value:function(e){return"number"===r(e)&&e>=0&&(0|e)===e}},{key:"isValidCallback",value:function(e){return"function"===r(e)}}],(n=[{key:"getData",value:function(){return this._data}},{key:"getDataProperty",value:function(e){var t,n=this._data;return(n instanceof Object||"object"===r(n)&&null!==n)&&(t=n[e]),t}},{key:"getObjectID",value:function(){return this._uid}},{key:"setCustomAttribute",value:function(e,t){this._custom[e]=t}},{key:"getCustomAttribute",value:function(e){return this._custom[e]}},{key:"customAttributeExists",value:function(e){return e in this._custom}},{key:"setCustomAttributes",value:function(e){var t=Object.prototype.hasOwnProperty,n=this._custom;for(var r in e)t.call(e,r)&&(n[r]=e[r])}}])&&a(t.prototype,n),o&&a(t,o),e}()},65:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(28),c=n.n(s);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=Object(r.createContext)(null),d=m.Provider,h=function(e){var t=e.children,n=e.modal,o=e.service,i={content:null,contentProps:null,shouldCloseOnEsc:!1,isOpen:!0,onClose:null,closeButton:!0,showScrollbar:!1,title:null,customClassName:"",fullscreen:!1},s=p(Object(r.useState)(i),2),m=s[0],h=s[1],g=Object(r.useCallback)((function(e){return h(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m,{},e))}),[m]),v=Object(r.useCallback)((function(){return h(i)}),[i]);Object(r.useEffect)((function(){o&&o.setServiceImplementation({hide:v,show:g})}),[v,o,g]);var y=m.content,b=m.contentProps,w=m.isOpen,E=m.onClose,S=m.title,O=m.customClassName,I=m.shouldCloseOnEsc,P=m.fullscreen,C=m.closeButton,k=m.showScrollbar,j=m.noScroll;return a.a.createElement(d,{value:{show:g,hide:v}},y&&a.a.createElement(n,{className:c()(O,y.className,{visibleScrollbar:k},{noScroll:j}),shouldCloseOnEsc:I,isOpen:w,title:S,fullscreen:P,closeButton:C,onClose:function(){E&&E(),v()}},a.a.createElement(y,l({},b,{show:g,hide:v}))),t)},g=function(e){return function(t){var n=Object(r.useContext)(m),o=n.show,i=n.hide;return a.a.createElement(e,l({},t,{modal:{show:o,hide:i}}))}};h.defaultProps={service:null},h.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]).isRequired,modal:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var v=h,y=(m.Consumer,n(203));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){var t=e.options,n=e.onClose,o=function(){n(t.id)};return Object(r.useEffect)((function(){t.autoClose&&setTimeout((function(){o()}),t.duration)}),[]),a.a.createElement("div",{className:"".concat(t.visible?"":"sb-hidden"," sb-").concat(t.type," sb-item")},a.a.createElement("span",{className:"sb-closeBtn",onClick:o},a.a.createElement("span",{className:"sb-closeIcon"},"x")),t.title&&a.a.createElement("div",{className:"sb-title"},t.title),t.message&&a.a.createElement("div",{className:"sb-message"},t.message),t.action&&a.a.createElement("button",{className:"sb-action",onClick:function(){t.action.onClick(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{close:o}))}},t.action.label))},S=(n(857),function(){var e=T(),t=e.snackbarItems,n=e.hide;if(!t)return null;var r;return a.a.createElement(a.a.Fragment,null,(r={topLeft:[],topCenter:[],topRight:[],bottomLeft:[],bottomCenter:[],bottomRight:[]},t.map((function(e){r[e.position].push(e)})),a.a.createElement("div",null,Object.keys(r).map((function(e){return r[e].length?a.a.createElement("div",{key:e,className:"sb-container sb-".concat(e)},r[e].map((function(e,t){return a.a.createElement("div",{key:e.id+t},function(e){return a.a.createElement(E,{key:e.itemId,options:e,onClose:n})}(e))}))):null})))))}),O="info";function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=y.a.LogManager,D=Object(r.createContext)(null),T=function(){return Object(r.useContext)(D)},N=function(e){var t=e.children,n=e.service,o={title:"",message:"",duration:5e3,autoClose:!0,position:"bottomRight",type:O,action:null},i=j(Object(r.useState)(1),2),s=i[0],c=i[1],l=j(Object(r.useState)([]),2),u=l[0],f=l[1];Object(r.useEffect)((function(){var e=function(e){var t=e.type,n=e.notify,r=e.title,a=e.message;n&&p({type:t,title:r,message:a})};return x.subscribe(x.EVENTS.OnLog,e),function(){x.unsubscribe(x.EVENTS.OnLog,e)}}),[p]);var p=Object(r.useCallback)((function(e){if(!e||!e.title&&!e.message)return console.warn("Snackbar cannot be rendered without required parameters: title | message"),null;"error"===e.type&&console.error(e.error);var t=C({},o,{},e,{id:s,visible:!0});f((function(e){return[].concat(I(e),[t])})),c(s+1)}),[s,o]),m=Object(r.useCallback)((function(e){f((function(t){return t.map((function(t){return t.id===e&&(t.visible=!1),t}))})),setTimeout((function(){f((function(t){return I(t.filter((function(t){return t.id!==e})))}))}),1e3)}),[f]),d=function(){c(1),f((function(){return[]}))};return Object(r.useEffect)((function(){n&&n.setServiceImplementation({hide:m,show:p})}),[n,m,p]),window.snackbar={show:p,hide:m,hideAll:d},a.a.createElement(D.Provider,{value:{show:p,hide:m,hideAll:d,snackbarItems:u}},!!u&&a.a.createElement(S,null),t)};N.defaultProps={service:null},N.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var _=N,A=n(102),R=n(795),M=function(e){return function(t){return function(e){return function(t){return a.a.createElement(A.a,{i18n:R.a},a.a.createElement(e,t))}}(Object(A.d)(e)((function(e){return a.a.createElement(t,e)})))}},L=n(762),U=n.n(L),F=n(202);n(875);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var W=Object(r.createContext)(null),Y=function(e){var t=e.children,n=e.service,o=G(Object(r.useState)(!1),2),i=o[0],s=o[1],l=G(Object(r.useState)([]),2),u=l[0],f=l[1],p=G(Object(r.useState)(null),2),m=p[0],d=p[1],h=G(Object(r.useState)(null),2),g=h[0],v=h[1],y=G(Object(r.useState)([]),2),b=y[0],w=y[1];Object(r.useEffect)((function(){w(u.map((function(e){return H({id:e.id},E(e.id))})))}),[u]);var E=function(e){var t=document.querySelector("#root"),n=t.offsetLeft+t.offsetWidth/2,r=t.offsetTop+t.offsetHeight/2,a=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();return{x:n-a.width/2,y:r-a.height/2}},S=Object(r.useCallback)((function(e){var t=e.id;return t||(t=F.a.guid()),f((function(n){return[].concat(B(n),[H({},e,{id:t})])})),d(t),t}),[]),O=Object(r.useCallback)((function(e){var t=e.id;return f((function(e){return e.filter((function(e){return e.id!==t}))}))}),[]);Object(r.useEffect)((function(){n&&n.setServiceImplementation({create:S,dismiss:O,dismissAll:P})}),[S,O,n]);var I=Object(r.useCallback)((function(e){f((function(t){var n=t.find((function(t){return t.id===e}));return n?[].concat(B(t.filter((function(t){return t.id!==e}))),[n]):t}))}),[]);Object(r.useEffect)((function(){return I(m)}),[I,m]);var P=function(){f([])},C=function(){return u&&u.length<1},k=function(e){var t=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();v({x:t.x,y:t.y})},j=function(e){return e&&"function"==typeof e};return a.a.createElement(W.Provider,{value:{create:S,dismiss:O,dismissAll:P,isEmpty:C}},!C()&&a.a.createElement("div",{className:"DraggableArea"},u.map((function(e){var t=e.id,n=e.content,r=e.contentProps,o=e.defaultPosition,l=e.centralize,u=void 0!==l&&l,f=e.preservePosition,p=void 0===f||f,m=e.isDraggable,d=void 0===m||m,h=e.onStart,v=e.onStop,y=e.onDrag,w=e.showOverlay,E=p&&g||o;u&&(E=b.find((function(e){return e.id===t})));var S=function(){return a.a.createElement(U.a,{key:t,disabled:!d,position:E,defaultPosition:E,bounds:"parent",onStart:function(e){var t=e||window.event,n=t.target||t.srcElement;return!["SVG","BUTTON","PATH","INPUT","SPAN","LABEL"].includes(n.tagName.toUpperCase())&&(j(h)?h(e):void 0)},onStop:function(e){if(s(!1),j(v))return v(e)},onDrag:function(e){if(s(!0),I(t),k(t),j(y))return y(e)}},a.a.createElement("div",{id:"draggableItem-".concat(t),className:c()("DraggableItem",i&&"dragging",d&&"draggable"),style:{zIndex:"999",position:"absolute"},onClick:function(){return I(t)}},a.a.createElement(n,V({},e,r))))};return w?a.a.createElement("div",{className:"Overlay",key:t},S()):S()}))),t)},J=function(e){return function(t){var n=Object(r.useContext)(W),o=n.create,i=n.dismiss,s=n.dismissAll,c=n.isEmpty;return a.a.createElement(e,V({},t,{dialog:{create:o,dismiss:i,dismissAll:s,isEmpty:c}}))}};Y.defaultProps={service:null},Y.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var K=Y;function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=Object(r.createContext)(null),ne=te.Provider,re=function(){return Object(r.useContext)(te)},ae=function(e){var t=e.children,n=e.service,o=ee(Object(r.useState)({errors:[],infos:[]}),2),i=o[0],s=o[1];Object(r.useEffect)((function(){var e=function(e){var t=e.error,n=e.message;c({error:t,message:n})};return window.addEventListener("error",e),function(){window.removeEventListener("error",e)}}),[]);var c=function(e){var t=e.error,n=void 0===t?{}:t,r=e.stack,a=void 0===r?"":r,o=e.message,i=void 0===o?"":o,c=e.displayOnConsole,l=void 0===c||c,u={error:n,stack:a,message:i,displayOnConsole:l};s((function(e){return Z({},e,{errors:[].concat(X(e.errors),[u])})})),l&&console.error(n)},l=function(e){var t=e.message,n=void 0===t?"":t,r=e.displayOnConsole,a=void 0===r||r;s((function(e){return Z({},e,{infos:e.infos.push({message:n,displayOnConsole:a})})})),a&&console.info(n)};return Object(r.useEffect)((function(){n&&n.setServiceImplementation({error:c,info:l})}),[c,n,l]),a.a.createElement(ne,{value:{info:l,error:c,state:i}},t)};ae.defaultProps={service:null},ae.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var oe=ae;te.Consumer;n.d(t,"c",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return _})),n.d(t,"f",(function(){return T})),n.d(t,"i",(function(){return M})),n.d(t,"a",(function(){return K})),n.d(t,"g",(function(){return J})),n.d(t,"b",(function(){return oe})),n.d(t,"e",(function(){return re}))},686:function(e,t,n){},71:function(e,t,n){"use strict";var r={userLoggedIn:function(){return!1},getUserId:function(){return null},getName:function(){return null},getAccessToken:function(){return null},login:function(){return new Promise((function(e,t){return t()}))},logout:function(){return new Promise((function(e,t){return t()}))},getData:function(e){return null},setData:function(e,t){return null}};t.a=r},724:function(e,t,n){"use strict";var r=n(19),a=n(312),o=Object(r.b)((function(e){return{user:e.auth.user}}),null)(a.a);t.a=o},734:function(e,t,n){},752:function(e,t,n){"use strict";var r=n(19),a=n(0),o=n.n(a),i=n(1),s=n.n(i);n(1263);var c=n(1418);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,r,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),m=0;m<s;m++)u[m]=arguments[m];return a=this,i=(e=f(t)).call.apply(e,[this].concat(u)),r=!i||"object"!==l(i)&&"function"!=typeof i?p(a):i,d(p(r),"state",{status:"Upload",isCancelled:!1,errorsCount:0,files:null,uploadedVolume:null,wholeVolumeStr:null,isFilesListHidden:!0,timeLeft:null,uploadedList:null,totalCount:0,successfullyUploadedCount:0,lastFile:"",uploadContext:null}),d(p(r),"uploadFiles",(function(e){for(var t=r.props.user,a=c.a.create({}),o=n(798)(),i=e.target.files,s=0;s<i.length;s++)o.file(i[s].name,i[s]);var l=new XMLHttpRequest;l.open("POST","/api/image_encrypt/?user=".concat(t.email),!0),l.setRequestHeader("Authorization","JWT ".concat(localStorage.getItem("access"))),l.responseType="json",o.generateAsync({type:"blob"}).then((function(e){var t=new FormData;t.append("file",e,"dicom_images.zip"),l.send(t)})),a.show({title:"Upload DICOM",message:"Sending data to server, encrypting...This can take a bit...",type:"info",duration:12e3}),l.onload=function(){var e=l.response;"Study was uploaded!"===e.message?a.show({title:"Upload DICOM",message:e.message,type:"success",duration:12e3}):a.show({title:"Upload DICOM",message:"Failed to upload study - Error!",type:"error",duration:12e3})}})),d(p(r),"renderTableRow",(function(e){var t=null;return null!==e.error&&(t=o.a.createElement("p",{style:{color:"red"}},e.error)),o.a.createElement("tr",{key:e.id},o.a.createElement("td",{className:"project"},e.name," ",t))})),r}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),r=t,(a=[{key:"filesLeft",value:function(){return this.state.uploadedList.length+" of "+this.state.totalCount+" files"}},{key:"volumeLeft",value:function(){return function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}(this.state.uploadedVolume)+" of "+this.state.wholeVolumeStr}},{key:"percents",value:function(){return parseInt(100*this.state.uploadedList.length/Object.keys(this.state.files).length)}},{key:"isFinished",value:function(){return this.state.isCancelled||Object.keys(this.state.files).length===this.state.uploadedList.length}},{key:"errorsMessage",value:function(){var e=1===this.state.errorsCount?" error":" errors";return this.state.errorsCount+e+" while uploading, click for more info"}},{key:"uploadCallback",value:function(e,t){var n=this.state.files[e];if(n.processed=!0,t)n.error=t,this.setState({errorsCount:this.state.errorsCount+1});else{var r=this.state.uploadedVolume+n.size;this.setState({uploadedVolume:r})}this.setState({lastFile:n.name});var a=this.state.uploadedList;a.push(n),this.setState({uploadedList:a})}},{key:"render",value:function(){return null===this.state.files?o.a.createElement("div",{className:"dicom-uploader"},o.a.createElement("div",{className:"button"},o.a.createElement("label",{htmlFor:"file"},o.a.createElement("img",{src:"./assets/Button_File.svg",alt:"upload file"})),o.a.createElement("input",{className:"invisible-input",onChange:this.uploadFiles,type:"file",id:"file",multiple:!0})),o.a.createElement("div",{className:"button"},o.a.createElement("label",{htmlFor:"folder"},o.a.createElement("img",{src:"./assets/Button_Folder.svg",alt:"upload folder"})),o.a.createElement("input",{className:"invisible-input",type:"file",onChange:this.uploadFiles,id:"folder",webkitdirectory:"true",mozdirectory:"true",multiple:!0}))):o.a.createElement("table",{id:"tblProjectList",className:"table noselect"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"table-header"},this.percents(),"% ",this.filesLeft()))),o.a.createElement("tbody",{id:"ProjectList"},this.state.uploadedList.map(this.renderTableRow)))}}])&&u(r.prototype,a),i&&u(r,i),t}(a.Component);d(h,"propTypes",{id:s.a.string,event:s.a.string,url:s.a.string,retrieveAuthHeaderFunction:s.a.func,user:s.a.object});var g=Object(r.b)((function(e){return{user:e.auth.user}}),null)(h),v=n(268);function y(e){var t=e.isOpen,n=void 0!==t&&t,r=e.onClose,a=e.url,i=e.retrieveAuthHeaderFunction,s=v.d.services.UIModalService;return o.a.createElement(o.a.Fragment,null,n&&void(s&&s.show({content:g,title:"Upload DICOM Files",contentProps:{url:a,retrieveAuthHeaderFunction:i},onClose:r})))}y.propTypes={isOpen:s.a.bool.isRequired,retrieveAuthHeaderFunction:s.a.func.isRequired,onClose:s.a.func,url:s.a.string};var b=y,w=n(22),E=function(e){return!0===e.active},S=Object(r.b)((function(e){var t=e.servers.servers.find(E);return{retrieveAuthHeaderFunction:function(){return w.a.DICOMWeb.getAuthorizationHeader(t)},url:t&&t.qidoRoot}}),null)(b);t.a=S},753:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(27),i=n(67),s=n(102),c=n(1),l=n.n(c),u=n(28),f=n.n(u),p=n(11);n(1261);var m=function(){return a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"header-brand"},a.a.createElement(p.g,{name:"brain",className:"header-logo-image"}),a.a.createElement("h1",{className:"header-logo-text"},"DICOM Image Viewer"))};n(1262);function d(e){var t=e.useLargeLogo,n=e.linkPath,r=e.linkText,i=e.location,s=e.children,c=r&&n;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:f()("entry-header",{"header-big":t})},a.a.createElement("div",{className:"header-left-box"},i&&i.studyLink&&a.a.createElement(o.b,{to:i.studyLink,className:"header-btn header-viewerLink"},"Back to Viewer"),s,c&&a.a.createElement(o.b,{className:"header-btn header-studyListLinkSection",to:{pathname:n,state:{studyLink:i.pathname}}},r))))}d.propTypes={linkText:l.a.string,linkPath:l.a.string,useLargeLogo:l.a.bool,location:l.a.object.isRequired,children:l.a.node},d.defaultProps={useLargeLogo:!1,children:m()};var h=Object(s.d)(["Header","AboutModal"])(Object(i.h)(Object(p.K)(d))),g=n(19),v=Object(g.b)((function(e){return{user:e.oidc&&e.oidc.user}}))(h);t.a=v},766:function(e,t,n){"use strict";t.a={COMMANDS:"commandsModule",PANEL:"panelModule",SOP_CLASS_HANDLER:"sopClassHandlerModule",TOOLBAR:"toolbarModule",VIEWPORT:"viewportModule"}},767:function(e){e.exports=JSON.parse('{"both":{"Location":{}},"baseline":{"TargetType":{},"MaxTargetsPerOrgan":{"limit":2},"MaxTargets":{"limit":5},"MeasurementsLength":[{"longAxis":10,"longAxisSliceThicknessMultiplier":2,"modalityIn":["CT","MR"],"locationNotIn":["Lymph Node"],"message":"Extranodal lesions must be >= 10mm long axis AND >= double the acquisition slice thickness by CT and MR"},{"shortAxis":20,"longAxis":20,"modalityIn":["PX","XA"],"locationNotIn":["Lymph Node"],"message":"Extranodal lesions must be >= 20mm on chest x-ray (although x-rays rarely used for clinical trial assessment)"},{"shortAxis":15,"shortAxisSliceThicknessMultiplier":2,"modalityIn":["CT","MR"],"locationIn":["Lymph Node"],"message":"Nodal lesions must be >= 15mm short axis AND >= double the acquisition slice thickness by CT and MR"}]},"followup":{}}')},769:function(e){e.exports=JSON.parse('{"a":"2.12.10"}')},785:function(e){e.exports=JSON.parse('{"a":"0.7.11"}')},790:function(e){e.exports=JSON.parse('{"a":"4.12.18"}')},821:function(e,t,n){},825:function(e,t){},828:function(e,t,n){},829:function(e,t,n){},84:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r={enabledElements:{}},a=function(e,t){return r.enabledElements[e]=t},o=function(e){return r.enabledElements[e]}},857:function(e,t,n){},875:function(e,t,n){},876:function(e,t,n){},877:function(e,t,n){},878:function(e,t,n){},879:function(e,t,n){},880:function(e,t,n){},881:function(e,t,n){},882:function(e,t,n){},883:function(e,t,n){},884:function(e,t,n){},885:function(e,t,n){},886:function(e,t,n){},887:function(e,t,n){},888:function(e,t,n){},889:function(e,t,n){},890:function(e,t,n){},891:function(e,t,n){},892:function(e,t,n){},893:function(e,t,n){},894:function(e,t,n){},895:function(e,t,n){},896:function(e,t,n){},903:function(e,t,n){},904:function(e,t,n){},905:function(e,t,n){},906:function(e,t,n){},907:function(e,t,n){var r={"./af":445,"./af.js":445,"./ar":446,"./ar-dz":447,"./ar-dz.js":447,"./ar-kw":448,"./ar-kw.js":448,"./ar-ly":449,"./ar-ly.js":449,"./ar-ma":450,"./ar-ma.js":450,"./ar-sa":451,"./ar-sa.js":451,"./ar-tn":452,"./ar-tn.js":452,"./ar.js":446,"./az":453,"./az.js":453,"./be":454,"./be.js":454,"./bg":455,"./bg.js":455,"./bm":456,"./bm.js":456,"./bn":457,"./bn.js":457,"./bo":458,"./bo.js":458,"./br":459,"./br.js":459,"./bs":460,"./bs.js":460,"./ca":461,"./ca.js":461,"./cs":462,"./cs.js":462,"./cv":463,"./cv.js":463,"./cy":464,"./cy.js":464,"./da":465,"./da.js":465,"./de":466,"./de-at":467,"./de-at.js":467,"./de-ch":468,"./de-ch.js":468,"./de.js":466,"./dv":469,"./dv.js":469,"./el":470,"./el.js":470,"./en-SG":471,"./en-SG.js":471,"./en-au":472,"./en-au.js":472,"./en-ca":473,"./en-ca.js":473,"./en-gb":474,"./en-gb.js":474,"./en-ie":475,"./en-ie.js":475,"./en-il":476,"./en-il.js":476,"./en-nz":477,"./en-nz.js":477,"./eo":478,"./eo.js":478,"./es":479,"./es-do":480,"./es-do.js":480,"./es-us":481,"./es-us.js":481,"./es.js":479,"./et":482,"./et.js":482,"./eu":483,"./eu.js":483,"./fa":484,"./fa.js":484,"./fi":485,"./fi.js":485,"./fo":486,"./fo.js":486,"./fr":487,"./fr-ca":488,"./fr-ca.js":488,"./fr-ch":489,"./fr-ch.js":489,"./fr.js":487,"./fy":490,"./fy.js":490,"./ga":491,"./ga.js":491,"./gd":492,"./gd.js":492,"./gl":493,"./gl.js":493,"./gom-latn":494,"./gom-latn.js":494,"./gu":495,"./gu.js":495,"./he":496,"./he.js":496,"./hi":497,"./hi.js":497,"./hr":498,"./hr.js":498,"./hu":499,"./hu.js":499,"./hy-am":500,"./hy-am.js":500,"./id":501,"./id.js":501,"./is":502,"./is.js":502,"./it":503,"./it-ch":504,"./it-ch.js":504,"./it.js":503,"./ja":505,"./ja.js":505,"./jv":506,"./jv.js":506,"./ka":507,"./ka.js":507,"./kk":508,"./kk.js":508,"./km":509,"./km.js":509,"./kn":510,"./kn.js":510,"./ko":511,"./ko.js":511,"./ku":512,"./ku.js":512,"./ky":513,"./ky.js":513,"./lb":514,"./lb.js":514,"./lo":515,"./lo.js":515,"./lt":516,"./lt.js":516,"./lv":517,"./lv.js":517,"./me":518,"./me.js":518,"./mi":519,"./mi.js":519,"./mk":520,"./mk.js":520,"./ml":521,"./ml.js":521,"./mn":522,"./mn.js":522,"./mr":523,"./mr.js":523,"./ms":524,"./ms-my":525,"./ms-my.js":525,"./ms.js":524,"./mt":526,"./mt.js":526,"./my":527,"./my.js":527,"./nb":528,"./nb.js":528,"./ne":529,"./ne.js":529,"./nl":530,"./nl-be":531,"./nl-be.js":531,"./nl.js":530,"./nn":532,"./nn.js":532,"./pa-in":533,"./pa-in.js":533,"./pl":534,"./pl.js":534,"./pt":535,"./pt-br":536,"./pt-br.js":536,"./pt.js":535,"./ro":537,"./ro.js":537,"./ru":538,"./ru.js":538,"./sd":539,"./sd.js":539,"./se":540,"./se.js":540,"./si":541,"./si.js":541,"./sk":542,"./sk.js":542,"./sl":543,"./sl.js":543,"./sq":544,"./sq.js":544,"./sr":545,"./sr-cyrl":546,"./sr-cyrl.js":546,"./sr.js":545,"./ss":547,"./ss.js":547,"./sv":548,"./sv.js":548,"./sw":549,"./sw.js":549,"./ta":550,"./ta.js":550,"./te":551,"./te.js":551,"./tet":552,"./tet.js":552,"./tg":553,"./tg.js":553,"./th":554,"./th.js":554,"./tl-ph":555,"./tl-ph.js":555,"./tlh":556,"./tlh.js":556,"./tr":557,"./tr.js":557,"./tzl":558,"./tzl.js":558,"./tzm":559,"./tzm-latn":560,"./tzm-latn.js":560,"./tzm.js":559,"./ug-cn":561,"./ug-cn.js":561,"./uk":562,"./uk.js":562,"./ur":563,"./ur.js":563,"./uz":564,"./uz-latn":565,"./uz-latn.js":565,"./uz.js":564,"./vi":566,"./vi.js":566,"./x-pseudo":567,"./x-pseudo.js":567,"./yo":568,"./yo.js":568,"./zh-cn":569,"./zh-cn.js":569,"./zh-hk":570,"./zh-hk.js":570,"./zh-tw":571,"./zh-tw.js":571};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=907},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(59),a=n(53);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e,n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(i=s(t).call(this,e,n))||"object"!==o(i)&&"function"!=typeof i?c(a):i,Object.defineProperties(c(r),{_imageId:{configurable:!0,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,u,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,f=[{key:"getIndexedValue",value:function(e,t,n){var a=n;if("string"===o(e)){var i=-1!==e.indexOf("\\");if(a=e,i){var s=e.split("\\");if(r.a.isValidIndex(t)){var c=s[t];a="string"!==o(c)?n:c}else a=s}}return a}}],(u=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"SOPInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSOPInstanceUID()}})}},{key:"getStudyInstanceUID",value:function(){return this.getTagValue("StudyInstanceUID",null)}},{key:"getSeriesInstanceUID",value:function(){return this.getTagValue("SeriesInstanceUID",null)}},{key:"getSOPInstanceUID",value:function(){return this.getTagValue("SOPInstanceUID",null)}},{key:"getStringValue",value:function(e,n,r){var a=this.getTagValue(e,r);return"string"!==o(a)&&"undefined"!==o(a)&&(a=a.toString()),t.getIndexedValue(a,n,r)}},{key:"getFloatValue",value:function(e,n,r){var a=this.getTagValue(e,r);return(a=t.getIndexedValue(a,n,r))instanceof Array?(a.forEach((function(e,t){a[t]=parseFloat(e)})),a):"string"===o(a)?parseFloat(a):a}},{key:"getIntValue",value:function(e,n,r){var a=this.getTagValue(e,r);return(a=t.getIndexedValue(a,n,r))instanceof Array?(a.forEach((function(e,t){a[t]=parseFloat(e)})),a):"string"===o(a)?parseInt(a):a}},{key:"getTagValue",value:function(e,t){throw new a.a("InstanceMetadata::getTagValue is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getSOPInstanceUID()===this.getSOPInstanceUID()}},{key:"tagExists",value:function(e){throw new a.a("InstanceMetadata::tagExists is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}},{key:"getImageId",value:function(e){throw new a.a("InstanceMetadata::getImageId is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}}])&&i(n.prototype,u),f&&i(n,f),t}(r.a)},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(59),a=n(91);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e,n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(i=s(t).call(this,e,n))||"object"!==o(i)&&"function"!=typeof i?c(a):i,Object.defineProperties(c(r),{_seriesInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_instances:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,u,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(u=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"seriesInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSeriesInstanceUID()}})}},{key:"getSeriesInstanceUID",value:function(){return this._seriesInstanceUID}},{key:"addInstance",value:function(e){var t=!1;return e instanceof a.a&&void 0===this.getInstanceByUID(e.getSOPInstanceUID())&&(this._instances.push(e),t=!0),t}},{key:"getFirstInstance",value:function(){var e=this._firstInstance;if(!(e instanceof a.a)){e=null;var t=this.getInstanceByIndex(0);t instanceof a.a&&(this._firstInstance=t,e=t)}return e}},{key:"getInstanceByIndex",value:function(e){var t;return r.a.isValidIndex(e)&&(t=this._instances[e]),t}},{key:"getInstanceByUID",value:function(e){var t;return r.a.isValidUID(e)&&(t=this._instances.find((function(t){return t.getSOPInstanceUID()===e}))),t}},{key:"getInstanceCount",value:function(){return this._instances.length}},{key:"forEachInstance",value:function(e){r.a.isValidCallback(e)&&this._instances.forEach((function(t,n){e.call(null,t,n)}))}},{key:"indexOfInstance",value:function(e){return this._instances.indexOf(e)}},{key:"findInstance",value:function(e){if(r.a.isValidCallback(e))return this._instances.find((function(t,n){return e.call(null,t,n)}))}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getSeriesInstanceUID()===this.getSeriesInstanceUID()}}])&&i(n.prototype,u),f&&i(n,f),t}(r.a)},935:function(e,t){}});
//# sourceMappingURL=app.bundle.f683ad891a6ae5003a23.js.map